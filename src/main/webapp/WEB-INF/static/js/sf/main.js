if(function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.4.4";var y=x.each=x.forEach=function(a,b,d){if(null!=a)if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g in a)if(x.has(a,g)&&b.call(d,a[g],g,a)===c)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b,c){return x.isEmpty(b)?c?null:[]:x[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},x.findWhere=function(a,b){return x.where(a,b,!0)},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-(1/0);var d={computed:-(1/0),value:-(1/0)};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d};var B=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=B(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index<b.index?-1:1}),"value")};var C=function(a,b,c,d){var e={},f=B(b||x.identity);return y(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)}),e};x.groupBy=function(a,b,c){return C(a,b,c,function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)})},x.countBy=function(a,b,c){return C(a,b,c,function(a,b){x.has(a,b)||(a[b]=0),a[b]++})},x.sortedIndex=function(a,b,c,d){c=null==c?x.identity:B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return y(a,function(a){x.isArray(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(i.apply(d,arguments))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=h.call(arguments),b=x.max(x.pluck(a,"length")),c=new Array(b),d=0;b>d;d++)c[d]=x.pluck(a,""+d);return c},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f},x.bind=function(a,b){if(a.bind===w&&w)return w.apply(a,h.call(arguments,1));var c=h.call(arguments,2);return function(){return a.apply(b,c.concat(h.call(arguments)))}},x.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,b.concat(h.call(arguments)))}},x.bindAll=function(a){var b=h.call(arguments,1);return 0===b.length&&(b=x.functions(a)),y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b){var c,d,e,f,g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)};return function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},x.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return function(){var c=[a];return g.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return 0>=a?b():function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&(b[b.length]=c);return b},x.values=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push(a[c]);return b},x.pairs=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push([c,a[c]]);return b},x.invert=function(a){var b={};for(var c in a)x.has(a,c)&&(b[a[c]]=c);return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)null==a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var E=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;c.push(a),d.push(b);var g=0,h=!0;if("[object Array]"==e){if(g=a.length,h=g==b.length)for(;g--&&(h=E(a[g],b[g],c,d)););}else{var i=a.constructor,k=b.constructor;if(i!==k&&!(x.isFunction(i)&&i instanceof i&&x.isFunction(k)&&k instanceof k))return!1;for(var l in a)if(x.has(a,l)&&(g++,!(h=x.has(b,l)&&E(a[l],b[l],c,d))))break;if(h){for(l in b)if(x.has(b,l)&&!g--)break;h=!g}}return c.pop(),d.pop(),h};x.isEqual=function(a,b){return E(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=Array(a),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};F.unescape=x.invert(F.escape);var G={escape:new RegExp("["+x.keys(F.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(F.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(G[a],function(b){return F[a][b]})}}),x.result=function(a,b){if(null==a)return null;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),L.call(this,c.apply(x,a))}})};var H=0;x.uniqueId=function(a){var b=++H+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||I).source,(c.interpolate||I).source,(c.evaluate||I).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(K,function(a){return"\\"+J[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var L=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],L.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return L.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(a){return function(){var b;return b||a._}}(this)),function(a,b){function c(a){var b=a.length,c=ia.type(a);return ia.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){var b=xa[a]={};return ia.each(a.match(ka)||[],function(a,c){b[c]=!0}),b}function e(a,c,d,e){if(ia.acceptData(a)){var f,g,h=ia.expando,i="string"==typeof c,j=a.nodeType,k=j?ia.cache:a,l=j?a[h]:a[h]&&h;if(l&&k[l]&&(e||k[l].data)||!i||d!==b)return l||(j?a[h]=l=_.pop()||ia.guid++:l=h),k[l]||(k[l]={},j||(k[l].toJSON=ia.noop)),("object"==typeof c||"function"==typeof c)&&(e?k[l]=ia.extend(k[l],c):k[l].data=ia.extend(k[l].data,c)),f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[ia.camelCase(c)]=d),i?(g=f[c],null==g&&(g=f[ia.camelCase(c)])):g=f,g}}function f(a,b,c){if(ia.acceptData(a)){var d,e,f,g=a.nodeType,i=g?ia.cache:a,j=g?a[ia.expando]:ia.expando;if(i[j]){if(b&&(f=c?i[j]:i[j].data)){ia.isArray(b)?b=b.concat(ia.map(b,ia.camelCase)):b in f?b=[b]:(b=ia.camelCase(b),b=b in f?[b]:b.split(" "));for(d=0,e=b.length;e>d;d++)delete f[b[d]];if(!(c?h:ia.isEmptyObject)(f))return}(c||(delete i[j].data,h(i[j])))&&(g?ia.cleanData([a],!0):ia.support.deleteExpando||i!=i.window?delete i[j]:i[j]=null)}}}function g(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(za,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:ya.test(d)?ia.parseJSON(d):d}catch(f){}ia.data(a,c,d)}else d=b}return d}function h(a){var b;for(b in a)if(("data"!==b||!ia.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function i(){return!0}function j(){return!1}function k(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function l(a,b,c){if(b=b||0,ia.isFunction(b))return ia.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return ia.grep(a,function(a){return a===b===c});if("string"==typeof b){var d=ia.grep(a,function(a){return 1===a.nodeType});if(Ra.test(b))return ia.filter(b,d,!c);b=ia.filter(b,d)}return ia.grep(a,function(a){return ia.inArray(a,b)>=0===c})}function m(a){var b=Ua.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function n(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function o(a){var b=a.getAttributeNode("type");return a.type=(b&&b.specified)+"/"+a.type,a}function p(a){var b=eb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function q(a,b){for(var c,d=0;null!=(c=a[d]);d++)ia._data(c,"globalEval",!b||ia._data(b[d],"globalEval"))}function r(a,b){if(1===b.nodeType&&ia.hasData(a)){var c,d,e,f=ia._data(a),g=ia._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)ia.event.add(b,c,h[c][d])}g.data&&(g.data=ia.extend({},g.data))}}function s(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!ia.support.noCloneEvent&&b[ia.expando]){e=ia._data(b);for(d in e.events)ia.removeEvent(b,d,e.handle);b.removeAttribute(ia.expando)}"script"===c&&b.text!==a.text?(o(b).text=a.text,p(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),ia.support.html5Clone&&a.innerHTML&&!ia.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&bb.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function t(a,c){var d,e,f=0,g=typeof a.getElementsByTagName!==V?a.getElementsByTagName(c||"*"):typeof a.querySelectorAll!==V?a.querySelectorAll(c||"*"):b;if(!g)for(g=[],d=a.childNodes||a;null!=(e=d[f]);f++)!c||ia.nodeName(e,c)?g.push(e):ia.merge(g,t(e,c));return c===b||c&&ia.nodeName(a,c)?ia.merge([a],g):g}function u(a){bb.test(a.type)&&(a.defaultChecked=a.checked)}function v(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=yb.length;e--;)if(b=yb[e]+c,b in a)return b;return d}function w(a,b){return a=b||a,"none"===ia.css(a,"display")||!ia.contains(a.ownerDocument,a)}function x(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=ia._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&w(d)&&(f[g]=ia._data(d,"olddisplay",B(d.nodeName)))):f[g]||(e=w(d),(c&&"none"!==c||!e)&&ia._data(d,"olddisplay",e?c:ia.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function y(a,b,c){var d=rb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function z(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=ia.css(a,c+xb[f],!0,e)),d?("content"===c&&(g-=ia.css(a,"padding"+xb[f],!0,e)),"margin"!==c&&(g-=ia.css(a,"border"+xb[f]+"Width",!0,e))):(g+=ia.css(a,"padding"+xb[f],!0,e),"padding"!==c&&(g+=ia.css(a,"border"+xb[f]+"Width",!0,e)));return g}function A(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=kb(a),g=ia.support.boxSizing&&"border-box"===ia.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=lb(a,b,f),(0>e||null==e)&&(e=a.style[b]),sb.test(e))return e;d=g&&(ia.support.boxSizingReliable||e===a.style[b]),e=parseFloat(e)||0}return e+z(a,b,c||(g?"border":"content"),d,f)+"px"}function B(a){var b=W,c=ub[a];return c||(c=C(a,b),"none"!==c&&c||(jb=(jb||ia("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(jb[0].contentWindow||jb[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=C(a,b),jb.detach()),ub[a]=c),c}function C(a,b){var c=ia(b.createElement(a)).appendTo(b.body),d=ia.css(c[0],"display");return c.remove(),d}function D(a,b,c,d){var e;if(ia.isArray(b))ia.each(b,function(b,e){c||Ab.test(a)?d(a,e):D(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==ia.type(b))d(a,b);else for(e in b)D(a+"["+e+"]",b[e],c,d)}function E(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(ka)||[];if(ia.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function F(a,b,c,d){function e(h){var i;return f[h]=!0,ia.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Rb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function G(a,c){var d,e,f=ia.ajaxSettings.flatOptions||{};for(e in c)c[e]!==b&&((f[e]?a:d||(d={}))[e]=c[e]);return d&&ia.extend(!0,a,d),a}function H(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(h in k)h in d&&(c[k[h]]=d[h]);for(;"*"===j[0];)j.shift(),f===b&&(f=a.mimeType||c.getResponseHeader("Content-Type"));if(f)for(h in i)if(i[h]&&i[h].test(f)){j.unshift(h);break}if(j[0]in d)g=j[0];else{for(h in d){if(!j[0]||a.converters[h+" "+j[0]]){g=h;break}e||(e=h)}g=g||e}return g?(g!==j[0]&&j.unshift(g),d[g]):void 0}function I(a,b){var c,d,e,f,g={},h=0,i=a.dataTypes.slice(),j=i[0];if(a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i[1])for(e in a.converters)g[e.toLowerCase()]=a.converters[e];for(;d=i[++h];)if("*"!==d){if("*"!==j&&j!==d){if(e=g[j+" "+d]||g["* "+d],!e)for(c in g)if(f=c.split(" "),f[1]===d&&(e=g[j+" "+f[0]]||g["* "+f[0]])){e===!0?e=g[c]:g[c]!==!0&&(d=f[0],i.splice(h--,0,d));break}if(e!==!0)if(e&&a["throws"])b=e(b);else try{b=e(b)}catch(k){return{state:"parsererror",error:e?k:"No conversion from "+j+" to "+d}}}j=d}return{state:"success",data:b}}function J(){try{return new a.XMLHttpRequest}catch(b){}}function K(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function L(){return setTimeout(function(){$b=b}),$b=ia.now()}function M(a,b){ia.each(b,function(b,c){for(var d=(ec[b]||[]).concat(ec["*"]),e=0,f=d.length;f>e;e++)if(d[e].call(a,b,c))return})}function N(a,b,c){var d,e,f=0,g=dc.length,h=ia.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$b||L(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ia.extend({},b),opts:ia.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$b||L(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ia.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(O(k,j.opts.specialEasing);g>f;f++)if(d=dc[f].call(j,a,k,j.opts))return d;return M(j,k),ia.isFunction(j.opts.start)&&j.opts.start.call(a,j),ia.fx.timer(ia.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function O(a,b){var c,d,e,f,g;for(e in a)if(d=ia.camelCase(e),f=b[d],c=a[e],ia.isArray(c)&&(f=c[1],c=a[e]=c[0]),e!==d&&(a[d]=c,delete a[e]),g=ia.cssHooks[d],g&&"expand"in g){c=g.expand(c),delete a[d];for(e in c)e in a||(a[e]=c[e],b[e]=f)}else b[d]=f}function P(a,b,c){var d,e,f,g,h,i,j,k,l,m=this,n=a.style,o={},p=[],q=a.nodeType&&w(a);c.queue||(k=ia._queueHooks(a,"fx"),null==k.unqueued&&(k.unqueued=0,l=k.empty.fire,k.empty.fire=function(){k.unqueued||l()}),k.unqueued++,m.always(function(){m.always(function(){k.unqueued--,ia.queue(a,"fx").length||k.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],"inline"===ia.css(a,"display")&&"none"===ia.css(a,"float")&&(ia.support.inlineBlockNeedsLayout&&"inline"!==B(a.nodeName)?n.zoom=1:n.display="inline-block")),c.overflow&&(n.overflow="hidden",ia.support.shrinkWrapBlocks||m.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(e in b)if(g=b[e],ac.exec(g)){if(delete b[e],i=i||"toggle"===g,g===(q?"hide":"show"))continue;p.push(e)}if(f=p.length){h=ia._data(a,"fxshow")||ia._data(a,"fxshow",{}),"hidden"in h&&(q=h.hidden),i&&(h.hidden=!q),q?ia(a).show():m.done(function(){ia(a).hide()}),m.done(function(){var b;ia._removeData(a,"fxshow");for(b in o)ia.style(a,b,o[b])});for(e=0;f>e;e++)d=p[e],j=m.createTween(d,q?h[d]:0),o[d]=h[d]||ia.style(a,d),d in h||(h[d]=j.start,q&&(j.end=j.start,j.start="width"===d||"height"===d?1:0))}}function Q(a,b,c,d,e){return new Q.prototype.init(a,b,c,d,e)}function R(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=xb[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function S(a){return ia.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var T,U,V=typeof b,W=a.document,X=a.location,Y=a.jQuery,Z=a.$,$={},_=[],aa="1.9.1",ba=_.concat,ca=_.push,da=_.slice,ea=_.indexOf,fa=$.toString,ga=$.hasOwnProperty,ha=aa.trim,ia=function(a,b){return new ia.fn.init(a,b,U)},ja=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ka=/\S+/g,la=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ma=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,na=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,oa=/^[\],:{}\s]*$/,pa=/(?:^|:|,)(?:\s*\[)+/g,qa=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ra=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,sa=/^-ms-/,ta=/-([\da-z])/gi,ua=function(a,b){return b.toUpperCase()},va=function(a){(W.addEventListener||"load"===a.type||"complete"===W.readyState)&&(wa(),ia.ready())},wa=function(){W.addEventListener?(W.removeEventListener("DOMContentLoaded",va,!1),a.removeEventListener("load",va,!1)):(W.detachEvent("onreadystatechange",va),a.detachEvent("onload",va))};ia.fn=ia.prototype={jquery:aa,constructor:ia,init:function(a,c,d){var e,f;if(!a)return this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:ma.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1]){if(c=c instanceof ia?c[0]:c,ia.merge(this,ia.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:W,!0)),na.test(e[1])&&ia.isPlainObject(c))for(e in c)ia.isFunction(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}if(f=W.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=W,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):ia.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),ia.makeArray(a,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return da.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){var b=ia.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return ia.each(this,a,b)},ready:function(a){return ia.ready.promise().done(a),this},slice:function(){return this.pushStack(da.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},map:function(a){return this.pushStack(ia.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:ca,sort:[].sort,splice:[].splice},ia.fn.init.prototype=ia.fn,ia.extend=ia.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||ia.isFunction(h)||(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(ia.isPlainObject(d)||(c=ia.isArray(d)))?(c?(c=!1,g=a&&ia.isArray(a)?a:[]):g=a&&ia.isPlainObject(a)?a:{},h[e]=ia.extend(k,g,d)):d!==b&&(h[e]=d));return h},ia.extend({noConflict:function(b){return a.$===ia&&(a.$=Z),b&&a.jQuery===ia&&(a.jQuery=Y),ia},isReady:!1,readyWait:1,holdReady:function(a){a?ia.readyWait++:ia.ready(!0)},ready:function(a){if(a===!0?!--ia.readyWait:!ia.isReady){if(!W.body)return setTimeout(ia.ready);ia.isReady=!0,a!==!0&&--ia.readyWait>0||(T.resolveWith(W,[ia]),ia.fn.trigger&&ia(W).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===ia.type(a)},isArray:Array.isArray||function(a){return"array"===ia.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):"object"==typeof a||"function"==typeof a?$[fa.call(a)]||"object":typeof a},isPlainObject:function(a){if(!a||"object"!==ia.type(a)||a.nodeType||ia.isWindow(a))return!1;try{if(a.constructor&&!ga.call(a,"constructor")&&!ga.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||ga.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||W;var d=na.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=ia.buildFragment([a],b,e),e&&ia(e).remove(),ia.merge([],d.childNodes))},parseJSON:function(b){return a.JSON&&a.JSON.parse?a.JSON.parse(b):null===b?b:"string"==typeof b&&(b=ia.trim(b),b&&oa.test(b.replace(qa,"@").replace(ra,"]").replace(pa,"")))?new Function("return "+b)():void ia.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||ia.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&ia.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(sa,"ms-").replace(ta,ua)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:ha&&!ha.call("\ufeff ")?function(a){return null==a?"":ha.call(a)}:function(a){return null==a?"":(a+"").replace(la,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?ia.merge(d,"string"==typeof a?[a]:a):ca.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if(ea)return ea.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&(i[i.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(i[i.length]=e);return ba.apply([],i)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(f=a[c],c=a,a=f),ia.isFunction(a)?(d=da.call(arguments,2),e=function(){return a.apply(c||this,d.concat(da.call(arguments)))},e.guid=a.guid=a.guid||ia.guid++,e):b},access:function(a,c,d,e,f,g,h){var i=0,j=a.length,k=null==d;if("object"===ia.type(d)){f=!0;for(i in d)ia.access(a,c,i,d[i],!0,g,h)}else if(e!==b&&(f=!0,ia.isFunction(e)||(h=!0),k&&(h?(c.call(a,e),c=null):(k=c,c=function(a,b,c){return k.call(ia(a),c)})),c))for(;j>i;i++)c(a[i],d,h?e:e.call(a[i],i,c(a[i],d)));return f?a:k?c.call(a):j?c(a[0],d):g},now:function(){return(new Date).getTime()}}),ia.ready.promise=function(b){if(!T)if(T=ia.Deferred(),"complete"===W.readyState)setTimeout(ia.ready);else if(W.addEventListener)W.addEventListener("DOMContentLoaded",va,!1),a.addEventListener("load",va,!1);else{W.attachEvent("onreadystatechange",va),a.attachEvent("onload",va);var c=!1;try{c=null==a.frameElement&&W.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!ia.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}wa(),ia.ready()}}()}return T.promise(b)},ia.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){$["[object "+b+"]"]=b.toLowerCase()}),U=ia(W);var xa={};ia.Callbacks=function(a){a="string"==typeof a?xa[a]||d(a):ia.extend({},a);var c,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(e=a.memory&&b,f=!0,h=i||0,i=0,g=j.length,c=!0;j&&g>h;h++)if(j[h].apply(b[0],b[1])===!1&&a.stopOnFalse){e=!1;break}c=!1,j&&(k?k.length&&l(k.shift()):e?j=[]:m.disable());
},m={add:function(){if(j){var b=j.length;!function d(b){ia.each(b,function(b,c){var e=ia.type(c);"function"===e?a.unique&&m.has(c)||j.push(c):c&&c.length&&"string"!==e&&d(c)})}(arguments),c?g=j.length:e&&(i=b,l(e))}return this},remove:function(){return j&&ia.each(arguments,function(a,b){for(var d;(d=ia.inArray(b,j,d))>-1;)j.splice(d,1),c&&(g>=d&&g--,h>=d&&h--)}),this},has:function(a){return a?ia.inArray(a,j)>-1:!(!j||!j.length)},empty:function(){return j=[],this},disable:function(){return j=k=e=b,this},disabled:function(){return!j},lock:function(){return k=b,e||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],!j||f&&!k||(c?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!f}};return m},ia.extend({Deferred:function(a){var b=[["resolve","done",ia.Callbacks("once memory"),"resolved"],["reject","fail",ia.Callbacks("once memory"),"rejected"],["notify","progress",ia.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return ia.Deferred(function(c){ia.each(b,function(b,f){var g=f[0],h=ia.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&ia.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?ia.extend(a,d):d}},e={};return d.pipe=d.then,ia.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=da.call(arguments),g=f.length,h=1!==g||a&&ia.isFunction(a.promise)?g:0,i=1===h?a:ia.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?da.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&ia.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),ia.support=function(){var b,c,d,e,f,g,h,i,j,k,l=W.createElement("div");if(l.setAttribute("className","t"),l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=l.getElementsByTagName("*"),d=l.getElementsByTagName("a")[0],!c||!d||!c.length)return{};f=W.createElement("select"),h=f.appendChild(W.createElement("option")),e=l.getElementsByTagName("input")[0],d.style.cssText="top:1px;float:left;opacity:.5",b={getSetAttribute:"t"!==l.className,leadingWhitespace:3===l.firstChild.nodeType,tbody:!l.getElementsByTagName("tbody").length,htmlSerialize:!!l.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:!!e.value,optSelected:h.selected,enctype:!!W.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==W.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===W.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},e.checked=!0,b.noCloneChecked=e.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!h.disabled;try{delete l.test}catch(m){b.deleteExpando=!1}e=W.createElement("input"),e.setAttribute("value",""),b.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),b.radioValue="t"===e.value,e.setAttribute("checked","t"),e.setAttribute("name","t"),g=W.createDocumentFragment(),g.appendChild(e),b.appendChecked=e.checked,b.checkClone=g.cloneNode(!0).cloneNode(!0).lastChild.checked,l.attachEvent&&(l.attachEvent("onclick",function(){b.noCloneEvent=!1}),l.cloneNode(!0).click());for(k in{submit:!0,change:!0,focusin:!0})l.setAttribute(i="on"+k,"t"),b[k+"Bubbles"]=i in a||l.attributes[i].expando===!1;return l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle="content-box"===l.style.backgroundClip,ia(function(){var c,d,e,f="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",g=W.getElementsByTagName("body")[0];g&&(c=W.createElement("div"),c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",g.appendChild(c).appendChild(l),l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=l.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",j=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=j&&0===e[0].offsetHeight,l.innerHTML="",l.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=4===l.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==g.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(l,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(l,null)||{width:"4px"}).width,d=l.appendChild(W.createElement("div")),d.style.cssText=l.style.cssText=f,d.style.marginRight=d.style.width="0",l.style.width="1px",b.reliableMarginRight=!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)),typeof l.style.zoom!==V&&(l.innerHTML="",l.style.cssText=f+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===l.offsetWidth,l.style.display="block",l.innerHTML="<div></div>",l.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==l.offsetWidth,b.inlineBlockNeedsLayout&&(g.style.zoom=1)),g.removeChild(c),c=l=e=d=null)}),c=f=g=h=d=e=null,b}();var ya=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,za=/([A-Z])/g;ia.extend({cache:{},expando:"jQuery"+(aa+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?ia.cache[a[ia.expando]]:a[ia.expando],!!a&&!h(a)},data:function(a,b,c){return e(a,b,c)},removeData:function(a,b){return f(a,b)},_data:function(a,b,c){return e(a,b,c,!0)},_removeData:function(a,b){return f(a,b,!0)},acceptData:function(a){if(a.nodeType&&1!==a.nodeType&&9!==a.nodeType)return!1;var b=a.nodeName&&ia.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),ia.fn.extend({data:function(a,c){var d,e,f=this[0],h=0,i=null;if(a===b){if(this.length&&(i=ia.data(f),1===f.nodeType&&!ia._data(f,"parsedAttrs"))){for(d=f.attributes;h<d.length;h++)e=d[h].name,e.indexOf("data-")||(e=ia.camelCase(e.slice(5)),g(f,e,i[e]));ia._data(f,"parsedAttrs",!0)}return i}return"object"==typeof a?this.each(function(){ia.data(this,a)}):ia.access(this,function(c){return c===b?f?g(f,a,ia.data(f,a)):null:void this.each(function(){ia.data(this,a,c)})},null,c,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){ia.removeData(this,a)})}}),ia.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=ia._data(a,b),c&&(!d||ia.isArray(c)?d=ia._data(a,b,ia.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=ia.queue(a,b),d=c.length,e=c.shift(),f=ia._queueHooks(a,b),g=function(){ia.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),f.cur=e,e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ia._data(a,c)||ia._data(a,c,{empty:ia.Callbacks("once memory").add(function(){ia._removeData(a,b+"queue"),ia._removeData(a,c)})})}}),ia.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?ia.queue(this[0],a):c===b?this:this.each(function(){var b=ia.queue(this,a,c);ia._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&ia.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ia.dequeue(this,a)})},delay:function(a,b){return a=ia.fx?ia.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=ia.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=ia._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var Aa,Ba,Ca=/[\t\r\n]/g,Da=/\r/g,Ea=/^(?:input|select|textarea|button|object)$/i,Fa=/^(?:a|area)$/i,Ga=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Ha=/^(?:checked|selected)$/i,Ia=ia.support.getSetAttribute,Ja=ia.support.input;ia.fn.extend({attr:function(a,b){return ia.access(this,ia.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ia.removeAttr(this,a)})},prop:function(a,b){return ia.access(this,ia.prop,a,b,arguments.length>1)},removeProp:function(a){return a=ia.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length,i="string"==typeof a&&a;if(ia.isFunction(a))return this.each(function(b){ia(this).addClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ka)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ca," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");c.className=ia.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=0===arguments.length||"string"==typeof a&&a;if(ia.isFunction(a))return this.each(function(b){ia(this).removeClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ka)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ca," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");c.className=a?ia.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return ia.isFunction(a)?this.each(function(c){ia(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,f=0,g=ia(this),h=b,i=a.match(ka)||[];e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else(c===V||"boolean"===c)&&(this.className&&ia._data(this,"__className__",this.className),this.className=this.className||a===!1?"":ia._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Ca," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=ia.isFunction(a),this.each(function(c){var f,g=ia(this);1===this.nodeType&&(f=e?a.call(this,c,g.val()):a,null==f?f="":"number"==typeof f?f+="":ia.isArray(f)&&(f=ia.map(f,function(a){return null==a?"":a+""})),d=ia.valHooks[this.type]||ia.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,f,"value")!==b||(this.value=f))});if(f)return d=ia.valHooks[f.type]||ia.valHooks[f.nodeName.toLowerCase()],d&&"get"in d&&(c=d.get(f,"value"))!==b?c:(c=f.value,"string"==typeof c?c.replace(Da,""):null==c?"":c)}}}),ia.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(ia.support.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!ia.nodeName(c.parentNode,"optgroup"))){if(b=ia(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c=ia.makeArray(b);return ia(a).find("option").each(function(){this.selected=ia.inArray(ia(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attr:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return typeof a.getAttribute===V?ia.prop(a,c,d):(f=1!==h||!ia.isXMLDoc(a),f&&(c=c.toLowerCase(),e=ia.attrHooks[c]||(Ga.test(c)?Ba:Aa)),d===b?e&&f&&"get"in e&&null!==(g=e.get(a,c))?g:(typeof a.getAttribute!==V&&(g=a.getAttribute(c)),null==g?b:g):null!==d?e&&f&&"set"in e&&(g=e.set(a,d,c))!==b?g:(a.setAttribute(c,d+""),d):void ia.removeAttr(a,c))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(ka);if(f&&1===a.nodeType)for(;c=f[e++];)d=ia.propFix[c]||c,Ga.test(c)?!Ia&&Ha.test(c)?a[ia.camelCase("default-"+c)]=a[d]=!1:a[d]=!1:ia.attr(a,c,""),a.removeAttribute(Ia?c:d)},attrHooks:{type:{set:function(a,b){if(!ia.support.radioValue&&"radio"===b&&ia.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!ia.isXMLDoc(a),g&&(c=ia.propFix[c]||c,f=ia.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):Ea.test(a.nodeName)||Fa.test(a.nodeName)&&a.href?0:b}}}}),Ba={get:function(a,c){var d=ia.prop(a,c),e="boolean"==typeof d&&a.getAttribute(c),f="boolean"==typeof d?Ja&&Ia?null!=e:Ha.test(c)?a[ia.camelCase("default-"+c)]:!!e:a.getAttributeNode(c);return f&&f.value!==!1?c.toLowerCase():b},set:function(a,b,c){return b===!1?ia.removeAttr(a,c):Ja&&Ia||!Ha.test(c)?a.setAttribute(!Ia&&ia.propFix[c]||c,c):a[ia.camelCase("default-"+c)]=a[c]=!0,c}},Ja&&Ia||(ia.attrHooks.value={get:function(a,c){var d=a.getAttributeNode(c);return ia.nodeName(a,"input")?a.defaultValue:d&&d.specified?d.value:b},set:function(a,b,c){return ia.nodeName(a,"input")?void(a.defaultValue=b):Aa&&Aa.set(a,b,c)}}),Ia||(Aa=ia.valHooks.button={get:function(a,c){var d=a.getAttributeNode(c);return d&&("id"===c||"name"===c||"coords"===c?""!==d.value:d.specified)?d.value:b},set:function(a,c,d){var e=a.getAttributeNode(d);return e||a.setAttributeNode(e=a.ownerDocument.createAttribute(d)),e.value=c+="","value"===d||c===a.getAttribute(d)?c:b}},ia.attrHooks.contenteditable={get:Aa.get,set:function(a,b,c){Aa.set(a,""===b?!1:b,c)}},ia.each(["width","height"],function(a,b){ia.attrHooks[b]=ia.extend(ia.attrHooks[b],{set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}})})),ia.support.hrefNormalized||(ia.each(["href","src","width","height"],function(a,c){ia.attrHooks[c]=ia.extend(ia.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null==d?b:d}})}),ia.each(["href","src"],function(a,b){ia.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}})),ia.support.style||(ia.attrHooks.style={get:function(a){return a.style.cssText||b},set:function(a,b){return a.style.cssText=b+""}}),ia.support.optSelected||(ia.propHooks.selected=ia.extend(ia.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),ia.support.enctype||(ia.propFix.enctype="encoding"),ia.support.checkOn||ia.each(["radio","checkbox"],function(){ia.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),ia.each(["radio","checkbox"],function(){ia.valHooks[this]=ia.extend(ia.valHooks[this],{set:function(a,b){return ia.isArray(b)?a.checked=ia.inArray(ia(a).val(),b)>=0:void 0}})});var Ka=/^(?:input|select|textarea)$/i,La=/^key/,Ma=/^(?:mouse|contextmenu)|click/,Na=/^(?:focusinfocus|focusoutblur)$/,Oa=/^([^.]*)(?:\.(.+)|)$/;ia.event={global:{},add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=ia._data(a);if(r){for(d.handler&&(j=d,d=j.handler,f=j.selector),d.guid||(d.guid=ia.guid++),(h=r.events)||(h=r.events={}),(l=r.handle)||(l=r.handle=function(a){return typeof ia===V||a&&ia.event.triggered===a.type?b:ia.event.dispatch.apply(l.elem,arguments)},l.elem=a),c=(c||"").match(ka)||[""],i=c.length;i--;)g=Oa.exec(c[i])||[],o=q=g[1],p=(g[2]||"").split(".").sort(),k=ia.event.special[o]||{},o=(f?k.delegateType:k.bindType)||o,k=ia.event.special[o]||{},m=ia.extend({type:o,origType:q,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&ia.expr.match.needsContext.test(f),namespace:p.join(".")},j),(n=h[o])||(n=h[o]=[],n.delegateCount=0,k.setup&&k.setup.call(a,e,p,l)!==!1||(a.addEventListener?a.addEventListener(o,l,!1):a.attachEvent&&a.attachEvent("on"+o,l))),k.add&&(k.add.call(a,m),m.handler.guid||(m.handler.guid=d.guid)),f?n.splice(n.delegateCount++,0,m):n.push(m),ia.event.global[o]=!0;a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ia.hasData(a)&&ia._data(a);if(q&&(k=q.events)){for(b=(b||"").match(ka)||[""],j=b.length;j--;)if(h=Oa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ia.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ia.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)ia.event.remove(a,n+b[j],c,d,!0);ia.isEmptyObject(k)&&(delete q.handle,ia._removeData(a,"events"))}},trigger:function(c,d,e,f){var g,h,i,j,k,l,m,n=[e||W],o=ga.call(c,"type")?c.type:c,p=ga.call(c,"namespace")?c.namespace.split("."):[];if(i=l=e=e||W,3!==e.nodeType&&8!==e.nodeType&&!Na.test(o+ia.event.triggered)&&(o.indexOf(".")>=0&&(p=o.split("."),o=p.shift(),p.sort()),h=o.indexOf(":")<0&&"on"+o,c=c[ia.expando]?c:new ia.Event(o,"object"==typeof c&&c),c.isTrigger=!0,c.namespace=p.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=b,c.target||(c.target=e),d=null==d?[c]:ia.makeArray(d,[c]),k=ia.event.special[o]||{},f||!k.trigger||k.trigger.apply(e,d)!==!1)){if(!f&&!k.noBubble&&!ia.isWindow(e)){for(j=k.delegateType||o,Na.test(j+o)||(i=i.parentNode);i;i=i.parentNode)n.push(i),l=i;l===(e.ownerDocument||W)&&n.push(l.defaultView||l.parentWindow||a)}for(m=0;(i=n[m++])&&!c.isPropagationStopped();)c.type=m>1?j:k.bindType||o,g=(ia._data(i,"events")||{})[c.type]&&ia._data(i,"handle"),g&&g.apply(i,d),g=h&&i[h],g&&ia.acceptData(i)&&g.apply&&g.apply(i,d)===!1&&c.preventDefault();if(c.type=o,!f&&!c.isDefaultPrevented()&&(!k._default||k._default.apply(e.ownerDocument,d)===!1)&&("click"!==o||!ia.nodeName(e,"a"))&&ia.acceptData(e)&&h&&e[o]&&!ia.isWindow(e)){l=e[h],l&&(e[h]=null),ia.event.triggered=o;try{e[o]()}catch(q){}ia.event.triggered=b,l&&(e[h]=l)}return c.result}},dispatch:function(a){a=ia.event.fix(a);var c,d,e,f,g,h=[],i=da.call(arguments),j=(ia._data(this,"events")||{})[a.type]||[],k=ia.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=ia.event.handlers.call(this,a,j),c=0;(f=h[c++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,g=0;(e=f.handlers[g++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,d=((ia.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),d!==b&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,c){var d,e,f,g,h=[],i=c.delegateCount,j=a.target;if(i&&j.nodeType&&(!a.button||"click"!==a.type))for(;j!=this;j=j.parentNode||this)if(1===j.nodeType&&(j.disabled!==!0||"click"!==a.type)){for(f=[],g=0;i>g;g++)e=c[g],d=e.selector+" ",f[d]===b&&(f[d]=e.needsContext?ia(d,this).index(j)>=0:ia.find(d,this,null,[j]).length),f[d]&&f.push(e);f.length&&h.push({elem:j,handlers:f})}return i<c.length&&h.push({elem:this,handlers:c.slice(i)}),h},fix:function(a){if(a[ia.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Ma.test(e)?this.mouseHooks:La.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new ia.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||W),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(e=a.target.ownerDocument||W,f=e.documentElement,d=e.body,a.pageX=c.clientX+(f&&f.scrollLeft||d&&d.scrollLeft||0)-(f&&f.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||d&&d.scrollTop||0)-(f&&f.clientTop||d&&d.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},click:{trigger:function(){return ia.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0}},focus:{trigger:function(){if(this!==W.activeElement&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===W.activeElement&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},beforeunload:{postDispatch:function(a){a.result!==b&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=ia.extend(new ia.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?ia.event.trigger(e,null,b):ia.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},ia.removeEvent=W.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===V&&(a[d]=null),a.detachEvent(d,c))},ia.Event=function(a,b){return this instanceof ia.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?i:j):this.type=a,b&&ia.extend(this,b),this.timeStamp=a&&a.timeStamp||ia.now(),void(this[ia.expando]=!0)):new ia.Event(a,b)},ia.Event.prototype={isDefaultPrevented:j,isPropagationStopped:j,isImmediatePropagationStopped:j,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=i,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=i,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()}},ia.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){ia.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!ia.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),ia.support.submitBubbles||(ia.event.special.submit={setup:function(){return ia.nodeName(this,"form")?!1:void ia.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=ia.nodeName(c,"input")||ia.nodeName(c,"button")?c.form:b;d&&!ia._data(d,"submitBubbles")&&(ia.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),ia._data(d,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&ia.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return ia.nodeName(this,"form")?!1:void ia.event.remove(this,"._submit")}}),ia.support.changeBubbles||(ia.event.special.change={setup:function(){return Ka.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ia.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),ia.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),ia.event.simulate("change",this,a,!0)})),!1):void ia.event.add(this,"beforeactivate._change",function(a){var b=a.target;Ka.test(b.nodeName)&&!ia._data(b,"changeBubbles")&&(ia.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||ia.event.simulate("change",this.parentNode,a,!0)}),ia._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ia.event.remove(this,"._change"),!Ka.test(this.nodeName)}}),ia.support.focusinBubbles||ia.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){ia.event.simulate(b,a.target,ia.event.fix(a),!0)};ia.event.special[b]={setup:function(){0===c++&&W.addEventListener(a,d,!0)},teardown:function(){0===--c&&W.removeEventListener(a,d,!0)}}}),ia.fn.extend({on:function(a,c,d,e,f){var g,h;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(g in a)this.on(g,c,d,a[g],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=j;else if(!e)return this;return 1===f&&(h=e,e=function(a){return ia().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=ia.guid++)),this.each(function(){ia.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,ia(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(f in a)this.off(f,c,a[f]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=j),this.each(function(){ia.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){ia.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?ia.event.trigger(a,b,c,!0):void 0}}),function(a,b){function c(a){return oa.test(a+"")}function d(){var a,b=[];return a=function(c,d){return b.push(c+=" ")>y.cacheLength&&delete a[b.shift()],a[c]=d}}function e(a){return a[N]=!0,a}function f(a){var b=F.createElement("div");try{return a(b)}catch(c){return!1}finally{b=null}}function g(a,b,c,d){var e,f,g,h,i,j,k,n,o,p;if((b?b.ownerDocument||b:O)!==F&&E(b),b=b||F,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(!H&&!d){if(e=pa.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&L(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return Z.apply(c,$.call(b.getElementsByTagName(a),0)),c;if((g=e[3])&&P.getByClassName&&b.getElementsByClassName)return Z.apply(c,$.call(b.getElementsByClassName(g),0)),c}if(P.qsa&&!I.test(a)){if(k=!0,n=N,o=b,p=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=l(a),(k=b.getAttribute("id"))?n=k.replace(sa,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=na.test(a)&&b.parentNode||b,p=j.join(",")}if(p)try{return Z.apply(c,$.call(o.querySelectorAll(p),0)),c}catch(q){}finally{k||b.removeAttribute("id")}}}return u(a.replace(ga,"$1"),b,c,d)}function h(a,b){var c=b&&a,d=c&&(~b.sourceIndex||W)-(~a.sourceIndex||W);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function i(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function j(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function k(a){return e(function(b){return b=+b,e(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(a,b){var c,d,e,f,h,i,j,k=T[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=y.preFilter;h;){(!c||(d=ha.exec(h)))&&(d&&(h=h.slice(d[0].length)||h),i.push(e=[])),c=!1,(d=ja.exec(h))&&(c=d.shift(),e.push({value:c,type:d[0].replace(ga," ")}),h=h.slice(c.length));for(f in y.filter)!(d=ma[f].exec(h))||j[f]&&!(d=j[f](d))||(c=d.shift(),e.push({value:c,type:f,matches:d}),h=h.slice(c.length));if(!c)break}return b?h.length:h?g.error(a):T(a,i).slice(0)}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=R++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=Q+" "+f;if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(j=b[N]||(b[N]={}),(i=j[d])&&i[0]===k){if((h=i[1])===!0||h===x)return h===!0}else if(i=j[d]=[k],i[1]=a(b,c,g)||x,i[1]===!0)return!0}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function q(a,b,c,d,f,g){return d&&!d[N]&&(d=q(d)),f&&!f[N]&&(f=q(f,g)),e(function(e,g,h,i){var j,k,l,m=[],n=[],o=g.length,q=e||t(b||"*",h.nodeType?[h]:h,[]),r=!a||!e&&b?q:p(q,m,a,h,i),s=c?f||(e?a:o||d)?[]:g:r;if(c&&c(r,s,h,i),d)for(j=p(s,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(s[n[k]]=!(r[n[k]]=l));if(e){if(f||a){if(f){for(j=[],k=s.length;k--;)(l=s[k])&&j.push(r[k]=l);f(null,s=[],j,i)}for(k=s.length;k--;)(l=s[k])&&(j=f?_.call(e,l):m[k])>-1&&(e[j]=!(g[j]=l))}}else s=p(s===g?s.splice(o,s.length):s),f?f(null,g,s,i):Z.apply(g,s)})}function r(a){for(var b,c,d,e=a.length,f=y.relative[a[0].type],g=f||y.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return _.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=y.relative[a[h].type])k=[n(o(k),c)];else{if(c=y.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!y.relative[a[d].type];d++);return q(h>1&&o(k),h>1&&m(a.slice(0,h-1)).replace(ga,"$1"),c,d>h&&r(a.slice(h,d)),e>d&&r(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function s(a,b){var c=0,d=b.length>0,f=a.length>0,h=function(e,h,i,j,k){var l,m,n,o=[],q=0,r="0",s=e&&[],t=null!=k,u=D,v=e||f&&y.find.TAG("*",k&&h.parentNode||h),w=Q+=null==u?1:Math.random()||.1;for(t&&(D=h!==F&&h,x=c);null!=(l=v[r]);r++){if(f&&l){for(m=0;n=a[m++];)if(n(l,h,i)){j.push(l);break}t&&(Q=w,x=++c)}d&&((l=!n&&l)&&q--,e&&s.push(l))}if(q+=r,d&&r!==q){for(m=0;n=b[m++];)n(s,o,h,i);if(e){if(q>0)for(;r--;)s[r]||o[r]||(o[r]=Y.call(j));o=p(o)}Z.apply(j,o),t&&!e&&o.length>0&&q+b.length>1&&g.uniqueSort(j)}return t&&(Q=w,D=u),s};return d?e(h):h}function t(a,b,c){for(var d=0,e=b.length;e>d;d++)g(a,b[d],c);return c}function u(a,b,c,d){var e,f,g,h,i,j=l(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&9===b.nodeType&&!H&&y.relative[f[1].type]){if(b=y.find.ID(g.matches[0].replace(ua,va),b)[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=ma.needsContext.test(a)?0:f.length;e--&&(g=f[e],!y.relative[h=g.type]);)if((i=y.find[h])&&(d=i(g.matches[0].replace(ua,va),na.test(f[0].type)&&b.parentNode||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return Z.apply(c,$.call(d,0)),c;break}}return B(a,j)(d,b,H,c,na.test(a)),c}function v(){}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P={},Q=0,R=0,S=d(),T=d(),U=d(),V=typeof b,W=1<<31,X=[],Y=X.pop,Z=X.push,$=X.slice,_=X.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},aa="[\\x20\\t\\r\\n\\f]",ba="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ca=ba.replace("w","w#"),da="([*^$|!~]?=)",ea="\\["+aa+"*("+ba+")"+aa+"*(?:"+da+aa+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ca+")|)|)"+aa+"*\\]",fa=":("+ba+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ea.replace(3,8)+")*)|.*)\\)|)",ga=new RegExp("^"+aa+"+|((?:^|[^\\\\])(?:\\\\.)*)"+aa+"+$","g"),ha=new RegExp("^"+aa+"*,"+aa+"*"),ja=new RegExp("^"+aa+"*([\\x20\\t\\r\\n\\f>+~])"+aa+"*"),ka=new RegExp(fa),la=new RegExp("^"+ca+"$"),ma={
ID:new RegExp("^#("+ba+")"),CLASS:new RegExp("^\\.("+ba+")"),NAME:new RegExp("^\\[name=['\"]?("+ba+")['\"]?\\]"),TAG:new RegExp("^("+ba.replace("w","w*")+")"),ATTR:new RegExp("^"+ea),PSEUDO:new RegExp("^"+fa),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+aa+"*(even|odd|(([+-]|)(\\d*)n|)"+aa+"*(?:([+-]|)"+aa+"*(\\d+)|))"+aa+"*\\)|)","i"),needsContext:new RegExp("^"+aa+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+aa+"*((?:-\\d)?\\d*)"+aa+"*\\)|)(?=[^-]|$)","i")},na=/[\x20\t\r\n\f]*[+~]/,oa=/^[^{]+\{\s*\[native code/,pa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,qa=/^(?:input|select|textarea|button)$/i,ra=/^h\d$/i,sa=/'|\\/g,ta=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,ua=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,va=function(a,b){var c="0x"+b-65536;return c!==c?b:0>c?String.fromCharCode(c+65536):String.fromCharCode(c>>10|55296,1023&c|56320)};try{$.call(O.documentElement.childNodes,0)[0].nodeType}catch(wa){$=function(a){for(var b,c=[];b=this[a++];)c.push(b);return c}}A=g.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},E=g.setDocument=function(a){var d=a?a.ownerDocument||a:O;return d!==F&&9===d.nodeType&&d.documentElement?(F=d,G=d.documentElement,H=A(d),P.tagNameNoComments=f(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),P.attributes=f(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return"boolean"!==b&&"string"!==b}),P.getByClassName=f(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",a.getElementsByClassName&&a.getElementsByClassName("e").length?(a.lastChild.className="e",2===a.getElementsByClassName("e").length):!1}),P.getByName=f(function(a){a.id=N+0,a.innerHTML="<a name='"+N+"'></a><div name='"+N+"'></div>",G.insertBefore(a,G.firstChild);var b=d.getElementsByName&&d.getElementsByName(N).length===2+d.getElementsByName(N+0).length;return P.getIdNotName=!d.getElementById(N),G.removeChild(a),b}),y.attrHandle=f(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==V&&"#"===a.firstChild.getAttribute("href")})?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},P.getIdNotName?(y.find.ID=function(a,b){if(typeof b.getElementById!==V&&!H){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},y.filter.ID=function(a){var b=a.replace(ua,va);return function(a){return a.getAttribute("id")===b}}):(y.find.ID=function(a,c){if(typeof c.getElementById!==V&&!H){var d=c.getElementById(a);return d?d.id===a||typeof d.getAttributeNode!==V&&d.getAttributeNode("id").value===a?[d]:b:[]}},y.filter.ID=function(a){var b=a.replace(ua,va);return function(a){var c=typeof a.getAttributeNode!==V&&a.getAttributeNode("id");return c&&c.value===b}}),y.find.TAG=P.tagNameNoComments?function(a,b){return typeof b.getElementsByTagName!==V?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},y.find.NAME=P.getByName&&function(a,b){return typeof b.getElementsByName!==V?b.getElementsByName(name):void 0},y.find.CLASS=P.getByClassName&&function(a,b){return typeof b.getElementsByClassName===V||H?void 0:b.getElementsByClassName(a)},J=[],I=[":focus"],(P.qsa=c(d.querySelectorAll))&&(f(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||I.push("\\["+aa+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||I.push(":checked")}),f(function(a){a.innerHTML="<input type='hidden' i=''/>",a.querySelectorAll("[i^='']").length&&I.push("[*^$]="+aa+"*(?:\"\"|'')"),a.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),I.push(",.*:")})),(P.matchesSelector=c(K=G.matchesSelector||G.mozMatchesSelector||G.webkitMatchesSelector||G.oMatchesSelector||G.msMatchesSelector))&&f(function(a){P.disconnectedMatch=K.call(a,"div"),K.call(a,"[s!='']:x"),J.push("!=",fa)}),I=new RegExp(I.join("|")),J=new RegExp(J.join("|")),L=c(G.contains)||G.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},M=G.compareDocumentPosition?function(a,b){var c;return a===b?(C=!0,0):(c=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b))?1&c||a.parentNode&&11===a.parentNode.nodeType?a===d||L(O,a)?-1:b===d||L(O,b)?1:0:4&c?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var c,e=0,f=a.parentNode,g=b.parentNode,i=[a],j=[b];if(a===b)return C=!0,0;if(!f||!g)return a===d?-1:b===d?1:f?-1:g?1:0;if(f===g)return h(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[e]===j[e];)e++;return e?h(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},C=!1,[0,0].sort(M),P.detectDuplicates=C,F):F},g.matches=function(a,b){return g(a,null,null,b)},g.matchesSelector=function(a,b){if((a.ownerDocument||a)!==F&&E(a),b=b.replace(ta,"='$1']"),P.matchesSelector&&!H&&(!J||!J.test(b))&&!I.test(b))try{var c=K.call(a,b);if(c||P.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(d){}return g(b,F,null,[a]).length>0},g.contains=function(a,b){return(a.ownerDocument||a)!==F&&E(a),L(a,b)},g.attr=function(a,b){var c;return(a.ownerDocument||a)!==F&&E(a),H||(b=b.toLowerCase()),(c=y.attrHandle[b])?c(a):H||P.attributes?a.getAttribute(b):((c=a.getAttributeNode(b))||a.getAttribute(b))&&a[b]===!0?b:c&&c.specified?c.value:null},g.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},g.uniqueSort=function(a){var b,c=[],d=1,e=0;if(C=!P.detectDuplicates,a.sort(M),C){for(;b=a[d];d++)b===a[d-1]&&(e=c.push(d));for(;e--;)a.splice(c[e],1)}return a},z=g.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=z(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=z(b);return c},y=g.selectors={cacheLength:50,createPseudo:e,match:ma,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ua,va),a[3]=(a[4]||a[5]||"").replace(ua,va),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||g.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&g.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return ma.CHILD.test(a[0])?null:(a[4]?a[2]=a[4]:c&&ka.test(c)&&(b=l(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(ua,va).toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=S[a+" "];return b||(b=new RegExp("(^|"+aa+")"+a+"("+aa+"|$)"))&&S(a,function(a){return b.test(a.className||typeof a.getAttribute!==V&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=g.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===Q&&j[1],m=j[0]===Q&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[Q,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===Q)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[Q,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,d=y.pseudos[a]||y.setFilters[a.toLowerCase()]||g.error("unsupported pseudo: "+a);return d[N]?d(b):d.length>1?(c=[a,a,"",b],y.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,c){for(var e,f=d(a,b),g=f.length;g--;)e=_.call(a,f[g]),a[e]=!(c[e]=f[g])}):function(a){return d(a,0,c)}):d}},pseudos:{not:e(function(a){var b=[],c=[],d=B(a.replace(ga,"$1"));return d[N]?e(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:e(function(a){return function(b){return g(a,b).length>0}}),contains:e(function(a){return function(b){return(b.textContent||b.innerText||z(b)).indexOf(a)>-1}}),lang:e(function(a){return la.test(a||"")||g.error("unsupported lang: "+a),a=a.replace(ua,va).toLowerCase(),function(b){var c;do if(c=H?b.getAttribute("xml:lang")||b.getAttribute("lang"):b.lang)return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===G},focus:function(a){return a===F.activeElement&&(!F.hasFocus||F.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeName>"@"||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!y.pseudos.empty(a)},header:function(a){return ra.test(a.nodeName)},input:function(a){return qa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[0>c?c+b:c]}),even:k(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}};for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[w]=i(w);for(w in{submit:!0,reset:!0})y.pseudos[w]=j(w);B=g.compile=function(a,b){var c,d=[],e=[],f=U[a+" "];if(!f){for(b||(b=l(a)),c=b.length;c--;)f=r(b[c]),f[N]?d.push(f):e.push(f);f=U(a,s(e,d))}return f},y.pseudos.nth=y.pseudos.eq,y.filters=v.prototype=y.pseudos,y.setFilters=new v,E(),g.attr=ia.attr,ia.find=g,ia.expr=g.selectors,ia.expr[":"]=ia.expr.pseudos,ia.unique=g.uniqueSort,ia.text=g.getText,ia.isXMLDoc=g.isXML,ia.contains=g.contains}(a);var Pa=/Until$/,Qa=/^(?:parents|prev(?:Until|All))/,Ra=/^.[^:#\[\.,]*$/,Sa=ia.expr.match.needsContext,Ta={children:!0,contents:!0,next:!0,prev:!0};ia.fn.extend({find:function(a){var b,c,d,e=this.length;if("string"!=typeof a)return d=this,this.pushStack(ia(a).filter(function(){for(b=0;e>b;b++)if(ia.contains(d[b],this))return!0}));for(c=[],b=0;e>b;b++)ia.find(a,this[b],c);return c=this.pushStack(e>1?ia.unique(c):c),c.selector=(this.selector?this.selector+" ":"")+a,c},has:function(a){var b,c=ia(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(ia.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(l(this,a,!1))},filter:function(a){return this.pushStack(l(this,a,!0))},is:function(a){return!!a&&("string"==typeof a?Sa.test(a)?ia(a,this.context).index(this[0])>=0:ia.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Sa.test(a)||"string"!=typeof a?ia(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(g?g.index(c)>-1:ia.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}return this.pushStack(f.length>1?ia.unique(f):f)},index:function(a){return a?"string"==typeof a?ia.inArray(this[0],ia(a)):ia.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"==typeof a?ia(a,b):ia.makeArray(a&&a.nodeType?[a]:a),d=ia.merge(this.get(),c);return this.pushStack(ia.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ia.fn.andSelf=ia.fn.addBack,ia.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ia.dir(a,"parentNode")},parentsUntil:function(a,b,c){return ia.dir(a,"parentNode",c)},next:function(a){return k(a,"nextSibling")},prev:function(a){return k(a,"previousSibling")},nextAll:function(a){return ia.dir(a,"nextSibling")},prevAll:function(a){return ia.dir(a,"previousSibling")},nextUntil:function(a,b,c){return ia.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return ia.dir(a,"previousSibling",c)},siblings:function(a){return ia.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return ia.sibling(a.firstChild)},contents:function(a){return ia.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:ia.merge([],a.childNodes)}},function(a,b){ia.fn[a]=function(c,d){var e=ia.map(this,b,c);return Pa.test(a)||(d=c),d&&"string"==typeof d&&(e=ia.filter(d,e)),e=this.length>1&&!Ta[a]?ia.unique(e):e,this.length>1&&Qa.test(a)&&(e=e.reverse()),this.pushStack(e)}}),ia.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?ia.find.matchesSelector(b[0],a)?[b[0]]:[]:ia.find.matches(a,b)},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!ia(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Ua="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Va=/ jQuery\d+="(?:null|\d+)"/g,Wa=new RegExp("<(?:"+Ua+")[\\s/>]","i"),Xa=/^\s+/,Ya=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Za=/<([\w:]+)/,$a=/<tbody/i,_a=/<|&#?\w+;/,ab=/<(?:script|style|link)/i,bb=/^(?:checkbox|radio)$/i,cb=/checked\s*(?:[^=]|=\s*.checked.)/i,db=/^$|\/(?:java|ecma)script/i,eb=/^true\/(.*)/,fb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,gb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ia.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},hb=m(W),ib=hb.appendChild(W.createElement("div"));gb.optgroup=gb.option,gb.tbody=gb.tfoot=gb.colgroup=gb.caption=gb.thead,gb.th=gb.td,ia.fn.extend({text:function(a){return ia.access(this,function(a){return a===b?ia.text(this):this.empty().append((this[0]&&this[0].ownerDocument||W).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(ia.isFunction(a))return this.each(function(b){ia(this).wrapAll(a.call(this,b))});if(this[0]){var b=ia(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return ia.isFunction(a)?this.each(function(b){ia(this).wrapInner(a.call(this,b))}):this.each(function(){var b=ia(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ia.isFunction(a);return this.each(function(c){ia(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){ia.nodeName(this,"body")||ia(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(a,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,!1,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)(!a||ia.filter(a,[c]).length>0)&&(b||1!==c.nodeType||ia.cleanData(t(c)),c.parentNode&&(b&&ia.contains(c.ownerDocument,c)&&q(t(c,"script")),c.parentNode.removeChild(c)));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&ia.cleanData(t(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&ia.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return ia.clone(this,a,b)})},html:function(a){return ia.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Va,""):b;if("string"==typeof a&&!ab.test(a)&&(ia.support.htmlSerialize||!Wa.test(a))&&(ia.support.leadingWhitespace||!Xa.test(a))&&!gb[(Za.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ya,"<$1></$2>");try{for(;e>d;d++)c=this[d]||{},1===c.nodeType&&(ia.cleanData(t(c,!1)),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){var b=ia.isFunction(a);return b||"string"==typeof a||(a=ia(a).not(this).detach()),this.domManip([a],!0,function(a){var b=this.nextSibling,c=this.parentNode;c&&(ia(this).remove(),c.insertBefore(a,b))})},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=ba.apply([],a);var e,f,g,h,i,j,k=0,l=this.length,m=this,q=l-1,r=a[0],s=ia.isFunction(r);if(s||!(1>=l||"string"!=typeof r||ia.support.checkClone)&&cb.test(r))return this.each(function(e){var f=m.eq(e);s&&(a[0]=r.call(this,e,c?f.html():b)),f.domManip(a,c,d)});if(l&&(j=ia.buildFragment(a,this[0].ownerDocument,!1,this),e=j.firstChild,1===j.childNodes.length&&(j=e),e)){for(c=c&&ia.nodeName(e,"tr"),h=ia.map(t(j,"script"),o),g=h.length;l>k;k++)f=j,k!==q&&(f=ia.clone(f,!0,!0),g&&ia.merge(h,t(f,"script"))),d.call(c&&ia.nodeName(this[k],"table")?n(this[k],"tbody"):this[k],f,k);if(g)for(i=h[h.length-1].ownerDocument,ia.map(h,p),k=0;g>k;k++)f=h[k],db.test(f.type||"")&&!ia._data(f,"globalEval")&&ia.contains(i,f)&&(f.src?ia.ajax({url:f.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):ia.globalEval((f.text||f.textContent||f.innerHTML||"").replace(fb,"")));j=e=null}return this}}),ia.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ia.fn[a]=function(a){for(var c,d=0,e=[],f=ia(a),g=f.length-1;g>=d;d++)c=d===g?this:this.clone(!0),ia(f[d])[b](c),ca.apply(e,c.get());return this.pushStack(e)}}),ia.extend({clone:function(a,b,c){var d,e,f,g,h,i=ia.contains(a.ownerDocument,a);if(ia.support.html5Clone||ia.isXMLDoc(a)||!Wa.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ib.innerHTML=a.outerHTML,ib.removeChild(f=ib.firstChild)),!(ia.support.noCloneEvent&&ia.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ia.isXMLDoc(a)))for(d=t(f),h=t(a),g=0;null!=(e=h[g]);++g)d[g]&&s(e,d[g]);if(b)if(c)for(h=h||t(a),d=d||t(f),g=0;null!=(e=h[g]);g++)r(e,d[g]);else r(a,f);return d=t(f,"script"),d.length>0&&q(d,!i&&t(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,n=m(b),o=[],p=0;l>p;p++)if(f=a[p],f||0===f)if("object"===ia.type(f))ia.merge(o,f.nodeType?[f]:f);else if(_a.test(f)){for(h=h||n.appendChild(b.createElement("div")),i=(Za.exec(f)||["",""])[1].toLowerCase(),k=gb[i]||gb._default,h.innerHTML=k[1]+f.replace(Ya,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!ia.support.leadingWhitespace&&Xa.test(f)&&o.push(b.createTextNode(Xa.exec(f)[0])),!ia.support.tbody)for(f="table"!==i||$a.test(f)?"<table>"!==k[1]||$a.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)ia.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(ia.merge(o,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=n.lastChild}else o.push(b.createTextNode(f));for(h&&n.removeChild(h),ia.support.appendChecked||ia.grep(t(o,"input"),u),p=0;f=o[p++];)if((!d||-1===ia.inArray(f,d))&&(g=ia.contains(f.ownerDocument,f),h=t(n.appendChild(f),"script"),g&&q(h),c))for(e=0;f=h[e++];)db.test(f.type||"")&&c.push(f);return h=null,n},cleanData:function(a,b){for(var c,d,e,f,g=0,h=ia.expando,i=ia.cache,j=ia.support.deleteExpando,k=ia.event.special;null!=(c=a[g]);g++)if((b||ia.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?ia.event.remove(c,d):ia.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==V?c.removeAttribute(h):c[h]=null,_.push(e))}}});var jb,kb,lb,mb=/alpha\([^)]*\)/i,nb=/opacity\s*=\s*([^)]*)/,ob=/^(top|right|bottom|left)$/,pb=/^(none|table(?!-c[ea]).+)/,qb=/^margin/,rb=new RegExp("^("+ja+")(.*)$","i"),sb=new RegExp("^("+ja+")(?!px)[a-z%]+$","i"),tb=new RegExp("^([+-])=("+ja+")","i"),ub={BODY:"block"},vb={position:"absolute",visibility:"hidden",display:"block"},wb={letterSpacing:0,fontWeight:400},xb=["Top","Right","Bottom","Left"],yb=["Webkit","O","Moz","ms"];ia.fn.extend({css:function(a,c){return ia.access(this,function(a,c,d){var e,f,g={},h=0;if(ia.isArray(c)){for(f=kb(a),e=c.length;e>h;h++)g[c[h]]=ia.css(a,c[h],!1,f);return g}return d!==b?ia.style(a,c,d):ia.css(a,c)},a,c,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(a){var b="boolean"==typeof a;return this.each(function(){(b?a:w(this))?ia(this).show():ia(this).hide()})}}),ia.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=lb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ia.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=ia.camelCase(c),j=a.style;if(c=ia.cssProps[i]||(ia.cssProps[i]=v(j,i)),h=ia.cssHooks[c]||ia.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=tb.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(ia.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||ia.cssNumber[i]||(d+="px"),ia.support.clearCloneStyle||""!==d||0!==c.indexOf("background")||(j[c]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=ia.camelCase(c);return c=ia.cssProps[i]||(ia.cssProps[i]=v(a.style,i)),h=ia.cssHooks[c]||ia.cssHooks[i],h&&"get"in h&&(g=h.get(a,!0,d)),g===b&&(g=lb(a,c,e)),"normal"===g&&c in wb&&(g=wb[c]),""===d||d?(f=parseFloat(g),d===!0||ia.isNumeric(f)?f||0:g):g},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e}}),a.getComputedStyle?(kb=function(b){return a.getComputedStyle(b,null)},lb=function(a,c,d){var e,f,g,h=d||kb(a),i=h?h.getPropertyValue(c)||h[c]:b,j=a.style;return h&&(""!==i||ia.contains(a.ownerDocument,a)||(i=ia.style(a,c)),sb.test(i)&&qb.test(c)&&(e=j.width,f=j.minWidth,g=j.maxWidth,j.minWidth=j.maxWidth=j.width=i,i=h.width,j.width=e,j.minWidth=f,j.maxWidth=g)),i}):W.documentElement.currentStyle&&(kb=function(a){return a.currentStyle},lb=function(a,c,d){var e,f,g,h=d||kb(a),i=h?h[c]:b,j=a.style;return null==i&&j&&j[c]&&(i=j[c]),sb.test(i)&&!ob.test(c)&&(e=j.left,f=a.runtimeStyle,g=f&&f.left,g&&(f.left=a.currentStyle.left),j.left="fontSize"===c?"1em":i,i=j.pixelLeft+"px",j.left=e,g&&(f.left=g)),""===i?"auto":i}),ia.each(["height","width"],function(a,b){ia.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&pb.test(ia.css(a,"display"))?ia.swap(a,vb,function(){return A(a,b,d)}):A(a,b,d):void 0},set:function(a,c,d){var e=d&&kb(a);return y(a,c,d?z(a,b,d,ia.support.boxSizing&&"border-box"===ia.css(a,"boxSizing",!1,e),e):0)}}}),ia.support.opacity||(ia.cssHooks.opacity={get:function(a,b){return nb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=ia.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===ia.trim(f.replace(mb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=mb.test(f)?f.replace(mb,e):f+" "+e)}}),ia(function(){ia.support.reliableMarginRight||(ia.cssHooks.marginRight={get:function(a,b){return b?ia.swap(a,{display:"inline-block"},lb,[a,"marginRight"]):void 0}}),!ia.support.pixelPosition&&ia.fn.position&&ia.each(["top","left"],function(a,b){ia.cssHooks[b]={get:function(a,c){return c?(c=lb(a,b),sb.test(c)?ia(a).position()[b]+"px":c):void 0}}})}),ia.expr&&ia.expr.filters&&(ia.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!ia.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||ia.css(a,"display"))},ia.expr.filters.visible=function(a){return!ia.expr.filters.hidden(a)}),ia.each({margin:"",padding:"",border:"Width"},function(a,b){ia.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+xb[d]+b]=f[d]||f[d-2]||f[0];return e}},qb.test(a)||(ia.cssHooks[a+b].set=y)});var zb=/%20/g,Ab=/\[\]$/,Bb=/\r?\n/g,Cb=/^(?:submit|button|image|reset|file)$/i,Db=/^(?:input|select|textarea|keygen)/i;ia.fn.extend({serialize:function(){return ia.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ia.prop(this,"elements");return a?ia.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ia(this).is(":disabled")&&Db.test(this.nodeName)&&!Cb.test(a)&&(this.checked||!bb.test(a))}).map(function(a,b){var c=ia(this).val();return null==c?null:ia.isArray(c)?ia.map(c,function(a){return{name:b.name,value:a.replace(Bb,"\r\n")}}):{name:b.name,value:c.replace(Bb,"\r\n")}}).get()}}),ia.param=function(a,c){var d,e=[],f=function(a,b){b=ia.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=ia.ajaxSettings&&ia.ajaxSettings.traditional),ia.isArray(a)||a.jquery&&!ia.isPlainObject(a))ia.each(a,function(){f(this.name,this.value)});else for(d in a)D(d,a[d],c,f);return e.join("&").replace(zb,"+")},ia.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){ia.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ia.fn.hover=function(a,b){return this.mouseenter(a).mouseleave(b||a)};var Eb,Fb,Gb=ia.now(),Hb=/\?/,Ib=/#.*$/,Jb=/([?&])_=[^&]*/,Kb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Lb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mb=/^(?:GET|HEAD)$/,Nb=/^\/\//,Ob=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Pb=ia.fn.load,Qb={},Rb={},Sb="*/".concat("*");try{Fb=X.href}catch(Tb){Fb=W.createElement("a"),Fb.href="",Fb=Fb.href}Eb=Ob.exec(Fb.toLowerCase())||[],ia.fn.load=function(a,c,d){if("string"!=typeof a&&Pb)return Pb.apply(this,arguments);var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),ia.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(g="POST"),h.length>0&&ia.ajax({url:a,type:g,dataType:"html",data:c}).done(function(a){f=arguments,h.html(e?ia("<div>").append(ia.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,f||[a.responseText,b,a])}),this},ia.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ia.fn[b]=function(a){return this.on(b,a)}}),ia.each(["get","post"],function(a,c){ia[c]=function(a,d,e,f){return ia.isFunction(d)&&(f=f||e,e=d,d=b),ia.ajax({url:a,type:c,dataType:f,data:d,success:e})}}),ia.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fb,type:"GET",isLocal:Lb.test(Eb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":ia.parseJSON,"text xml":ia.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?G(G(a,ia.ajaxSettings),b):G(ia.ajaxSettings,a)},ajaxPrefilter:E(Qb),ajaxTransport:E(Rb),ajax:function(a,c){function d(a,c,d,e){var f,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),k=b,h=e||"",w.readyState=a>0?4:0,d&&(t=H(m,w,d)),a>=200&&300>a||304===a?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(ia.lastModified[g]=v),v=w.getResponseHeader("etag"),v&&(ia.etag[g]=v)),204===a?(f=!0,x="nocontent"):304===a?(f=!0,x="notmodified"):(f=I(m,t),x=f.state,l=f.data,s=f.error,f=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),w.status=a,w.statusText=(c||x)+"",f?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,j&&o.trigger(f?"ajaxSuccess":"ajaxError",[w,m,f?l:s]),q.fireWith(n,[w,x]),j&&(o.trigger("ajaxComplete",[w,m]),--ia.active||ia.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=ia.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?ia(n):ia.event,p=ia.Deferred(),q=ia.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!l)for(l={};b=Kb.exec(h);)l[b[1].toLowerCase()]=b[2];b=l[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?h:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return k&&k.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((a||m.url||Fb)+"").replace(Ib,"").replace(Nb,Eb[1]+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=ia.trim(m.dataType||"*").toLowerCase().match(ka)||[""],null==m.crossDomain&&(e=Ob.exec(m.url.toLowerCase()),m.crossDomain=!(!e||e[1]===Eb[1]&&e[2]===Eb[2]&&(e[3]||("http:"===e[1]?80:443))==(Eb[3]||("http:"===Eb[1]?80:443)))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=ia.param(m.data,m.traditional)),F(Qb,m,c,w),2===u)return w;j=m.global,j&&0===ia.active++&&ia.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Mb.test(m.type),g=m.url,m.hasContent||(m.data&&(g=m.url+=(Hb.test(g)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=Jb.test(g)?g.replace(Jb,"$1_="+Gb++):g+(Hb.test(g)?"&":"?")+"_="+Gb++)),m.ifModified&&(ia.lastModified[g]&&w.setRequestHeader("If-Modified-Since",ia.lastModified[g]),ia.etag[g]&&w.setRequestHeader("If-None-Match",ia.etag[g])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Sb+"; q=0.01":""):m.accepts["*"]);for(f in m.headers)w.setRequestHeader(f,m.headers[f]);
if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(f in{success:1,error:1,complete:1})w[f](m[f]);if(k=F(Rb,m,c,w)){w.readyState=1,j&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,k.send(s,d)}catch(x){if(!(2>u))throw x;d(-1,x)}}else d(-1,"No Transport");return w},getScript:function(a,c){return ia.get(a,b,c,"script")},getJSON:function(a,b,c){return ia.get(a,b,c,"json")}}),ia.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return ia.globalEval(a),a}}}),ia.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),ia.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=W.head||ia("head")[0]||W.documentElement;return{send:function(b,e){c=W.createElement("script"),c.async=!0,a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,b){(b||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),c=null,b||e(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(b,!0)}}}});var Ub=[],Vb=/(=)\?(?=&|$)|\?\?/;ia.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ub.pop()||ia.expando+"_"+Gb++;return this[a]=!0,a}}),ia.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.jsonp!==!1&&(Vb.test(c.url)?"url":"string"==typeof c.data&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vb.test(c.data)&&"data");return i||"jsonp"===c.dataTypes[0]?(f=c.jsonpCallback=ia.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,i?c[i]=c[i].replace(Vb,"$1"+f):c.jsonp!==!1&&(c.url+=(Hb.test(c.url)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||ia.error(f+" was not called"),h[0]},c.dataTypes[0]="json",g=a[f],a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Ub.push(f)),h&&ia.isFunction(g)&&g(h[0]),h=g=b}),"script"):void 0});var Wb,Xb,Yb=0,Zb=a.ActiveXObject&&function(){var a;for(a in Wb)Wb[a](b,!0)};ia.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&J()||K()}:J,Xb=ia.ajaxSettings.xhr(),ia.support.cors=!!Xb&&"withCredentials"in Xb,Xb=ia.support.ajax=!!Xb,Xb&&ia.ajaxTransport(function(c){if(!c.crossDomain||ia.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=ia.noop,Zb&&delete Wb[g]),e)4!==i.readyState&&i.abort();else{l={},h=i.status,j=i.getAllResponseHeaders(),"string"==typeof i.responseText&&(l.text=i.responseText);try{k=i.statusText}catch(m){k=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(n){e||f(-1,n)}l&&f(h,k,l,j)},c.async?4===i.readyState?setTimeout(d):(g=++Yb,Zb&&(Wb||(Wb={},ia(a).unload(Zb)),Wb[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(b,!0)}}}});var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+ja+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[P],ec={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=bc.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){if(c=+f[2],d=f[3]||(ia.cssNumber[a]?"":"px"),"px"!==d&&h){h=ia.css(e.elem,a,!0)||c||1;do i=i||".5",h/=i,ia.style(e.elem,a,h+d);while(i!==(i=e.cur()/g)&&1!==i&&--j)}e.unit=d,e.start=h,e.end=f[1]?h+(f[1]+1)*c:c}return e}]};ia.Animation=ia.extend(N,{tweener:function(a,b){ia.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],ec[c]=ec[c]||[],ec[c].unshift(b)},prefilter:function(a,b){b?dc.unshift(a):dc.push(a)}}),ia.Tween=Q,Q.prototype={constructor:Q,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ia.cssNumber[c]?"":"px")},cur:function(){var a=Q.propHooks[this.prop];return a&&a.get?a.get(this):Q.propHooks._default.get(this)},run:function(a){var b,c=Q.propHooks[this.prop];return this.options.duration?this.pos=b=ia.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Q.propHooks._default.set(this),this}},Q.prototype.init.prototype=Q.prototype,Q.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=ia.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){ia.fx.step[a.prop]?ia.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[ia.cssProps[a.prop]]||ia.cssHooks[a.prop])?ia.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Q.propHooks.scrollTop=Q.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ia.each(["toggle","show","hide"],function(a,b){var c=ia.fn[b];ia.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(R(b,!0),a,d,e)}}),ia.fn.extend({fadeTo:function(a,b,c,d){return this.filter(w).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ia.isEmptyObject(a),f=ia.speed(b,c,d),g=function(){var b=N(this,ia.extend({},a),f);g.finish=function(){b.stop(!0)},(e||ia._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=ia.timers,g=ia._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cc.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&ia.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ia._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ia.timers,g=d?d.length:0;for(c.finish=!0,ia.queue(this,a,[]),e&&e.cur&&e.cur.finish&&e.cur.finish.call(this),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ia.each({slideDown:R("show"),slideUp:R("hide"),slideToggle:R("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ia.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ia.speed=function(a,b,c){var d=a&&"object"==typeof a?ia.extend({},a):{complete:c||!c&&b||ia.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ia.isFunction(b)&&b};return d.duration=ia.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in ia.fx.speeds?ia.fx.speeds[d.duration]:ia.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){ia.isFunction(d.old)&&d.old.call(this),d.queue&&ia.dequeue(this,d.queue)},d},ia.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},ia.timers=[],ia.fx=Q.prototype.init,ia.fx.tick=function(){var a,c=ia.timers,d=0;for($b=ia.now();d<c.length;d++)a=c[d],a()||c[d]!==a||c.splice(d--,1);c.length||ia.fx.stop(),$b=b},ia.fx.timer=function(a){a()&&ia.timers.push(a)&&ia.fx.start()},ia.fx.interval=13,ia.fx.start=function(){_b||(_b=setInterval(ia.fx.tick,ia.fx.interval))},ia.fx.stop=function(){clearInterval(_b),_b=null},ia.fx.speeds={slow:600,fast:200,_default:400},ia.fx.step={},ia.expr&&ia.expr.filters&&(ia.expr.filters.animated=function(a){return ia.grep(ia.timers,function(b){return a===b.elem}).length}),ia.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){ia.offset.setOffset(this,a,b)});var c,d,e={top:0,left:0},f=this[0],g=f&&f.ownerDocument;if(g)return c=g.documentElement,ia.contains(c,f)?(typeof f.getBoundingClientRect!==V&&(e=f.getBoundingClientRect()),d=S(g),{top:e.top+(d.pageYOffset||c.scrollTop)-(c.clientTop||0),left:e.left+(d.pageXOffset||c.scrollLeft)-(c.clientLeft||0)}):e},ia.offset={setOffset:function(a,b,c){var d=ia.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=ia(a),h=g.offset(),i=ia.css(a,"top"),j=ia.css(a,"left"),k=("absolute"===d||"fixed"===d)&&ia.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),ia.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},ia.fn.extend({position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===ia.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ia.nodeName(a[0],"html")||(c=a.offset()),c.top+=ia.css(a[0],"borderTopWidth",!0),c.left+=ia.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-ia.css(d,"marginTop",!0),left:b.left-c.left-ia.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||W.documentElement;a&&!ia.nodeName(a,"html")&&"static"===ia.css(a,"position");)a=a.offsetParent;return a||W.documentElement})}}),ia.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);ia.fn[a]=function(e){return ia.access(this,function(a,e,f){var g=S(a);return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:void(g?g.scrollTo(d?ia(g).scrollLeft():f,d?f:ia(g).scrollTop()):a[e]=f)},a,e,arguments.length,null)}}),ia.each({Height:"height",Width:"width"},function(a,c){ia.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){ia.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return ia.access(this,function(c,d,e){var f;return ia.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?ia.css(c,d,h):ia.style(c,d,e,h)},c,g?e:b,g,null)}})}),a.jQuery=a.$=ia,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return ia})}(window),function(){var a,b=this,c=b.Backbone,d=[],e=d.push,f=d.slice,g=d.splice;a="undefined"!=typeof exports?exports:b.Backbone={},a.VERSION="1.0.0";var h=b._;h||"undefined"==typeof require||(h=require("underscore")),a.$=b.jQuery||b.Zepto||b.ender||b.$,a.noConflict=function(){return b.Backbone=c,this},a.emulateHTTP=!1,a.emulateJSON=!1;var i=a.Events={on:function(a,b,c){if(!k(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!k(this,"once",a,[b,c])||!b)return this;var d=this,e=h.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c)},off:function(a,b,c){var d,e,f,g,i,j,l,m;if(!this._events||!k(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(g=a?[a]:h.keys(this._events),i=0,j=g.length;j>i;i++)if(a=g[i],f=this._events[a]){if(this._events[a]=d=[],b||c)for(l=0,m=f.length;m>l;l++)e=f[l],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=f.call(arguments,1);if(!k(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&l(c,b),d&&l(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},j=/\s+/,k=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(j.test(c)){for(var f=c.split(j),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},l=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},m={listenTo:"on",listenToOnce:"once"};h.each(m,function(a,b){i[b]=function(b,c,d){var e=this._listeners||(this._listeners={}),f=b._listenerId||(b._listenerId=h.uniqueId("l"));return e[f]=b,"object"==typeof c&&(d=this),b[a](c,d,this),this}}),i.bind=i.on,i.unbind=i.off,h.extend(a,i);var n=a.Model=function(a,b){var c,d=a||{};b||(b={}),this.cid=h.uniqueId("c"),this.attributes={},h.extend(this,h.pick(b,o)),b.parse&&(d=this.parse(d,b)||{}),(c=h.result(this,"defaults"))&&(d=h.defaults({},d,c)),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)},o=["url","urlRoot","collection"];h.extend(n.prototype,i,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return h.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return h.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e,f,g,i,j,k,l;if(null==a)return this;if("object"==typeof a?(e=a,c=b):(e={})[a]=b,c||(c={}),!this._validate(e,c))return!1;f=c.unset,i=c.silent,g=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=h.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in e&&(this.id=e[this.idAttribute]);for(d in e)b=e[d],h.isEqual(l[d],b)||g.push(d),h.isEqual(k[d],b)?delete this.changed[d]:this.changed[d]=b,f?delete l[d]:l[d]=b;if(!i){g.length&&(this._pending=!0);for(var m=0,n=g.length;n>m;m++)this.trigger("change:"+g[m],this,l[g[m]],c)}if(j)return this;if(!i)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,h.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var c in this.attributes)b[c]=void 0;return this.set(b,h.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!h.isEmpty(this.changed):h.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?h.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes;for(var e in a)h.isEqual(d[e],b=a[e])||((c||(c={}))[e]=b);return c},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return h.clone(this._previousAttributes)},fetch:function(a){a=a?h.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;return a.success=function(d){return b.set(b.parse(d,a),a)?(c&&c(b,d,a),void b.trigger("sync",b,d,a)):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,c){var d,e,f,g=this.attributes;if(null==a||"object"==typeof a?(d=a,c=b):(d={})[a]=b,d&&(!c||!c.wait)&&!this.set(d,c))return!1;if(c=h.extend({validate:!0},c),!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=h.extend({},g,d)),void 0===c.parse&&(c.parse=!0);var i=this,j=c.success;return c.success=function(a){i.attributes=g;var b=i.parse(a,c);return c.wait&&(b=h.extend(d||{},b)),h.isObject(b)&&!i.set(b,c)?!1:(j&&j(i,a,c),void i.trigger("sync",i,a,c))},L(this,c),e=this.isNew()?"create":c.patch?"patch":"update","patch"===e&&(c.attrs=d),f=this.sync(e,this,c),d&&c.wait&&(this.attributes=g),f},destroy:function(a){a=a?h.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(e){(a.wait||b.isNew())&&d(),c&&c(b,e,a),b.isNew()||b.trigger("sync",b,e,a)},this.isNew())return a.success(),!1;L(this,a);var e=this.sync("delete",this,a);return a.wait||d(),e},url:function(){var a=h.result(this,"urlRoot")||h.result(this.collection,"url")||K();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},h.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=h.extend({},this.attributes,a);var c=this.validationError=this.validate(a,b)||null;return c?(this.trigger("invalid",this,c,h.extend(b||{},{validationError:c})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];h.each(p,function(a){n.prototype[a]=function(){var b=f.call(arguments);return b.unshift(this.attributes),h[a].apply(h,b)}});var q=a.Collection=function(a,b){b||(b={}),b.url&&(this.url=b.url),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,h.extend({silent:!0},b))},r={add:!0,remove:!0,merge:!0},s={add:!0,merge:!1,remove:!1};h.extend(q.prototype,i,{model:n,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return a.sync.apply(this,arguments)},add:function(a,b){return this.set(a,h.defaults(b||{},s))},remove:function(a,b){a=h.isArray(a)?a.slice():[a],b||(b={});var c,d,e,f;for(c=0,d=a.length;d>c;c++)f=this.get(a[c]),f&&(delete this._byId[f.id],delete this._byId[f.cid],e=this.indexOf(f),this.models.splice(e,1),this.length--,b.silent||(b.index=e,f.trigger("remove",f,this,b)),this._removeReference(f));return this},set:function(a,b){b=h.defaults(b||{},r),b.parse&&(a=this.parse(a,b)),h.isArray(a)||(a=a?[a]:[]);var c,d,f,i,j,k=b.at,l=this.comparator&&null==k&&b.sort!==!1,m=h.isString(this.comparator)?this.comparator:null,n=[],o=[],p={};for(c=0,d=a.length;d>c;c++)(f=this._prepareModel(a[c],b))&&((i=this.get(f))?(b.remove&&(p[i.cid]=!0),b.merge&&(i.set(f.attributes,b),l&&!j&&i.hasChanged(m)&&(j=!0))):b.add&&(n.push(f),f.on("all",this._onModelEvent,this),this._byId[f.cid]=f,null!=f.id&&(this._byId[f.id]=f)));if(b.remove){for(c=0,d=this.length;d>c;++c)p[(f=this.models[c]).cid]||o.push(f);o.length&&this.remove(o,b)}if(n.length&&(l&&(j=!0),this.length+=n.length,null!=k?g.apply(this.models,[k,0].concat(n)):e.apply(this.models,n)),j&&this.sort({silent:!0}),b.silent)return this;for(c=0,d=n.length;d>c;c++)(f=n[c]).trigger("add",f,this,b);return j&&this.trigger("sort",this,b),this},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;d>c;c++)this._removeReference(this.models[c]);return b.previousModels=this.models,this._reset(),this.add(a,h.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:this.length},b)),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return h.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),h.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(h.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=h.isFunction(b)?b:function(a){return a.get(b)};return h.sortedIndex(this.models,a,d,c)},pluck:function(a){return h.invoke(this.models,"get",a)},fetch:function(a){a=a?h.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;return a.success=function(d){var e=a.reset?"reset":"set";c[e](d,a),b&&b(c,d,a),c.trigger("sync",c,d,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?h.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;return b.success=function(e){b.wait&&c.add(a,b),d&&d(a,e,b)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof n)return a.collection||(a.collection=this),a;b||(b={}),b.collection=this;var c=new this.model(a,b);return c._validate(a,b)?c:(this.trigger("invalid",this,a,b),!1)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var t=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];h.each(t,function(a){q.prototype[a]=function(){var b=f.call(arguments);return b.unshift(this.models),h[a].apply(h,b)}});var u=["groupBy","countBy","sortBy"];h.each(u,function(a){q.prototype[a]=function(b,c){var d=h.isFunction(b)?b:function(a){return a.get(b)};return h[a](this.models,d,c)}});var v=a.View=function(a){this.cid=h.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];h.extend(v.prototype,i,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(b,c){return this.$el&&this.undelegateEvents(),this.$el=b instanceof a.$?b:a.$(b),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=h.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];if(h.isFunction(c)||(c=this[a[b]]),c){var d=b.match(w),e=d[1],f=d[2];c=h.bind(c,this),e+=".delegateEvents"+this.cid,""===f?this.$el.on(e,c):this.$el.on(e,f,c)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(a){this.options&&(a=h.extend({},h.result(this,"options"),a)),h.extend(this,h.pick(a,x)),this.options=a},_ensureElement:function(){if(this.el)this.setElement(h.result(this,"el"),!1);else{var b=h.extend({},h.result(this,"attributes"));this.id&&(b.id=h.result(this,"id")),this.className&&(b["class"]=h.result(this,"className"));var c=a.$("<"+h.result(this,"tagName")+">").attr(b);this.setElement(c,!1)}}}),a.sync=function(b,c,d){var e=y[b];h.defaults(d||(d={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var f={type:e,dataType:"json"};if(d.url||(f.url=h.result(c,"url")||K()),null!=d.data||!c||"create"!==b&&"update"!==b&&"patch"!==b||(f.contentType="application/json",f.data=JSON.stringify(d.attrs||c.toJSON(d))),d.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{}),d.emulateHTTP&&("PUT"===e||"DELETE"===e||"PATCH"===e)){f.type="POST",d.emulateJSON&&(f.data._method=e);var g=d.beforeSend;d.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",e),g?g.apply(this,arguments):void 0}}"GET"===f.type||d.emulateJSON||(f.processData=!1),"PATCH"!==f.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(f.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=d.xhr=a.ajax(h.extend(f,d));return c.trigger("request",c,i,d),i};var y={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var z=a.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,B=/(\(\?)?:\w+/g,C=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;h.extend(z.prototype,i,{initialize:function(){},route:function(b,c,d){h.isRegExp(b)||(b=this._routeToRegExp(b)),h.isFunction(c)&&(d=c,c=""),d||(d=this[c]);var e=this;return a.history.route(b,function(f){var g=e._extractParameters(b,f);d&&d.apply(e,g),e.trigger.apply(e,["route:"+c].concat(g)),e.trigger("route",c,g),a.history.trigger("route",e,c,g)}),this},navigate:function(b,c){return a.history.navigate(b,c),this},_bindRoutes:function(){if(this.routes){this.routes=h.result(this,"routes");for(var a,b=h.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(D,"\\$&").replace(A,"(?:$1)?").replace(B,function(a,b){return b?a:"([^/]+)"}).replace(C,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return h.map(c,function(a){return a?decodeURIComponent(a):null})}});var E=a.History=function(){this.handlers=[],h.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},F=/^[#\/]|\s+$/g,G=/^\/+|\/+$/g,H=/msie [\w.]+/,I=/\/$/;E.started=!1,h.extend(E.prototype,i,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(I,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(F,"")},start:function(b){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=h.extend({},{root:"/"},this.options,b),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var c=this.getFragment(),d=document.documentMode,e=H.exec(navigator.userAgent.toLowerCase())&&(!d||7>=d);this.root=("/"+this.root+"/").replace(G,"/"),e&&this._wantsHashChange&&(this.iframe=a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(c)),this._hasPushState?a.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!e?a.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=c;var f=this.location,g=f.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!g?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&g&&f.hash&&(this.fragment=this.getHash().replace(F,""),this.history.replaceState({},document.title,this.root+this.fragment+f.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe))),b===this.fragment?!1:(this.iframe&&this.navigate(b),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=h.any(this.handlers,function(a){return a.route.test(b)?(a.callback(b),!0):void 0});return c},navigate:function(a,b){if(!E.started)return!1;if(b&&b!==!0||(b={trigger:b}),a=this.getFragment(a||""),this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),a.history=new E;var J=function(a,b){var c,d=this;c=a&&h.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)},h.extend(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&h.extend(c.prototype,a),c.__super__=d.prototype,c};n.extend=q.extend=z.extend=v.extend=E.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}}}.call(this),define("backbone",["underscore","jquery"],function(a){return function(){var b;return b||a.Backbone}}(this)),define("views/headHoverItem",["backbone"],function(a){return a.View.extend({events:{"mouseenter .topli":"hoverIn","mouseleave .topli":"hoverOut"},hoverIn:function(a){var b=$(a.target).closest(".topli");if(b.find(".dropdown").length>0){if(b.find(".dropdown").css("display","block"),b.find(".topa").length>0){b.find(".dropdown").width()>1280&&b.find(".innerWrapper").css("white-space","initial");var c=b.find(".topa").position().left,d=b.find(".dropdown").width()-35;c+d>1280?b.find(".dropdown").css("left",(1280-b.find(".dropdown").width())/2+"px"):b.find(".dropdown").css("left",c-35+"px")}else{var e=b.find(".region").width();b.find(".region").css("left",1280-e-40+"px")}if(1==b.find(".part2").length){var f=b.find(".topa").width();b.find(".part2").css("min-width",f)}}},hoverOut:function(a){var b=$(a.target).closest(".topli");b.find(".dropdown").length>0&&b.find(".dropdown").css("display","none")}})}),jQuery.cookie=function(a,b,c){if("undefined"==typeof b){var d=null;if(document.cookie&&""!=document.cookie)for(var e=document.cookie.split(";"),f=0;f<e.length;f++){var g=jQuery.trim(e[f]);if(g.substring(0,a.length+1)==a+"="){d=decodeURIComponent(g.substring(a.length+1));break}}return d}c=c||{},null===b&&(b="",c.expires=-1);var h="";if(c.expires&&("number"==typeof c.expires||c.expires.toUTCString)){var i;"number"==typeof c.expires?(i=new Date,i.setTime(i.getTime()+24*c.expires*60*60*1e3)):i=c.expires,h="; expires="+i.toUTCString()}var j=c.path?"; path="+c.path:"",k=c.domain?"; domain="+c.domain:"",l=c.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(b),h,j,k,l].join("")},define("jqcookie",["jquery"],function(){}),define("helper",["underscore","jqcookie"],function(a){return{urls:{subregionOrigin:"region/%(parentCode)s/subRegions/origins?level=%(level)s",subregionDest:"region/%(parentCode)s/subRegions/dests?originCode=%(originCode)s&level=%(level)s"},getSiteLocation:function(){return a.has(window,"_cmsConfig")?window._cmsConfig.region:"cn"},getSiteLanguage:function(){return a.has(window,"_cmsConfig")?window._cmsConfig.language:"sc"},getParsleyLanguage:function(){var a=this.getSiteLanguage();return"sc"==a?a="zh_cn":"tc"==a&&(a="zh_tw"),a},getStandardLocale:function(){var a={sc:"zh-CN",en:"en-US",tc:"zh-tw",ko:"ko",ja:"ja",ru:"ru",vi:"vn",th:"th",ge:"de",fr:"fr"};return a[this.getSiteLanguage().toLowerCase()]},assemabledLocationAndLanguageQureyString:function(){return _p("?lang=%s&region=%s",this.getSiteLanguage(),this.getSiteLocation())},getOrderRemoteUrl:function(b){return a.has(window,"_cmsConfigOrder")?window._cmsConfigOrder.orderRemoteUrl+b:"http://istg.sf-express.com/"+b},getUcmpOrderRemoteUrl:function(b){return a.has(window,"_cmsConfigOrder")?window._cmsConfigOrder.ucmpOrderRemoteUrl+b:"http://10.202.88.26:80/"+b;
},switchToUcmpOrderInterface:function(){return!0},getRESTfulDomain:function(b){if(!a.has(window,"_cmsConfig"))return"/sf-service-owf-web/service/"+b;var c=window._cmsConfig.dynamicServerContext;return"/"!==a(c).last()&&(c+="/"),c+b},getImportAndExportPicture:function(){return a.has(window,"_cmsConfig")?window._cmsConfig.resourcePath+"images/guanwu/":"http://www.sf-express.com/resource/images/guanwu/"},getWeiXinQRCodeURL:function(a){return"https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket="+a},getQueryStrings:function(){if(0===location.search.slice(1).length)return null;var b={},c=location.search.slice(1).split("&");return a.each(c,function(a){var c=a.split("=");b[c[0]]=decodeURIComponent(c[1])||""}),b},switchRegionAndLanguage:function(b,c){if(a.has(window,"_cmsConfig")){var d=window.location.href,e=window._cmsConfig.language,f=window._cmsConfig.region;if(f!=b){var g=d.indexOf("/"+f+"/"+e+"/");d=d.substring(0,g),window.location.href=d+"/"+b+"/"+c+"/"}else window.location.href=d.replace("/"+f+"/"+e+"/","/"+b+"/"+c+"/")}},getDynamicURLWithContext:function(a){return this.getURLWithContext("/dynamic_function"+a)},getURLWithContext:function(b){var c="/";if(a.has(window,"_cmsConfig")){var d=window._cmsConfig;c=d.root[d.region][d.language]+"/"}return"/"===b[0]&&(b=b.substring(1)),c+b},getResourceURL:function(b){return a.has(window,"_cmsConfig")?window._cmsConfig.resourcePath+b:b},validIdcardNumber:function(a){return/^\d{17}[0-9|x|X]/.test(a)},isValidPhoneNumber:function(a){var b=/^(?:[\(]?[\+]?[\d]+[\)]?)((?:\s|-)?[\(]?[\d]*[\)]?)*$/;return b.test(a)},isValidMailAddr:function(a){var b=/^([\w-]+[\.\w-]*)@([\w-])+([\.\w-])+/;return b.test(a)},parseChineseChar:function(a){return encodeURIComponent(a).replace(/%[A-F\d]{2}/g,"U")},openWin:function(a){window.open(Helper.getDynamicURLWithContext("/waybill/index.html#search/bill-number/"+a))},chineseCharSubString:function(a,b,c){for(var d=0,e="",f=/[^\x00-\xff]/g,g="",h=a.replace(f,"**").length,i=0;h>i&&(g=a.charAt(i).toString(),null!=g.match(f)?d+=2:d++,!(d>b));i++)e+=g;return c&&h>b&&(e+="..."),e},setArrayToCookie:function(a,b,c){c&&b.length>c&&(b=b.splice(0,c)),$.cookie(a,b.join(","),{path:"/",expires:92})},getArrayFromCookie:function(a){return null==$.cookie(a)?[]:$.cookie(a).split(",")},getT13_virtualAddressCodeList:function(){return["MOW01A","ARN01S","OSL01S","HEL01S","TLL01S","KBP01S","VNO01S","RIX01S","MSQ01S","WAW01S"]},getT14_virtualAddressCodeList:function(){return["MOW01A","ARN01S","OSL01S","HEL01S","TLL01S","KBP01S"]},imgVrfCodePC:function(a,b,c){if($(".imgVrfCodePanel").length<1){var d='<style class="imgVrfStyle">.imgVrfCodePanel{position:fixed; left:50%; top:50%; width:280px; padding:0 30px 15px 30px; transform:translate(-50%,-50%); background-color:#fff; border:rgba(0,0,0,.7) solid 2px; box-shadow:0 10px 20px rgba(0,0,0,.5); z-index:99998;}.imgVrfCodePanel h2{background-color:#f0f0f0; margin:-30px -30px 0; line-height:40px; text-indent:30px; font-size:16px; font-weight:bold; position:relative;}.imgVrfCodePanel h2 .closeBtn{background:none; border:none; font-size:40px; line-height:30px; width:30px; height:30px; text-align:center; position:absolute; top:0; right:10px; color:#666}.imgVrfCodePic{margin:10px auto; display:block}.imgVrfCodePanel p.tip{color:#c00; margin-top:10px; text-align:center}.imgVrfCodeIpt{border:#999 solid 1px; text-indent:6px; margin:0 auto; display:block; width:180px; line-height:30px}.imgVrfCodeSubmit{display:block; width:100%; background-color:#c00; color:#fff; font-size:14px; line-height:30px; border:none; margin-top:10px}@media screen and(-ms-high-contrast:active),(-ms-high-contrast:none) {.imgVrfCodePanel h2 .closeBtn{right:40px;}.imgVrfCodeIpt{height:30px;}</style>';$("body").prepend(d);var e=$('<div class="imgVrfCodePanel"></div>'),f=$("<h2>"+_l("图形验证码")+"</h2>"),g=$('<button type="button" class="closeBtn">&times;</button>'),h=$('<img class="imgVrfCodePic" src="#" width="200" height="50" >'),i=$('<p class="tip" style="display:none"></p>'),j=$('<input type="text" class="imgVrfCodeIpt" placeholder="'+_l("请输入图片中的验证码")+'">'),k=$('<button class="imgVrfCodeSubmit" type="button">'+_l("确定")+"</button>"),l=$('<div style="position:fixed; top:0; left:0; bottom:0; right:0; background:#000; filter:alpha(opacity=50); opacity:.5; z-index:9997" class="maskDiv"></div>');l.appendTo("body").one("click",function(){m()});var m=function(){l.remove(),e.remove(),$(".imgVrfStyle").remove()};e.appendTo("body"),e.append(f).append(h).append(i).append(j).append(k),f.append(g);var n=this,o=n.getRESTfulDomain("captcha/sms?force=true&time="+(new Date).getTime());h.attr("src",o),g.on("click",function(){m()}),h.on("click",function(){var a=n.getRESTfulDomain("captcha/sms?force=true&time="+(new Date).getTime());$(".imgVrfCodePic").attr("src",a)}),k.on("click",function(){var d=$(".imgVrfCodeIpt"),e=/^[A-Za-z0-9]{5}$/;if(e.test(d.val())){"order-service"!=$(a.$el[0]).attr("class")&&m();var f=d.val();c(a,b,f)}else d.val(""),i.show().text(_l("请输入正确的验证码"))})}}}}),define("views/goDynamic",["backbone","helper"],function(a,b){return a.View.extend({events:{"click .go-dynamic":"locationChange","click .go-root":"goRoot"},goRoot:function(a){a.preventDefault(),location.href=b.getURLWithContext("/")},locationChange:function(a){a.preventDefault();var c=$(a.currentTarget);if(c.data("with-return-page"))return"_blank"===c.attr("target")?window.open(c.attr("href")+"?return-page="+escape(location)):location.href=c.attr("href")+"?return-page="+escape(location),!1;if(c.data("go-back")){var d=b.getQueryStrings();return d&&d["return-page"]?location.href=d["return-page"]:location.href=c.attr("href"),!1}c.data("new-window")?window.open(b.getDynamicURLWithContext(c.data("location"))):location.href=b.getDynamicURLWithContext(c.data("location"))}})}),define("views/countDownButton",["backbone"],function(a){return a.View.extend({events:{"start .count-down-button":"startCountDown","reset .count-down-button":"resetCountDown","shouldBeActive .count-down-button":"changeShouldActiveFlag"},changeShouldActiveFlag:function(a,b){var c=$(a.currentTarget);c.data("should-deactivate",!Boolean(b)),c.data("is-loading")||c.toggleClass("disabled",!b)},startCountDown:function(a){var b=$(a.currentTarget);b.data("origin-title",b.text());var c=b.data("count-down-time")||30,d=b.data("count-down-title")||"reload in %d";b.toggleClass("disabled",!0),b.text(_p(d,c)),b.data("is-loading",!0);var e=this;this.countDownTimer=window.setInterval(function(){c-=1,c?b.text(_p(d,c)):e.resetCountDown(a)},1e3)},resetCountDown:function(a){var b=$(a.currentTarget);b.toggleClass("disabled",b.data("should-deactivate")),b.text(b.data("origin-title")),this.countDownTimer&&window.clearInterval(this.countDownTimer),b.data("is-loading",!1)}})}),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.7",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a("#"===f?[]:f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d)};b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.is("input")?"val":"html",e=c.data();a+="Text",e.resetText||c.data("resetText",c[d]()),c[d](e[a]||this.options[a]),setTimeout(function(){c.toggleClass(b,"loadingText"==a)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons"]');if(a.length){var b=this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change");"radio"===b.prop("type")&&a.find(".active").removeClass("active")}this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(jQuery),+function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},b.prototype.to=function(b){var c=this,d=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},b.prototype.next=function(){return this.sliding?void 0:this.slide("next")},b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},b.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}this.sliding=!0,f&&this.pause();var j=a.Event("slide.bs.carousel",{relatedTarget:e[0],direction:g});if(!e.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(j),j.isDefaultPrevented())return;e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(j),j.isDefaultPrevented())return;d.fadeOut(600,function(){a(this).removeClass("active").removeAttr("style")}),e.fadeIn(1e3,function(){a(this).addClass("active").removeAttr("style"),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid")},0)})}return f&&this.cycle(),this}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("bs.carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d=a(this),e=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),d.data()),g=d.attr("data-slide-to");g&&(f.interval=!1),e.carousel(f),(g=d.attr("data-slide-to"))&&e.data("bs.carousel").to(g),b.preventDefault()}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.7",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.7",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),c.isInStateTrue()?void 0:(clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide())},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=window.SVGElement&&c instanceof window.SVGElement,g=d?{top:0,left:0}:f?null:b.offset(),h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){
var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null,a.$element=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.7",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.7",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.7",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery),define("bootstrap",["jquery"],function(a){return function(){var b;return b||a.bootstrap}}(this)),define("models/acceptanceCriteria",["backbone","helper"],function(a,b){return a.Model.extend({fetchDetailsFromCmsp:function(c){var d=this;a.ajax({type:"GET",url:b.getRESTfulDomain(_p("acceptance/criteria?srcCountryCode=%s&desCountryCode=%s&goodsName=%s&currentPage=%s&pageSize=%s",encodeURIComponent(c.srcCode),encodeURIComponent(c.desCode),encodeURIComponent(c.goodsName),c.currentPage,c.pageSize)),error:function(a,b){404===b.status?d.trigger("notFound"):d.trigger("networkError")},success:function(a,b){d.trigger("fetchSuccess",a)}})},fetchDetailsFromHHT:function(c){var d=this;a.ajax({type:"GET",url:b.getRESTfulDomain(_p("acceptance/chmtcriteria?country=%s&goodsName=%s&currentPage=%s&pageSize=%s",encodeURIComponent(c.country),encodeURIComponent(c.goodsName),c.currentPage,c.pageSize)),error:function(a,b){404===b.status?d.trigger("notFound"):d.trigger("networkError")},success:function(a,b){d.trigger("fetchSuccess",a)}})},fetchOrigins:function(){var c=this;a.ajax({type:"GET",url:b.getRESTfulDomain("acceptance/srcCountry"),error:function(a,b){404===b.status?c.trigger("notFound"):c.trigger("networkError")},success:function(a,b){c.trigger("fetchSuccess",a)}})},fetchDests:function(c){var d=this;a.ajax({type:"GET",url:b.getRESTfulDomain(_p("acceptance/destCountry?country=%s",encodeURIComponent(c))),error:function(a,b){404===b.status?d.trigger("notFound"):d.trigger("networkError")},success:function(a,b){d.trigger("fetchSuccess",a)}})}})}),define("templates",[],function(){return this.JST=this.JST||{},this.JST.acceptCriteriaOther=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+="<!--收寄标准查询结果的模板文件 国际 -->",_.isEmpty(results)?__p+='<tr><td colspan="8">'+(null==(__t=_l("请精简“物品名称”关键字进行检索。"))?"":__t)+"</td><tr>":_.each(results,function(a,b){__p+="<tr><td>"+(null==(__t=a.goodsBigType)?"":__t)+"</td><td>"+(null==(__t=a.goodsName)?"":__t)+"</td><td>"+(null==(__t="1"==a.receiptType?_l("允许收寄"):"2"==a.receiptType?_l("禁止收寄"):_l("限制收寄"))?"":__t)+"</td><td>"+(null==(__t=a.remark)?"":__t)+"</td></tr>"});return __p},this.JST.acceptCriteriaResultCN=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+="<!--收寄标准查询结果的模板文件 中国大陆 -->",_.isEmpty(results)?__p+='<tr><td colspan="8">请精简“物品名称”关键字进行检索。</td><tr>':_.each(results,function(a,b){__p+="<tr><td>"+(null==(__t=a.goodsBigType)?"":__t)+"</td><td>"+(null==(__t=a.goodsName)?"":__t)+"</td><td>"+(null==(__t=a.landTransport)?"":__t)+"</td><td>"+(null==(__t=a.flightTransport)?"":__t)+"</td><td>"+(null==(__t=a.remark)?"":__t)+"</td></tr>"});return __p},this.JST.acceptCriteriaResultHMT=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+="<!--收寄标准查询结果的模板文件 港澳台同城 -->",_.isEmpty(results)?__p+='<tr><td colspan="8">请精简“物品名称”关键字进行检索。</td><tr>':_.each(results,function(a,b){__p+="<tr><td>"+(null==(__t=a.goodsBigType)?"":__t)+"</td><td>"+(null==(__t=a.goodsName)?"":__t)+"</td><td>"+(null==(__t=a.landTransport)?"":__t)+"</td><td>"+(null==(__t=a.remark)?"":__t)+"</td></tr>"});return __p},this.JST.addressBook=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<form class="form-horizontal search-form"  onkeydown="if(event.keyCode==13){return false;}"><div class="form-group"><div class="col-xs-5"><input type="text" class="form-control search-input" data-parsley-pattern-message="'+(null==(__t=_l("该输入框不能包含特殊字符"))?"":__t)+'" data-parsley-pattern="^[\\u4e00-\\u9fa5|\\w]+$" placeholder="'+(null==(__t=_l("请输入姓名/电话查询"))?"":__t)+'"></div><div class="col-xs-7"><button type="button" class="primary-button black search">'+(null==(__t=_l("搜索"))?"":__t)+'</button><button type="button" class="primary-button black add">'+(null==(__t=_l("新增地址"))?"":__t)+'</button></div></div></form><table class="address table table-hover"><thead><tr><th style="width:33px"></th><th style="width:66px">'+(null==(__t=_l("姓名"))?"":__t)+'</th><th style="width:194px">'+(null==(__t=_l("公司名称"))?"":__t)+'</th><th style="width:115px">'+(null==(__t=_l("联系方式"))?"":__t)+'</th><th style="width:453px">'+(null==(__t=_l("详细地址"))?"":__t)+'</th><th style="width:92px">'+(null==(__t=_l("操作"))?"":__t)+'</th></tr></thead></table><dl class="address_loading"><dt><img src="'+(null==(__t=loadingImg)?"":__t)+'" alt=""></dt><dd><h5>'+(null==(__t=_l("正在加载..."))?"":__t)+'</h5></dd></dl><dl class="address_networkErr" style="display: none"><dt><span class="aicon-28 img"></span></dt><dd><h5>'+(null==(__t=_l("加载异常，请刷新重试"))?"":__t)+'</h5></dd><dd><button type="button" class="primary-button try-again">'+(null==(__t=_l("重试"))?"":__t)+'</button></dd></dl><dl class="address_fetch_null" style="display: none"><dt><span class="aicon-emptybox img"></span></dt><dd><h5>'+(null==(__t=_l("地址为空"))?"":__t)+"</h5></dd><dd><p>"+(null==(__t=_l("您可先添加一条地址信息"))?"":__t)+'</p></dd></dl><dl class="address_search_null" style="display: none"><dt><span class="aicon-emptylist img"></span></dt><dd><p>'+(null==(__t=_l("暂时木有内容呀..."))?"":__t)+"</p></dd></dl>";return __p},this.JST.addressBookaddOrmod=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<form class="form-horizontal address-form"><div class="form-group"><label class="control-label col-xs-3" for="add-name">'+(null==(__t=_l("姓名"))?"":__t)+':</label><div class="col-xs-6"><input type="text" class="form-control" id="add-name" name="add-name" placeholder="'+(null==(__t=_l("请填写联系人姓名"))?"":__t)+'"value="'+(null==(__t=addressBook?addressBook.contactName:"")?"":__t)+'"data-parsley-pattern-message="'+(null==(__t=_l("该输入框不能包含特殊字符"))?"":__t)+'" data-parsley-pattern="^[\\u4e00-\\u9fa5|\\w]+$" data-parsley-required></div></div><div class="form-group"><label class="control-label col-xs-3" for="add-mobile">'+(null==(__t=_l("手机号码"))?"":__t)+':</label><div class="col-xs-6"><input type="text" class="form-control" id="add-mobile" name="add-mobile" placeholder="'+(null==(__t=_l("请填写手机号码"))?"":__t)+'"value="'+(null==(__t=addressBook?addressBook.contactTel:"")?"":__t)+'"data-parsley-required data-parsley-trigger="change" data-parsley-pattern-message="'+(null==(__t=_l("您输入的手机号码格式不正确，请重新输入。"))?"":__t)+'" data-parsley-pattern="^(1\\d{10})$"></div></div><div class="form-group"><label class="control-label col-xs-3" for="add-company">'+(null==(__t=_l("公司名称"))?"":__t)+':</label><div class="col-xs-6"><input type="text" class="form-control" id="add-company" name="add-company" placeholder="'+(null==(__t=_l("请填写公司名称"))?"":__t)+'"value="'+(null==(__t=addressBook?addressBook.companyName:"")?"":__t)+'"data-parsley-maxlength="20"></div><label class="control-label col-xs-3" style="text-align: left">('+(null==(__t=_l("非必填"))?"":__t)+')</label></div><div class="form-group"><label class="control-label col-xs-3" for="add-phone">'+(null==(__t=_l("固话"))?"":__t)+':</label><div class="col-xs-6"><input type="text" class="form-control" id="add-phone" name="add-phone" placeholder="'+(null==(__t=_l("请填写固话号码"))?"":__t)+'"value="'+(null==(__t=addressBook?addressBook.contactPhone:"")?"":__t)+'"data-parsley-trigger="change" data-parsley-pattern-message="'+(null==(__t=_l("您输入的固话号码格式不正确，请重新输入。"))?"":__t)+'" data-parsley-pattern="^((\\d{7,8})|(0\\d{2,3})-?(\\d{7,8})|(0\\d{2,3})-?(\\d{7,8})-?(\\d{0,7})|(\\d{7,8})-?(\\d{0,7}))$"></div><label class="control-label col-xs-3" style="text-align: left">('+(null==(__t=_l("非必填"))?"":__t)+')</label></div><div class="form-group"><label class="control-label col-xs-3" for="add-address">'+(null==(__t=_l("省市区"))?"":__t)+':</label><div class="col-xs-9 add-address-container"><div class="detail-location-input" data-max-level="4" data-hide-area-tab="true" data-do-restore-state="false" data-only-current-tab="true"><input type="text" class="form-control readonly" data-parsley-required readonly id="add-address" name="add-address" style="border:1px solid #ccc"data-parsley-trigger="change"data-parsley-errors-container=".add-address-container"placeholder="'+(null==(__t=_l("请选择所在地区，例如：广东省－深圳市－福田区"))?"":__t)+'"value="'+(null==(__t=addressBook?_.uniq(_.compact([addressBook.province,addressBook.city,addressBook.county]),!0).join("-"):"")?"":__t)+'"></div></div></div><div class="form-group"><label class="control-label col-xs-3" for="add-detailaddress">'+(null==(__t=_l("详细地址"))?"":__t)+':</label><div class="col-xs-9"><input type="text" class="form-control" id="add-detailaddress" name="add-detailaddress" data-parsley-required placeholder="'+(null==(__t=_l("请填写所在街道以及详细地址"))?"":__t)+'"value="'+(null==(__t=addressBook?addressBook.address:"")?"":__t)+'"><div class="hideTab" style="display:none;position: fixed;width: 100%;height: 100%;left: 0;top: 0;"></div><div class="autocompleteResult tab"  style="display:none;width:calc(100% - 30px)"></div></div></div><div class="form-group save-fail" style="display: none"><div class="col-xs-9 col-xs-offset-3"><p class="error">'+(null==(__t=_l("保存失败，请重试"))?"":__t)+'</p></div></div><div style="text-align: center"><button type="button" class="primary-button save-address" data-loading-text="'+(null==(__t=_l("保存中..."))?"":__t)+'" data-addressid="'+(null==(__t=addressBook?addressBook.addressId:"")?"":__t)+'">'+(null==(__t=_l("保存"))?"":__t)+"</button></div></form>";return __p},this.JST.addressSuccessBody=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<tbody class="address_success" style="border-bottom: 3px solid #EDEDED;">',_.each(addressBookList,function(a){__p+='<tr data-addId="'+(null==(__t=a.addressId)?"":__t)+'"><td><input type="radio" name="address" class="address-radio"></td><td>'+(null==(__t=a.contactName)?"":__t)+"</td><td>"+(null==(__t=a.companyName?a.companyName:_l("无"))?"":__t)+"</td><td>"+(null==(__t=_.compact([a.contactTel,a.contactPhone]).join("/<br>"))?"":__t)+"</td><td>"+(null==(__t=_.uniq(_.compact([a.province,a.city,a.county,a.address]),!0).join(""))?"":__t)+'</td><td class="option"><a href="#" class="modify">'+(null==(__t=_l("修改"))?"":__t)+'</a>/<a href="#" class="delete">'+(null==(__t=_l("删除"))?"":__t)+"</a></td></tr>"}),__p+='</tbody><tfoot class="address_success"><tr><td colspan="6"><p class="error err-select-tip" style="display: none">'+(null==(__t=_l("请选择其中的一条数据"))?"":__t)+'</p></td></tr><tr><td colspan="6"><div class="bootstrap-pagination"><ul class="pagination"></ul></div></td></tr><tr><td colspan="6"><p style="text-align: center"><button type="button" class="primary-button select-confirm">'+(null==(__t=_l("确定"))?"":__t)+"</button></p></td></tr></tfoot>";return __p},this.JST.addtionalService=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)_.each(additionalServices,function(a){__p+='<img src="'+(null==(__t=a.icon)?"":__t)+'" alt="'+(null==(__t=a.name)?"":__t)+'" class="additional-service-icon" />'+(null==(__t=_l("支持"))?"":__t)+(null==(__t=a.name)?"":__t)});return __p},this.JST.areas=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)_.each(areas,function(a){__p+="<span ",currentArea.code==a.code&&(__p+=' class="current" '),__p+=' ><a href="#" data-code="'+(null==(__t=a.code)?"":__t)+'">'+(null==(__t=a.name)?"":__t)+"</a></span>"});return __p},this.JST.autocompleteCity=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)_.each(results,function(a,b){__p+='<div><a style="font-size: 13px; cursor: pointer; padding: 5px;" >'+(null==(__t=a.name)?"":__t)+'</a><span style="color:#C1C1C1;">'+(null==(__t=a.detail_addr)?"":__t)+"</span></div>"});return __p},this.JST.briefOrder=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="<h2>"+(null==(__t=_l("预约单信息"))?"":__t)+'</h2><div class="row"><div class="col-xs-4"><dl><dt><span class="big">'+(null==(__t="sc"==Helper.getSiteLanguage()?"寄":"F")?"":__t)+"</span><p>"+(null==(__t=data.orderAddress.contactName)?"":__t)+"</p><p>"+(null==(__t=data.orderAddress.mobile||data.orderAddress.phone)?"":__t)+"</p></dt><dd>"+(null==(__t=_.uniq(_.compact([data.orderAddress.provinceName,data.orderAddress.cityName,data.orderAddress.countyName]),!0).join(" "))?"":__t)+"</dd><dd>"+(null==(__t=data.orderAddress.address)?"":__t)+'</dd></dl></div><div class="col-xs-4"><p class="aicon-arrow-right"></p></div><div class="col-xs-4"><dl><dt><span class="big receiver">'+(null==(__t="sc"==Helper.getSiteLanguage()?"收":"T")?"":__t)+"</span><p>"+(null==(__t=data.orderWaybillVO[0].contactName)?"":__t)+"</p><p>"+(null==(__t=data.orderWaybillVO[0].mobile||data.orderWaybillVO[0].phone)?"":__t)+"</p></dt><dd>"+(null==(__t=_.uniq(_.compact([data.orderWaybillVO[0].provinceName,data.orderWaybillVO[0].cityName,data.orderWaybillVO[0].countyName]),!0).join(" "))?"":__t)+"</dd><dd>"+(null==(__t=data.orderWaybillVO[0].address)?"":__t)+"</dd></dl></div></div><table><tr><td>"+(null==(__t=_l("包裹类型"))?"":__t)+" :"+(null==(__t=data.orderWaybillVO[0].cargoName)?"":__t)+"</td><td>"+(null==(__t=_l("物品重量"))?"":__t)+" :"+(null==(__t=data.orders.weight)?"":__t)+" kg</td><td>"+(null==(__t=_l("产品类型"))?"":__t)+" :"+(null==(__t="T1"==data.orderWaybillVO[0].prodType||"T104"==data.orderWaybillVO[0].prodType?_l("顺丰即日"):"T8"==data.orderWaybillVO[0].prodType||"T801"==data.orderWaybillVO[0].prodType?_l("顺丰次晨"):"T4"==data.orderWaybillVO[0].prodType?_l("顺丰标快"):_l("顺丰特惠"))?"":__t)+"</td></tr><tr><td>"+(null==(__t=_l("付款方式"))?"":__t)+" :"+(null==(__t=1==data.orderWaybillVO[0].payType?_l("寄付现结"):_l("到付"))?"":__t)+"</td><td>"+(null==(__t=_l("保价金额"))?"":__t)+" :"+(null==(__t=1==data.orderWaybillVO[0].isSecureValue?data.orderWaybillVO[0].secureValue+_l("元"):_l("未保价"))?"":__t)+" </td><td>"+(null==(__t=_l("下单时间"))?"":__t)+" :"+(null==(__t=data.orders.reserveTime)?"":__t)+"</td></tr></table>";return __p},this.JST.buttonGroupTempletas=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)_.each(items,function(a){__p+='<button type="button" class="btn btn-default" style="width: '+(null==(__t=Math.round(100/items.length))?"":__t)+'%" data-code="'+(null==(__t=a.get("code"))?"":__t)+'">'+(null==(__t=a.get("name"))?"":__t)+"</button>"});return __p},this.JST.cities=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)_.each(cities,function(a){__p+='<span><a data-code="'+(null==(__t=a.code)?"":__t)+'" href="#">'+(null==(__t=a.name.substr(0,4))?"":__t)+"</a></span>"});return __p},this.JST.claims=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<p>请确认您的理赔登记信息</p><div style="overflow: hidden"><table class="table table-bordered col-xs-7"><tr><td class="cel-key col-xs-5">运单号</td><td class="cel-value">'+(null==(__t=data.carryId)?"":__t)+'</td></tr><tr><td class="cel-key">赔款金额</td><td class="cel-value">'+(null==(__t=data.endClaimMoney)?"":__t)+'</td></tr><tr><td class="cel-key">转账金额</td><td class="cel-value">'+(null==(__t=data.compensateAmt)?"":__t)+'</td></tr><tr><td class="cel-key">收款方银行</td><td class="cel-value">'+(null==(__t=data.bankCodeTxt)?"":__t)+'</td></tr><tr><td class="cel-key">收款方开户行分/支行</td><td class="cel-value">'+(null==(__t=data.bankName)?"":__t)+'</td></tr><tr><td class="cel-key">收款方户</td><td class="cel-value">'+(null==(__t=data.countName)?"":__t)+'</td></tr><tr><td class="cel-key">收款方账号</td><td class="cel-value">'+(null==(__t=data.customerBankCard)?"":__t)+'</td></tr><tr><td class="cel-key">收款方地址</td><td class="cel-value">'+(null==(__t=data.countProvince)?"":__t)+'</td></tr><tr><td class="cel-key">是否对公账号</td><td class="cel-value">'+(null==(__t="01"==data.ctgyPurp?"是":"否")?"":__t)+'</td></tr></table></div><div><button type="button" class="primary-button" id="confirmBtn">确定</button>&nbsp;&nbsp;&nbsp;<button type="button" class="primary-button modify" id="backModifyBtn">修改</button></div>';return __p},this.JST.consignResult=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<table class="table table-bordered"><thead><tr><th>'+(null==(__t=_l("运单号"))?"":__t)+"</th><th>"+(null==(__t=_l("海关货运编号(CCRN)"))?"":__t)+"</th><th>"+(null==(__t=_l("主提单号"))?"":__t)+"</th><th>"+(null==(__t=_l("航班号"))?"":__t)+"</th><th>"+(null==(__t=_l("香港车牌编号"))?"":__t)+"</th><th>"+(null==(__t=_l("离港/到港日期"))?"":__t)+"</th><th>"+(null==(__t=_l("卸货港口"))?"":__t)+"</th></tr></thead><tbody>",_.each(codes,function(a,b){_.each(results,function(c,d){b==d&&(null==c.get("bno")?(1==type&&(__p+="<td>"+(null==(__t=a)?"":__t)+"</td><td>-</td>"),2==type&&(__p+="<td>-</td><td>"+(null==(__t=a)?"":__t)+"</td>"),__p+="<td colspan=5>"+(null==(__t=_l("很抱歉！您搜寻的数据不存在。如有任何查询，请致电客户服务热线 (852) 273 00 273"))?"":__t)+"</td></tr>"):__p+="<tr><td>"+(null==(__t=c.get("bno"))?"":__t)+"</td><!--運單號--><td>"+(null==(__t=c.get("ccrn"))?"":__t)+"</td><!--海關貨物編號（CCRN）--><td>"+(null==(__t=c.get("awbNo"))?"":__t)+"</td><!--主提单号 --><td>"+(null==(__t=c.get("flightNo"))?"":__t)+"</td><!--航班号--><td>"+(null==(__t=c.get("vrn"))?"":__t)+"</td><!--香港车牌编号--><td>"+(null==(__t=c.get("scheDate"))?"":__t)+"</td><!--离岗到港日期--><td>"+(null==(__t=c.get("port"))?"":__t)+"</td><!--卸货港口--></tr>")})}),__p+="</tbody></table>";return __p},this.JST.deleteWarnTip=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<dl><dt><span class="aicon-ask img"></span></dt><dd><h5>'+(null==(__t=_l("您真的要删除")+tel+"("+name+")"+_l("这个地址吗"))?"":__t)+'？</h5></dd><dd><p class="error delete-fail-tip">'+(null==(__t=_l("删除失败"))?"":__t)+'</p></dd><dd><button type="button" class="primary-button black delete-cancle">'+(null==(__t=_l("取消"))?"":__t)+'</button><button type="button" class="primary-button black delete-yes" data-addressid="'+(null==(__t=addressId)?"":__t)+'" data-loading-text="'+(null==(__t=_l("删除中..."))?"":__t)+'">'+(null==(__t=_l("确定"))?"":__t)+"</button></dd></dl>";return __p},this.JST.detailedDatePicker=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="";return __p},this.JST.detailedDateTimePicker=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<ul class="date-time-tabs"><li class="date '+(null==(__t=showTimePicker?"":"current")?"":__t)+'">'+(null==(__t=_l("日期"))?"":__t)+'</li><li class="time '+(null==(__t=showTimePicker?"current":"")?"":__t)+'">'+(null==(__t=_l("时间"))?"":__t)+"</li></ul>",showTimePicker?(__p+='<div class="detail-time-picker"><div class="indicator top disabled"><span class="sfi sfi-chevron-up"></span></div><div class="picker-wrapper"><ul class="times">',_.each(times,function(a){__p+="<li "+(null==(__t=a===selectedTime?'class="current"':"")?"":__t)+" >"+(null==(__t=a)?"":__t)+"</li>"}),__p+='</ul></div><div class="indicator bottom"><span class="sfi sfi-chevron-down"></span></div></div>'):__p+='<div class= "detail-date-picker"></div>';return __p},this.JST.detailedLocationPicker=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)if(areaTabs.showAreaTab&&(__p+='<ul class="area-level-tabs">',areaTabs.showMainLand&&(__p+='<li data-tab="main-land" '+(null==(__t="main-land"===areaTabs.currentTab?'class="current"':"")?"":__t)+">"+(null==(__t=_l("大陆"))?"":__t)+"</li>"),areaTabs.showHKMCTW&&(__p+='<li data-tab="hk-mc-tw" '+(null==(__t="hk-mc-tw"===areaTabs.currentTab?'class="current"':"")?"":__t)+">"+(null==(__t=_l("港澳台"))?"":__t)+"</li>"),areaTabs.showGlobe&&(__p+='<li data-tab="international" '+(null==(__t="international"===areaTabs.currentTab?'class="current"':"")?"":__t)+">"+(null==(__t=_l("国际"))?"":__t)+"</li>"),__p+="</ul>"),__p+='<ul class="region-level-tabs">',_.each(regionTabs,function(a){__p+='<li data-code="'+(null==(__t=a.parentRegion.code)?"":__t)+'" class="'+(null==(__t=a.selected?"current":"")?"":__t)+" "+(null==(__t=a.selectedRegion&&!a.selected?"has-selection":"")?"":__t)+'" style="width: '+(null==(__t=Math.min(100/regionTabs.length,33))?"":__t)+'%" title="'+(null==(__t=a.selectedRegion?a.selectedRegion.name:"")?"":__t)+'">',__p+=a.alwaysDisplayName?null==(__t=a.displayName)?"":__t:null==(__t=a.selectedRegion&&a.selectedRegion.name?a.selectedRegion.name:a.displayName||_l("请选择"))?"":__t,__p+="</li>"}),__p+="</ul>",isLoading)__p+='<ul class="regions"><p class="loading-text">'+(null==(__t=_l("正在加载地区数据..."))?"":__t)+"</p></ul>";else if(errorLoading)__p+='<ul class="regions"><p class="error-loading">'+(null==(__t=_l("抱歉，加载数据地区数据失败。"))?"":__t)+"</p></ul>";else if(showNotAvailable)__p+='<ul class="regions"><p class="error-loading">'+(null==(__t=_l("该地区暂时没有开通该项业务"))?"":__t)+"</p></ul>";else{if(__p+='<ul class="regions">',_.each(availableRegions,function(a,b){b%pageLimit===0&&(__p+='<div class="regions-page '+(null==(__t=b?"":"current")?"":__t)+'" data-page="'+(null==(__t=b/pageLimit+1)?"":__t)+'">'),__p+="<li "+(null==(__t=a.get("code")===currentSelectedRegionCode?'class="current"':"")?"":__t)+'><a href="javascript:void(0)" data-level="'+(null==(__t=a.get("level"))?"":__t)+'" data-country-code="'+(null==(__t=a.get("countryCode"))?"":__t)+'"data-code="'+(null==(__t=a.get("code"))?"":__t)+'" data-rate-code="'+(null==(__t=a.get("rateCode"))?"":__t)+'" data-province-code="'+(null==(__t=a.get("provinceCode"))?"":__t)+'"data-province-rate-code="'+(null==(__t=a.get("provinceRateCode"))?"":__t)+'" data-province-name="'+(null==(__t=a.get("provinceName"))?"":__t)+'"title="'+(null==(__t=a.get("name"))?"":__t)+'">'+(null==(__t=a.get("name"))?"":__t)+"</a></li>",b%pageLimit===pageLimit-1&&(__p+="</div>")}),availableRegions.length%pageLimit!=0&&(__p+="</div>"),__p+="</ul>",availableRegions.length>pageLimit){for(__p+='<ul class="pages-switch">',i=0;i<availableRegions.length/pageLimit;i++)__p+="<li "+(null==(__t=i?"":'class="current"')?"":__t)+" >"+(null==(__t=i+1)?"":__t)+"</li>";__p+="</ul>"}shouldShowFussySelection&&(__p+='<p><a class="hide-picker" href="＃" onclick="return false;">'+(null==(__t=_l("不清楚具体地名?"))?"":__t)+"</a></p>"),unavailableRegions.length>0&&(__p+='<div class="unavailable-regions"><p><span class="sfi sfi-info-sign"></span><span>'+(null==(__t=_l("未来将会再开通"))?"":__t)+"</span>",__p+=unavailableRegions.length>3?null==(__t=_p(_l("%s等%d个服务地区"),_.map(_.first(unavailableRegions,3),function(a){return a.get("name")}).join("、"),unavailableRegions.length))?"":__t:null==(__t=_.map(unavailableRegions,function(a){
return a.get("name")}).join("、"))?"":__t,__p+="</p></div>")}return __p},this.JST.dropdownAcceptDestCountry=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)dropdownItems.length?_.each(dropdownItems,function(a){__p+='<li><a href="#" onclick="return false;" data-code="'+(null==(__t=a.destCode)?"":__t)+'" data-tip="'+(null==(__t=a.info)?"":__t)+'">'+(null==(__t=a.name)?"":__t)+"</a></li>"}):__p+='<div class="text-center loading-text">'+(null==(__t=_l("正在加载数据..."))?"":__t)+"</div>";return __p},this.JST.dropdownAcceptSrcCountry=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)dropdownItems.length?_.each(dropdownItems,function(a){__p+='<li><a href="#" onclick="return false;" data-code="'+(null==(__t=a.shortName)?"":__t)+'">'+(null==(__t="en"==Helper.getSiteLanguage()||"vi"==Helper.getSiteLanguage()||"th"==Helper.getSiteLanguage()||"ru"==Helper.getSiteLanguage()?a.enName:a.cnName)?"":__t)+"</a></li>"}):__p+='<div class="text-center loading-text">'+(null==(__t=_l("正在加载数据..."))?"":__t)+"</div>";return __p},this.JST.dropdownCity=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)for(var i=0;i<dropdownItems.length;i++)"A"!=dropdownItems[i]&&(__p+='<li><a href="#" onclick="return false;" data-code="'+(null==(__t=dropdownItems[i])?"":__t)+'">'+(null==(__t=dropdownItems[i])?"":__t)+"</a></li>");return __p},this.JST.dropdownRuleTemplates=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)dropdownItems.length?_.each(dropdownItems,function(a){__p+='<li><a href="#" onclick="return false;" data-code="'+(null==(__t=a.code)?"":__t)+'">'+(null==(__t="sc"==Helper.getSiteLanguage()?a.name:"tc"==Helper.getSiteLanguage()?a.tname:a.ename)?"":__t)+"</a></li>"}):__p+='<div class="text-center loading-text">'+(null==(__t=_l("正在加载数据..."))?"":__t)+"</div>";return __p},this.JST.dropdownTemplates=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)dropdownItems.length?_.each(dropdownItems,function(a){__p+='<li><a href="#" onclick="return false;" data-code="'+(null==(__t=a.get("code"))?"":__t)+'">'+(null==(__t=a.get("name"))?"":__t)+"</a></li>"}):__p+='<div class="text-center loading-text">'+(null==(__t=_l("正在加载数据..."))?"":__t)+"</div>";return __p},this.JST.hotline=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj){__p+='<table class="table"><thead><tr><th id="th-region">'+(null==(__t=_l("地区"))?"":__t)+'</th><th id="th-city">'+(null==(__t=_l("城市"))?"":__t)+'</th><th id="th-hotline">'+(null==(__t=_l("应急热线"))?"":__t)+'</th><th id="th-fax">'+(null==(__t=_l("传真"))?"":__t)+"</th></tr></thead><tbody>";for(var pro,len=res.length-1;len>=0;len--)pro=res[len],__p+="<tr><td> "+(null==(__t=pro.province)?"":__t)+"  </td><td> "+(null==(__t=pro.city)?"":__t)+"  </td><td> "+(null==(__t=pro.telephone)?"":__t)+"  </td><td> "+(null==(__t=pro.fax)?"":__t)+"  </td></tr>";__p+="</tbody></table>"}return __p},this.JST.importExportRuleResult=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+="<!--关务进出口规则显示结果的模板文件 -->",_.isEmpty(results)?__p+='<tr><td colspan="8"> No Found </td></tr>':_.each(results,function(a,b){__p+="<tr><td>"+(null==(__t=(pageIndex-1)*pageSize+(b+1))?"":__t)+"</td><td>"+(null==(__t=a.goodCode)?"":__t)+'</td><td style="width: 100px;" title="'+(null==(__t="sc"===Helper.getSiteLanguage()||"tc"===Helper.getSiteLanguage()?a.goodName:a.goodNameEn)?"":__t)+'">'+(null==(__t="sc"===Helper.getSiteLanguage()||"tc"===Helper.getSiteLanguage()?a.goodName:Helper.chineseCharSubString(a.goodNameEn,12,!0))?"":__t)+"</td><!--<td>",__p+="sc"===Helper.getSiteLanguage()||"tc"===Helper.getSiteLanguage()?null==(__t="1"==a.resultType?"允许收寄":"2"==a.resultType?"禁止收寄":"限制收寄")?"":__t:null==(__t="1"==a.resultType?"Permitted":"2"==a.resultType?"Prohibited":"Restricted")?"":__t,__p+='</td>--><td style="position: relative;"><a data-toggle="tooltip" data-trigger="click" data-html="true" data-placement="bottom" title="" href="javascript:;" item-index="'+(null==(__t=b)?"":__t)+'" class="tax-details" >'+(null==(__t=a.taxTotal)?"":__t)+'</a></td><td style="width: 120px;">',_.isEmpty(a.images)?__p+="&nbsp;":_.each(a.images,function(a,b){__p+=(null==(__t=b+1)?"":__t)+':<a image-src="'+(null==(__t=a.imageNameGw)?"":__t)+'" href="javascript:;" class="tax-images">'+(null==(__t=a.imageName)?"":__t)+"</a><br>"}),__p+="</td><!--<td>"+(null==(__t=a.remark)?"":__t)+"</td>--></tr>"});return __p},this.JST.invoicesResult=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<table class="table"><thead><tr><th>'+(null==(__t=_l("运单号码"))?"":__t)+"</th><th>"+(null==(__t=_l("开具日期"))?"":__t)+"</th><th>"+(null==(__t=_l("发票号"))?"":__t)+"</th><th>"+(null==(__t=_l("发票代码"))?"":__t)+"</th><th>"+(null==(__t=_l("金额"))?"":__t)+"</th><th>"+(null==(__t=_l("运单状态"))?"":__t)+"</th><th>"+(null==(__t=_l("发票状态"))?"":__t)+"</th></tr></thead><tbody>",_.each(results,function(a,b){__p+="<tr><td>"+(null==(__t=a.billId)?"":__t)+"</td>",0==b&&(__p+='<td rowspan="'+(null==(__t=results.length)?"":__t)+'">'+(null==(__t=a.date)?"":__t)+'</td><td rowspan="'+(null==(__t=results.length)?"":__t)+'">'+(null==(__t=a.invoiceID)?"":__t)+'</td><td rowspan="'+(null==(__t=results.length)?"":__t)+'">'+(null==(__t=a.code)?"":__t)+'</td><td rowspan="'+(null==(__t=results.length)?"":__t)+'">'+(null==(__t=_p("%.2f",a.amount))?"":__t)+"</td>"),__p+="<td>"+(null==(__t=a.billStatus)?"":__t)+"</td><td>"+(null==(__t=a.status)?"":__t)+"</td></tr>"}),__p+="</tbody></table>";return __p},this.JST.location=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<span class="input-group-addon"><span class="sfi sfi-flag"></span></span><input type="text" class="form-control location-input" placeholder="'+(null==(__t=placeholder)?"":__t)+'"><div class="location-overlay"></div><span class="input-group-addon toggle-location-picker"><span class="sfi sfi-th"></span></span>';return __p},this.JST.locationLiveSearch=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<p data-code="'+(null==(__t=code)?"":__t)+'">'+(null==(__t=name)?"":__t)+"</p>";return __p},this.JST.locationPicker=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<div class="region">',_.each(areas,function(a,b){__p+='<span><a href="#" ',b==currentIndex&&(__p+=' class="current" '),__p+=' data-index="'+(null==(__t=b)?"":__t)+'">'+(null==(__t=region.name)?"":__t)+"</a></span>"}),__p+="</div>";return __p},this.JST.locationQuery=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class="arrow sfi sfi-chevron-right"></div><button class="rate-search primary-button">'+(null==(__t=searchText)?"":__t)+'</button><div class="error"></div>';return __p},this.JST.memberRegist=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class="reg-wrapper"><p>'+(null==(__t=_l("温馨提示：注册会员后才能使用地址簿功能"))?"":__t)+'</p><h4 class="title">'+(null==(__t=_l("顺丰个人会员注册"))?"":__t)+'</h4><form class="form-horizontal"><div class="form-group"><label class="control-label col-xs-6 reg-tel" for="reg-tel"><span class="aicon-mobile"></span>'+(null==(__t=_l("手机号码"))?"":__t)+':</label><div class="col-xs-6" style="margin-top:20px">'+(null==(__t=mobile)?"":__t)+'</div></div><div class="form-group agree center"><input type="checkbox" class="reg-checkbox">'+(null==(__t=_l("我同意"))?"":__t)+'<a href="#" data-toggle="modal" data-target="#service-agreement">《'+(null==(__t=_l("服务协议"))?"":__t)+'》</a></div><div class="form-group center"><button type="button" class="primary-button reg-confirm" data-loading-text="'+(null==(__t=_l("注册中..."))?"":__t)+'" disabled>'+(null==(__t=_l("注册"))?"":__t)+'</button></div><div class="form-group error reg-error center">'+(null==(__t=_l("注册失败"))?"":__t)+'</div></form></div><dl style="display: none" class="reg-success"><dt><span class="aicon-success img"></span></dt><dd><h5>'+(null==(__t=_l("注册成功"))?"":__t)+'</h5></dd><dd><button type="button" class="primary-button reg-success-confirm" data-dismiss="modal">'+(null==(__t=_l("确定"))?"":__t)+"</button></dd></dl>";return __p},this.JST.modal=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<!-- Modal --><div class="modal'+(null==(__t=fade?" fade":"")?"":__t)+'" id='+(null==(__t=id)?"":__t)+' tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel">'+(null==(__t=title)?"":__t)+'</h4></div><div class="modal-body">'+(null==(__t=body)?"":__t)+"</div></div><!-- /.modal-content --></div><!-- /.modal-dialog --></div><!-- /.modal -->";return __p},this.JST.moreWeight=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class="weight-panel toggle-plugins"><div class="arrow"></div><form class="detail-search form-horizontal"><div class="form-group"><div class="row"><label for="weight-value" class="col-sm-3 control-label">'+(null==(__t=_l("快件重量"))?"":__t)+'</label><div class="col-sm-9 input-container input-group"><input placeholder="'+(null==(__t=_l("请输入大于0.1的重量"))?"":__t)+'" id="weight-value" type="text"class="form-control weight-value no-right-border"><span id=\'unitWeight\' class="input-group-addon no-left-border">kg</span></div></div></div><div class="form-group"><div class="description">'+(null==(__t=_l("或输入快件体积进行查询"))?"":__t)+'</div><div class="row"><label for="length-value" class="control-label col-sm-1 locale-fix">'+(null==(__t=_l("长"))?"":__t)+'</label><div class="col-sm-3 input-container locale-fix"><input id="length-value" type="text" class="form-control length-value" placeholder="cm"></div><label for="width-value" class="control-label col-sm-1 locale-fix">'+(null==(__t=_l("宽"))?"":__t)+'</label><div class="col-sm-3 input-container locale-fix"><input id="width-value" type="text" class="form-control width-value" placeholder="cm"></div><label for="length-value" class="control-label col-sm-1 locale-fix">'+(null==(__t=_l("高"))?"":__t)+'</label><div class="col-sm-3 input-container locale-fix"><input id="height-value" type="text" class="form-control height-value" placeholder="cm"></div></div></div><div class="error"></div><div class="text-center"><button class="weight-search primary-button disabled">'+(null==(__t=_l("计算"))?"":__t)+'</button></div><div class="extra-weight-side-note top-gray-gradient"><div class="form-group"><p>'+(null==(__t=_l("香港大件备注","如您的货件是等同或高于下列重量, 请致电(852) 3123 6826顺丰大货组专线查询或报价"))?"":__t)+'</p></div><div class="form-group"><table class="table table-bordered"><thead><tr><th>'+(null==(__t=_l("原寄地"))?"":__t)+"</th><th>"+(null==(__t=_l("目的地"))?"":__t)+"</th><th>"+(null==(__t=_l("快件重量（kg）"))?"":__t)+'</th></tr></thead><tbody><tr><td rowspan="3">'+(null==(__t=_l("香港"))?"":__t)+"</td><td>"+(null==(__t=_l("香港／澳门"))?"":__t)+"</td><td>"+(null==(__t=_l("香港到香港／澳门大件重量","200"))?"":__t)+"</td></tr><tr><td>"+(null==(__t=_l("台湾"))?"":__t)+"</td><td>"+(null==(__t=_l("香港到台湾大件重量","100"))?"":__t)+"</td></tr><tr><td>"+(null==(__t=_l("大陆"))?"":__t)+"</td><td>"+(null==(__t=_l("香港到大陆大件重量","150"))?"":__t)+"</td></tr></tbody></table></div></div></form></div>";return __p},this.JST.nearlyBillNOList=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<ul class="col-xs-8">',_.each(billArr,function(a){__p+='<li><a class="bill" href="javascript:void(0)" data-bill="'+(null==(__t=a)?"":__t)+'">'+(null==(__t=a)?"":__t)+"</a></li>"}),__p+='</ul><div class="toggleWrapper col-xs-4"><a href="javascript:void(0)">'+(null==(__t=_l("最近查询记录"))?"":__t)+'<span class="arrow up"><span class="sub"></span></span></a></div>';return __p},this.JST.notIndustryResult=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<table class="table"><thead><tr><th>'+(null==(__t=_l("香港18区"))?"":__t)+"</th><th>"+(null==(__t=_l("细分区"))?"":__t)+"</th><th>"+(null==(__t=_l("街道名称"))?"":__t)+"</th><th>"+(null==(__t=_l("大厦名称"))?"":__t)+"</th><th>"+(null==(__t=_l("地址属性"))?"":__t)+"</th></tr></thead><tbody>",_.each(results,function(a,b){__p+="<tr><td>"+(null==(__t=a.area)?"":__t)+"</td><td>"+(null==(__t=a.town)?"":__t)+"</td>",__p+="A"!=a.road?"<td>"+(null==(__t=a.road)?"":__t)+"</td>":"<td></td>",__p+="<td>"+(null==(__t=a.address)?"":__t)+"</td><td>"+(null==(__t=a.businessType)?"":__t)+"</td></tr>"}),__p+="</tbody></table>";return __p},this.JST.orderProductTypeList=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<li><ul class="product-type-ul product-type-ul-title"><li>'+(null==(__t=_l("产品"))?"":__t)+"</li><li>"+(null==(__t=_l("截单时间"))?"":__t)+"</li><li>"+(null==(__t=_l("预计时效"))?"":__t)+"</li><li>"+(null==(__t=_l("运费"))?"":__t)+"</li></ul></li><!--顺丰即日-->",_.isUndefined(t1)||_.isNull(t1)||"T1"!==t1.limitTypeCode.substring(0,2)||(__p+='<li><a href="javascript:;" data-value="'+(null==(__t=t1.limitTypeCode)?"":__t)+'" class="product-type-link"><ul product-name="'+(null==(__t=_l("顺丰即日"))?"":__t)+'" class="product-type-ul product-type-ul-title '+(null==(__t=_.isEmpty(t1.closedTime)?"product-not-allowed":moment().isBefore(moment(t1.closedTime,"HH:mm"))?"":"product-not-allowed")?"":__t)+'"><li>'+(null==(__t=_l("顺丰即日"))?"":__t)+"</li><li>"+(null==(__t=_.isEmpty(t1.closedTime)||_.isNull(t1.closedTime)?"&nbsp;&nbsp;&nbsp;&nbsp;":moment(t1.closedTime,"HH:mm").format("HH:mm"))?"":__t)+"</li><li>"+(null==(__t=_.isEmpty(t1.deliverTime)?_l("顺丰即日时效"):moment(t1.deliverTime).format("ddd HH:mm")+_l("前"))?"":__t)+"</li><li>"+(null==(__t=t1.totalFreight)?"":__t)+"</li></ul></a></li>"),__p+="<!--顺丰次晨-->",_.isUndefined(t8)||_.isNull(t8)||"T8"!==t8.limitTypeCode.substring(0,2)||(__p+='<li><a href="javascript:;" data-value="'+(null==(__t=t8.limitTypeCode)?"":__t)+'" class="product-type-link"><ul product-name="'+(null==(__t=_l("顺丰次晨"))?"":__t)+'" class="product-type-ul product-type-ul-title '+(null==(__t=_.isEmpty(t8.closedTime)?"product-not-allowed":moment().isBefore(moment(t8.closedTime,"HH:mm"))?"":"product-not-allowed")?"":__t)+'"><li>'+(null==(__t=_l("顺丰次晨"))?"":__t)+"</li><li>"+(null==(__t=_.isEmpty(t8.closedTime)||_.isNull(t8.closedTime)?"&nbsp;&nbsp;&nbsp;&nbsp;":moment(t8.closedTime,"HH:mm").format("HH:mm"))?"":__t)+"</li><li>"+(null==(__t=_.isEmpty(t8.deliverTime)?_l("顺丰次晨时效"):moment(t8.deliverTime).format("ddd HH:mm")+_l("前"))?"":__t)+"</li><li>"+(null==(__t=t8.totalFreight)?"":__t)+"</li></ul></a></li>"),__p+="<!--顺丰标快--><!--  _.isEmpty(t4.deliverTime) ?　_l('顺丰次日时效') : moment(t4.deliverTime).format('ddd HH:mm')　-->",_.isUndefined(t4)||_.isNull(t4)||"T4"!==t4.limitTypeCode.substring(0,2)||("1"!==t4.destView||"1"!==t4.orgionView||t4.deliverTime)&&(__p+='<li><a href="javascript:;" data-value="'+(null==(__t=t4.limitTypeCode)?"":__t)+'" class="product-type-link"><ul product-name="'+(null==(__t=_l("顺丰标快"))?"":__t)+'" class="product-type-ul product-type-ul-title"><li>'+(null==(__t=_l("顺丰标快"))?"":__t)+"</li><li>"+(null==(__t=_.isEmpty(t4.closedTime)?"":moment(t4.closedTime).format("HH:mm"))?"":__t)+"</li><li>"+(null==(__t=function(){return _.isEmpty(t4.deliverTime)?_l("顺丰标快时效"):"约2-4天"===moment(t4.deliverTime)._i?_l("约2-4天"):moment(t4.deliverTime).format("ddd HH:mm")+_l("前")}())?"":__t)+"</li><li>"+(null==(__t=t4.totalFreight)?"":__t)+"</li></ul></a></li>"),__p+="<!--顺丰特惠-->",_.isUndefined(t6)||_.isNull(t6)||"T6"!==t6.limitTypeCode.substring(0,2)||(__p+='<li><a href="javascript:;" data-value="'+(null==(__t=t6.limitTypeCode)?"":__t)+'" class="product-type-link"><ul product-name="'+(null==(__t=_l("顺丰特惠"))?"":__t)+'" class="product-type-ul product-type-ul-title"><li>'+(null==(__t=_l("顺丰特惠"))?"":__t)+"</li><li>"+(null==(__t=_.isEmpty(t6.closedTime)?"":moment(t6.closedTime).format("HH:mm"))?"":__t)+"</li><li>"+(null==(__t=_.isEmpty(t6.deliverTime)?_l("顺丰特惠时效"):moment(t6.deliverTime).format("ddd HH:mm")+_l("前"))?"":__t)+"</li><li>"+(null==(__t=t6.totalFreight)?"":__t)+"</li></ul></a></li>");return __p},this.JST.otherService=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)_.each(otherServices,function(a,b){__p+='<a target="_blank" href="'+(null==(__t=a.get("link"))?"":__t)+'" class="other-service clearfix" '+(null==(__t=a.isExternal?'target="_blank"':"")?"":__t)+'><div class="service-info col-xs-8"><div class="service-title '+(null==(__t=a.get("isPromotion")?"promote":"")?"":__t)+'"><span class="overflow-text" title="'+(null==(__t=a.get("name"))?"":__t)+'">'+(null==(__t=a.get("name"))?"":__t)+'</span></div><div class="service-description"><span title="'+(null==(__t=a.get("description"))?"":__t)+'">'+(null==(__t=a.get("description"))?"":__t)+'</span></div></div><div class="col-xs-4"><div class="hot"><div class="hot-tag" title="'+(null==(__t=a.get("sale"))?"":__t)+'"><span class="overflow-text" title="'+(null==(__t=a.get("sale"))?"":__t)+'">'+(null==(__t=a.get("sale"))?"":__t)+'</span></div><div class="hot-text" title="'+(null==(__t=a.get("client"))?"":__t)+'">'+(null==(__t=a.get("client"))?"":__t)+"</div></div></div></a>"});return __p},this.JST.pagination=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj){if(__p+='<ul class="pagination"><li class="prevPage '+(null==(__t=pageIndex<=1?"disable":"")?"":__t)+'"><a href="#page='+(null==(__t=pageIndex-1)?"":__t)+'"class= "'+(null==(__t=pageIndex>1?"news_month_pagination":"")?"":__t)+'"data-pageindex="'+(null==(__t=pageIndex-1)?"":__t)+'" ><<</a></li>',pageIndex<20)for(var i=1;i<=pageCount-1;i++)20>=i&&(__p+='<li class="'+(null==(__t=pageIndex===i?"current":"")?"":__t)+'"><a href="#page='+(null==(__t=i)?"":__t)+'" class= "'+(null==(__t=pageIndex!=i?"news_month_pagination":"")?"":__t)+'"data-pageindex="'+(null==(__t=i)?"":__t)+'">'+(null==(__t=i)?"":__t)+"</a></li>");else if(pageIndex>=20&&pageIndex<pageCount)for(var i=pageIndex-20+2;i<=pageIndex+1;i++)__p+='<li class="'+(null==(__t=pageIndex===i?"current":"")?"":__t)+'"><a href="#page='+(null==(__t=i)?"":__t)+'" class= "'+(null==(__t=pageIndex!=i?"news_month_pagination":"")?"":__t)+'"data-pageindex="'+(null==(__t=i)?"":__t)+'">'+(null==(__t=i)?"":__t)+"</a></li>";else if(pageIndex==pageCount)for(var i=pageCount-19;i<=pageCount;i++)__p+='<li class="'+(null==(__t=pageIndex===i?"current":"")?"":__t)+'"><a href="#page='+(null==(__t=i)?"":__t)+'" class= "'+(null==(__t=pageIndex!=i?"news_month_pagination":"")?"":__t)+'"data-pageindex="'+(null==(__t=i)?"":__t)+'">'+(null==(__t=i)?"":__t)+"</a></li>";pageCount>20&&(__p+='<li class="">...</li>'),__p+='<li class="'+(null==(__t=pageIndex==pageCount?"current":"")?"":__t)+'"><a href="#page='+(null==(__t=pageCount)?"":__t)+'"class= "'+(null==(__t=pageIndex!=pageCount?"news_month_pagination":"")?"":__t)+'"data-pageindex="'+(null==(__t=pageCount)?"":__t)+'">'+(null==(__t=pageCount)?"":__t)+'</a></li><li class="nextPage '+(null==(__t=pageIndex>=pageCount?"disable":"")?"":__t)+'">',__p+=pageIndex!=pageCount?'<a href="#page='+(null==(__t=pageIndex+1)?"":__t)+'"class= "'+(null==(__t=pageIndex<pageCount?"news_month_pagination":"")?"":__t)+'"data-pageindex="'+(null==(__t=pageIndex+1)?"":__t)+'">>></a>':">>",__p+="</li></ul>"}return __p},this.JST.paginationPro=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)if(pageCount>1){if(__p+='<div class="content-page-hk-pages"><ul class="pagination"><li class="'+(null==(__t=1==pageIndex?"current":"")?"":__t)+'"><a href="#page= '+(null==(__t=1)?"":__t)+'"class= "'+(null==(__t=1!=pageIndex?"goToPage":"")?"":__t)+'"data-pageindex="'+(null==(__t=1)?"":__t)+'">'+(null==(__t=_l("第一页"))?"":__t)+'</a></li><li class="prevPage '+(null==(__t=pageIndex<=1?"disable":"")?"":__t)+'">',__p+=pageIndex>1?'<a href="#page= '+(null==(__t=pageIndex-1)?"":__t)+'"class= "'+(null==(__t=pageIndex>1?"goToPage":"")?"":__t)+'"data-pageindex="'+(null==(__t=pageIndex-1)?"":__t)+'" ><<</a>':'<a href="#" onclick="return false;">&lt;&lt;</a>',__p+="</li>",pageCount>10)for(var i=Number(pageIndex);i<=Number(pageIndex)+Number(9);i++)__p+=Number(pageIndex)+Number(9)<pageCount?'<li class="'+(null==(__t=pageIndex==i?"current":"")?"":__t)+'"><a href="#page= '+(null==(__t=i)?"":__t)+'"class= "'+(null==(__t=pageIndex!=i?"goToPage":"")?"":__t)+'"data-pageindex="'+(null==(__t=i)?"":__t)+'">'+(null==(__t=i)?"":__t)+"</a></li>":'<li class="'+(null==(__t=pageIndex==i-9?"current":"")?"":__t)+'"><a href="#page= '+(null==(__t=i-9)?"":__t)+'"class= "'+(null==(__t=pageIndex!=i-9?"goToPage":"")?"":__t)+'"data-pageindex="'+(null==(__t=i-9)?"":__t)+'">'+(null==(__t=i-9)?"":__t)+"</a></li>";else for(var i=1;i<=pageCount;i++)__p+='<li class="'+(null==(__t=pageIndex==i?"current":"")?"":__t)+'"><a href="#page= '+(null==(__t=i)?"":__t)+'"class= "'+(null==(__t=pageIndex!=i?"goToPage":"")?"":__t)+'"data-pageindex="'+(null==(__t=i)?"":__t)+'">'+(null==(__t=i)?"":__t)+"</a></li>";__p+='<li class="nextPage '+(null==(__t=pageIndex>=pageCount?"disable":"")?"":__t)+'">',__p+=pageIndex<pageCount?'<a href="#page= '+(null==(__t=Number(pageIndex)+Number(1))?"":__t)+'"class= "'+(null==(__t=pageIndex<pageCount?"goToPage":"")?"":__t)+'"data-pageindex="'+(null==(__t=Number(pageIndex)+Number(1))?"":__t)+'">>></a>':'<a href="#" onclick="return false;">&gt;&gt;</a>',__p+='</li><li class="'+(null==(__t=pageIndex==pageCount?"current":"")?"":__t)+'"><a href="#page= '+(null==(__t=pageCount)?"":__t)+'"class= "'+(null==(__t=pageIndex!=pageCount?"goToPage":"")?"":__t)+'"data-pageindex="'+(null==(__t=pageCount)?"":__t)+'">'+(null==(__t=_l("最后一页"))?"":__t)+"</a></li></ul></div>"}return __p},this.JST.payFee=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<td class="payFee-info" ><div class="service-info-wrapper">',"#"!==service.link&&(__p+="<a href='"+(null==(__t=service.link)?"":__t)+'\' target="_blank">'),__p+='<div title="'+(null==(__t=service.limitTypeName)?"":__t)+'" class="service-info-title '+(null==(__t=service.isPromotion?"promotion":"")?"":__t)+'"><span class="limit-type-name" >'+(null==(__t=service.limitTypeName)?"":__t)+'</span><span class="cargo-type"  title="'+(null==(__t=service.cargoTypeName)?"":__t)+'">',service.shouldShowCargoType&&" "!=service.cargoTypeName&&null!=service.cargoTypeName&&(__p+="("+(null==(__t=service.cargoTypeName)?"":__t)+")"),__p+="</span>",_.each(service.additionalPayFees,function(a){("overdue-refund"===a.code||"earlier-shipping-lower-price"===a.code&&0!=service.regionFreight)&&(__p+='<img src="'+(null==(__t=a.icon)?"":__t)+'" alt="'+(null==(__t=a.name)?"":__t)+'"class="additional-service-icon" />')}),__p+="</div>","#"!==service.link&&(__p+="</a>"),__p+='</div></td><td class="weight-info">',__p+=service.showDestCurrencyPrice?'<div class="weight">'+(null==(__t=service.destWeightUnit?service.destWeight:service.weight)?"":__t)+(null==(__t="en"===Helper.getSiteLanguage()?" ":"")?"":__t)+(null==(__t=service.destWeightUnit?service.destWeightUnit:service.weightUnit)?"":__t)+'<!-- _l("公斤") --></div>':'<div class="weight">'+(null==(__t=service.weight)?"":__t)+(null==(__t="en"===Helper.getSiteLanguage()?" ":"")?"":__t)+(null==(__t=service.weightUnit)?"":__t)+"</div>",__p+='</td><td class="time-info">',service.deliverTime?(__p+='<div class="time first">',service.internet?__p+=(null==(__t=service.deliverTime)?"":__t)+""+(null==(__t=_l("天"))?"":__t)+"<!--港澳台地区互寄显示时效为具体时间-->":"2"===service.destView&&"2"===service.orgionView?__p+=null==(__t=moment.isMoment(moment(service.deliverTime).toString())?moment(service.deliverTime).format("YYYY-MM-DD"):service.deliverTime+_l("前"))?"":__t:service.addTime?(__p+=moment(service.addTime).isBefore(moment(service.deliverTime))?(null==(__t=service.addTime)?"":__t)+"<br/>"+(null==(__t=_l("偏远区域加时"))?"":__t):moment.isMoment(moment(service.deliverTime).toString())?null==(__t=moment(service.deliverTime).format("YYYY-MM-DD"))?"":__t:"sc"!=Helper.getSiteLanguage()&&"tc"!=Helper.getSiteLanguage()?"次日"===service.deliverTime.substr(0,2)?null==(__t=service.deliverTime.replace("次日","Next day "))?"":__t:"工商"===service.deliverTime.substr(0,2)?null==(__t=service.deliverTime.replace("工商区:","Commercial and Industrial area: ").replace(/次日/g,"before Next day ").replace("住宅区:","Residential area: ").replace("非工商区:","Residential area: "))?"":__t:(null==(__t=service.deliverTime)?"":__t)+'<span class="timeBefore">'+(null==(__t=_l("前"))?"":__t)+"</span>":"Invalid date"==moment(service.deliverTime).format("YYYY-MM-DD HH:mm")?null==(__t=service.deliverTime)?"":__t:(null==(__t=service.deliverTime)?"":__t)+'<span class="timeBefore">'+(null==(__t=_l("前"))?"":__t)+"</span>",__p+="<!--"+(null==(__t=moment.isMoment(moment(service.deliverTime).toString())?moment(service.deliverTime).format("YYYY-MM-DD"):service.deliverTime)?"":__t)+"-->"):(__p+="<!--"+(null==(__t=moment.isMoment(moment(service.deliverTime).toString())?moment(service.deliverTime).format("YYYY-MM-DD"):service.deliverTime)?"":__t)+"-->",__p+=moment.isMoment(moment(service.deliverTime).toString())?null==(__t=moment(service.deliverTime).format("YYYY-MM-DD"))?"":__t:"sc"!=Helper.getSiteLanguage()&&"tc"!=Helper.getSiteLanguage()?"次日"===service.deliverTime.substr(0,2)?null==(__t=service.deliverTime.replace("次日","Next day "))?"":__t:"工商"===service.deliverTime.substr(0,2)?null==(__t=service.deliverTime.replace("工商区:","Commercial and Industrial area: ").replace(/次日/g,"before Next day ").replace("住宅区:","Residential area: ").replace("非工商区:","Residential area: "))?"":__t:(null==(__t=service.deliverTime)?"":__t)+'<span class="timeBefore">'+(null==(__t=_l("前"))?"":__t)+"</span>":"Invalid date"==moment(service.deliverTime).format("YYYY-MM-DD HH:mm")?null==(__t=service.deliverTime)?"":__t:(null==(__t=service.deliverTime)?"":__t)+'<span class="timeBefore">'+(null==(__t=_l("前"))?"":__t)+"</span>"),__p+='</div><!--  <span class="time">'+(null==(__t=moment.isMoment(moment(service.deliverTime).toString())?service.deliverDate:"")?"":__t)+"&nbsp;&nbsp;"+(null==(__t=moment.isMoment(moment(service.deliverTime).toString())?service.deliverMomentTime:"")?"":__t)+"</span>-->"):service.deliverTimeForType&&(__p+='<div class="time first">'+(null==(__t=service.deliverTimeForType)?"":__t)+"</div>"),__p+='</td><td class="rate-info">',service.showDestCurrencyPrice?(__p+=null==(__t=service.destCurrencyName)?"":__t,__p+="1"===service.orgionView&&"1"===service.destView?null==(__t=service.totalFreight)?"":__t:null==(__t=service.destFreight)?"":__t):(__p+=null==(__t=service.currencyName)?"":__t,__p+="1"===service.orgionView&&"3"!==service.destView||"2"===service.orgionView&&"1"===service.destView?null==(__t=service.totalFreight)?"":__t:null==(__t=service.freight)?"":__t),__p+='<div class="additional-services-link"></div></td>';return __p},this.JST.payFeeComments=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)_.each(comments,function(a){a.shouldShow&&(__p+='<div class="service-comment">'+(null==(__t=a.detail)?"":__t)+"</div>")});return __p},this.JST.payFeeContainer=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class="services-top-bar"><h5 class="pull-left">'+(null==(__t=_l("我们的产品"))?"":__t)+'</h5><ul class="utils pull-right"></ul></div><div class="service-wrapper top-gray-gradient"><span id="not-support-flow-control">'+(null==(__t=_l("暂不支持流向控制"))?"":__t)+'</span></div><div class="service-internet-wrapper"><div id="internet"></div></div><div class="services-bottom-bar"><div class="additional-services-link"></div></div>';return __p},this.JST.payFeeInfo=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<div  class="service-intro"><ul>',_.each(serviceInfos,function(a){__p+="<li>"+(null==(__t=a)?"":__t)+"</li>"}),__p+="</ul></div>";return __p},this.JST.payFeeInitial=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<td class="service-info">',"#"!==link&&(__p+="<a href='"+(null==(__t=link)?"":__t)+'\' target="_blank">'),__p+='<div class="service-info-wrapper service-popover-container"><div class="service-info-title '+(null==(__t=isPromotion?"promotion":"")?"":__t)+'"><span class="circle"></span><div class="limit-type-name">'+(null==(__t=limitTypeName)?"":__t)+"</div></div>","#"!==link&&(__p+="</a>"),__p+='</div></td><td class="promotion-info"><p title="'+(null==(__t=promotionMessage)?"":__t)+'">'+(null==(__t=promotionMessage)?"":__t)+"</p></td>";return __p},this.JST.payFeeInternet=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<div class="service-internet"><table  style="width: 100%;"><tbody>',"cn"===Helper.getSiteLocation()&&"sc"===Helper.getSiteLanguage()&&(__p+='<!--<tr><td style="padding-left: 28px;padding-right: 20px;" colspan="2"> '+(null==(__t=_l("CN说明"))?"":__t)+" </td></tr>-->"),service.internet&&(service.expectArriveTm||service.otherService)&&(__p+='<tr><td style="width: 25%;text-align:right;font-size:16px;"> '+(null==(__t=_l("派件服务时间"))?"":__t)+' </td><!--  _l("周一至周五")  service.otherService --><td style="width:75%;text-align:left;padding:20px;">'+(null==(__t=service.expectArriveTm.replace(/;/g,"<br/>"))?"":__t)+"</td></tr>"),__p+="</tbody></table></div>";return __p},this.JST.payFeeOutskirtComments=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+=null==(__t=_l("送至郊区的"))?"":__t,_.each(comments,function(a,b){__p+=(null==(__t=a.limitTypeName)?"":__t)+" ",shouldShowCargoType&&a.shouldShowCargoType?"("+a.cargoTypeName+")":"",__p+=" "+(null==(__t=_l("为"))?"":__t)+" "+(null==(__t="en"===Helper.getSiteLanguage()?a.currencyName+a.freight:a.freight+a.currencyName)?"":__t),b<comments.length-1&&(__p+="，")});return __p},this.JST.rangeResult=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<div class="main-content-row range-result-brief no-padding"><div class="range-result-brief-content"><span class="location-name">'+(null==(__t=locationName)?"":__t)+'</span><dl class="location-type">',__p+="ALL_REGION"===type?"<dt>"+(null==(__t=_l("全境配送"))?"":__t)+"</dt>":"PART_REGION"===type?"<dt>"+(null==(__t=_l("部分地区提供服务"))?"":__t)+"</dt>":"<dt>"+(null==(__t=_l("本地区不配送"))?"":__t)+"</dt>",__p+="</dl>",unavailableRegions.length&&(__p+='<dl class="unavailable-ranges"><dt>'+(null==(__t=_l("不服务的地区为："))?"":__t)+"</dt><dd>"+(null==(__t=_.pluck(unavailableRegions,"name").join("、"))?"":__t)+"</dd></dl>"),isHongKongAddress&&(__p+='<p class="side-note">'+(null==(__t=_l("备注：")+_l("非工商附加费","1. 非工商附加费：寄出或派送的快件，须收取HKD18服务费。"))?"":__t)+"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+(null==(__t=_l("偏远地区附加费","2. 偏远地区附加费：寄出或派送的快件，须收取HKD30服务费。"))?"":__t)+"</p>"),isTaiWanAddress&&(__p+='<p class="side-note">'+(null==(__t=_l("台湾偏远地区范围备注","备注: 偏远地区需另收取每票NTD150，请<a href='tw_remote_area.html'>按此</a>查询详细台湾偏远地区范围。"))?"":__t)+"</p>"),__p+="</div>","sc"===lang&&"cn"===region&&(__p+='<div class="find-corresponding-store top-gray-gradient"><a href="'+(null==(__t=storeLinkURL)?"":__t)+'">'+(null==(__t=_l("查看全部网点"))?"":__t)+'<span class="sfi sfi-chevron-circle-right"></span></a></div>'),__p+="</div>",(normalRegions.length||abnormalRegions.length)&&(__p+='<div class="main-content-row range-result-detail"><div class="detail-title">'+(null==(__t=_l("服务地区详情"))?"":__t)+'</div><div class="detail-content">',normalRegions.length&&(__p+='<div class="region-results-wrapper"><div class="regions-title"><i class="sfi sfi-clipboard"></i><span>'+(null==(__t=_l("正常派送地区："))?"":__t)+'</span></div><ul class="result-regions">',_.each(normalRegions,function(a,b){b%6===0&&(__p+='<div class="result-regions-row">'),__p+='<li data-normal-region="true" data-code="'+(null==(__t=a.code)?"":__t)+'"><span title="'+(null==(__t=a.name)?"":__t)+'">'+(null==(__t=a.name)?"":__t)+"</span></li>",b%6===5&&(__p+="</div>")}),normalRegions.length%6===0&&(__p+="</div>"),__p+="</ul></div>"),abnormalRegions.length&&(__p+='<div class="region-results-wrapper"><div class="regions-title"><i class="sfi sfi-clipboard"></i><span>'+(null==(__t=_l("部分收送地区："))?"":__t)+'</span></div><ul class="result-regions">',
_.each(abnormalRegions,function(a,b){b%6===0&&(__p+='<div class="result-regions-row">'),__p+='<li data-code="'+(null==(__t=a.code)?"":__t)+'"><span title="'+(null==(__t=a.name)?"":__t)+'">'+(null==(__t=a.name)?"":__t)+"</span></li>",b%6===5&&(__p+="</div>")}),abnormalRegions.length%6===0&&(__p+="</div>"),__p+="</ul></div>"),__p+="</div></div>");return __p},this.JST.rangeResultInternational=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<div class="main-content-row range-result-brief no-padding"><div class="range-result-brief-content"><span class="location-name">'+(null==(__t=name)?"":__t)+" - "+(null==(__t=zipCodeInputed)?"":__t)+'</span><p class="side-note">',__p+="A000001000"===locationCountryCode?null==(__t=_l("美国"))?"":__t:null==(__t=_l("其他国家"))?"":__t,__p+="</p></div></div>";return __p},this.JST.rangeResultPopover=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<div class="result-region-detail-wrapper"><div class="result-region-detail">',isNormalRegion?(__p+='<p class="store-description clearfix" style="margin-bottom: 10px;">',_.each(childrenReg,function(a,b){__p+='<span style="width:33%; text-align:center; float:left;"> '+(null==(__t=a.name)?"":__t)+"</span>"}),__p+='</p><p class="store-description">'+(null==(__t=_p(_l("前往%s的网点，到点自寄自取，享方便优惠"),'<span class="location-name">'+region.name+"</span>"))?"":__t)+'<a href="'+(null==(__t=linkURL)?"":__t)+'" class="redirect">'+(null==(__t=_l("查看网点"))?"":__t)+"</a></p>"):(__p+='<div class="result-region-detail-content pull-left"><div class="location-name"><i class="icon-gray-map"></i><span>'+(null==(__t=region.name)?"":__t)+'</span><span class="description">'+(null==(__t=_l("服务地区"))?"":__t)+"</span></div>",_.each(availableDescription,function(a){__p+='<div class="detail-descript"><span class="litter-tag">'+(null==(__t=a.litterTag)?"":__t)+"</span><span>"+(null==(__t=a.remark)?"":__t)+"</span>",showRemarkFromEnd&&void 0!=a&&void 0!=a.remark_content&&""!=a.remark_content&&(__p+='<br/><span style="display: inline-grid;width: 100px;display: inline-block;width: 290px;padding-left: 25px;padding-top: 5px;word-break: break-word;word-wrap: break-word;">'+(null==(__t=_l("备注："))?"":__t)+(null==(__t=a.remark_content)?"":__t)+"</span>"),__p+="</div>"}),region.remark&&showRemark&&(__p+='<div class="location-name"><i class="icon-gray-map"></i><span style="font-size:12px">'+(null==(__t=region.remark)?"":__t)+"</span></div>"),__p+='</div><a href="'+(null==(__t=linkURL)?"":__t)+'"><img class="pull-right" src="'+(null==(__t=_l("selfpickupsalesimg"))?"":__t)+'" alt=""></a>'),__p+="</div></div>";return __p},this.JST.regulationResult=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<table class="table table-bordered"><tbody>',_.each(results,function(a){__p+="<tr><td>"+(null==(__t=a.get("goodsName"))?"":__t)+"</td><td>"+(null==(__t=a.get("goodsDetails"))?"":__t)+"</td></tr>"}),__p+="</tbody></table>";return __p},this.JST.saveWarnTip=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<dl><dt><span class="aicon-agree img"></span></dt><dd><h5>'+(null==(__t=_l("保存成功"))?"":__t)+'</h5></dd><dd><button type="button" class="primary-button black save-success" data-dismiss="modal">'+(null==(__t=_l("我知道了"))?"":__t)+"</button></dd></dl>";return __p},this.JST.storePoint=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<div class="store"><ul class="promotions">',store.selfPickupDiscount&&(__p+="<li>"+(null==(__t=_l("自取"))?"":__t)+'<div class="price">',__p+=3==store.storeType?null==(__t=_p(_l("赠%f元积分"),store.selfSendDiscount))?"":__t:null==(__t=_p(_l("省%f元"),store.selfSendDiscount))?"":__t,__p+="</div></li>"),store.selfSendDiscount&&(__p+="<li>"+(null==(__t=_l("自寄"))?"":__t)+'<div class="price">',__p+=3==store.storeType?null==(__t=_p(_l("赠%f元积分"),store.selfSendDiscount))?"":__t:null==(__t=_p(_l("省%f元"),store.selfSendDiscount))?"":__t,__p+="</div></li>"),__p+="</ul>",store.services&&store.services.length>0&&(__p+='<ul class="services">',_.each(store.services,function(a){__p+='<li class="'+(null==(__t=a.flag)?"":__t)+'">'+(null==(__t=a.name)?"":__t)+"</li>"}),__p+="</ul>"),__p+='<div class="store-head"><img src="'+(null==(__t=store.tipImageUrl)?"":__t)+'"><div class="title">'+(null==(__t=store.name)?"":__t),store.nameEN&&(__p+="("+(null==(__t=store.nameEN)?"":__t)+")"),__p+='</div><div class="description">'+(null==(__t=label.type)?"":__t),__p+=label.code?null==(__t=label.code)?"":__t:null==(__t=store.code)?"":__t,__p+='</div></div><div class="store-address"><div class="detail">'+(null==(__t=store.address)?"":__t),store.addressEN&&(__p+="("+(null==(__t=store.addressEN)?"":__t)+")"),__p+='</div></div><ul class="extra-info">',store.linkman&&(__p+='<li class="contact-name">'+(null==(__t=store.linkman)?"":__t)+"</li>"),store.tel&&(__p+='<li class="phone">'+(null==(__t=store.tel)?"":__t)+"</li>"),store.serviceTime6?(__p+="<br>",store.serviceTime&&(__p+='<li class="time">'+(null==(__t=_l("工作日:"))?"":__t)+(null==(__t=store.serviceTime)?"":__t)+"</li>"),store.serviceTime6&&(__p+='<li class="time">'+(null==(__t=_l("周六:"))?"":__t)+(null==(__t=store.serviceTime6)?"":__t)+"<br></li>"),store.serviceTime0&&(__p+='<li class="time">'+(null==(__t=_l("节假日:"))?"":__t)+(null==(__t=store.serviceTime0)?"":__t)+"</li>"),store.serviceTime7&&(__p+='<li class="time">'+(null==(__t=_l("周日:"))?"":__t)+(null==(__t=store.serviceTime7)?"":__t)+"</li>")):store.serviceTime&&(__p+='<li class="time">'+(null==(__t=store.serviceTime)?"":__t)+"</li>"),__p+='</ul><div class="close"><span class="sfi sfi-close"></span></div></div>';return __p},this.JST.subRegions=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)_.each(subRegions,function(a,b){b%6==0&&(__p+='<div class="sub-region-row">'),__p+='<span><a data-code="'+(null==(__t=a.code)?"":__t)+'" href="#">'+(null==(__t=a.name.substr(0,4))?"":__t)+"</a></span>",b%6==5&&(__p+="</div>")});return __p},this.JST.taiwanStoresTable=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<table class="services"><tbody>',_.each(stores,function(a){__p+='<tr><td><div class="name">'+(null==(__t=a.name)?"":__t)+'<span class="code">'+(null==(__t=a.virtual_addr)?"":__t)+'</span></div><div class="address">'+(null==(__t=_l("地址"))?"":__t)+"<span>"+(null==(__t=a.address)?"":__t)+'</span></div><div class="phone">'+(null==(__t=_l("电话"))?"":__t)+"<span>"+(null==(__t=a.telephone)?"":__t)+"</span></div></td><td>"+(null==(__t=a.service_content_type)?"":__t)+"</td></tr>"}),__p+="</tbody></table>";return __p},this.JST.taxBorderDetail=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<div class="sfi sfi-times close"></div><h2>中华人民共和国海关</h2><h2>跨境直邮/保税进口税款电子回执</h2><h3>(仅供对账之用)</h3><h4>&nbsp;</h4><div style="padding:5px 10px;overflow:hidden"><div style="float:left;">纳税人姓名（地址）：<span style="color:black;">'+(null==(__t=result.details[0].sfpname)?"":__t)+'</span></div><div style="float:right;width:200px;display:inline-block;text-align:right;">申报日期：<span>'+(null==(__t=result.taxDate)?"":__t)+'</span></div></div><table class="table"><tbody><tr><th>序号</th><th>分运单号码</th><th>货物名称</th><th>申报价值</th><th>关税税额</th><th>增值税税额</th><th>消费税额</th><th>税金合计(CNY)</th></tr>',_.forEach(result.details,function(a,b){__p+="<tr><td>"+(null==(__t=b+1)?"":__t)+"</td><td>"+(null==(__t=a.bno)?"":__t)+"</td><td>"+(null==(__t=a.gdesc)?"":__t)+"</td><td>"+(null==(__t=a.value)?"":__t)+"</td><td>"+(null==(__t=a.traiffval)?"":__t)+"</td><td>"+(null==(__t=a.vatval)?"":__t)+"</td><td>"+(null==(__t=a.payval)?"":__t)+"</td><td>"+(null==(__t=a.totalval)?"":__t)+"</td></tr>"}),__p+='<tr><td colspan="8" class="text-left">进口税金合计：人民币（大写）  <span>'+(null==(__t=result.totalTax)?"":__t)+'</span>	</td></tr></tbody></table><div class="remark"><div>说明:</div><div class="inline-block">'+(null==(__t=_l("税金计算公式"))?"":__t)+':</div><div class="inline-table"><div>'+(null==(__t=_l("总税计算","税金合计=关税税额 + 增值税税额 + 消费税税额"))?"":__t)+"</div><div>"+(null==(__t=_l("应征关税计算","应征关税=完税价格*关税税率"))?"":__t)+"</div><div>"+(null==(__t=_l("关税税额计算","关税税额=价值(CIF) * 关税税率"))?"":__t)+"</div><div>"+(null==(__t=_l("增值税税额计算","增值税税额=(价值(CIF) + 关税税额 + 消费税税额) * 增值税税率"))?"":__t)+"</div><div>"+(null==(__t=_l("消费税税额计算","消费税税额=(价值(CID) + 关税税额) / (1 - 消费税税额) * 消费税税率"))?"":__t)+'</div><br/><div>备注:</div><div><ul><li>1.根据跨境电商进口税收新政策的说明，跨境电商零售进口商品单次交易总额在限值内的，进口环节增值税、消费税暂按法定应纳税额的70%征收。</li><li>2.税金合计栏四舍五入保留整数.</li><li>3.此为海关电子审单放行回执，仅供对账之用.</li></ul></div></div><div class="row"><div class="verification-code"><div class="input-group col-xs-offset-2 col-xs-3"><input type="text" id="validation-download-code" class="form-control no-right-border" placeholder="请输入验证码下载文件"><span class="input-group-addon refresh no-left-border" id="refresh-download-code"><span class="sfi sfi-refresh"></span></span></div><div class="col-xs-2 no-left-padding"><img class="validation-image" id="validation-download-image" src="/sf-service-web/service/captcha/kj3tax?force=true&amp;time=1407399546971"></div><div class="col-xs-2"><button class="primary-button download disabled fileDownloadPromise">下载</button></div></div></div>';return __p},this.JST.taxDetail=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<div class="sfi sfi-times close"></div><h2>'+(null==(__t=_l("进境快件中国海关EDI电子审单放行回执"))?"":__t)+"</h2><h3>"+(null==(__t=_l("(仅供企业对账之用)"))?"":__t)+"</h3><p>"+(null==(__t=_l("报关单编号"))?"":__t)+":"+(null==(__t=result.taxNO)?"":__t)+'</p><table class="table"><tr><th colspan="9" class="text-left">'+(null==(__t=_l("运营人名称"))?"":__t)+": "+(null==(__t=result.operatorName)?"":__t)+" &nbsp;&nbsp;&nbsp;<!-- "+(null==(__t=_l("进/出口岸"))?"":__t)+": "+(null==(__t=result.deptCode)?"":__t)+" &nbsp;&nbsp;&nbsp;-->"+(null==(__t=_l("运输工具航次"))?"":__t)+": "+(null==(__t=result.flightNO)?"":__t)+" &nbsp;&nbsp;&nbsp;"+(null==(__t=_l("进/出境日期"))?"":__t)+": "+(null==(__t=result.taxDate)?"":__t)+" &nbsp;&nbsp;&nbsp;"+(null==(__t=_l("总运单号码"))?"":__t)+": "+(null==(__t=result.tWaybillno)?"":__t)+" &nbsp;&nbsp;&nbsp;</th></tr><tr><th>"+(null==(__t=_l("序号"))?"":__t)+"</th><th>"+(null==(__t=_l("分运单号码"))?"":__t)+"</th><th>"+(null==(__t=_l("货物名称"))?"":__t)+"</th><!--<th>"+(null==(__t=_l("价值(CNY)"))?"":__t)+"</th>--><th>"+(null==(__t=_l("重量(KG)"))?"":__t)+"</th><th>"+(null==(__t=_l("件数"))?"":__t)+"</th><!-- <th>"+(null==(__t=_l("商品编码(HS)"))?"":__t)+"</th><th>"+(null==(__t=_l("关税速率"))?"":__t)+"</th> --><th>"+(null==(__t=_l("关税税额"))?"":__t)+"</th><!-- <th>"+(null==(__t=_l("增值税税率"))?"":__t)+"</th>--><th>"+(null==(__t=_l("增值税税额"))?"":__t)+"</th><!-- <th>"+(null==(__t=_l("消费税税率"))?"":__t)+"</th>--><th>"+(null==(__t=_l("消费税税额"))?"":__t)+"</th><th>"+(null==(__t=_l("税金合计(CNY)"))?"":__t)+"</th><!--  <th>"+(null==(__t=_l("收/发件人名称"))?"":__t)+"</th>--></tr>",_.forEach(result.details,function(a,b){__p+="<tr><td>"+(null==(__t=b+1)?"":__t)+"</td><td>"+(null==(__t=a.bno)?"":__t)+"</td><td>"+(null==(__t=a.gdesc)?"":__t)+"</td><!-- <td>"+(null==(__t=a.value)?"":__t)+"</td>--><td>"+(null==(__t=a.weight)?"":__t)+"</td><td>"+(null==(__t=a.pcs)?"":__t)+"</td><!-- <td>"+(null==(__t=a.hscode)?"":__t)+"</td><td>"+(null==(__t=a.traiff)?"":__t)+"</td>--><td>"+(null==(__t=a.traiffval)?"":__t)+"</td><!-- <td>"+(null==(__t=a.vat)?"":__t)+"</td>--><td>"+(null==(__t=a.vatval)?"":__t)+"</td><!-- <td>"+(null==(__t=a.pay)?"":__t)+"</td>--><td>"+(null==(__t=a.payval)?"":__t)+"</td><td>"+(null==(__t=a.totalval)?"":__t)+"</td><!-- <td>"+(null==(__t=a.sfpname)?"":__t)+"</td>--></tr>"}),__p+='<tr><td colspan="9">&nbsp;</td></tr><tr><!--<td class="no-left-border no-right-border no-bottom-border">'+(null==(__t=result.totalVal)?"":__t)+'</td><td class="no-left-border no-right-border no-bottom-border">'+(null==(__t=result.totalWeight)?"":__t)+'</td>--><td colspan="7"></td><td  >'+(null==(__t=_l("总税"))?"":__t)+" </td><td >"+(null==(__t=result.totalTax)?"":__t)+'</td></tr><tr><td colspan="9" class="text-left">'+(null==(__t=_l("本运营人保证"))?"":__t)+": "+(null==(__t=result.taxDate)?"":__t)+" "+(null==(__t=_l("向"))?"":__t)+" "+(null==(__t=result.portName)?"":__t)+(null==(__t=_l("海关申报","海关申报的上述货物为《中华人民共和国海关对进出境快件监管办法》中的应予征税的进境货样，广告品，并就申报的真实行和合法性向你关负法律责任。"))?"":__t)+'</td></tr><tr><td colspan="5" class="text-left"><!-- '+(null==(__t=_l("运营人报关专用章","(运营人报关专用章)报关员"))?"":__t)+':--></td><td colspan="4" class="text-left">'+(null==(__t=_l("申报日期"))?"":__t)+": "+(null==(__t=result.taxDate)?"":__t)+'</td></tr><!--<tr><td colspan="9">'+(null==(__t=_l("以下由海关填写"))?"":__t)+'</td></tr><tr><td colspan="3" class="text-left no-bottom-border no-top-border no-right-border no-bottom-border">'+(null==(__t=_l("海关签章"))?"":__t)+':</td><td colspan="3" class="text-left no-right-border no-left-border">'+(null==(__t=_l("经办关员"))?"":__t)+':</td><td colspan="3" class="text-left no-right-border no-left-border">'+(null==(__t=_l("日期"))?"":__t)+':</td><td colspan="3" class="text-left no-right-border no-left-border">'+(null==(__t=_l("查验关员"))?"":__t)+':</td><td colspan="3" class="text-left no-left-border ">'+(null==(__t=_l("日期"))?"":__t)+':</td></tr>--></table><div class="remark"><div class="inline-block">'+(null==(__t=_l("备注"))?"":__t)+':</div><div><!--class="inline-table"--><div>'+(null==(__t=_l("备注1","1.总税=关税税额 + 增值税税额 + 消费税税额"))?"":__t)+"</div><div>"+(null==(__t=_l("备注2","2.税金合计栏四舍五入保留整数"))?"":__t)+"</div><div>"+(null==(__t=_l("备注3","3.根据海关相关规定要求征收进出口货物税费，此为海关电子审单放行回执，仅供企业对账之用"))?"":__t)+'</div></div><div class="row"><div class="verification-code"><div class="input-group col-xs-offset-2 col-xs-3"><input type="text" id="validation-download-code" class="form-control no-right-border" placeholder="请输入验证码下载文件"><span class="input-group-addon refresh no-left-border" id="refresh-download-code"><span class="sfi sfi-refresh"></span></span></div><div class="col-xs-2 no-left-padding"><img class="validation-image" id="validation-download-image"></div><div class="col-xs-2"><button class="primary-button download disabled fileDownloadPromise">'+(null==(__t=_l("下载"))?"":__t)+"</button></div></div></div>";return __p},this.JST.taxPersonDetail=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<div class="sfi sfi-times close"></div><h2>中华人民共和国<!--<span style="color:black;text-decoration:underline;padding:0 5px;">&nbsp;&nbsp;'+(null==(__t=result.deptCode)?"":__t)+'&nbsp;&nbsp;--></span>海关</h2><h2>旅客行李、个人邮递物品进口税款电子回执</h2><h3>(仅供对账之用)</h3><h4>&nbsp;</h4><div style="padding:5px 10px;overflow:hidden"><div style="float:left;">纳税人姓名（地址）：<span style="color:black;">'+(null==(__t=result.details[0].sfpname)?"":__t)+'</span></div><div style="float:right;width:200px;display:inline-block;text-align:right;">日期：<span>'+(null==(__t=result.taxDate)?"":__t)+'</span></div></div><table class="table"><tbody><tr><th>序号</th><th>分运单号码</th><th>货物名称</th><th>完税价格</th><th>税 率%</th><th>关税税额(CNY)</th></tr>',_.forEach(result.details,function(a,b){__p+="<tr><td>"+(null==(__t=b+1)?"":__t)+"</td><td>"+(null==(__t=a.bno)?"":__t)+"</td><td>"+(null==(__t=a.gdesc)?"":__t)+"("+(null==(__t=a.hscode)?"":__t)+")</td><td>"+(null==(__t=a.value)?"":__t)+"</td><td>"+(null==(__t=a.traiff)?"":__t)+"</td><td>"+(null==(__t=a.totalval)?"":__t)+"</td></tr>"}),__p+='<tr><td colspan="6" class="text-left">进口税金合计：人民币（大写）  <span>'+(null==(__t=result.totalTax)?"":__t)+'</span>	</td></tr></tbody></table><div class="remark"><div>说明:</div><div><ul><li>1.税金计算公式：关税税额=完税价格*税率（“完税价格”为海关认定价格，会出现“完税价格≠申报价值”的情况）</li><!-- <li>2.此为运单号  <span style="text-decoration:underline;">'+(null==(__t=result.waybillNO)?"":__t)+'</span>  快件海关进口税款电子回执，仅供参考。如需海关开具的正式《个人邮递物品进口税款缴纳证》，请在快件签收之日起7天内致电顺丰速运客户服务热线：95338</li>--></ul></div><br/><div>备注:</div><div><ul><li>1.对个人物品税金的计算，海关会根据物品的实际情况对计税价格进行判定，“完税价格”的取值以海关实际计税标准而定</li><li>2.税金合计栏四舍五入保留整数</li><li>3.此为海关电子审单放行回执，仅供对账之用</li></ul></div></div><div class="row"><div class="verification-code"><div class="input-group col-xs-offset-2 col-xs-3"><input type="text" id="validation-download-code" class="form-control no-right-border" placeholder="请输入验证码下载文件"><span class="input-group-addon refresh no-left-border" id="refresh-download-code"><span class="sfi sfi-refresh"></span></span></div><div class="col-xs-2 no-left-padding"><img class="validation-image" id="validation-download-image" src="/sf-service-web/service/captcha/kj3tax?force=true&amp;time=1407399546971"></div><div class="col-xs-2"><button class="primary-button download disabled fileDownloadPromise">下载</button></div></div></div>';return __p},this.JST.tooltipsTable=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<!--关务进出口规则显示结果的模板文件-内容表格 --><table class="table table-striped table-bordered table-hover src-table"><thead><tr><td colspan="3" style="text-align:center">'+(null==(__t="en"===Helper.getSiteLanguage()?"Tax Rate":"税率")?"":__t)+"</td></tr></thead><tbody><tr>",_.each(taxs,function(a,b){__p+="<td>"+(null==(__t=a.taxName)?"":__t)+"</td>"}),__p+="</tr><tr>",_.each(taxs,function(a,b){__p+="<td>"+(null==(__t=a.taxRate)?"":__t)+"</td>"}),__p+="</tr></tbody></table>";return __p},this.JST.topBarUtils=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<li data-tab="weight" class="services_20150709"><span>'+(null==(__t=_l("重量换算器"))?"":__t)+'</span><a href="javascript:void(0);" class="more-info"><i class="sfi sfi-calculator"></i>'+(null==(__t=_l("更多"))?"":__t)+"</a></li><li><span>"+(null==(__t=_l("预计时效"))?"":__t)+'</span></li><li data-tab="price-toggle" class="services_20150709"><span>'+(null==(__t=showDestCurrency?_l("到"):_l("寄"))?"":__t)+(null==(__t=_l("付价"))?"":__t)+'</span><a href="#" class="refresh-switch"><i class="sfi sfi-repay"></i>'+(null==(__t=showDestCurrency?_l("寄付货币换算"):_l("到付货币换算"))?"":__t)+'</a></li><div class="more-weight-wrapper"></div>';return __p},this.JST.trackResult=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)0!=results.length?(__p+='<table class="table table-bordered"><thead><tr><th>'+(null==(__t=_l("运单号"))?"":__t)+"</th><th>"+(null==(__t=_l("帐户号码"))?"":__t)+"</th><th>"+(null==(__t=_l("收件人公司名"))?"":__t)+"</th></tr></thead><tbody>",_.each(results,function(a,b){__p+='<td><a style="color:red;text-decoration:underline;" target= _blank href="'+(null==(__t=patch+a.get("waybillNo"))?"":__t)+'">  <font color="red">'+(null==(__t=a.get("waybillNo"))?"":__t)+"</font> </a></td><!--运单号--><td>"+(null==(__t=a.get("customerCode"))?"":__t)+"</td><!--帐户号码--><td>"+(null==(__t=a.get("addresseeComp"))?"":__t)+"</td><!--收件人公司名 --></tr>"}),__p+="</tbody></table>"):__p+='<p class="text-center">'+(null==(__t=_l("很抱歉，暂未查询到与您提供的信息相匹配的运单号码"))?"":__t)+(null==(__t=_l("如需要获得更多的信息，请致电客户服务热线 080 393 1111。"))?"":__t)+"</p>";return __p},this.JST.waybillChangeRecipientInfo=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+="false"==model.disable?'<!-- 第一步 --><!-- 第一步 --><form class="form-horizontal  step1" onsubmit="return false;"><div class="form-group"><p>'+(null==(__t=_l("为了便于我们与您 联系，请填写以下资料"))?"":__t)+'：</p></div><div class="form-group"><label for="" class="col-sm-2 control-label">'+(null==(__t=_l("联系人"))?"":__t)+'</label><div class="col-sm-7"><input type="text" class="form-control" id="name" placeholder="'+(null==(__t=_l("请输入您的姓名"))?"":__t)+'"></div></div><div class="form-group"><label for="" class="col-sm-2 control-label">'+(null==(__t=_l("联系电话"))?"":__t)+'</label><div class="col-sm-7"><input type="text" class="form-control" id="phone" placeholder="'+(null==(__t=_l("请输入运单上寄件人/收件人手机号或固话"))?"":__t)+'"></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-8"><div class="error" errCode="1"  style="padding-bottom:5px;">'+(null==(__t=_l("输入的联系电话与运单上的联系电话不一致"))?"":__t)+'</div><div class="error" errCode="2" style="padding-bottom:5px;">'+(null==(__t=_l("请输入联系人"))?"":__t)+'</div><div class="error" errCode="3" style="padding-bottom:5px;">'+(null==(__t=_l("请输入正确的联系电话"))?"":__t)+'</div><button type="button" class="cancel-button cancel-complain-btn">'+(null==(__t=_l("取消"))?"":__t)+'</button>&nbsp;&nbsp;&nbsp;&nbsp;<button type="button" class="primary-button"  id="nextBtn">'+(null==(__t=_l("下一步"))?"":__t)+'</button></div></div></form><!-- 第二步 --><form class="form-horizontal  step2" onsubmit="return false;"><div class="form-group">'+(null==(__t=_l("请填写新的收件人信息"))?"":__t)+'<br><span class="tips">'+(null==(__t=_l("为保障快件安全，稍后将有客服人员与您联系确认"))?"":__t)+'</span></div><div class="form-group"><label for="" class="col-sm-2 control-label">'+(null==(__t=_l("姓名"))?"":__t)+'</label><div class="col-sm-6"><input type="text" class="form-control" id="name" placeholder="'+(null==(__t=_l("请输入收件人姓名"))?"":__t)+'"></div></div><div class="form-group"><label for="" class="col-sm-2 control-label">'+(null==(__t=_l("联系电话"))?"":__t)+'</label><div class="col-sm-6"><input type="text" class="form-control" id="phone" placeholder="'+(null==(__t=_l("请输入收件人手机号或固话"))?"":__t)+'"></div></div><div class="form-group"><label for="" class="col-sm-2 control-label">'+(null==(__t=_l("收件地址"))?"":__t)+'</label><div class="col-sm-6 sender-location location-inputs normal-inputs"><div class="detail-location-input" data-max-level="4" data-hide-area-tab="true" data-do-restore-state="true"data-only-current-tab="true"><input type="text" class="form-control readonly ui-autocomplete-input" data-parsley-required=""readonly="" id="sender-address" name="sender-address" data-parsley-trigger="change"data-parsley-errors-container=".sender-location" placeholder="'+(null==(__t=_l("请选择收件所在地区"))?"":__t)+'"autocomplete="off"></div></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-7"><input type="text" class="form-control" id="send_address_detail" placeholder="'+(null==(__t=_l("请填写街道及详细地址"))?"":__t)+'"></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-8"><div id="step2_err_wrap"><div class="error" errCode="2"  style="padding-bottom:5px;">'+(null==(__t=_l("请输入姓名"))?"":__t)+'</div><div class="error" errCode="3"  style="padding-bottom:5px;">'+(null==(__t=_l("请输入正确的联系电话"))?"":__t)+'</div><div class="error" errCode="4"  style="padding-bottom:5px;">'+(null==(__t=_l("请填写收件地址"))?"":__t)+'</div></div><button type="button" class="cancel-button cancel-complain-btn">'+(null==(__t=_l("取消"))?"":__t)+'</button>&nbsp;&nbsp;&nbsp;&nbsp;<button type="button" class="primary-button" id="submitBtn">'+(null==(__t=_l("提交"))?"":__t)+'</button></div></div></form><!-- 第三步 --><div class="action-success   step3"><h3>'+(null==(__t=_l("您的操作已提交成功！"))?"":__t)+"</h3><p>"+(null==(__t=_l("稍后将有顺丰客服与您联系"))?"":__t)+'</p><div class="action-btn"><button type="button" class="primary-button" id="doneBtn">'+(null==(__t=_l("完成"))?"":__t)+"</button></div></div>":'<div class="action-success" id="alreadyDone"><h3>'+(null==(__t=_l("您已提交“修改收方资料”请求"))?"":__t)+'</h3><p class="tips">'+(null==(__t=_l("提交时间"))?"":__t)+"："+(null==(__t=model.opTime)?"":__t)+"</p></div>";return __p},this.JST.waybillChangeRecipientInfoTab=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<li data-auto-tab="waybill-modify-info"><span class="ico-sfi-auto sfi-modify-info"></span><span>'+(null==(__t=_l("更改收件人资料"))?"":__t)+"</span></li>";return __p},this.JST.waybillChildQuery=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class="verification-code"><div class="input-group"  style="width: 300px;"><input type="text" class="form-control" style="width:300px" placeholder=\''+(null==(__t=_l("请输入验证码"))?"":__t)+'\'><img id="validation-image-child" style="height:31px;margin-left:25px;margin-top: -3px;position:relative;top:-28px;left:147px"></div><div class="error validation-code-error" style="margin-top: 10px;">'+(null==(__t=_l("您输入的验证码有误，请重新输入"))?"":__t)+'</div><div class="error" data-error="server-network">'+(null==(__t=_l("服务器暂不可用，请稍后再试"))?"":__t)+'</div></div><button type="button" class="primary-button child-waybill disabled" style="margin-left:15px" data-loading-text="查询中...">'+(null==(__t=_l("查询"))?"":__t)+"</button>";return __p},this.JST.waybillChildRouteTab=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<li data-tab="waybill-childRoute" class="childRoute"><span class="sfi sfi-list"></span><span>'+(null==(__t=_l("子单资料"))?"":__t)+"</span></li>";return __p},this.JST.waybillComplain=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<ul class="auto-tabs clearfix"></ul><div class="data_auto_wrapper"></div>';return __p},this.JST.waybillComplainTab=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<li data-tab="waybill-auto"><span class="sfi sfi-autoAction"></span><span>'+(null==(__t=_l("更多服务"))?"":__t)+"</span></li>";return __p},this.JST.waybillDeliveryAgain=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+="false"==model.disable?'<!-- 第一步 --><form class="form-horizontal step1" ><div class="form-group"><p>'+(null==(__t=_l("为了便于我们与您 联系，请填写以下资料"))?"":__t)+'：</p></div><div class="form-group"><label for="" class="col-sm-2 control-label">'+(null==(__t=_l("联系人"))?"":__t)+'</label><div class="col-sm-7"><input type="text" class="form-control" id="name" placeholder="'+(null==(__t=_l("请输入您的姓名"))?"":__t)+'"></div></div><div class="form-group"><label for="" class="col-sm-2 control-label">'+(null==(__t=_l("联系电话"))?"":__t)+'</label><div class="col-sm-7"><input type="text" class="form-control" id="phone" placeholder="'+(null==(__t=_l("请输入运单上寄件人/收件人手机号或固话"))?"":__t)+'"></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-8"><div class="error" errCode="1"  style="padding-bottom:5px;">'+(null==(__t=_l("输入的联系电话与运单上的联系电话不一致"))?"":__t)+'</div><div class="error" errCode="2" style="padding-bottom:5px;">'+(null==(__t=_l("请输入联系人"))?"":__t)+'</div><div class="error" errCode="3" style="padding-bottom:5px;">'+(null==(__t=_l("请输入正确的联系电话"))?"":__t)+'</div><button type="button" class="cancel-button cancel-complain-btn">'+(null==(__t=_l("取消"))?"":__t)+'</button>&nbsp;&nbsp;&nbsp;&nbsp;<button type="button" class="primary-button"  id="nextBtn">'+(null==(__t=_l("提交"))?"":__t)+'</button></div></div></form><!-- 第二步 --><div class="action-success step2"><h3>'+(null==(__t=_l("您的操作已提交成功！"))?"":__t)+"</h3><p>"+(null==(__t=_l("稍后将有顺丰客服与您联系"))?"":__t)+'</p><div class="action-btn"><button type="button" class="primary-button" id="doneBtn">'+(null==(__t=_l("完成"))?"":__t)+"</button></div></div>":'<div class="action-success" id="alreadyDone"><h3>'+(null==(__t=_l("您已提交“再次派送”请求"))?"":__t)+'</h3><p class="tips">'+(null==(__t=_l("提交时间"))?"":__t)+"："+(null==(__t=model.opTime)?"":__t)+"</p></div>";return __p},this.JST.waybillDeliveryAgainTab=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<li data-auto-tab="waybill-reship"><span class="ico-sfi-auto sfi-reship"></span><span>'+(null==(__t=_l("再次派送"))?"":__t)+"</span></li>";return __p},this.JST.waybillDetailBillConfirmation=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class="verification-code" style="overflow:hidden"><div class="input-group input-code"><input type="text" id="sender-sms-validation-input" class="form-control"  placeholder=\''+(null==(__t=_l("请输入验证码"))?"":__t)+'\'></div><img id="bill-confirmation-validation-image" style="height:31px;margin-left:15px"/><div class="error" data-error="wrong-validation-code">'+(null==(__t=_l("您输入的验证码有误，请重新输入"))?"":__t)+'</div><div class="error" data-error="wrong-validation-time">'+(null==(__t=_l("一个运单号在一天之内最多只能查5次，请明天再来"))?"":__t)+'</div><div class="error" data-error="wrong-validation-ip">'+(null==(__t=_l("每个IP在一分钟之内最多只能查60次"))?"":__t)+'</div><div class="error" data-error="wrong-validation-network">'+(null==(__t=_l("服务器暂不可用，请稍后再试"))?"":__t)+'</div><div class="input-group" style="margin-left:15px"><button class="primary-button submit-application billConfirmationBtn disabled" data-loading-text=\''+(null==(__t=_l("查询中..."))?"":__t)+"'>"+(null==(__t=_l("确认"))?"":__t)+"</button></div></div>";return __p},this.JST.waybillDetailBillConfirmationTab=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<li data-tab="waybill-confirmation"><span class="sfi sfi-scancheck"></span><span>'+(null==(__t=_l("国际件电子派送证明"))?"":__t)+"</span></li>";return __p},this.JST.waybillDetailBillInfoValidationView=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<form class="form-horizontal" onsubmit="return false;"><div class="form-group"><label for="sender-phone-number-input-billInfo" class="col-sm-3 control-label">'+(null==(__t=_l("手机号码"))?"":__t)+'</label><div class="col-sm-5">',__p+=result.senderPhone?'<p class="form-control-static">'+(null==(__t=_p(_l("验证短信已发送至%s，请查收"),_p(" %s****%s ",result.senderPhone.substr(0,3),result.senderPhone.substr(7,11))))?"":__t)+"</p>":'<input type="text" class="form-control" id="sender-phone-number-input-billInfo" placeholder=\''+(null==(__t=_l("请输入运单上的手机号码"))?"":__t)+"'>",__p+='<div class="error" data-error="wrong-phone-number">'+(null==(__t=_l("您输入的手机号或图形验证码有误，请重新输入"))?"":__t)+'</div><div class="error" data-error="phone-number-network-error">'+(null==(__t=_l("网络异常无法提交，请拨打客服热线95338，顺丰员工将竭诚为您服务。"))?"":__t)+'</div><div class="error" data-error="limit-send-sms">'+(null==(__t=_l("该手机号本日已达到发送短信上限"))?"":__t)+'</div></div><div class="col-sm-2"><button class="primary-button count-down-button disabled" data-count-down-time=30 data-count-down-title=\''+(null==(__t=_l("重新获取(%s)"))?"":__t)+"' data-loading-text='"+(null==(__t=_l("获取中..."))?"":__t)+"'>"+(null==(__t=_l("获取验证码"))?"":__t)+'</button></div></div><div class="form-group"><div class="col-sm-offset-3 col-sm-4"><input type="text" id="sender-sms-validation-input-billInfo" class="form-control" placeholder=\''+(null==(__t=_l("请输入验证码。"))?"":__t)+'\'></div></div><div class="form-group"><div class="col-sm-offset-3 col-sm-9"><div class="error" data-error="wrong-validation-code">'+(null==(__t=_l("您输入的验证码有误，请重新输入"))?"":__t)+'</div><div class="error" data-error="expired-validation-code">'+(null==(__t=_l("您输入的验证码已经过期，请重新获取"))?"":__t)+'</div><div class="error" data-error="submit-network-error">'+(null==(__t=_l("网络异常无法提交，请拨打客服热线95338，顺丰员工将竭诚为您服务。"))?"":__t)+'</div><div class="error" data-error="wrong-validation-id">'+(null==(__t=_l("一个运单号在一天之内最多只能查5次，请明天再来"))?"":__t)+'</div><div class="error" data-error="wrong-validation-ip">'+(null==(__t=_l("每个IP在一分钟之内最多只能查60次"))?"":__t)+'</div><div class="error" data-error="wrong-validation-phone">'+(null==(__t=_l("相同手机号在一分钟之内最多只能查3次"))?"":__t)+'</div><button class="primary-button submit-application disabled" data-loading-text=\''+(null==(__t=_l("查询中..."))?"":__t)+"'>"+(null==(__t=_l("确认"))?"":__t)+"</button></div></div></form>";return __p},this.JST.waybillDetailBillPicture=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<form class="form-horizontal" onsubmit="return false;" ><div class="form-group"><label for="sender-phone-number-input" class="col-sm-3 control-label">'+(null==(__t=_l("手机号码"))?"":__t)+'</label><div class="col-sm-5">',__p+=result.senderPhone?'<p class="form-control-static">'+(null==(__t=_p(_l("验证短信已发送至%s，请查收"),_p(" %s****%s ",result.senderPhone.substr(0,3),result.senderPhone.substr(7,11))))?"":__t)+"</p>":'<input type="text" class="form-control" id="sender-phone-number-input" placeholder=\''+(null==(__t=_l("请输入运单上的手机号码"))?"":__t)+'\' data-validation-regexp=":phone">',__p+='<div class="error" data-error="wrong-phone-number">'+(null==(__t=_l("您输入的手机号或图形验证码有误，请重新输入"))?"":__t)+'</div><div class="error" data-error="phone-number-network-error">'+(null==(__t=_l("网络异常无法提交，请拨打客服热线95338，顺丰员工将竭诚为您服务。"))?"":__t)+'</div><div class="error" data-error="limit-send-sms">'+(null==(__t=_l("该手机号本日已达到发送短信上限"))?"":__t)+'</div></div><div class="col-sm-2"><button class="primary-button count-down-button disabled" data-count-down-time=30 data-count-down-title=\''+(null==(__t=_l("重新获取(%s)"))?"":__t)+"' data-loading-text='"+(null==(__t=_l("获取中..."))?"":__t)+"'>"+(null==(__t=_l("获取验证码"))?"":__t)+'</button></div></div><div class="form-group"><div class="col-sm-offset-3 col-sm-4"><input type="text" id="sender-sms-validation-input" class="form-control" placeholder=\''+(null==(__t=_l("请输入验证码。"))?"":__t)+'\'></div></div><div class="form-group" id="showRegisterMember"  ',
result.showRegisterMemberInSignedPic||(__p+=' style="display:none" '),__p+=' ><div class="col-sm-offset-3 col-sm-7"><label data-parsley-priority-enabled=""><input type="checkbox" name="registerMember" id="registerMember" checked > '+(null==(__t=_l("注册成为顺丰会员并同意会员服务条款"))?"":__t)+'</label></div></div><div class="form-group"><div class="col-sm-offset-3 col-sm-9"><div class="error" data-error="wrong-validation-code">'+(null==(__t=_l("您输入的验证码有误，请重新输入"))?"":__t)+'</div><div class="error" data-error="expired-validation-code">'+(null==(__t=_l("您输入的验证码已经过期，请重新获取"))?"":__t)+'</div><div class="error" data-error="submit-network-error">'+(null==(__t=_l("网络异常无法提交，请拨打客服热线95338，顺丰员工将竭诚为您服务。"))?"":__t)+'</div><div class="error" data-error="wrong-validation-id">'+(null==(__t=_l("一个运单号在一天之内最多只能查5次，请明天再来"))?"":__t)+'</div><div class="error" data-error="wrong-validation-ip">'+(null==(__t=_l("每个IP在一分钟之内最多只能查60次"))?"":__t)+'</div><div class="error" data-error="wrong-validation-phone">'+(null==(__t=_l("相同手机号在一分钟之内最多只能查3次"))?"":__t)+'</div><button class="primary-button submit-application disabled" data-loading-text=\''+(null==(__t=_l("查询中..."))?"":__t)+"'>"+(null==(__t=_l("确认"))?"":__t)+"</button></div></div></form>";return __p},this.JST.waybillDetailBillPicturePop=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class="signed-picture-pop"  id="waybill-signed-picture"><div class="layer-header"><a class="layer-close" title="'+(null==(__t=_l("关闭"))?"":__t)+'" ><img src="'+(null==(__t=Helper.getResourceURL(_l("关闭签收图图片地址")))?"":__t)+'" /></a><a class="layer-rotate" title="'+(null==(__t=_l("旋转"))?"":__t)+'" id="rotate_pic" style="top:30px;"></a><a class="layer-print" title="'+(null==(__t=_l("打印"))?"":__t)+'" id="print_pic" style="top:84px;"></a></div><div class="layer-content"><div class="layer-img" id="picContainer"></div></div></div>';return __p},this.JST.waybillDetailBillPicturePopNoImage=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class="signed-picture-pop"  id="waybill-signed-picture" style="top:45%;right:20%;left:20%;bottom:45%;background-color:white;height: 40px;line-height: 40px;"><div class="layer-header"><a class="layer-close" title="'+(null==(__t=_l("关闭"))?"":__t)+'" ><img src="'+(null==(__t=Helper.getResourceURL(_l("关闭签收图图片地址")))?"":__t)+'" /></a></div><div class="layer-content"><div class="layer-img">'+(null==(__t=_l("很抱歉，签收图暂未录入系统，请等待。签收图将在运单签收后的1~2个工作日录入系统。"))?"":__t)+"</div></div></div>";return __p},this.JST.waybillDetailBillPictureTab=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<li data-tab="waybill-picture"><span class="sfi sfi-scancheck"></span><span>'+(null==(__t=_l("运单资料&签收图"))?"":__t)+"</span></li>";return __p},this.JST.waybillDetailBillTemperature=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div><ul class="page_tem"></ul><div id="container" style="width: auto; height: auto; margin: 0 auto"></div><div style="color:red"> '+(null==(__t=_l("*由于受通讯信号、温度记录设备性能等因素影响，温度数据可能存在丢失、延时等情况 ，仅供参考"))?"":__t)+"</div></div>";return __p},this.JST.waybillDetailBillTemperaturePage=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)for(var i=1;i<=pageCount;i++)__p+='<li class="'+(null==(__t=pageIndex==i?"current":"")?"":__t)+'"><a href="#"class= "'+(null==(__t=pageIndex!=i?"goToPage":"")?"":__t)+'"data-pageindex="'+(null==(__t=i)?"":__t)+'">'+(null==(__t=i)?"":__t)+"</a></li>";return __p},this.JST.waybillDetailBillTemperatureTab=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<li data-tab="waybill-temperature"><span class="sfi temperature_icon">&nbsp;</span><span>'+(null==(__t=_l("温度Beta"))?"":__t)+"</span></li>";return __p},this.JST.waybillDetailGPS=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+=result.data?'<div class="waybill-gps-map" id="'+(null==(__t=result.id)?"":__t)+'"></div>':'<p class="text-center">'+(null==(__t=_l("暂无GPS轨迹信息"))?"":__t)+"</p>";return __p},this.JST.waybillDetailGPSTab=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<li data-tab="waybill-gps"><span class="sfi sfi-gps"></span><span>'+(null==(__t=_l("GPS轨迹"))?"":__t)+"</span></li>";return __p},this.JST.waybillDetailInfo=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)result?(__p+='<ul class="package-infos"><li class="info"><span class="info-title">'+(null==(__t=_l("付款方式"))?"":__t)+'</span><span class="info-detail">'+(null==(__t=result.paymentType)?"":__t)+'</span></li><li class="info"><span class="info-title">'+(null==(__t=_l("计费重量"))?"":__t)+'</span><span class="info-detail">'+(null==(__t=result.weight)?"":__t)+(null==(__t=result.weightUnit)?"":__t)+'</span></li><li class="info"><span class="info-title">'+(null==(__t=_l("托寄物内容"))?"":__t)+'</span><span class="info-detail">'+(null==(__t=result.contentName)?"":__t)+'</span></li><li class="info"><span class="info-title">'+(null==(__t=_l("附加服务"))?"":__t)+'</span><span class="info-detail">'+(null==(__t=result.extraService||_l("无附加服务"))?"":__t)+'</span></li><li class="info"><span class="info-title">'+(null==(__t=_l("数量"))?"":__t)+'</span><span class="info-detail">'+(null==(__t=result.contentQuantity)?"":__t)+"</span></li>",result.freight>0&&(__p+='<li class="info"><span class="info-title">'+(null==(__t=_l("运费"))?"":__t)+'</span><span class="info-detail">'+(null==(__t=result.freight)?"":__t)+(null==(__t=result.freightUnit)?"":__t)+"</span></li>"),__p+="</ul>"):__p+='<p class="text-center">'+(null==(__t=_l("正在加载数据..."))?"":__t)+"</p>";return __p},this.JST.waybillDetailInfoTab=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<li data-tab="waybill-details"><span class="sfi sfi-list"></span><span>'+(null==(__t=_l("运单资料"))?"":__t)+"</span></li>";return __p},this.JST.waybillDetailPrecedence=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<form class="form-horizontal" onsubmit="return false;" ><div class="form-group"><div class="col-sm-3 text-center"><span class="sfi sfi-running-clock"></span></div><div class="col-sm-9"><p class="alert">'+(null==(__t=result.warehouse?_l("您的快件已经出仓"):_l("您的快件还未出仓"))?"":__t)+'</p><p class="description">'+(null==(__t=result.precedenceRequested?_l("申请提交成功！"):_l("请您填写一下身份信息进行优先派送申请，快递员将优先为您派送快件"))?"":__t)+"</p></div></div>",result.precedenceRequested?__p+='<p class="submit-success">'+(null==(__t=result.warehouse?_l("快件正在派送途中，已记录信息通知收派员优先派送！"):_l("您的需求已记录，快件到达后我们将尽快为您派送！"))?"":__t)+"</p>":(__p+='<div class="form-group"><label for="sender-phone-number-input" class="col-sm-3 control-label">'+(null==(__t=_l("验证寄件人身份"))?"":__t)+'</label><div class="col-sm-6">',__p+=result.senderPhone?'<p class="form-control-static">'+(null==(__t=_p(_l("验证短信已发送至%s，请查收"),_p(" %s****%s ",result.senderPhone.substr(0,3),result.senderPhone.substr(7,11))))?"":__t)+"</p>":'<input type="text" class="form-control" id="sender-phone-number-input" placeholder=\''+(null==(__t=_l("请输入您运单上寄件人的手机号"))?"":__t)+'\' data-validation-regexp=":phone">',__p+='<div class="error" data-error="wrong-phone-number">'+(null==(__t=_l("您输入的手机号或图形验证有误，请重新输入"))?"":__t)+'</div><div class="error" data-error="phone-number-network-error">'+(null==(__t=_l("网络异常无法提交，请拨打客服热线95338，顺丰员工将竭诚为您服务。"))?"":__t)+'</div><div class="error" data-error="limit-send-sms">'+(null==(__t=_l("该手机号本日已达到发送短信上限"))?"":__t)+'</div></div><div class="col-sm-2"><button class="primary-button count-down-button disabled" data-count-down-time=30 data-count-down-title=\''+(null==(__t=_l("重新获取(%s)"))?"":__t)+"' data-loading-text='"+(null==(__t=_l("获取中..."))?"":__t)+"'>"+(null==(__t=_l("获取验证码"))?"":__t)+'</button></div></div><div class="form-group"><div class="col-sm-offset-3 col-sm-4"><input type="text" id="sender-sms-validation-input" class="form-control" placeholder=\''+(null==(__t=_l("验证码"))?"":__t)+'\'></div></div><div class="form-group" id="precedence-show-register-member"  ',result.showRegisterMemberInPrecedence||(__p+=' style="display:none" '),__p+=' ><div class="col-sm-offset-3 col-sm-7"><label data-parsley-priority-enabled=""><input type="checkbox" name="precedence-register-member" id="precedence-register-member" checked > '+(null==(__t=_l("注册成为顺丰会员并同意会员服务条款"))?"":__t)+'</label></div></div><div class="form-group"><div class="col-sm-offset-3 col-sm-9"><div class="error" data-error="wrong-validation-code">'+(null==(__t=_l("您输入的验证码有误，请重新输入"))?"":__t)+'</div><div class="error" data-error="expired-validation-code">'+(null==(__t=_l("您输入的验证码已经过期，请重新获取"))?"":__t)+'</div><div class="error" data-error="submit-network-error">'+(null==(__t=_l("网络异常无法提交，请拨打客服热线95338，顺丰员工将竭诚为您服务。"))?"":__t)+'</div><button class="primary-button submit-application disabled" data-loading-text=\''+(null==(__t=_l("申请中..."))?"":__t)+"'>"+(null==(__t=_l("提交优派申请"))?"":__t)+"</button></div></div>"),__p+="</form>";return __p},this.JST.waybillDetailPrecedenceTab=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<li data-tab="waybill-precedence"><span class="sfi sfi-speed-up"></span><span>'+(null==(__t=_l("优先派送"))?"":__t)+"</span></li>";return __p},this.JST.waybillDetailQRCode=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<div class="qrcode-popover" id="qrcode-popover-'+(null==(__t=billNumber)?"":__t)+'">',__p+=showLoading?'<div class="text-center loading-qrcode">'+(null==(__t=_l("正在加载二维码..."))?"":__t)+"</div>":showError?'<img src="'+(null==(__t=qrcodeURL)?"":__t)+'" alt="'+(null==(__t=billNumber)?"":__t)+'" class="clearfix"><p class="loading-error text-center">'+(null==(__t=_l("请求失败，请稍后重试<br />或者关注顺丰速运官方微信。"))?"":__t)+"</p>":'<img src="'+(null==(__t=qrcodeURL)?"":__t)+'" alt="'+(null==(__t=billNumber)?"":__t)+'"><p>'+(null==(__t=_l("使用微信扫一扫，关注微信公众号并持续追踪该运单状态"))?"":__t)+"</p>",__p+="</div>";return __p},this.JST.waybillDetailQRcodeTab=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<li><span class="sfi sfi-qrcode"></span><span>'+(null==(__t=_l("扫码关注"))?"":__t)+"</span></li>";return __p},this.JST.waybillDetailRefund=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class="refund-request-success"><a class="float-right" href="'+(null==(__t=link)?"":__t)+'" target="_blank">'+(null==(__t=_l("查看超时退费规则"))?"":__t)+"</a><p>"+(null==(__t=_l("您的运单已超时，可致电95338咨询退费相关事宜，谢谢！"))?"":__t)+"</p></div>";return __p},this.JST.waybillDetailRefundTab=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<li data-tab="waybill-refund"><span class="sfi sfi-pay-back"></span><span>'+(null==(__t=_l("超时退费"))?"":__t)+"</span></li>";return __p},this.JST.waybillDetailRoute=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)results.length>0?_.each(results,function(a,b){__p+='<div data-toggle="status-toggle" class="status-update-box ',0===b&&(__p+=" open  "),__p+=' "><div class="status-update-tab">'+(null==(__t=toLocalDate(a[0]))?"":__t)+'<b class="arrow"></b></div><table><tbody>',_.each(a[1],function(a){__p+='<tr class="status-update"><td class="time">'+(null==(__t=toLocalTime(a.scanDateTime))?"":__t)+"</td>",a.remark&&(a.remark=a.remark.replace('id="opr_phone"','class="route-phone"'),"ru"===Helper.getSiteLocation()&&("T13"===limitCodes&&31==a.opCode&&_.contains(T13_virtualAddressCodeList,a.zoneCode)&&-1==a.remark.indexOf(_l("Tip31"))?a.remark+=_l("Tip31"):"T14"===limitCodes&&204==a.opCode&&_.contains(T14_virtualAddressCodeList,a.zoneCode)&&(a.remark=_l("Tip204")))),__p+='<td class="update">'+(null==(__t=a.remark)?"":__t)+"</td></tr>"}),__p+="</tbody></table></div>"}):__p+='<p class="text-center">'+(null==(__t=_l("该运单目前还没有路由信息，请耐心等待。"))?"":__t)+"</p>";return __p},this.JST.waybillDetailRouteTab=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<li data-tab="waybill-status"><span class="sfi sfi-trace"></span><span>'+(null==(__t=_l("运单动态"))?"":__t)+"</span></li>";return __p},this.JST.waybillDetailSatisfaction=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+=result?'<div class="rate-wrapper row '+(null==(__t=void 0===result.receiverRate?"available":"")?"":__t)+'"><div class="col-xs-6"><p>'+(null==(__t=_p(_l("您对%s的服务是否满意"),"<strong>"+_l("收件员")+"</strong>"))?"":__t)+'</p></div><div class="col-xs-3 rate-button '+(null==(__t=100===result.receiverRate?"active":"")?"":__t)+'" data-responder="receiver" data-rate="100"><i class="happy-face"></i><span>'+(null==(__t=_l("满意"))?"":__t)+'</span></div><div class="col-xs-3 rate-button '+(null==(__t=0===result.receiverRate?"active":"")?"":__t)+'" data-responder="receiver" data-rate="0"><i class="sad-face"></i><span>'+(null==(__t=_l("不满意"))?"":__t)+'</span></div></div><div class="rate-wrapper row '+(null==(__t=void 0===result.senderRate?"available":"")?"":__t)+'"><div class="col-xs-6"><p>'+(null==(__t=_p(_l("您对%s的服务是否满意"),"<strong>"+_l("派件员")+"</strong>"))?"":__t)+'</p></div><div class="col-xs-3 rate-button '+(null==(__t=100===result.senderRate?"active":"")?"":__t)+'" data-responder="sender" data-rate="100"><i class="happy-face"></i><span>'+(null==(__t=_l("满意"))?"":__t)+'</span></div><div class="col-xs-3 rate-button '+(null==(__t=0===result.senderRate?"active":"")?"":__t)+'" data-responder="sender" data-rate="0"><i class="sad-face"></i><span>'+(null==(__t=_l("不满意"))?"":__t)+'</span></div></div><div class="error text-center">'+(null==(__t=_l("评价请求失败，请稍后重试。"))?"":__t)+'</div><div class="message text-center">'+(null==(__t=_l("评价请求成功，感谢你的反馈。"))?"":__t)+'</div><div class="loading text-center">'+(null==(__t=_l("评价中，请稍等..."))?"":__t)+"</div>":'<p class="text-center">'+(null==(__t=_l("正在加载数据..."))?"":__t)+"</p>";return __p},this.JST.waybillDetailSatisfactionTab=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<li data-tab="waybill-satisfaction"><span class="sfi sfi-satisfy"></span><span>'+(null==(__t=_l("服务满意度"))?"":__t)+"</span></li>";return __p},this.JST.waybillExamNotFound=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class="main-content-row delivery"><div class="delivery-brief not-found">'+(null==(__t=_p(_l("抱歉，未查到此准考证号关联快件信息，可能由于快件尚未交寄或招生部门未提供准考证号无法链接到快件，建议您向招生部门咨询，获得快件运单号后在网站首页查询或致电顺丰客服热线95338")))?"":__t)+"</div></div>";return __p},this.JST.waybillNotFound=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<div class="main-content-row delivery"><div class="delivery-brief not-found">',__p+="960"===billNumber.substr(0,3)?null==(__t=_p(_l("未查到此苹果运单%s信息","抱歉！未查到此运单%s信息，请确认运单号码是否正确，或致电顺丰客服热线4006 635 333"),billNumber))?"":__t:null==(__t=_p(_l("未查到此运单%s信息","抱歉！未查到此运单%s信息，请确认运单号码是否正确，或致电顺丰客服热线4008 111 111"),billNumber))?"":__t,__p+="</div></div>";return __p},this.JST.waybillPayFreightDeliveryAgain=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+="false"==model.disable?'<!-- 第一步 --><form class="form-horizontal step1" onsubmit="return false;"><div class="form-group"><p>'+(null==(__t=_l("为了便于我们与您 联系，请填写以下资料"))?"":__t)+'：</p></div><div class="form-group"><label for="" class="col-sm-2 control-label">'+(null==(__t=_l("联系人"))?"":__t)+'</label><div class="col-sm-7"><input type="text" class="form-control" id="name" placeholder="'+(null==(__t=_l("请输入您的姓名"))?"":__t)+'"></div></div><div class="form-group"><label for="" class="col-sm-2 control-label">'+(null==(__t=_l("联系电话"))?"":__t)+'</label><div class="col-sm-7"><input type="text" class="form-control" id="phone" placeholder="'+(null==(__t=_l("请输入运单上寄件人/收件人手机号或固话"))?"":__t)+'"></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-8"><div class="error" errCode="1"  style="padding-bottom:5px;">'+(null==(__t=_l("输入的联系电话与运单上的联系电话不一致"))?"":__t)+'</div><div class="error" errCode="2" style="padding-bottom:5px;">'+(null==(__t=_l("请输入联系人"))?"":__t)+'</div><div class="error" errCode="3" style="padding-bottom:5px;">'+(null==(__t=_l("请输入正确的联系电话"))?"":__t)+'</div><button type="button" class="cancel-button cancel-complain-btn">'+(null==(__t=_l("取消"))?"":__t)+'</button>&nbsp;&nbsp;&nbsp;&nbsp;<button type="button" class="primary-button" id="nextBtn">'+(null==(__t=_l("下一步"))?"":__t)+'</button></div></div></form><!-- 第二步 --><form class="form-horizontal step2" onsubmit="return false;"><div class="form-group">'+(null==(__t=_l("请选择此快件的支付运费再派方式"))?"":__t)+'<br><span class="tips">'+(null==(__t=_l("为保障快件安全，稍后将有客服人员与您联系确认"))?"":__t)+'</span></div><div class="form-group"><p data-radio="return-radio" class="btn-radio checked" data-way="sender">'+(null==(__t=_l("改由寄件人支付快递费用（含更改付款方式手续费），并安排派送"))?"":__t)+'</p></div><div class="form-group"><p data-radio="return-radio" class="btn-radio">'+(null==(__t=_l("收件人同意支付费用，并安排派送"))?"":__t)+'</p></div><div class="form-group"><div class="col-sm-offset-2 col-sm-8"><button type="button" class="cancel-button cancel-complain-btn">'+(null==(__t=_l("取消"))?"":__t)+'</button>&nbsp;&nbsp;&nbsp;&nbsp;<button type="button" class="primary-button" id="submitBtn">'+(null==(__t=_l("提交"))?"":__t)+'</button></div></div></form><!-- 第三步 --><div class="action-success step3"><h3>'+(null==(__t=_l("您的操作已提交成功！"))?"":__t)+"</h3><p>"+(null==(__t=_l("稍后将有顺丰客服与您联系"))?"":__t)+'</p><div class="action-btn"><button type="button" class="primary-button" id="doneBtn">'+(null==(__t=_l("完成"))?"":__t)+"</button></div></div>":'<div class="action-success" id="alreadyDone"><h3>'+(null==(__t=_l("您已提交“支付运费再派”请求"))?"":__t)+'</h3><p class="tips">'+(null==(__t=_l("提交时间"))?"":__t)+"："+(null==(__t=model.opTime)?"":__t)+"</p></div>";return __p},this.JST.waybillPayFreightDeliveryAgainTab=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<li data-auto-tab="waybill-pay-ship"><span class="ico-sfi-auto sfi-pay-ship"></span><span>'+(null==(__t=_l("支付运费再派"))?"":__t)+"</span></li>";return __p},this.JST.waybillResult=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<div class="delivery-brief" id="waybill-'+(null==(__t=result.id)?"":__t)+'"><div class="wrapper_left">',result.originOld&&result.destinationOld&&(__p+='<div class="locations">'+(null==(__t=result.originOld)?"":__t)+'<span class="location-arrow"></span>'+(null==(__t=result.destinationOld)?"":__t)+"</div>"),__p+='<div class="delivery-content"><span class="number">'+(null==(__t=result.id)?"":__t)+"</span>","960"!=result.id.substr(0,3)&&(__p+='<span class="product-name">',result.productCode&&"http://"===_l(result.productCode).substr(0,7)&&"tc"!=Helper.getSiteLanguage()?__p+='<a href=\'javascript:void(0)\' class="linkProduct" title="'+(null==(__t=result.productCode)?"":__t)+'" >'+(null==(__t=result.productName)?"":__t)+"</a>":result.productCode&&"tc"!=Helper.getSiteLanguage()&&(__p+=null==(__t=result.productName)?"":__t),__p+="</span>",result.signed===!1&&result.dynamicExpectedDeliveryTm&&result.destination&&"hk"!==Helper.getSiteLocation()&&("en"===Helper.getSiteLanguage()?__p+=result.delay===!1?'<span class="product-time"><p>'+(null==(__t=_l("Estimated to arrive before:"))?"":__t)+"<i>"+(null==(__t=moment(result.dynamicExpectedDeliveryTm.substring(0,result.dynamicExpectedDeliveryTm.indexOf("+")>=0?result.dynamicExpectedDeliveryTm.indexOf("+"):result.dynamicExpectedDeliveryTm.length)).format("YYYY.MM.DD HH:mm"))?"":__t)+'</i><p class="product-time-p">'+(null==(__t=_l("(For reference only,and the actual time prevails)"))?"":__t)+"</p></span>":'<span class="product-time">'+(null==(__t=_l("Recalculating the expected delivery time…"))?"":__t)+"</span>":"sc"===Helper.getSiteLanguage()&&(__p+=result.delay===!1?'<span class="product-time"><p>'+(null==(__t=_l("预计"))?"":__t)+"<i>"+(null==(__t=moment(result.dynamicExpectedDeliveryTm.substring(0,result.dynamicExpectedDeliveryTm.indexOf("+")>=0?result.dynamicExpectedDeliveryTm.indexOf("+"):result.dynamicExpectedDeliveryTm.length)).format("YYYY.MM.DD HH:mm"))?"":__t)+(null==(__t=_l("前"))?"":__t)+"</i>"+(null==(__t=_l("到达"))?"":__t)+'</p><p class="product-time-p">'+(null==(__t=_l("(仅供参考，具体时效以实际派送时间为准)"))?"":__t)+"</p></span>":'<span class="product-time">'+(null==(__t=_l("预计派送时间重新计算中"))?"":__t)+"</span>"))),__p+="</div>",result.routes.length&&(__p+='<div class="last-update"><span class="time">'+(null==(__t=moment(result.routes[0].scanDateTime).format("YYYY-MM-DD HH:mm"))?"":__t)+'</span><span class="status">',result.routes[0].remark&&(result.routes[0].remark=result.routes[0].remark.replace('id="opr_phone"','class="route-phone"'),"ru"===Helper.getSiteLocation()&&("T13"===result.limitTypeCode&&31==result.routes[0].opCode&&_.contains(T13_virtualAddressCodeList,result.routes[0].zoneCode)?result.routes[0].remark+=_l("Tip31"):"T14"===result.limitTypeCode&&204==result.routes[0].opCode&&_.contains(T14_virtualAddressCodeList,result.routes[0].zoneCode)&&(result.routes[0].remark=_l("Tip204")))),__p+=(null==(__t=result.routes[0].remark)?"":__t)+"</span></div>"),"960"===result.id.substr(0,3)&&(__p+="SINGAPORE"==result.destinationOld.toUpperCase()||"新加坡"==result.destinationOld?'<div class="customer-services">'+(null==(__t=_l("苹果客服专线：1800-3111-111（限新加坡）"))?"":__t)+"</div>":"HONG KONG"==result.destinationOld.toUpperCase()||"香港"==result.destinationOld?'<div class="customer-services">'+(null==(__t=_l("苹果客服专线：852-27300273（限香港）"))?"":__t)+"</div>":"TAIWAN"==result.destinationOld.toUpperCase()||"台湾"==result.destinationOld||"台灣"==result.destinationOld?'<div class="customer-services">'+(null==(__t=_l("苹果客服专线：0800-088830（限台湾座机）02-21926063（台湾座机以外）"))?"":__t)+"</div>":'<div class="customer-services">'+(null==(__t=_l("苹果客服专线","客服专线：4006 635 333"))?"":__t)+"</div>"),__p+="</div>",__p+=expressState?'<span class="status-icon '+(null==(__t=expressState.className)?"":__t)+'">'+(null==(__t=_l(expressState.txt))?"":__t)+"</span>":'<span class="status-icon '+(null==(__t=result.signed?"delivered":"delivering")?"":__t)+'">'+(null==(__t=result.signed?_l("已签收"):_l("运送中"))?"":__t)+"</span>",certifiedShippingImgUrl&&(__p+='<img class="certifiedImg" src="'+(null==(__t=certifiedShippingImgUrl)?"":__t)+'" alt="" title="'+(null==(__t=_l("SF.InternationalExpress.Tips"))?"":__t)+'">'),__p+='</div><div class="delivery-detail top-gray-gradient"><ul class="tabs-wrapper"><div class="backward-scroll"></div><div class="tabs"></div><div class="forward-scroll"></div></ul>',"cn"===Helper.getSiteLocation()&&"sc"===Helper.getSiteLanguage()&&result.expressServiceEvent&&(JSON.parse(result.expressServiceEvent).consigneeMessage?__p+='<p class="warm-reminder">'+(null==(__t=JSON.parse(result.expressServiceEvent).consigneeMessage)?"":__t)+"</p>":JSON.parse(result.expressServiceEvent).shipperMessage&&(__p+='<p class="warm-reminder">'+(null==(__t=JSON.parse(result.expressServiceEvent).shipperMessage)?"":__t)+"</p>")),__p+='<ul class="tab-details display-none"></ul></div>';return __p},this.JST.waybillSendBack=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+="false"==model.disable?'<!-- 第一步 --><form class="form-horizontal step1" onsubmit="return false;"><div class="form-group"><p>'+(null==(__t=_l("为了便于我们与您 联系，请填写以下资料"))?"":__t)+'：</p></div><div class="form-group"><label for="" class="col-sm-2 control-label">'+(null==(__t=_l("联系人"))?"":__t)+'</label><div class="col-sm-7"><input type="text" class="form-control" id="name" placeholder="'+(null==(__t=_l("请输入您的姓名"))?"":__t)+'"></div></div><div class="form-group"><label for="" class="col-sm-2 control-label">'+(null==(__t=_l("联系电话"))?"":__t)+'</label><div class="col-sm-7"><input type="text" class="form-control" id="phone" placeholder="'+(null==(__t=_l("请输入运单上寄件人/收件人手机号或固话"))?"":__t)+'"></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-8"><div class="error" errCode="1"  style="padding-bottom:5px;">'+(null==(__t=_l("输入的联系电话与运单上的联系电话不一致"))?"":__t)+'</div><div class="error" errCode="2" style="padding-bottom:5px;">'+(null==(__t=_l("请输入联系人"))?"":__t)+'</div><div class="error" errCode="3" style="padding-bottom:5px;">'+(null==(__t=_l("请输入正确的联系电话"))?"":__t)+'</div><button type="button" class="cancel-button cancel-complain-btn">'+(null==(__t=_l("取消"))?"":__t)+'</button>&nbsp;&nbsp;&nbsp;&nbsp;<button type="button" class="primary-button" id="nextBtn">'+(null==(__t=_l("下一步"))?"":__t)+'</button></div></div></form><!-- 第二步 --><form class="form-horizontal step2" onsubmit="return false;"><div class="form-group">'+(null==(__t=_l("请选择快件退回方式"))?"":__t)+'<br><span class="tips">'+(null==(__t=_l("快件退回将会产生新的运费，稍后将有客服人员与您联系确认"))?"":__t)+'</span></div><div class="form-group"><p data-radio="return-radio" class="btn-radio checked" data-way="origin">'+(null==(__t=_l("按照寄件地址退回给寄件人"))?"":__t)+'</p><div class="tipsbox" style="margin-left:20px;">'+(null==(__t=_l("为保护客户信息，寄件人信息在官网上不显示，请确认将快件退回给寄件人"))?"":__t)+'</div></div><div class="form-group"><p data-radio="return-radio" class="btn-radio">'+(null==(__t=_l("按照新地址退回"))?"":__t)+'</p><div id="new_return_form" style="display:none;"><div class="form-group"><label for="" class="col-sm-2 control-label">'+(null==(__t=_l("姓名"))?"":__t)+'</label><div class="col-sm-6"><input type="text" class="form-control" id="name" placeholder="'+(null==(__t=_l("请输入收件人姓名"))?"":__t)+'"></div></div><div class="form-group"><label for="" class="col-sm-2 control-label">'+(null==(__t=_l("联系电话"))?"":__t)+'</label><div class="col-sm-6"><input type="text" class="form-control" id="phone" placeholder="'+(null==(__t=_l("请输入收件人手机号或固话"))?"":__t)+'"></div></div><div class="form-group"><label for="" class="col-sm-2 control-label">'+(null==(__t=_l("收件地址"))?"":__t)+'</label><div class="col-sm-6 sender-location location-inputs normal-inputs"><div class="detail-location-input" data-max-level="4" data-hide-area-tab="true"data-do-restore-state="true" data-only-current-tab="true"><input type="text" class="form-control readonly ui-autocomplete-input" data-parsley-required=""readonly="" id="sender-address" name="sender-address" data-parsley-trigger="change"data-parsley-errors-container=".sender-location" placeholder="'+(null==(__t=_l("请选择收件所在地区"))?"":__t)+'"autocomplete="off"></div></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-7"><input type="text" class="form-control" id="send_address_detail"placeholder="'+(null==(__t=_l("请填写街道及详细地址"))?"":__t)+'"></div></div></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-8"><div id="step2_err_wrap"><div class="error" errCode="2"  style="padding-bottom:5px;">'+(null==(__t=_l("请输入收件人姓名"))?"":__t)+'</div><div class="error" errCode="3"  style="padding-bottom:5px;">'+(null==(__t=_l("请输入正确的联系电话"))?"":__t)+'</div><div class="error" errCode="4"  style="padding-bottom:5px;">'+(null==(__t=_l("请填写收件地址"))?"":__t)+'</div></div><button type="button" class="cancel-button cancel-complain-btn">'+(null==(__t=_l("取消"))?"":__t)+'</button>&nbsp;&nbsp;&nbsp;&nbsp;<button type="button" class="primary-button" id="submitBtn">'+(null==(__t=_l("提交"))?"":__t)+'</button></div></div></form><!-- 第三步 --><div class="action-success step3"><h3>'+(null==(__t=_l("您的操作已提交成功！"))?"":__t)+"</h3><p>"+(null==(__t=_l("稍后将有顺丰客服与您联系"))?"":__t)+'</p><div class="action-btn"><button type="button" class="primary-button" id="doneBtn">'+(null==(__t=_l("完成"))?"":__t)+"</button></div></div>":'<div class="action-success" id="alreadyDone"><h3>'+(null==(__t=_l("您已提交“快件退回”请求"))?"":__t)+'</h3><p class="tips">'+(null==(__t=_l("提交时间"))?"":__t)+"："+(null==(__t=model.opTime)?"":__t)+"</p></div>";return __p},this.JST.waybillSendBackTab=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<li data-auto-tab="waybill-return"><span class="ico-sfi-auto sfi-return"></span><span>'+(null==(__t=_l("快件退回"))?"":__t)+"</span></li>";return __p},this.JST.waybillSubscription=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class="selection-info"><label class="checkbox-label" for="delivery-checkbox-all"><input type="checkbox" name="select-all" id="delivery-checkbox-all" '+(null==(__t=waybills.isAllChecked()?"checked":"")?"":__t)+">"+(null==(__t=_l("全选"))?"":__t)+'</label><span class="selected-for-subscription">'+(null==(__t=_p(_l("（已选择%s条运单）"),"<strong>"+waybills.getSubscribedWaybills().length+"</strong>"))?"":__t)+'</span></div><ul class="subscriptions"><li class="mail"><button class="primary-button '+(null==(__t=hasSelected?"":"disabled")?"":__t)+'" >'+(null==(__t=_l("邮件订阅"))?"":__t)+'</button></li><div class="error" data-error="network">'+(null==(__t=_l("二维码请求失败，请稍后重试。"))?"":__t)+'</div></ul><div class="main-content-row mail-subscription toggle-plugins"><h5>'+(null==(__t=_l("通过邮件订阅（最多支持绑定3个邮件订阅路由信息）"))?"":__t)+'</h5><div class="input-group"><input type="text" class="form-control" placeholder="'+(null==(__t=_l("请输入邮件地址"))?"":__t)+'"><button class="primary-button disabled" data-loading-text="'+(null==(__t=_l("订阅中..."))?"":__t)+'">'+(null==(__t=_l("确定"))?"":__t)+'</button></div><div class="success">'+(null==(__t=_l("邮件订阅成功"))?"":__t)+'</div><div class="error" data-error="format">'+(null==(__t=_l("请输入正确邮件地址，且不能重复。"))?"":__t)+'</div><div class="error" data-error="failed">'+(null==(__t=_l("邮件订阅失败，请稍后重试"))?"":__t)+'</div><div class="error" data-error="server-network">'+(null==(__t=_l("服务器暂不可用，请稍后再试"))?"":__t)+'</div><div class="error" data-error="limit-reached">'+(null==(__t=_l("最多只支持3个邮件地址订阅"))?"":__t)+'</div><div class="error" data-error="total-limit-exceeded">'+(null==(__t=_l("抱歉，该运单订阅的邮箱数量超过了最大限制。"))?"":__t)+'</div></div><div class="main-content-row qcode-subscription toggle-plugins"><img src="'+(null==(__t=Helper.getResourceURL("images/QR-code.png"))?"":__t)+'"><h5>'+(null==(__t=_l("使用微信扫一扫"))?"":__t)+"</h5><p>"+(null==(__t=_p(_l("关注顺丰公众号后自动为您推送这%s运单的更新已签收的运单将不会再推送给您"),"<strong>"+waybills.getSubscribedWaybills().length+"</strong>"))?"":__t)+"</p></div>";return __p},this.JST.waybillValidationView=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<form class="infos-request form-horizontal" onsubmit="return false;"><div class="form-group"><div class="col-sm-8"><input type="text" placeholder="'+(null==(__t=_l("请输入收件人或者寄件人的手机号以验证身份"))?"":__t)+'" class="form-control phone-number-input" data-validation-regexp=":subPhone"></div><div class="col-sm-3"><button class="primary-button disabled" data-loading-text="'+(null==(__t=_l("查询中..."))?"":__t)+'">'+(null==(__t=_l("确认"))?"":__t)+'</button></div></div><div class="error">'+(null==(__t=_l("*输入手机号有误，请重新输入"))?"":__t)+"</div></form>";return __p},this.JST}),define("views/acceptanceCriteria",["backbone","underscore","bootstrap","helper","models/acceptanceCriteria","templates"],function(a,b,c,d,e,f){return a.View.extend({events:{"click .origin-dest-selection .dropdown-menu a":"selectOriginDestSelection","click .origin .dropdown-menu a":"selectOrigin","click .dest .dropdown-menu a":"selectDest","click .submit-query-mainland-hk-mc-tw":"queryAcceptanceCriteriaFromHHT","keyup #good-name-for-mainland-hk-mc-tw":"updateButtonStatusForHHT","keyup #good-name-for-others":"updateQueryButtonStatus","click .submit-query":"queryDetails","click .clear-query-mainland-hk-mc-tw":"clearInput","click .clear-query":"clearInput","click .rule-pagination-other .pagination a":"gotoOtherPage","click .rule-pagination-hht .pagination a":"gotoHHTPage","keypress input#good-name-for-mainland-hk-mc-tw":"keypressSearchHHT","keypress input#good-name-for-others":"keypressSearchCMSP"},initialize:function(){var a=d.getSiteLocation();this.pageSize=10,this.originDestSelection={cn:[{code:"1",name:"cn"===a||"hk"===a||"tw"===a?"大陆互寄":"中国大陆互寄",ename:"Mutual delivery (Mainland China)"},{code:"2",name:"香港同城",ename:"Intra-city (Hong Kong)"},{code:"3",name:"台湾同城",ename:"Intra-city (Taiwan)"},{code:"4",name:"澳门同城",ename:"Intra-city (Macao)"},{code:"OTHERS",name:"进出口（含港/澳/台）",ename:"Import & export (including Hong Kong/Macao/Taiwan)"}]},this.srcCountry=new e,this.destCountry=new e,this.hhtDetails=new e,this.otherDetails=new e,this.initsrcCountry=new e,this.listenTo(this.srcCountry,"fetchSuccess",this.renderSrcCountry),this.listenTo(this.destCountry,"fetchSuccess",this.renderDestCountry),this.listenTo(this.hhtDetails,"fetchSuccess",this.renderHHTResults),this.listenTo(this.otherDetails,"fetchSuccess",this.renderOtherResults),
this.listenTo(this.initsrcCountry,"fetchSuccess",this.initrenderSrcCountry),"cn"!==d.getSiteLocation()&&this.initImportExport(),this.render()},initImportExport:function(){this.selectionSelected={name:_l("进出口（含港/澳/台）"),code:"OTHERS"},this.initsrcCountry.fetchOrigins(),$(".selection-others").show(),$(".selection-mainland-hk-mc-tw").hide(),$(".mainland-hk-mc-tw").hide(),$(".other-other-tip").show(),this.$(".results .other-table").hide(),this.$(".results .hmt-table").hide(),this.$(".results .cn-table").hide(),this.$(".rule-pagination-hht").hide(),this.$(".rule-pagination-other").hide()},initrenderSrcCountry:function(a){this.$(".origin .dropdown-menu").html(f.dropdownAcceptSrcCountry({dropdownItems:a}))},selectOriginDestSelection:function(a){var b=$(a.currentTarget);this.selectionSelected={name:b.text(),code:b.data("code")};var c=b.data("code");if("OTHERS"===c)this.srcCountry.fetchOrigins(),$(".selection-others").show(),$(".selection-mainland-hk-mc-tw").hide(),$(".mainland-hk-mc-tw").hide(),$(".other-other-tip").show();else{$(".selection-others").hide(),$(".selection-mainland-hk-mc-tw").show(),$(".mainland-hk-mc-tw").show(),$(".other-other-tip").hide();var d=$(".origin-dest-selection .selected-dropdown").text();this.selectionSelected.name!=d&&(this.clearInput(),this.$(".submit-query-mainland-hk-mc-tw").toggleClass("disabled",!0))}this.$(".results .other-table").hide(),this.$(".results .hmt-table").hide(),this.$(".results .cn-table").hide(),this.$(".rule-pagination-hht").hide(),this.$(".rule-pagination-other").hide(),this.render()},selectOrigin:function(a){var b=$(a.currentTarget);this.originSelected={name:b.text(),code:b.data("code")},this.$(".dest-tip").html(""),this.destSelected=null,this.render(),this.destCountry.fetchDests(this.originSelected.code)},selectDest:function(a){var c=$(a.currentTarget);this.destSelected={name:c.text(),code:c.data("code"),tip:b.isBlank($.trim(c.data("tip")))?"":_l("温馨提示：此流向寄件,")+c.data("tip")},this.$(".dest-tip").html(this.destSelected.tip),this.render()},updateButtonStatusForHHT:function(a){var c=$(a.currentTarget);b.isEmpty(c.val())?this.$(".submit-query-mainland-hk-mc-tw").toggleClass("disabled",!0):this.$(".submit-query-mainland-hk-mc-tw").toggleClass("disabled",!1)},updateQueryButtonStatus:function(){var a=$.trim(this.$("#good-name-for-others").val()),c=this.originSelected&&this.destSelected&&!b.isEmpty(a);this.$(".submit-query").toggleClass("disabled",!c)},renderDropdowns:function(){this.$(".origin-dest-selection .dropdown-menu").html(f.dropdownRuleTemplates({dropdownItems:this.originDestSelection.cn}))},renderDropdownTitle:function(){var a=this.$(".origin-dest-selection .dropdown-toggle .selected-dropdown"),b=this.selectionSelected?this.selectionSelected.name:a.data("origin-text");a.text(b);var c=this.$(".origin .dropdown-toggle .selected-dropdown"),d=this.originSelected?this.originSelected.name:c.data("origin-text");c.text(d);var e=this.$(".dest .dropdown-toggle .selected-dropdown"),f=this.destSelected?this.destSelected.name:e.data("origin-text");e.text(f);var g=this.$(".recieve-type .dropdown-toggle .selected-dropdown"),h=this.recieveTypeSelected?this.recieveTypeSelected.name:g.data("origin-text");g.text(h)},renderSrcCountry:function(a){var b=this.selectionSelected;b&&"OTHERS"===b.code&&this.$(".origin .dropdown-menu").html(f.dropdownAcceptSrcCountry({dropdownItems:a}))},renderDestCountry:function(a){this.originSelected?(this.$(".dest .dropdown-menu").removeClass("hidden"),this.$(".dest .dropdown-menu").html(f.dropdownAcceptDestCountry({dropdownItems:a}))):this.$(".dest .dropdown-menu").addClass("hidden")},renderResults:function(){this.$(".results"),this.$(".results .src-table tbody")},renderHHTResults:function(a){var c=this.$(".results"),d=this.$(".results .cn-table tbody"),e=this.$(".results .hmt-table tbody");a.acceptCriterias&&!b.isEmpty(a.acceptCriterias)?(this.currentSrcGoods=a.acceptCriterias,-1==a.code?(d.empty().html(f.acceptCriteriaResultCN({results:this.currentSrcGoods,pageIndex:window.pageIndex||1,pageSize:this.pageSize})),this.$(".results .cn-table").show(),this.$(".results .hmt-table").hide(),this.$(".results .other-table").hide()):-2==a.code&&(e.empty().html(f.acceptCriteriaResultHMT({results:this.currentSrcGoods,pageIndex:window.pageIndex||1,pageSize:this.pageSize})),this.$(".results .cn-table").hide(),this.$(".results .hmt-table").show(),this.$(".results .other-table").hide()),this.printPageNavLinkList(".rule-pagination-hht",a.page.totalPage),this.$(".rule-pagination-hht").show(),c.slideDown()):(d.empty(),e.empty(),c.slideUp(),this.$(".results .cn-table").hide(),this.$(".results .hmt-table").hide(),this.$(".results .other-table").hide(),this.$(".rule-pagination-hht").hide(),alert(_l("未搜索到的物品以收派员上门核实为准")))},renderOtherResults:function(a){var c=this.$(".results"),d=this.$(".results .other-table tbody");0==a.code?a.acceptCriterias&&!b.isEmpty(a.acceptCriterias)?(this.currentSrcGoods=a.acceptCriterias,d.empty().html(f.acceptCriteriaOther({results:this.currentSrcGoods,pageIndex:window.pageIndex||1,pageSize:this.pageSize})),this.printPageNavLinkList(".rule-pagination-other",a.page.totalPage),this.$(".results .other-table").show(),this.$(".results .cn-table").hide(),this.$(".results .hmt-table").hide(),this.$(".rule-pagination-other").show(),c.slideDown()):(d.empty(),c.slideUp(),alert(_l("未搜索到的物品以收派员上门核实为准"))):(c.slideDown(),this.$(".results .other-table").hide(),this.$(".results .cn-table").hide(),this.$(".results .hmt-table").hide(),this.$(".rule-pagination-other").hide(),d.empty(),alert(_l("未搜索到的物品以收派员上门核实为准")))},render:function(){this.renderDropdownTitle(),this.renderDropdowns(),this.updateQueryButtonStatus()},gotoOtherPage:function(a){var b=this,c=$(a.currentTarget);a.stopPropagation();var d=c.attr("data-pageindex");window.pageIndex=Number(d);var e={srcCode:b.originSelected.code,desCode:b.destSelected.code,goodsName:$.trim(b.$("#good-name-for-others").val()),currentPage:d,pageSize:b.pageSize};b.otherDetails.fetchDetailsFromCmsp(e)},gotoHHTPage:function(a){var b=this,c=$(a.currentTarget);a.stopPropagation();var d=c.attr("data-pageindex");window.pageIndex=Number(d);var e={goodsName:$.trim(b.$("#good-name-for-mainland-hk-mc-tw").val()),currentPage:d,country:void 0==b.selectionSelected?"1":b.selectionSelected.code,pageSize:b.pageSize};b.hhtDetails.fetchDetailsFromHHT(e)},showsSrcTaxDetails:function(a){var b=this,c=$(a.currentTarget);a.stopPropagation();var d=c.attr("item-index"),e=Number(d),g=b.currentSrcGoods[e].taxs,h=f.tooltipsTable({taxs:g});c.attr("title",h),$(".tooltip").remove(),c.tooltip("toggle"),$(".tooltip").css({top:"30px","z-index":"1000",background:"#D0CECE",position:"absolute"}),$(".tooltip table").css({background:"#D0CECE",width:"300px","text-align":"center"}),c.attr("title","")},keypressSearchHHT:function(a){13==a.keyCode&&this.queryAcceptanceCriteriaFromHHT()},keypressSearchCMSP:function(a){13==a.keyCode&&this.queryDetails()},queryAcceptanceCriteriaFromHHT:function(){var a=this,b={goodsName:$.trim(a.$("#good-name-for-mainland-hk-mc-tw").val()),currentPage:1,country:void 0==a.selectionSelected?"1":a.selectionSelected.code,pageSize:a.pageSize};a.checkInput(b)&&(window.pageIndex=1,a.$(".error").hide(),a.$(".results").slideUp(function(){a.hhtDetails.fetchDetailsFromHHT(b)}))},queryDetails:function(){var a=this;if(b.isEmpty(a.originSelected))return void alert(_l("请选择始发国家"));if(b.isEmpty(a.destSelected))return void alert(_l("请选择目的国家"));var c={srcCode:a.originSelected.code,desCode:a.destSelected.code,goodsName:$.trim(a.$("#good-name-for-others").val()),currentPage:1,pageSize:a.pageSize};a.checkInput(c)&&(window.pageIndex=1,a.$(".error").hide(),a.$(".results").slideUp(function(){a.otherDetails.fetchDetailsFromCmsp(c)}))},checkInput:function(a){var b=this;return""===a.goodName||""!=a.goodName&&d.parseChineseChar(a.goodName).length>50?(this.$(".error[data-error=input-invalid]").text(_l("请输入必填项")).show(),b.$("input[name=goodName]").focus(),!1):!0},clearInput:function(){this.$("input[type=text]").val(""),this.$(".submit-query-mainland-hk-mc-tw").toggleClass("disabled",!0)},resetQueryButton:function(){this.$(".submit-query").button("reset")},showNotFoundError:function(){this.$(".error[data-error=not-found]").show(),this.resetQueryButton()},showNetworkError:function(){this.$(".error[data-error=network]").show(),this.resetQueryButton()},paginationNews:function(){this.show(this.newsOfPage(1)),this.pageCount()>1&&this.printPageNavLinkList()},printPageNavLinkList:function(a,b){var c=window.pageIndex||1;$(a).html(f.pagination({pageIndex:c,pageCount:b}))},pageCount:function(){var a=window.news.size(),b=window.newsPageSize;return a%b===0?a/b:Math.floor(a/b)+1}})}),function(a){"function"==typeof define&&define.amd?define("jQuery.XDomainRequest",["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){if(a.support.cors||!a.ajaxTransport||!window.XDomainRequest)return a;var b=/^(https?:)?\/\//i,c=/^get|post$/i,d=new RegExp("^(//|"+location.protocol+")","i");return a.ajaxTransport("* text html xml json",function(e,f,g){if(e.crossDomain&&e.async&&c.test(e.type)&&b.test(e.url)&&d.test(e.url)){var h=null;return{send:function(b,c){var d="",g=(f.dataType||"").toLowerCase();h=new XDomainRequest,/^\d+$/.test(f.timeout)&&(h.timeout=f.timeout),h.ontimeout=function(){c(500,"timeout")},h.onload=function(){var b="Content-Length: "+h.responseText.length+"\r\nContent-Type: "+h.contentType,d={code:200,message:"success"},e={text:h.responseText};try{if("html"===g||/text\/html/i.test(h.contentType))e.html=h.responseText;else if("json"===g||"text"!==g&&/\/json/i.test(h.contentType))try{e.json=a.parseJSON(h.responseText)}catch(f){d.code=500,d.message="parseerror"}else if("xml"===g||"text"!==g&&/\/xml/i.test(h.contentType)){var i=new ActiveXObject("Microsoft.XMLDOM");i.async=!1;try{i.loadXML(h.responseText)}catch(f){i=void 0}if(!i||!i.documentElement||i.getElementsByTagName("parsererror").length)throw d.code=500,d.message="parseerror","Invalid XML: "+h.responseText;e.xml=i}}catch(j){throw j}finally{c(d.code,d.message,e,b)}},h.onprogress=function(){},h.onerror=function(){c(500,"error",{text:h.responseText})},f.data&&(d="string"===a.type(f.data)?f.data:a.param(f.data)),h.open(e.type,e.url),h.send(d)},abort:function(){h&&h.abort()}}}}),a}),define("models/orderUcmp",["backbone","underscore","helper","jQuery.XDomainRequest"],function(a,b,c){var d="HH:mm",e="YYYY-MM-DD HH:mm:ss";return a.Model.extend({defaults:{toMainland:!0},submitOrder:function(a){var b=a.sender.location,c={loginStatus:"0",orderJSON:{orders:{orderRemark:a.orderRemark,weight:a.weight||1,reserveTime:moment(a.reserveTime).format(e),expectStartTm:a.expectStartTm,expectFinishTm:a.expectFinishTm,orderType:a.receiver?"10":"0"},orderAddress:{company:a.sender.company,contactName:a.sender.contactName,phone:a.sender.phone,mobile:a.sender.mobile,countryName:"中国",provinceName:b.provinceName,provinceId:b.provinceCode,cityName:b.cityName,cityId:b.cityCode,countyName:b.countyName,countyId:"",address:a.sender.address}}};if(a.receiver){var d=a.receiver.location;c.orderJSON.orderWaybillVO=[{companyName:a.receiver.company,contactName:a.receiver.contactName,phone:a.receiver.phone,mobile:a.receiver.mobile,countryName:"",provinceName:d.provinceName,cityName:d.cityName,countyName:d.countyName,provinceId:d.provinceCode,cityId:d.cityCode,countyId:"",address:a.receiver.address,cargoName:a.receiver.cargoName,desc:a.receiver.desc,payType:a.receiver.payType,isSecureValue:a.receiver.isSecureValue,secureValue:a.receiver.secureValue,securePrise:a.receiver.securePrise,isOtherFee:"0",otherFee:"",isSelfPickUp:a.receiver.isSelfPickUp,isSignBack:"0",account:"",prodType:a.receiver.prodType}]}var f=this;return""===c.orderJSON.orderAddress.provinceId||""===c.orderJSON.orderAddress.provinceName||""===c.orderJSON.orderAddress.cityId||null==c.orderJSON.orderAddress.provinceId||null==c.orderJSON.orderAddress.provinceName||null==c.orderJSON.orderAddress.cityId?void f.trigger("parameterInvalid"):(this.set("briefOrderJSON",c.orderJSON),void this.submitNewOrder(c.orderJSON).success(function(a){a.status&&"1"==a.status?f.trigger("success"):f.trigger("fail",a)}).error(function(a){f.trigger("error",a)}))},submitNewOrder:function(d){var e,f="0"==d.orders.orderType?"0":"1";if(b.isEmpty(d.orderWaybillVO))e={countryCode:"CN",langCode:c.getSiteLanguage(),mediaCode:"PC.OWF",systemCode:"ESG-OWF-CORE",remark:d.orders.orderRemark,weight:d.orders.weight,bookingTime:d.orders.reserveTime,source:"0",type:"1",isEWayBill:f,orderArea:"CN",exceptionCode:"",shipperInfo:{countryCode:"CN",countryName:"中国",provinceName:d.orderAddress.provinceName,provinceCode:d.orderAddress.provinceId,cityName:d.orderAddress.cityName,cityCode:d.orderAddress.cityId,countyName:d.orderAddress.countyName,countyCode:"0",address:d.orderAddress.address,companyName:d.orderAddress.company,contactName:d.orderAddress.contactName,contactPhone:d.orderAddress.phone,contactMobile:d.orderAddress.mobile}};else{var g;g="T1"==d.orderWaybillVO[0].prodType||"T104"==d.orderWaybillVO[0].prodType?"顺丰即日":"T8"==d.orderWaybillVO[0].prodType||"T801"==d.orderWaybillVO[0].prodType?"顺丰次晨":"T4"==d.orderWaybillVO[0].prodType?"顺丰标快":"顺丰特惠",e={language:"zh",sysCode:"PC.OWF",mediaCode:"PC.OWF",createTime:"",version:"",countryCode:"CN",pickupType:"1",remark:d.orders.orderRemark,checkword:"",expectStartTm:d.orders.expectStartTm,expectFinishTm:d.orders.expectFinishTm,appointmentInfo:{appointmenterId:"",contact:d.orderAddress.contactName,phone:d.orderAddress.phone,mobile:d.orderAddress.mobile,addrInfo:{addrId:"",locationCode:d.orderAddress.cityId,country:"中国",province:d.orderAddress.provinceName,provinceCode:d.orderAddress.provinceId,city:d.orderAddress.cityName,county:d.orderAddress.countyName,countyCode:"0",postalCode:"",longitude:"",latitude:"",address:d.orderAddress.address}},appointmentList:[{index:"",originateInfo:{originerId:"",contact:d.orderAddress.contactName,phone:d.orderAddress.phone,mobile:d.orderAddress.mobile,addrInfo:{addrId:"",locationCode:d.orderAddress.cityId,country:"中国",province:d.orderAddress.provinceName,provinceCode:d.orderAddress.provinceId,city:d.orderAddress.cityName,county:d.orderAddress.countyName,countyCode:"0",postalCode:"",longitude:"",latitude:"",address:d.orderAddress.address},companyName:d.orderAddress.company},destinationInfo:{desterId:"",phone:d.orderWaybillVO[0].phone,contact:d.orderWaybillVO[0].contactName,mobile:d.orderWaybillVO[0].mobile,addrInfo:{addrId:"",locationCode:d.orderWaybillVO[0].cityId,country:"中国",province:d.orderWaybillVO[0].provinceName,provinceCode:d.orderWaybillVO[0].provinceId,city:d.orderWaybillVO[0].cityName,county:d.orderWaybillVO[0].countyName,countyCode:"0",postalCode:"",longitude:"",latitude:"",address:d.orderWaybillVO[0].address},companyName:d.orderWaybillVO[0].companyName},levelOfService:{provider:"SF",product:{code:d.orderWaybillVO[0].prodType,name:g}},metaWeight:d.orders.weight,remark:d.orders.orderRemark,metaPrice:"0",freightFee:{code:"1",amt:"0",paymethod:d.orderWaybillVO[0].payType,custid:""},serviceList:{service:[{code:"IN02",attr1:d.orderWaybillVO[0].secureValue,attr2:"",attr3:"",attr4:"",attr5:"",feeList:{fee:[{code:"3",amt:d.orderWaybillVO[0].securePrise,paymethod:d.orderWaybillVO[0].payType,custid:""}]}}]},cargoList:[{name:d.orderWaybillVO[0].cargoName,uom:"",desc:d.orderWaybillVO[0].desc,price:"0"}]}],memberId:d.orderAddress.mobile||d.orderAddress.phone}}return a.ajax({type:"post",dataType:"json",contentType:"application/json; charset=UTF-8",url:(this.get("toMainland")?c.getRESTfulDomain("order/submitCXOrderWithSign"):c.getRESTfulDomain("order/neworderWithSign"))+"?"+this.get("signature"),headers:{"SMS-Verification-App":"order","SMS-Verification-Code":this.get("code"),"SMS-Verification-Mobile":this.get("mobile")},data:JSON.stringify(e)})},getReserveTime:function(){var b=this,d={countryCode:"CN",langCode:c.getSiteLanguage(),mediaCode:"PC.OWF",systemCode:"ESG-OWF-CORE",cityCode:b.get("senderLocationCityCode"),bookingDate:""};a.ajax({type:"post",async:!1,dataType:"json",contentType:"application/json; charset=UTF-8",url:c.getUcmpOrderRemoteUrl("api/orderService/getCityWorkingTime"),data:JSON.stringify(d),success:function(a){if(a.status&&"1"==a.status){if(!a.result.time)return;b.setFirstDateTime(a.result.time),b.setSecondDateTime(a.result.time),b.setThirdDateTime(a.result.time)}}})},getSynServerTim:function(){var b=this;a.ajax({type:"GET",dataType:"text",url:c.getRESTfulDomain("order/syncServerTim"),success:function(a){b.set("synServerTim",moment(a,e))},error:function(){b.set("synServerTim",moment())}})},initialize:function(){this.listenTo(this,"change:senderLocationCityCode",this.getReserveTime),"sc"===c.getSiteLanguage()&&(this.listenTo(this,"change:senderLocationCityCode",this.getWarmReminder),this.listenTo(this,"change:receiverLocationCityCode",this.getWarmReminder))},getWarmReminder:function(){var b=this,d=b.get("senderLocationCityCode")?b.get("senderLocationCityCode"):"",e=b.get("receiverLocationCityCode")?b.get("receiverLocationCityCode"):"";a.ajax({type:"get",url:c.getRESTfulDomain("cx/queryOrderExceptionInfo")+"?sourceCityCode="+d+"&destCityCode="+e,success:function(a){$(".warm-reminder").slideUp(),a&&a.shipperMessage?$(".shipper-warm-reminder").html(a.shipperMessage).slideDown():a&&a.consigneeMessage&&$(".consignee-warm-reminder").html(a.consigneeMessage).slideDown()}})},setFirstDateTime:function(a){var b=this,c=a[0],d=c.workingTime.split("-"),f=moment(c.date+" "+d[0],e),g=moment(c.date+" "+d[1],e);b.setFirstPickedStartDateTime(f),b.setFirstPickedEndDateTime(g)},setSecondDateTime:function(a){var b=this,c=a[1],d=c.workingTime.split("-"),f=moment(c.date+" "+d[0],e),g=moment(c.date+" "+d[1],e);b.setSecondPickedStartDateTime(f),b.setSecondPickedEndDateTime(g)},setThirdDateTime:function(a){var b=this,c=a[2],d=c.workingTime.split("-"),f=moment(c.date+" "+d[0],e),g=moment(c.date+" "+d[1],e);b.setThirdPickedStartDateTime(f),b.setThirdPickedEndDateTime(g)},setFirstPickedStartDateTime:function(a){a=this.resetStartTime(a),this.set("firstPickedStartDateTime",a)},setFirstPickedEndDateTime:function(a){a=this.resetEndTime(a),this.set("firstPickedEndDateTime",a)},setSecondPickedStartDateTime:function(a){a=this.resetStartTime(a),this.set("secondPickedStartDateTime",a)},setSecondPickedEndDateTime:function(a){a=this.resetEndTime(a),this.set("secondPickedEndDateTime",a)},setThirdPickedStartDateTime:function(a){a=this.resetStartTime(a),this.set("thirdPickedStartDateTime",a)},setThirdPickedEndDateTime:function(a){a=this.resetEndTime(a),this.set("thirdPickedEndDateTime",a)},resetStartTime:function(a){return a=moment(a,d),0!==a.minutes()&&a.add(1,"hour").startOf("hour"),a},resetEndTime:function(a){return a=moment(a,d),a="24:00"===a?moment("00:00",d).add(1,"day"):moment(a,d),a.minutes()<30?a.minutes(0):a.minutes(30),a}})}),define("event",["backbone","underscore"],function(a,b){var c=b.clone(a.Events);return c.RateSearch="RateSearch",c.OriginRegionChange="OriginRegionChange",c.DestRegionChange="DestRegionChange",c.DeliverySelectAll="DeliverySelectAll",c}),function(a){function b(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(a,b){return function(c){return k(a.call(this,c),b)}}function d(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function e(){}function f(a){w(a),h(this,a)}function g(a){var b=q(a),c=b.year||0,d=b.month||0,e=b.week||0,f=b.day||0,g=b.hour||0,h=b.minute||0,i=b.second||0,j=b.millisecond||0;this._milliseconds=+j+1e3*i+6e4*h+36e5*g,this._days=+f+7*e,this._months=+d+12*c,this._data={},this._bubble()}function h(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function i(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&qa.hasOwnProperty(b)&&(c[b]=a[b]);return c}function j(a){return 0>a?Math.ceil(a):Math.floor(a)}function k(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function l(a,b,c,d){var e,f,g=b._milliseconds,h=b._days,i=b._months;g&&a._d.setTime(+a._d+g*c),(h||i)&&(e=a.minute(),f=a.hour()),h&&a.date(a.date()+h*c),i&&a.month(a.month()+i*c),g&&!d&&da.updateOffset(a),(h||i)&&(a.minute(e),a.hour(f))}function m(a){return"[object Array]"===Object.prototype.toString.call(a)}function n(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function o(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&s(a[d])!==s(b[d]))&&g++;return g+f}function p(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=Ta[a]||Ua[b]||b}return a}function q(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=p(c),b&&(d[b]=a[c]));return d}function r(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}da[b]=function(e,f){var g,h,i=da.fn._lang[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=da().utc().set(d,a);return i.call(da.fn._lang,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function s(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function t(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function u(a){return v(a)?366:365}function v(a){return a%4===0&&a%100!==0||a%400===0}function w(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[ja]<0||a._a[ja]>11?ja:a._a[ka]<1||a._a[ka]>t(a._a[ia],a._a[ja])?ka:a._a[la]<0||a._a[la]>23?la:a._a[ma]<0||a._a[ma]>59?ma:a._a[na]<0||a._a[na]>59?na:a._a[oa]<0||a._a[oa]>999?oa:-1,a._pf._overflowDayOfYear&&(ia>b||b>ka)&&(b=ka),a._pf.overflow=b)}function x(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function y(a){return a?a.toLowerCase().replace("_","-"):a}function z(a,b){return b._isUTC?da(a).zone(b._offset||0):da(a).local()}function A(a,b){return b.abbr=a,pa[a]||(pa[a]=new e),pa[a].set(b),pa[a]}function B(a){delete pa[a]}function C(a){var b,c,d,e,f=0,g=function(a){if(!pa[a]&&ra)try{require("./lang/"+a)}catch(b){}return pa[a]};if(!a)return da.fn._lang;if(!m(a)){if(c=g(a))return c;a=[a]}for(;f<a.length;){for(e=y(a[f]).split("-"),b=e.length,d=y(a[f+1]),d=d?d.split("-"):null;b>0;){if(c=g(e.slice(0,b).join("-")))return c;if(d&&d.length>=b&&o(e,d,!0)>=b-1)break;b--}f++}return da.fn._lang}function D(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function E(a){var b,c,d=a.match(va);for(b=0,c=d.length;c>b;b++)Ya[d[b]]?d[b]=Ya[d[b]]:d[b]=D(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function F(a,b){return a.isValid()?(b=G(b,a.lang()),Va[b]||(Va[b]=E(b)),Va[b](a)):a.lang().invalidDate()}function G(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(wa.lastIndex=0;d>=0&&wa.test(a);)a=a.replace(wa,c),wa.lastIndex=0,d-=1;return a}function H(a,b){var c,d=b._strict;switch(a){case"DDDD":return Ia;case"YYYY":case"GGGG":case"gggg":return d?Ja:za;case"Y":case"G":case"g":return La;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?Ka:Aa;case"S":if(d)return Ga;case"SS":if(d)return Ha;case"SSS":if(d)return Ia;case"DDD":return ya;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ca;case"a":case"A":return C(b._l)._meridiemParse;case"X":return Fa;case"Z":case"ZZ":return Da;case"T":return Ea;case"SSSS":return Ba;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?Ha:xa;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return xa;default:return c=new RegExp(P(O(a.replace("\\","")),"i"))}}function I(a){a=a||"";var b=a.match(Da)||[],c=b[b.length-1]||[],d=(c+"").match(Qa)||["-",0,0],e=+(60*d[1])+s(d[2]);return"+"===d[0]?-e:e}function J(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":null!=b&&(e[ja]=s(b)-1);break;case"MMM":case"MMMM":d=C(c._l).monthsParse(b),null!=d?e[ja]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[ka]=s(b));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=s(b));break;case"YY":e[ia]=s(b)+(s(b)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":e[ia]=s(b);break;case"a":case"A":c._isPm=C(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[la]=s(b);break;case"m":case"mm":e[ma]=s(b);break;case"s":case"ss":e[na]=s(b);break;case"S":case"SS":case"SSS":case"SSSS":e[oa]=s(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=I(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b)}}function K(a){var b,c,d,e,f,g,h,i,j,k,l=[];if(!a._d){for(d=M(a),a._w&&null==a._a[ka]&&null==a._a[ja]&&(f=function(b){var c=parseInt(b,10);return b?b.length<3?c>68?1900+c:2e3+c:c:null==a._a[ia]?da().weekYear():a._a[ia]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?h=Z(f(g.GG),g.W||1,g.E,4,1):(i=C(a._l),j=null!=g.d?V(g.d,i):null!=g.e?parseInt(g.e,10)+i._week.dow:0,k=parseInt(g.w,10)||1,null!=g.d&&j<i._week.dow&&k++,h=Z(f(g.gg),k,j,i._week.doy,i._week.dow)),a._a[ia]=h.year,a._dayOfYear=h.dayOfYear),a._dayOfYear&&(e=null==a._a[ia]?d[ia]:a._a[ia],a._dayOfYear>u(e)&&(a._pf._overflowDayOfYear=!0),c=U(e,0,a._dayOfYear),a._a[ja]=c.getUTCMonth(),a._a[ka]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=l[b]=d[b];for(;7>b;b++)a._a[b]=l[b]=null==a._a[b]?2===b?1:0:a._a[b];l[la]+=s((a._tzm||0)/60),l[ma]+=s((a._tzm||0)%60),a._d=(a._useUTC?U:T).apply(null,l)}}function L(a){var b;a._d||(b=q(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],K(a))}function M(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function N(a){a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=C(a._l),h=""+a._i,i=h.length,j=0;for(d=G(a._f,g).match(va)||[],b=0;b<d.length;b++)e=d[b],c=(h.match(H(e,a))||[])[0],c&&(f=h.substr(0,h.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),h=h.slice(h.indexOf(c)+c.length),j+=c.length),Ya[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),J(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),a._isPm&&a._a[la]<12&&(a._a[la]+=12),a._isPm===!1&&12===a._a[la]&&(a._a[la]=0),K(a),w(a)}function O(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function P(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(a){var c,d,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(NaN));for(f=0;f<a._f.length;f++)g=0,c=h({},a),c._pf=b(),c._f=a._f[f],N(c),x(c)&&(g+=c._pf.charsLeftOver,g+=10*c._pf.unusedTokens.length,c._pf.score=g,(null==e||e>g)&&(e=g,d=c));h(a,d||c)}function R(a){var b,c,d=a._i,e=Ma.exec(d);if(e){for(a._pf.iso=!0,b=0,c=Oa.length;c>b;b++)if(Oa[b][1].exec(d)){a._f=Oa[b][0]+(e[6]||" ");break}for(b=0,c=Pa.length;c>b;b++)if(Pa[b][1].exec(d)){a._f+=Pa[b][0];break}d.match(Da)&&(a._f+="Z"),N(a)}else a._d=new Date(d)}function S(b){var c=b._i,d=sa.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?R(b):m(c)?(b._a=c.slice(0),K(b)):n(c)?b._d=new Date(+c):"object"==typeof c?L(b):b._d=new Date(c)}function T(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function U(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function V(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function W(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function X(a,b,c){var d=ha(Math.abs(a)/1e3),e=ha(d/60),f=ha(e/60),g=ha(f/24),h=ha(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",ha(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,W.apply({},i)}function Y(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=da(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function Z(a,b,c,d,e){var f,g,h=U(a,0,1).getUTCDay();return c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:u(a-1)+g}}function $(a){var b=a._i,c=a._f;return null===b?da.invalid({nullInput:!0}):("string"==typeof b&&(a._i=b=C().preparse(b)),da.isMoment(b)?(a=i(b),a._d=new Date(+b._d)):c?m(c)?Q(a):N(a):S(a),new f(a))}function _(a,b){da.fn[a]=da.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),da.updateOffset(this),this):this._d["get"+c+b]()}}function aa(a){da.duration.fn[a]=function(){return this._data[a]}}function ba(a,b){da.duration.fn["as"+a]=function(){return+this/b}}function ca(a){var b=!1,c=da;"undefined"==typeof ender&&(a?(ga.moment=function(){return!b&&console&&console.warn&&(b=!0),c.apply(null,arguments)},h(ga.moment,c)):ga.moment=da)}for(var da,ea,fa="2.5.1",ga=this,ha=Math.round,ia=0,ja=1,ka=2,la=3,ma=4,na=5,oa=6,pa={},qa={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},ra="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,sa=/^\/?Date\((\-?\d+)/i,ta=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ua=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,va=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,wa=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,xa=/\d\d?/,ya=/\d{1,3}/,za=/\d{1,4}/,Aa=/[+\-]?\d{1,6}/,Ba=/\d+/,Ca=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Da=/Z|[\+\-]\d\d:?\d\d/gi,Ea=/T/i,Fa=/[\+\-]?\d+(\.\d{1,3})?/,Ga=/\d/,Ha=/\d\d/,Ia=/\d{3}/,Ja=/\d{4}/,Ka=/[+-]?\d{6}/,La=/[+-]?\d+/,Ma=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Na="YYYY-MM-DDTHH:mm:ssZ",Oa=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Pa=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Qa=/([\+\-]|\d\d)/gi,Ra="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Sa={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Ta={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Ua={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Va={},Wa="DDD w W M D d".split(" "),Xa="M D H h m s w W".split(" "),Ya={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return k(this.year()%100,2)},YYYY:function(){return k(this.year(),4)},YYYYY:function(){return k(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+k(Math.abs(a),6)},gg:function(){return k(this.weekYear()%100,2)},gggg:function(){return k(this.weekYear(),4)},ggggg:function(){return k(this.weekYear(),5);
},GG:function(){return k(this.isoWeekYear()%100,2)},GGGG:function(){return k(this.isoWeekYear(),4)},GGGGG:function(){return k(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return s(this.milliseconds()/100)},SS:function(){return k(s(this.milliseconds()/10),2)},SSS:function(){return k(this.milliseconds(),3)},SSSS:function(){return k(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(s(a/60),2)+":"+k(s(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(s(a/60),2)+k(s(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Za=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Wa.length;)ea=Wa.pop(),Ya[ea+"o"]=d(Ya[ea],ea);for(;Xa.length;)ea=Xa.pop(),Ya[ea+ea]=c(Ya[ea],2);for(Ya.DDDD=c(Ya.DDD,3),h(e.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=da.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=da([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return Y(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),da=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=c,g._f=d,g._l=e,g._strict=f,g._isUTC=!1,g._pf=b(),$(g)},da.utc=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=c,g._f=d,g._strict=f,g._pf=b(),$(g).utc()},da.unix=function(a){return da(1e3*a)},da.duration=function(a,b){var c,d,e,f=a,h=null;return da.isDuration(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(h=ta.exec(a))?(c="-"===h[1]?-1:1,f={y:0,d:s(h[ka])*c,h:s(h[la])*c,m:s(h[ma])*c,s:s(h[na])*c,ms:s(h[oa])*c}):(h=ua.exec(a))&&(c="-"===h[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},f={y:e(h[2]),M:e(h[3]),d:e(h[4]),h:e(h[5]),m:e(h[6]),s:e(h[7]),w:e(h[8])}),d=new g(f),da.isDuration(a)&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},da.version=fa,da.defaultFormat=Na,da.updateOffset=function(){},da.lang=function(a,b){var c;return a?(b?A(y(a),b):null===b?(B(a),a="en"):pa[a]||C(a),c=da.duration.fn._lang=da.fn._lang=C(a),c._abbr):da.fn._lang._abbr},da.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),C(a)},da.isMoment=function(a){return a instanceof f||null!=a&&a.hasOwnProperty("_isAMomentObject")},da.isDuration=function(a){return a instanceof g},ea=Za.length-1;ea>=0;--ea)r(Za[ea]);for(da.normalizeUnits=function(a){return p(a)},da.invalid=function(a){var b=da.utc(NaN);return null!=a?h(b._pf,a):b._pf.userInvalidated=!0,b},da.parseZone=function(a){return da(a).parseZone()},h(da.fn=f.prototype,{clone:function(){return da(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=da(this).utc();return 0<a.year()&&a.year()<=9999?F(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):F(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return x(this)},isDSTShifted:function(){return this._a?this.isValid()&&o(this._a,(this._isUTC?da.utc(this._a):da(this._a)).toArray())>0:!1},parsingFlags:function(){return h({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=F(this,a||da.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?da.duration(+b,a):da.duration(a,b),l(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?da.duration(+b,a):da.duration(a,b),l(this,c,-1),this},diff:function(a,b,c){var d,e,f=z(a,this),g=6e4*(this.zone()-f.zone());return b=p(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-da(this).startOf("month")-(f-da(f).startOf("month")))/d,e-=6e4*(this.zone()-da(this).startOf("month").zone()-(f.zone()-da(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:j(e)},from:function(a,b){return da.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(da(),a)},calendar:function(){var a=z(da(),this).startOf("day"),b=this.diff(a,"days",!0),c=-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse";return this.format(this.lang().calendar(c,this))},isLeapYear:function(){return v(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=V(a,this.lang()),this.add({d:a-b})):b},month:function(a){var b,c=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(b=this.date(),this.date(1),this._d["set"+c+"Month"](a),this.date(Math.min(b,this.daysInMonth())),da.updateOffset(this),this):this._d["get"+c+"Month"]()},startOf:function(a){switch(a=p(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),this},endOf:function(a){return a=p(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+da(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+da(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+z(a,this).startOf(b)},min:function(a){return a=da.apply(null,arguments),this>a?this:a},max:function(a){return a=da.apply(null,arguments),a>this?this:a},zone:function(a){var b=this._offset||0;return null==a?this._isUTC?b:this._d.getTimezoneOffset():("string"==typeof a&&(a=I(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,b!==a&&l(this,da.duration(b-a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?da(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return t(this.year(),this.month())},dayOfYear:function(a){var b=ha((da(this).startOf("day")-da(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(a){var b=Y(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=Y(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=Y(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},get:function(a){return a=p(a),this[a]()},set:function(a,b){return a=p(a),"function"==typeof this[a]&&this[a](b),this},lang:function(b){return b===a?this._lang:(this._lang=C(b),this)}}),ea=0;ea<Ra.length;ea++)_(Ra[ea].toLowerCase().replace(/s$/,""),Ra[ea]);_("year","FullYear"),da.fn.days=da.fn.day,da.fn.months=da.fn.month,da.fn.weeks=da.fn.week,da.fn.isoWeeks=da.fn.isoWeek,da.fn.toJSON=da.fn.toISOString,h(da.duration.fn=g.prototype,{_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,h=this._data;h.milliseconds=e%1e3,a=j(e/1e3),h.seconds=a%60,b=j(a/60),h.minutes=b%60,c=j(b/60),h.hours=c%24,f+=j(c/24),h.days=f%30,g+=j(f/30),h.months=g%12,d=j(g/12),h.years=d},weeks:function(){return j(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*s(this._months/12)},humanize:function(a){var b=+this,c=X(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=da.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=da.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=p(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=p(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:da.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(ea in Sa)Sa.hasOwnProperty(ea)&&(ba(ea,Sa[ea]),aa(ea.toLowerCase()));ba("Weeks",6048e5),da.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},da.lang("en",{ordinal:function(a){var b=a%10,c=1===s(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),ra?(module.exports=da,ca(!0)):"function"==typeof define&&define.amd?define("moment",["require","exports","module"],function(b,c,d){return d.config&&d.config()&&d.config().noGlobal!==!0&&ca(d.config().noGlobal===a),da}):ca()}.call(this),define("utils/time",["moment"],function(a){var b=function(b,c){var d=b.clone().startOf("day"),e=c?c:a();return d.isSame(e.clone().add("days",-1),"day")?_l("昨天"):d.isSame(e,"day")?_l("今天"):d.isSame(e.clone().add("days",1),"day")?_l("明天"):d.isSame(e,"week")?_l("本")+d.format("ddd"):d.isSame(e.clone().add(7,"d"),"week")?_l("下")+d.format("ddd"):d.isSame(e.clone().add(-7,"d"),"week")?_l("上")+d.format("ddd"):d.diff(e,"days")+_l("天")};return{relativeDate:b}}),!function(a,b){"use strict";function c(a,b){var c,d,e=a.toLowerCase();for(b=[].concat(b),c=0;c<b.length;c+=1)if(d=b[c]){if(d.test&&d.test(a))return!0;if(d.toLowerCase()===e)return!0}}var d=b.prototype.trim,e=b.prototype.trimRight,f=b.prototype.trimLeft,g=function(a){return 1*a||0},h=function(a,b){if(1>b)return"";for(var c="";b>0;)1&b&&(c+=a),b>>=1,a+=a;return c},i=[].slice,j=function(a){return null==a?"\\s":a.source?a.source:"["+o.escapeRegExp(a)+"]"},k={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},l={};for(var m in k)l[k[m]]=m;l["'"]="#39";var n=function(){function a(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}var c=h,d=function(){return d.cache.hasOwnProperty(arguments[0])||(d.cache[arguments[0]]=d.parse(arguments[0])),d.format.call(null,d.cache[arguments[0]],arguments)};return d.format=function(d,e){var f,g,h,i,j,k,l,m=1,o=d.length,p="",q=[];for(g=0;o>g;g++)if(p=a(d[g]),"string"===p)q.push(d[g]);else if("array"===p){if(i=d[g],i[2])for(f=e[m],h=0;h<i[2].length;h++){if(!f.hasOwnProperty(i[2][h]))throw new Error(n('[_.sprintf] property "%s" does not exist',i[2][h]));f=f[i[2][h]]}else f=i[1]?e[i[1]]:e[m++];if(/[^s]/.test(i[8])&&"number"!=a(f))throw new Error(n("[_.sprintf] expecting number but found %s",a(f)));switch(i[8]){case"b":f=f.toString(2);break;case"c":f=b.fromCharCode(f);break;case"d":f=parseInt(f,10);break;case"e":f=i[7]?f.toExponential(i[7]):f.toExponential();break;case"f":f=i[7]?parseFloat(f).toFixed(i[7]):parseFloat(f);break;case"o":f=f.toString(8);break;case"s":f=(f=b(f))&&i[7]?f.substring(0,i[7]):f;break;case"u":f=Math.abs(f);break;case"x":f=f.toString(16);break;case"X":f=f.toString(16).toUpperCase()}f=/[def]/.test(i[8])&&i[3]&&f>=0?"+"+f:f,k=i[4]?"0"==i[4]?"0":i[4].charAt(1):" ",l=i[6]-b(f).length,j=i[6]?c(k,l):"",q.push(i[5]?f+j:j+f)}return q.join("")},d.cache={},d.parse=function(a){for(var b=a,c=[],d=[],e=0;b;){if(null!==(c=/^[^\x25]+/.exec(b)))d.push(c[0]);else if(null!==(c=/^\x25{2}/.exec(b)))d.push("%");else{if(null===(c=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(b)))throw new Error("[_.sprintf] huh?");if(c[2]){e|=1;var f=[],g=c[2],h=[];if(null===(h=/^([a-z_][a-z_\d]*)/i.exec(g)))throw new Error("[_.sprintf] huh?");for(f.push(h[1]);""!==(g=g.substring(h[0].length));)if(null!==(h=/^\.([a-z_][a-z_\d]*)/i.exec(g)))f.push(h[1]);else{if(null===(h=/^\[(\d+)\]/.exec(g)))throw new Error("[_.sprintf] huh?");f.push(h[1])}c[2]=f}else e|=2;if(3===e)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");d.push(c)}b=b.substring(c[0].length)}return d},d}(),o={VERSION:"2.3.0",isBlank:function(a){return null==a&&(a=""),/^\s*$/.test(a)},stripTags:function(a){return null==a?"":b(a).replace(/<\/?[^>]+>/g,"")},capitalize:function(a){return a=null==a?"":b(a),a.charAt(0).toUpperCase()+a.slice(1)},chop:function(a,c){return null==a?[]:(a=b(a),c=~~c,c>0?a.match(new RegExp(".{1,"+c+"}","g")):[a])},clean:function(a){return o.strip(a).replace(/\s+/g," ")},count:function(a,c){if(null==a||null==c)return 0;a=b(a),c=b(c);for(var d=0,e=0,f=c.length;;){if(e=a.indexOf(c,e),-1===e)break;d++,e+=f}return d},chars:function(a){return null==a?[]:b(a).split("")},swapCase:function(a){return null==a?"":b(a).replace(/\S/g,function(a){return a===a.toUpperCase()?a.toLowerCase():a.toUpperCase()})},escapeHTML:function(a){return null==a?"":b(a).replace(/[&<>"']/g,function(a){return"&"+l[a]+";"})},unescapeHTML:function(a){return null==a?"":b(a).replace(/\&([^;]+);/g,function(a,c){var d;return c in k?k[c]:(d=c.match(/^#x([\da-fA-F]+)$/))?b.fromCharCode(parseInt(d[1],16)):(d=c.match(/^#(\d+)$/))?b.fromCharCode(~~d[1]):a})},escapeRegExp:function(a){return null==a?"":b(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(a,b,c,d){var e=o.chars(a);return e.splice(~~b,~~c,d),e.join("")},insert:function(a,b,c){return o.splice(a,b,0,c)},include:function(a,c){return""===c?!0:null==a?!1:-1!==b(a).indexOf(c)},join:function(){var a=i.call(arguments),b=a.shift();return null==b&&(b=""),a.join(b)},lines:function(a){return null==a?[]:b(a).split("\n")},reverse:function(a){return o.chars(a).reverse().join("")},startsWith:function(a,c){return""===c?!0:null==a||null==c?!1:(a=b(a),c=b(c),a.length>=c.length&&a.slice(0,c.length)===c)},endsWith:function(a,c){return""===c?!0:null==a||null==c?!1:(a=b(a),c=b(c),a.length>=c.length&&a.slice(a.length-c.length)===c)},succ:function(a){return null==a?"":(a=b(a),a.slice(0,-1)+b.fromCharCode(a.charCodeAt(a.length-1)+1))},titleize:function(a){return null==a?"":(a=b(a).toLowerCase(),a.replace(/(?:^|\s|-)\S/g,function(a){return a.toUpperCase()}))},camelize:function(a){return o.trim(a).replace(/[-_\s]+(.)?/g,function(a,b){return b?b.toUpperCase():""})},underscored:function(a){return o.trim(a).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(a){return o.trim(a).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(a){return o.titleize(b(a).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(a){return o.capitalize(o.underscored(a).replace(/_id$/,"").replace(/_/g," "))},trim:function(a,c){return null==a?"":!c&&d?d.call(a):(c=j(c),b(a).replace(new RegExp("^"+c+"+|"+c+"+$","g"),""))},ltrim:function(a,c){return null==a?"":!c&&f?f.call(a):(c=j(c),b(a).replace(new RegExp("^"+c+"+"),""))},rtrim:function(a,c){return null==a?"":!c&&e?e.call(a):(c=j(c),b(a).replace(new RegExp(c+"+$"),""))},truncate:function(a,c,d){return null==a?"":(a=b(a),d=d||"...",c=~~c,a.length>c?a.slice(0,c)+d:a)},prune:function(a,c,d){if(null==a)return"";if(a=b(a),c=~~c,d=null!=d?b(d):"...",a.length<=c)return a;var e=function(a){return a.toUpperCase()!==a.toLowerCase()?"A":" "},f=a.slice(0,c+1).replace(/.(?=\W*\w*$)/g,e);return f=f.slice(f.length-2).match(/\w\w/)?f.replace(/\s*\S+$/,""):o.rtrim(f.slice(0,f.length-1)),(f+d).length>a.length?a:a.slice(0,f.length)+d},words:function(a,b){return o.isBlank(a)?[]:o.trim(a,b).split(b||/\s+/)},pad:function(a,c,d,e){a=null==a?"":b(a),c=~~c;var f=0;switch(d?d.length>1&&(d=d.charAt(0)):d=" ",e){case"right":return f=c-a.length,a+h(d,f);case"both":return f=c-a.length,h(d,Math.ceil(f/2))+a+h(d,Math.floor(f/2));default:return f=c-a.length,h(d,f)+a}},lpad:function(a,b,c){return o.pad(a,b,c)},rpad:function(a,b,c){return o.pad(a,b,c,"right")},lrpad:function(a,b,c){return o.pad(a,b,c,"both")},sprintf:n,vsprintf:function(a,b){return b.unshift(a),n.apply(null,b)},toNumber:function(a,b){return a?(a=o.trim(a),a.match(/^-?\d+(?:\.\d+)?$/)?g(g(a).toFixed(~~b)):NaN):0},numberFormat:function(a,b,c,d){if(isNaN(a)||null==a)return"";a=a.toFixed(~~b),d="string"==typeof d?d:",";var e=a.split("."),f=e[0],g=e[1]?(c||".")+e[1]:"";return f.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+d)+g},strRight:function(a,c){if(null==a)return"";a=b(a),c=null!=c?b(c):c;var d=c?a.indexOf(c):-1;return~d?a.slice(d+c.length,a.length):a},strRightBack:function(a,c){if(null==a)return"";a=b(a),c=null!=c?b(c):c;var d=c?a.lastIndexOf(c):-1;return~d?a.slice(d+c.length,a.length):a},strLeft:function(a,c){if(null==a)return"";a=b(a),c=null!=c?b(c):c;var d=c?a.indexOf(c):-1;return~d?a.slice(0,d):a},strLeftBack:function(a,b){if(null==a)return"";a+="",b=null!=b?""+b:b;var c=a.lastIndexOf(b);return~c?a.slice(0,c):a},toSentence:function(a,b,c,d){b=b||", ",c=c||" and ";var e=a.slice(),f=e.pop();return a.length>2&&d&&(c=o.rtrim(b)+c),e.length?e.join(b)+c+f:f},toSentenceSerial:function(){var a=i.call(arguments);return a[3]=!0,o.toSentence.apply(o,a)},slugify:function(a){if(null==a)return"";var c="ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź",d="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",e=new RegExp(j(c),"g");return a=b(a).toLowerCase().replace(e,function(a){var b=c.indexOf(a);return d.charAt(b)||"-"}),o.dasherize(a.replace(/[^\w\s-]/g,""))},surround:function(a,b){return[b,a,b].join("")},quote:function(a,b){return o.surround(a,b||'"')},unquote:function(a,b){return b=b||'"',a[0]===b&&a[a.length-1]===b?a.slice(1,a.length-1):a},exports:function(){var a={};for(var b in this)this.hasOwnProperty(b)&&!b.match(/^(?:include|contains|reverse)$/)&&(a[b]=this[b]);return a},repeat:function(a,c,d){if(null==a)return"";if(c=~~c,null==d)return h(b(a),c);for(var e=[];c>0;e[--c]=a);return e.join(d)},naturalCmp:function(a,c){if(a==c)return 0;if(!a)return-1;if(!c)return 1;for(var d=/(\.\d+)|(\d+)|(\D+)/g,e=b(a).toLowerCase().match(d),f=b(c).toLowerCase().match(d),g=Math.min(e.length,f.length),h=0;g>h;h++){var i=e[h],j=f[h];if(i!==j){var k=parseInt(i,10);if(!isNaN(k)){var l=parseInt(j,10);if(!isNaN(l)&&k-l)return k-l}return j>i?-1:1}}return e.length===f.length?e.length-f.length:c>a?-1:1},levenshtein:function(a,c){if(null==a&&null==c)return 0;if(null==a)return b(c).length;if(null==c)return b(a).length;a=b(a),c=b(c);for(var d,e,f=[],g=0;g<=c.length;g++)for(var h=0;h<=a.length;h++)e=g&&h?a.charAt(h-1)===c.charAt(g-1)?d:Math.min(f[h],f[h-1],d)+1:g+h,d=f[h],f[h]=e;return f.pop()},toBoolean:function(a,b,d){return"number"==typeof a&&(a=""+a),"string"!=typeof a?!!a:(a=o.trim(a),c(a,b||["true","1"])?!0:c(a,d||["false","0"])?!1:void 0)}};o.strip=o.trim,o.lstrip=o.ltrim,o.rstrip=o.rtrim,o.center=o.lrpad,o.rjust=o.lpad,o.ljust=o.rpad,o.contains=o.include,o.q=o.quote,o.toBool=o.toBoolean,"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(module.exports=o),exports._s=o),"function"==typeof define&&define.amd&&define("underscore.string",[],function(){return o}),a._=a._||{},a._.string=a._.str=o}(this,String),function(a){"function"==typeof define&&define.amd?define("jquery-ui",["jquery"],a):a(jQuery)}(function(a){function b(b,d){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&c(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}a.ui=a.ui||{},a.extend(a.ui,{version:"1.11.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({scrollParent:function(){var b=this.css("position"),c="absolute"===b,d=this.parents().filter(function(){var b=a(this);return c&&"static"===b.css("position")?!1:/(auto|scroll)/.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==b&&d.length?d:a(this[0].ownerDocument||document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||d>=0)&&b(c,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,c){function d(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e="Width"===c?["Left","Right"]:["Top","Bottom"],f=c.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?g["inner"+c].call(this):this.each(function(){a(this).css(f,d(this,b)+"px")})},a.fn["outer"+c]=function(b,e){return"number"!=typeof b?g["outer"+c].call(this,b):this.each(function(){a(this).css(f,d(this,b,!0,e)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(void 0!==b)return this.css("zIndex",b);if(this.length)for(var c,d,e=a(this[0]);e.length&&e[0]!==document;){if(c=e.css("position"),("absolute"===c||"relative"===c||"fixed"===c)&&(d=parseInt(e.css("zIndex"),10),!isNaN(d)&&0!==d))return d;e=e.parent()}return 0}}),a.ui.plugin={add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c,d){var e,f=a.plugins[b];if(f&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(e=0;e<f.length;e++)a.options[f[e][0]]&&f[e][1].apply(a.element,c)}};var d=0,e=Array.prototype.slice;a.cleanData=function(b){return function(c){for(var d,e=0;null!=(d=c[e]);e++)try{a(d).triggerHandler("remove")}catch(f){}b(c)}}(a.cleanData),a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];return b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g),g},a.widget.extend=function(b){for(var c,d,f=e.call(arguments,1),g=0,h=f.length;h>g;g++)for(c in f[g])d=f[g][c],f[g].hasOwnProperty(c)&&void 0!==d&&(a.isPlainObject(d)?b[c]=a.isPlainObject(b[c])?a.widget.extend({},b[c],d):a.widget.extend({},d):b[c]=d);return b},a.widget.bridge=function(b,c){var d=c.prototype.widgetFullName||b;a.fn[b]=function(f){var g="string"==typeof f,h=e.call(arguments,1),i=this;return f=!g&&h.length?a.widget.extend.apply(null,[f].concat(h)):f,g?this.each(function(){var c,e=a.data(this,d);return"instance"===f?(i=e,!1):e?a.isFunction(e[f])&&"_"!==f.charAt(0)?(c=e[f].apply(e,h),c!==e&&void 0!==c?(i=c&&c.jquery?i.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+f+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+f+"'")}):this.each(function(){var b=a.data(this,d);b?(b.option(f||{}),b._init&&b._init()):a.data(this,d,new c(f,this))}),i}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0],this.element=a(c),this.uuid=d++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),c!==this&&(a.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=a(c.style?c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d,e,f,g=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(g={},d=b.split("."),b=d.shift(),d.length){for(e=g[b]=a.widget.extend({},this.options[b]),f=0;f<d.length-1;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(b=d.pop(),1===arguments.length)return void 0===e[b]?null:e[b];e[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];g[b]=c}return this._setOptions(g),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),
this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}});var f=(a.widget,!1);a(document).mouseup(function(){f=!1});a.widget("ui.mouse",{version:"1.11.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!f){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var c=this,d=1===b.which,e="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return d&&!e&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),f=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button?this._mouseUp(b):b.which?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),f=!1,!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});!function(){function b(a,b,c){return[parseFloat(a[0])*(n.test(a[0])?b/100:1),parseFloat(a[1])*(n.test(a[1])?c/100:1)]}function c(b,c){return parseInt(a.css(b,c),10)||0}function d(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var e,f,g=Math.max,h=Math.abs,i=Math.round,j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,n=/%$/,o=a.fn.position;a.position={scrollbarWidth:function(){if(void 0!==e)return e;var b,c,d=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),f=d.children()[0];return a("body").append(d),b=f.offsetWidth,d.css("overflow","scroll"),c=f.offsetWidth,b===c&&(c=d[0].clientWidth),d.remove(),e=b-c},getScrollInfo:function(b){var c=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),d=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]),e=!!c[0]&&9===c[0].nodeType;return{element:c,isWindow:d,isDocument:e,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(e){if(!e||!e.of)return o.apply(this,arguments);e=a.extend({},e);var n,p,q,r,s,t,u=a(e.of),v=a.position.getWithinInfo(e.within),w=a.position.getScrollInfo(v),x=(e.collision||"flip").split(" "),y={};return t=d(u),u[0].preventDefault&&(e.at="left top"),p=t.width,q=t.height,r=t.offset,s=a.extend({},r),a.each(["my","at"],function(){var a,b,c=(e[this]||"").split(" ");1===c.length&&(c=j.test(c[0])?c.concat(["center"]):k.test(c[0])?["center"].concat(c):["center","center"]),c[0]=j.test(c[0])?c[0]:"center",c[1]=k.test(c[1])?c[1]:"center",a=l.exec(c[0]),b=l.exec(c[1]),y[this]=[a?a[0]:0,b?b[0]:0],e[this]=[m.exec(c[0])[0],m.exec(c[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?s.left+=p:"center"===e.at[0]&&(s.left+=p/2),"bottom"===e.at[1]?s.top+=q:"center"===e.at[1]&&(s.top+=q/2),n=b(y.at,p,q),s.left+=n[0],s.top+=n[1],this.each(function(){var d,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),o=c(this,"marginLeft"),t=c(this,"marginTop"),z=l+o+c(this,"marginRight")+w.width,A=m+t+c(this,"marginBottom")+w.height,B=a.extend({},s),C=b(y.my,k.outerWidth(),k.outerHeight());"right"===e.my[0]?B.left-=l:"center"===e.my[0]&&(B.left-=l/2),"bottom"===e.my[1]?B.top-=m:"center"===e.my[1]&&(B.top-=m/2),B.left+=C[0],B.top+=C[1],f||(B.left=i(B.left),B.top=i(B.top)),d={marginLeft:o,marginTop:t},a.each(["left","top"],function(b,c){a.ui.position[x[b]]&&a.ui.position[x[b]][c](B,{targetWidth:p,targetHeight:q,elemWidth:l,elemHeight:m,collisionPosition:d,collisionWidth:z,collisionHeight:A,offset:[n[0]+C[0],n[1]+C[1]],my:e.my,at:e.at,within:v,elem:k})}),e.using&&(j=function(a){var b=r.left-B.left,c=b+p-l,d=r.top-B.top,f=d+q-m,i={target:{element:u,left:r.left,top:r.top,width:p,height:q},element:{element:k,left:B.left,top:B.top,width:l,height:m},horizontal:0>c?"left":b>0?"right":"center",vertical:0>f?"top":d>0?"bottom":"middle"};l>p&&h(b+c)<p&&(i.horizontal="center"),m>q&&h(d+f)<q&&(i.vertical="middle"),g(h(b),h(c))>g(h(d),h(f))?i.important="horizontal":i.important="vertical",e.using.call(this,a,i)}),k.offset(a.extend(B,{using:j}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-f-e;b.collisionWidth>f?i>0&&0>=j?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):j>0&&0>=i?a.left=e:i>j?a.left=e+f-b.collisionWidth:a.left=e:i>0?a.left+=i:j>0?a.left-=j:a.left=g(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&0>=j?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):j>0&&0>=i?a.top=e:i>j?a.top=e+f-b.collisionHeight:a.top=e:i>0?a.top+=i:j>0?a.top-=j:a.top=g(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-g-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-g-f,(0>c||c<h(k))&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||h(d)<l)&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-g-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-g-f,a.top+n+o+p>k&&(0>d||d<h(k))&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,a.top+n+o+p>l&&(c>0||h(c)<l)&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,g,h=document.getElementsByTagName("body")[0],i=document.createElement("div");b=document.createElement(h?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},h&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(g in d)b.style[g]=d[g];b.appendChild(i),c=h||document.documentElement,c.insertBefore(b,c.firstChild),i.style.cssText="position: absolute; left: 10.7432222px;",e=a(i).offset().left,f=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}();a.ui.position;a.widget("ui.draggable",a.ui.mouse,{version:"1.11.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(a,b){this._super(a,b),"handle"===a&&this._setHandleClassName()},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(b){var c=this.document[0],d=this.options;try{c.activeElement&&"body"!==c.activeElement.nodeName.toLowerCase()&&a(c.activeElement).blur()}catch(e){}return this.helper||d.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(a(d.iframeFix===!0?"iframe":d.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b,!1),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b,!0),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),this.element.focus(),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this._removeHandleClassName(),a(this.options.handle||this.element).addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.element.find(".ui-draggable-handle").addBack().removeClass("ui-draggable-handle")},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options,f=this.document[0];return this.relative_container=null,e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(f).width()-this.helperProportions.width-this.margins.left,(a(f).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c))):void(this.containment=null)},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,b){var c,d,e,f,g=this.options,h=this._isRootNode(this.scrollParent[0]),i=a.pageX,j=a.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),b&&(this.containment&&(this.relative_container?(d=this.relative_container.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,a.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f),"y"===g.axis&&(i=this.originalPageX),"x"===g.axis&&(j=this.originalPageY)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d,this],!0),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c,d){var e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a(this).sortable("instance");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c,d){var e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c,d){var e=this;a.each(d.sortables,function(){var f=!1,g=this;this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(g.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c,d){var e=a("body"),f=d.options;e.css("cursor")&&(f._cursor=e.css("cursor")),e.css("cursor",f.cursor)},stop:function(b,c,d){var e=d.options;e._cursor&&a("body").css("cursor",e._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("opacity")&&(f._opacity=e.css("opacity")),e.css("opacity",f.opacity)},stop:function(b,c,d){var e=d.options;e._opacity&&a(c.helper).css("opacity",e._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(a,b,c){c.scrollParent[0]!==c.document[0]&&"HTML"!==c.scrollParent[0].tagName&&(c.overflowOffset=c.scrollParent.offset())},drag:function(b,c,d){var e=d.options,f=!1,g=d.document[0];d.scrollParent[0]!==g&&"HTML"!==d.scrollParent[0].tagName?(e.axis&&"x"===e.axis||(d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-e.scrollSpeed)),e.axis&&"y"===e.axis||(d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-e.scrollSpeed))):(e.axis&&"x"===e.axis||(b.pageY-a(g).scrollTop()<e.scrollSensitivity?f=a(g).scrollTop(a(g).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(g).scrollTop())<e.scrollSensitivity&&(f=a(g).scrollTop(a(g).scrollTop()+e.scrollSpeed))),e.axis&&"y"===e.axis||(b.pageX-a(g).scrollLeft()<e.scrollSensitivity?f=a(g).scrollLeft(a(g).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(g).scrollLeft())<e.scrollSensitivity&&(f=a(g).scrollLeft(a(g).scrollLeft()+e.scrollSpeed)))),f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c,d){var e=d.options;d.snapElements=[],a(e.snap.constructor!==String?e.snap.items||":data(ui-draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!==d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o=d.options,p=o.snapTolerance,q=c.offset.left,r=q+d.helperProportions.width,s=c.offset.top,t=s+d.helperProportions.height;for(m=d.snapElements.length-1;m>=0;m--)i=d.snapElements[m].left,j=i+d.snapElements[m].width,k=d.snapElements[m].top,l=k+d.snapElements[m].height,i-p>r||q>j+p||k-p>t||s>l+p||!a.contains(d.snapElements[m].item.ownerDocument,d.snapElements[m].item)?(d.snapElements[m].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=!1):("inner"!==o.snapMode&&(e=Math.abs(k-t)<=p,f=Math.abs(l-s)<=p,g=Math.abs(i-r)<=p,h=Math.abs(j-q)<=p,e&&(c.position.top=d._convertPositionTo("relative",{top:k-d.helperProportions.height,left:0}).top-d.margins.top),f&&(c.position.top=d._convertPositionTo("relative",{top:l,left:0}).top-d.margins.top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i-d.helperProportions.width}).left-d.margins.left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j}).left-d.margins.left)),n=e||f||g||h,"outer"!==o.snapMode&&(e=Math.abs(k-s)<=p,f=Math.abs(l-t)<=p,g=Math.abs(i-q)<=p,h=Math.abs(j-r)<=p,e&&(c.position.top=d._convertPositionTo("relative",{top:k,left:0}).top-d.margins.top),f&&(c.position.top=d._convertPositionTo("relative",{top:l-d.helperProportions.height,left:0}).top-d.margins.top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i}).left-d.margins.left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j-d.helperProportions.width}).left-d.margins.left)),!d.snapElements[m].snapping&&(e||f||g||h||n)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=e||f||g||h||n)}}),a.ui.plugin.add("draggable","stack",{start:function(b,c,d){var e,f=d.options,g=a.makeArray(a(f.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});g.length&&(e=parseInt(a(g[0]).css("zIndex"),10)||0,a(g).each(function(b){a(this).css("zIndex",e+b)}),this.css("zIndex",e+g.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("zIndex")&&(f._zIndex=e.css("zIndex")),e.css("zIndex",f.zIndex)},stop:function(b,c,d){var e=d.options;e._zIndex&&a(c.helper).css("zIndex",e._zIndex)}});a.ui.draggable;a.widget("ui.resizable",a.ui.mouse,{version:"1.11.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(a){return parseInt(a,10)||0},_isNumber:function(a){return!isNaN(parseInt(a,10))},_hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},_create:function(){var b,c,d,e,f,g=this,h=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;c<b.length;c++)d=a.trim(b[c]),f="ui-resizable-"+d,e=a("<div class='ui-resizable-handle "+f+"'></div>"),e.css({zIndex:h.zIndex}),"se"===d&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(e);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String&&(this.handles[c]=this.element.children(this.handles[c]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),a(this.handles[c]).length},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){g.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=e&&e[1]?e[1]:"se")}),h.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(a(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){h.disabled||g.resizing||(a(this).addClass("ui-resizable-autohide"),g._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();
};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(b){var c,d,e,f=this.options,g=this.element;return this.resizing=!0,this._renderProxy(),c=this._num(this.helper.css("left")),d=this._num(this.helper.css("top")),f.containment&&(c+=a(f.containment).scrollLeft()||0,d+=a(f.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:c,top:d},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:g.width(),height:g.height()},this.originalSize=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()},this.originalPosition={left:c,top:d},this.sizeDiff={width:g.outerWidth()-g.width(),height:g.outerHeight()-g.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof f.aspectRatio?f.aspectRatio:this.originalSize.width/this.originalSize.height||1,e=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===e?this.axis+"-resize":e),g.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c,d=this.helper,e={},f=this.originalMousePosition,g=this.axis,h=b.pageX-f.left||0,i=b.pageY-f.top||0,j=this._change[g];return this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height},j?(c=j.apply(this,[b,h,i]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),d.css(e),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(e)||this._trigger("resize",b,this.ui()),!1):!1},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&this._hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,c,d,e,f,g=this.options;f={minWidth:this._isNumber(g.minWidth)?g.minWidth:0,maxWidth:this._isNumber(g.maxWidth)?g.maxWidth:1/0,minHeight:this._isNumber(g.minHeight)?g.minHeight:0,maxHeight:this._isNumber(g.maxHeight)?g.maxHeight:1/0},(this._aspectRatio||a)&&(b=f.minHeight*this.aspectRatio,d=f.minWidth/this.aspectRatio,c=f.maxHeight*this.aspectRatio,e=f.maxWidth/this.aspectRatio,b>f.minWidth&&(f.minWidth=b),d>f.minHeight&&(f.minHeight=d),c<f.maxWidth&&(f.maxWidth=c),e<f.maxHeight&&(f.maxHeight=e)),this._vBoundaries=f},_updateCache:function(a){this.offset=this.helper.offset(),this._isNumber(a.left)&&(this.position.left=a.left),this._isNumber(a.top)&&(this.position.top=a.top),this._isNumber(a.height)&&(this.size.height=a.height),this._isNumber(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,c=this.size,d=this.axis;return this._isNumber(a.height)?a.width=a.height*this.aspectRatio:this._isNumber(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===d&&(a.left=b.left+(c.width-a.width),a.top=null),"nw"===d&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,c=this.axis,d=this._isNumber(a.width)&&b.maxWidth&&b.maxWidth<a.width,e=this._isNumber(a.height)&&b.maxHeight&&b.maxHeight<a.height,f=this._isNumber(a.width)&&b.minWidth&&b.minWidth>a.width,g=this._isNumber(a.height)&&b.minHeight&&b.minHeight>a.height,h=this.originalPosition.left+this.originalSize.width,i=this.position.top+this.size.height,j=/sw|nw|w/.test(c),k=/nw|ne|n/.test(c);return f&&(a.width=b.minWidth),g&&(a.height=b.minHeight),d&&(a.width=b.maxWidth),e&&(a.height=b.maxHeight),f&&j&&(a.left=h-b.minWidth),d&&j&&(a.left=h-b.maxWidth),g&&k&&(a.top=i-b.minHeight),e&&k&&(a.top=i-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,c,d,e,f=this.helper||this.element;for(a=0;a<this._proportionallyResizeElements.length;a++){if(e=this._proportionallyResizeElements[a],!this.borderDif)for(this.borderDif=[],c=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],d=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")],b=0;b<c.length;b++)this.borderDif[b]=(parseInt(c[b],10)||0)+(parseInt(d[b],10)||0);e.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition,prevSize:this.prevSize,prevPosition:this.prevPosition}}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).resizable("instance"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&c._hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var b,c,d,e,f,g,h,i=a(this).resizable("instance"),j=i.options,k=i.element,l=j.containment,m=l instanceof a?l.get(0):/parent/.test(l)?k.parent().get(0):l;m&&(i.containerElement=a(m),/document/.test(l)||l===document?(i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(b=a(m),c=[],a(["Top","Right","Left","Bottom"]).each(function(a,d){c[a]=i._num(b.css("padding"+d))}),i.containerOffset=b.offset(),i.containerPosition=b.position(),i.containerSize={height:b.innerHeight()-c[3],width:b.innerWidth()-c[1]},d=i.containerOffset,e=i.containerSize.height,f=i.containerSize.width,g=i._hasScroll(m,"left")?m.scrollWidth:f,h=i._hasScroll(m)?m.scrollHeight:e,i.parentData={element:m,left:d.left,top:d.top,width:g,height:h}))},resize:function(b,c){var d,e,f,g,h=a(this).resizable("instance"),i=h.options,j=h.containerOffset,k=h.position,l=h._aspectRatio||b.shiftKey,m={top:0,left:0},n=h.containerElement,o=!0;n[0]!==document&&/static/.test(n.css("position"))&&(m=j),k.left<(h._helper?j.left:0)&&(h.size.width=h.size.width+(h._helper?h.position.left-j.left:h.position.left-m.left),l&&(h.size.height=h.size.width/h.aspectRatio,o=!1),h.position.left=i.helper?j.left:0),k.top<(h._helper?j.top:0)&&(h.size.height=h.size.height+(h._helper?h.position.top-j.top:h.position.top),l&&(h.size.width=h.size.height*h.aspectRatio,o=!1),h.position.top=h._helper?j.top:0),h.offset.left=h.parentData.left+h.position.left,h.offset.top=h.parentData.top+h.position.top,d=Math.abs((h._helper?h.offset.left-m.left:h.offset.left-j.left)+h.sizeDiff.width),e=Math.abs((h._helper?h.offset.top-m.top:h.offset.top-j.top)+h.sizeDiff.height),f=h.containerElement.get(0)===h.element.parent().get(0),g=/relative|absolute/.test(h.containerElement.css("position")),f&&g&&(d-=Math.abs(h.parentData.left)),d+h.size.width>=h.parentData.width&&(h.size.width=h.parentData.width-d,l&&(h.size.height=h.size.width/h.aspectRatio,o=!1)),e+h.size.height>=h.parentData.height&&(h.size.height=h.parentData.height-e,l&&(h.size.width=h.size.height*h.aspectRatio,o=!1)),o||(h.position.left=c.prevPosition.left,h.position.top=c.prevPosition.top,h.size.width=c.prevSize.width,h.size.height=c.prevSize.height)},stop:function(){var b=a(this).resizable("instance"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).resizable("instance"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).resizable("instance"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("ui-resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).resizable("instance"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).resizable("instance");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).resizable("instance");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).resizable("instance"),c=b.options,d=b.size,e=b.originalSize,f=b.originalPosition,g=b.axis,h="number"==typeof c.grid?[c.grid,c.grid]:c.grid,i=h[0]||1,j=h[1]||1,k=Math.round((d.width-e.width)/i)*i,l=Math.round((d.height-e.height)/j)*j,m=e.width+k,n=e.height+l,o=c.maxWidth&&c.maxWidth<m,p=c.maxHeight&&c.maxHeight<n,q=c.minWidth&&c.minWidth>m,r=c.minHeight&&c.minHeight>n;c.grid=h,q&&(m+=i),r&&(n+=j),o&&(m-=i),p&&(n-=j),/^(se|s|e)$/.test(g)?(b.size.width=m,b.size.height=n):/^(ne)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.top=f.top-l):/^(sw)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.left=f.left-k):(n-j>0?(b.size.height=n,b.position.top=f.top-l):(b.size.height=j,b.position.top=f.top+e.height-j),m-i>0?(b.size.width=m,b.position.left=f.left-k):(b.size.width=i,b.position.left=f.left+e.width-i))}});a.ui.resizable,a.widget("ui.menu",{version:"1.11.0",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(a){a.preventDefault()},"click .ui-menu-item":function(b){var c=a(b.target);!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),c.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&a(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.find(this.options.items).eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(a){this._closeOnDocumentClick(a)&&this.collapseAll(a),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var d,e,f,g,h,i=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:i=!1,e=this.previousFilter||"",f=String.fromCharCode(b.keyCode),g=!1,clearTimeout(this.filterTimer),f===e?g=!0:f=e+f,h=new RegExp("^"+c(f),"i"),d=this.activeMenu.find(this.options.items).filter(function(){return h.test(a(this).text())}),d=g&&-1!==d.index(this.active.next())?this.active.nextAll(".ui-menu-item"):d,d.length||(f=String.fromCharCode(b.keyCode),h=new RegExp("^"+c(f),"i"),d=this.activeMenu.find(this.options.items).filter(function(){return h.test(a(this).text())})),d.length?(this.focus(b,d),d.length>1?(this.previousFilter=f,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}i&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(a):this.select(a))},refresh:function(){var b,c,d=this,e=this.options.icons.submenu,f=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),f.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),c=b.parent(),d=a("<span>").addClass("ui-menu-icon ui-icon "+e).data("ui-menu-submenu-carat",!0);c.attr("aria-haspopup","true").prepend(d),b.attr("aria-labelledby",c.attr("id"))}),b=f.add(this.element),c=b.find(this.options.items),c.not(".ui-menu-item").each(function(){var b=a(this);d._isDivider(b)&&b.addClass("ui-widget-content ui-menu-divider")}),c.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),c.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu),"disabled"===a&&this.element.toggleClass("ui-state-disabled",!!b).attr("aria-disabled",b),this._super(a,b)},focus:function(a,b){var c,d;this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),d=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),c=b.children(".ui-menu"),c.length&&a&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.outerHeight(),0>e?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer),this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element),this._close(d),this.blur(b),this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(b){return!a(b.target).closest(".ui-menu").length},_isDivider:function(a){return!/[^\-\u2014\u2013\s]/.test(a.text())},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.find(this.options.items)[b]()),this.focus(c,d)},nextPage:function(b){var c,d,e;return this.active?void(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d-e<0}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(b)},previousPage:function(b){var c,d,e;return this.active?void(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d+e>0}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this.options.items).first()))):void this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,c)}});a.widget("ui.autocomplete",{version:"1.11.0",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var b,c,d,e=this.element[0].nodeName.toLowerCase(),f="textarea"===e,g="input"===e;this.isMultiLine=f?!0:g?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[f||g?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))return b=!0,d=!0,void(c=!0);b=!1,d=!1,c=!1;var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:b=!0,this._move("previousPage",e);break;case f.PAGE_DOWN:b=!0,this._move("nextPage",e);break;case f.UP:b=!0,this._keyEvent("previous",e);break;case f.DOWN:b=!0,this._keyEvent("next",e);break;case f.ENTER:this.menu.active&&(b=!0,e.preventDefault(),this.menu.select(e));break;case f.TAB:this.menu.active&&this.menu.select(e);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}},keypress:function(d){if(b)return b=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&d.preventDefault());if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){return d?(d=!1,void a.preventDefault()):void this._searchTimeout(a)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(a){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),void this._change(a))}}),this._initSource(),this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(b){b.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||a.contains(c,d.target)||b.close()})})},menufocus:function(b,c){var d,e;return this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)})):(e=c.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",b,{item:e})&&b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(e.value),d=c.item.attr("aria-label")||e.value,void(d&&jQuery.trim(d).length&&(this.liveRegion.children().hide(),a("<div>").text(d).appendTo(this.liveRegion))))},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d,this.selectedItem=c})),!1!==this._trigger("select",a,{item:c})&&this._value(c.value),this.term=this._value(),this.close(a),this.selectedItem=c}}),this.liveRegion=a("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b),"source"===a&&this._initSource(),"appendTo"===a&&this.menu.element.appendTo(this._appendTo()),"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b&&b[0]||(b=this.element.closest(".ui-front")),b.length||(b=this.document[0].body),b},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching),this.searching=this._delay(function(){var b=this.term===this._value(),c=this.menu.element.is(":visible"),d=a.altKey||a.ctrlKey||a.metaKey||a.shiftKey;(!b||b&&!c&&!d)&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){return a=null!=a?a:this._value(),this.term=this._value(),a.length<this.options.minLength?this.close(b):this._trigger("search",b)!==!1?this._search(a):void 0},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:a},this._response())},_response:function(){var b=++this.requestIndex;return a.proxy(function(a){b===this.requestIndex&&this.__response(a),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(a){a&&(a=this._normalize(a)),this._trigger("response",null,{content:a}),!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0,this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({},b,{label:b.label||b.value,value:b.value||b.label})})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b),this.isNewMenu=!0,this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").text(c.label).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[a](b):void this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}}),a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(a>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(b){var c;this._superApply(arguments),this.options.disabled||this.cancelSearch||(c=b&&b.length?this.options.messages.results(b.length):this.options.messages.noResults,this.liveRegion.children().hide(),a("<div>").text(c).appendTo(this.liveRegion))}});a.ui.autocomplete}),function(a,b,c){function d(a){var b={},d=/^jQuery\d+$/;return c.each(a.attributes,function(a,c){c.specified&&!d.test(c.name)&&(b[c.name]=c.value)}),b}function e(a,b){var d=this,e=c(d);if(d.value==e.attr("placeholder")&&e.hasClass("placeholder"))if(e.data("placeholder-password")){if(e=e.hide().next().show().attr("id",e.removeAttr("id").data("placeholder-id")),a===!0)return e[0].value=b;e.focus()}else d.value="",e.removeClass("placeholder"),d==g()&&d.select()}function f(){var a,b=this,f=c(b),g=this.id;if(b.value=b.value||"",""==b.value){if("password"==b.type){if(!f.data("placeholder-textinput")){try{a=f.clone().attr({type:"text"})}catch(h){a=c("<input>").attr(c.extend(d(this),{type:"text"}))}a.removeAttr("name").data({"placeholder-password":f,"placeholder-id":g}).bind("focus.placeholder",e),f.data({"placeholder-textinput":a,"placeholder-id":g}).before(a)}f=f.removeAttr("id").hide().prev().attr("id",g).show()}f.addClass("placeholder"),f[0]&&(f[0].value=f.attr("placeholder"));
}else/\d+-tokenfield$/.test(g)||f.attr("placeholder")==b.value||f.removeClass("placeholder")}function g(){try{return b.activeElement}catch(a){}}var h,i,j="[object OperaMini]"==Object.prototype.toString.call(a.operamini),k="placeholder"in b.createElement("input")&&!j,l="placeholder"in b.createElement("textarea")&&!j,m=c.fn,n=c.valHooks,o=c.propHooks;k&&l?(i=m.placeholder=function(){return this},i.input=i.textarea=!0):(i=m.placeholder=function(){var a=this;return a.filter((k?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":e,"blur.placeholder":f}).data("placeholder-enabled",!0).trigger("blur.placeholder"),f.call(a),a},i.input=k,i.textarea=l,h={get:function(a){var b=c(a),d=b.data("placeholder-password");return d?d[0].value:b.data("placeholder-enabled")&&b.hasClass("placeholder")?"":a.value},set:function(a,b){var d=c(a),h=d.data("placeholder-password");return h?h[0].value=b:d.data("placeholder-enabled")?(""==b?(a.value=b,a!=g()&&f.call(a)):d.hasClass("placeholder")?e.call(a,!0,b)||(a.value=b):a.value=b,d):a.value=b}},k||(n.input=h,o.value=h),l||(n.textarea=h,o.value=h),c(function(){c(b).delegate("form","submit.placeholder",function(){var a=c(".placeholder",this).each(e);setTimeout(function(){a.each(f)},10)})}),c(a).bind("beforeunload.placeholder",function(){c(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),define("jquery-placeholder",["jquery"],function(){}),function(a){"function"==typeof define&&define.amd?define("momenttc",["moment"],a):"object"==typeof exports?module.exports=a(require("../moment")):a(window.moment)}(function(a){return a.lang("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah點mm",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiem:function(a,b,c){var d=100*a+b;return 900>d?"早上":1130>d?"上午":1230>d?"中午":1800>d?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"日";case"M":return a+"月";case"w":case"W":return a+"週";default:return a}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"一分鐘",mm:"%d分鐘",h:"一小時",hh:"%d小時",d:"一天",dd:"%d天",M:"一個月",MM:"%d個月",y:"一年",yy:"%d年"}})}),function(a){"function"==typeof define&&define.amd?define("momentko",["moment"],a):"object"==typeof exports?module.exports=a(require("../moment")):a(window.moment)}(function(a){return a.lang("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h시 mm분",L:"YYYY.MM.DD",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 LT",LLLL:"YYYY년 MMMM D일 dddd LT"},meridiem:function(a,b,c){return 12>a?"오전":"오후"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇초",ss:"%d초",m:"일분",mm:"%d분",h:"한시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한달",MM:"%d달",y:"일년",yy:"%d년"},ordinal:"%d일",meridiemParse:/(오전|오후)/,isPM:function(a){return"오후"===a}})}),function(a){"function"==typeof define&&define.amd?define("momentja",["moment"],a):"object"==typeof exports?module.exports=a(require("../moment")):a(window.moment)}(function(a){return a.lang("ja",{months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"Ah時m分",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日LT",LLLL:"YYYY年M月D日LT dddd"},meridiem:function(a,b,c){return 12>a?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:"[来週]dddd LT",lastDay:"[昨日] LT",lastWeek:"[前週]dddd LT",sameElse:"L"},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}})}),function(a){"function"==typeof define&&define.amd?define("momentru",["moment"],a):"object"==typeof exports?module.exports=a(require("../moment")):a(window.moment)}(function(a){function b(a,b){var c=a.split("_");return b%10===1&&b%100!==11?c[0]:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?c[1]:c[2]}function c(a,c,d){var e={mm:"минута_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"};return"m"===d?c?"минута":"минуту":a+" "+b(e[d],+a)}function d(a,b){var c={nominative:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),accusative:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_")},d=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(b)?"accusative":"nominative";return c[d][a.month()]}function e(a,b){var c={nominative:"янв_фев_мар_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),accusative:"янв_фев_мар_апр_мая_июня_июля_авг_сен_окт_ноя_дек".split("_")},d=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(b)?"accusative":"nominative";return c[d][a.month()]}function f(a,b){var c={nominative:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),accusative:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_")},d=/\[ ?[Вв] ?(?:прошлую|следующую)? ?\] ?dddd/.test(b)?"accusative":"nominative";return c[d][a.day()]}return a.lang("ru",{months:d,monthsShort:e,weekdays:f,weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[й|я]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., LT",LLLL:"dddd, D MMMM YYYY г., LT"},calendar:{sameDay:"[Сегодня в] LT",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(){return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT"},lastWeek:function(){switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:c,mm:c,h:"час",hh:c,d:"день",dd:c,M:"месяц",MM:c,y:"год",yy:c},meridiem:function(a,b,c){return 4>a?"ночи":12>a?"утра":17>a?"дня":"вечера"},ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":return a+"-й";case"D":return a+"-го";case"w":case"W":return a+"-я";default:return a}},week:{dow:1,doy:7}})}),function(a){"function"==typeof define&&define.amd?define("momentvn",["moment"],a):"object"==typeof exports?module.exports=a(require("../moment")):a(window.moment)}(function(a){return a.lang("vn",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY LT",LLLL:"dddd, D MMMM [năm] YYYY LT",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần rồi lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},ordinal:function(a){return a},week:{dow:1,doy:4}})}),function(a){"function"==typeof define&&define.amd?define("momentth",["moment"],a):"object"==typeof exports?module.exports=a(require("../moment")):a(window.moment)}(function(a){return a.lang("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"มกรา_กุมภา_มีนา_เมษา_พฤษภา_มิถุนา_กรกฎา_สิงหา_กันยา_ตุลา_พฤศจิกา_ธันวา".split("_"),weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),longDateFormat:{LT:"H นาฬิกา m นาที",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา LT",LLLL:"วันddddที่ D MMMM YYYY เวลา LT"},meridiem:function(a,b,c){return 12>a?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}})}),function(a){"function"==typeof define&&define.amd?define("momentde",["moment"],a):"object"==typeof exports?module.exports=a(require("../moment")):a(window.moment)}(function(a){function b(a,b,c,d){var e={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[a+" Tage",a+" Tagen"],M:["ein Monat","einem Monat"],MM:[a+" Monate",a+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[a+" Jahre",a+" Jahren"]};return b?e[c][0]:e[c][1]}return a.lang("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"H:mm [Uhr]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT",sameElse:"L",nextDay:"[Morgen um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gestern um] LT",lastWeek:"[letzten] dddd [um] LT"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:b,mm:"%d Minuten",h:b,hh:"%d Stunden",d:b,dd:b,M:b,MM:b,y:b,yy:b},ordinal:"%d.",week:{dow:1,doy:4}})}),function(a){"function"==typeof define&&define.amd?define("momentfr",["moment"],a):"object"==typeof exports?module.exports=a(require("../moment")):a(window.moment)}(function(a){return a.lang("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(a){return a+(1===a?"er":"")},week:{dow:1,doy:4}})}),function(a){"function"==typeof define&&define.amd?define("momentcn",["moment"],a):"object"==typeof exports?module.exports=a(require("../moment")):a(window.moment)}(function(a){return a.lang("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiem:function(a,b,c){var d=100*a+b;return 600>d?"凌晨":900>d?"早上":1130>d?"上午":1230>d?"中午":1800>d?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var b,c;return b=a().startOf("week"),c=this.unix()-b.unix()>=604800?"[下]":"[本]",0===this.minutes()?c+"dddAh点整":c+"dddAh点mm"},lastWeek:function(){var b,c;return b=a().startOf("week"),c=this.unix()<b.unix()?"[上]":"[本]",0===this.minutes()?c+"dddAh点整":c+"dddAh点mm"},sameElse:"LL"},ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"日";case"M":return a+"月";case"w":case"W":return a+"周";default:return a}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1分钟",mm:"%d分钟",h:"1小时",hh:"%d小时",d:"1天",dd:"%d天",M:"1个月",MM:"%d个月",y:"1年",yy:"%d年"},week:{dow:1,doy:4}})}),!function(a){"function"==typeof define&&define.amd?define("parsleyjs",["jquery"],a):a(jQuery)}(function(a){"undefined"==typeof a&&"undefined"!=typeof window.jQuery&&(a=window.jQuery);var b={attr:function(a,b,c){var d,e={},f=this.msieversion(),g=new RegExp("^"+b,"i");if("undefined"==typeof a||"undefined"==typeof a[0])return{};for(var h in a[0].attributes)if(d=a[0].attributes[h],"undefined"!=typeof d&&null!==d&&(!f||f>=8||d.specified)&&g.test(d.name)){if("undefined"!=typeof c&&new RegExp(c+"$","i").test(d.name))return!0;e[this.camelize(d.name.replace(b,""))]=this.deserializeValue(d.value)}return"undefined"==typeof c?e:!1},setAttr:function(a,b,c,d){a[0].setAttribute(this.dasherize(b+c),String(d))},get:function(a,b){for(var c=0,d=(b||"").split(".");this.isObject(a)||this.isArray(a);)if(a=a[d[c++]],c===d.length)return a;return void 0},hash:function(a){return String(Math.random()).substring(2,a?a+2:9)},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isObject:function(a){return a===Object(a)},deserializeValue:function(b){var c;try{return b?"true"==b||("false"==b?!1:"null"==b?null:isNaN(c=Number(b))?/^[\[\{]/.test(b)?a.parseJSON(b):b:c):b}catch(d){return b}},camelize:function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},dasherize:function(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},msieversion:function(){var a=window.navigator.userAgent,b=a.indexOf("MSIE ");return b>0||navigator.userAgent.match(/Trident.*rv\:11\./)?parseInt(a.substring(b+5,a.indexOf(".",b)),10):0}},c={namespace:"data-parsley-",inputs:"input, textarea, select",excluded:"input[type=button], input[type=submit], input[type=reset], input[type=hidden]",priorityEnabled:!0,uiEnabled:!0,validationThreshold:3,focus:"first",trigger:!1,errorClass:"parsley-error",successClass:"parsley-success",classHandler:function(){},errorsContainer:function(){},errorsWrapper:'<ul class="parsley-errors-list"></ul>',errorTemplate:"<li></li>"},d=function(){};d.prototype={asyncSupport:!1,actualizeOptions:function(){return this.options=this.OptionsFactory.get(this),this},validateThroughValidator:function(a,b,c){return window.ParsleyValidator.validate(a,b,c)},subscribe:function(b,c){return a.listenTo(this,b.toLowerCase(),c),this},unsubscribe:function(b){return a.unsubscribeTo(this,b.toLowerCase()),this},reset:function(){if("ParsleyForm"!==this.__class__)return a.emit("parsley:field:reset",this);for(var b=0;b<this.fields.length;b++)a.emit("parsley:field:reset",this.fields[b]);a.emit("parsley:form:reset",this)},destroy:function(){if("ParsleyForm"!==this.__class__)return this.$element.removeData("Parsley"),this.$element.removeData("ParsleyFieldMultiple"),void a.emit("parsley:field:destroy",this);for(var b=0;b<this.fields.length;b++)this.fields[b].destroy();this.$element.removeData("Parsley"),a.emit("parsley:form:destroy",this)}};var e=function(){var a={},b=function(a){this.__class__="Validator",this.__version__="1.0.1",this.options=a||{},this.bindingKey=this.options.bindingKey||"_validatorjsConstraint"};b.prototype={constructor:b,validate:function(a,b,c){if("string"!=typeof a&&"object"!=typeof a)throw new Error("You must validate an object or a string");return"string"==typeof a||g(a)?this._validateString(a,b,c):this.isBinded(a)?this._validateBindedObject(a,b):this._validateObject(a,b,c)},bind:function(a,b){if("object"!=typeof a)throw new Error("Must bind a Constraint to an object");return a[this.bindingKey]=new c(b),this},unbind:function(a){return"undefined"==typeof a._validatorjsConstraint?this:(delete a[this.bindingKey],this)},isBinded:function(a){return"undefined"!=typeof a[this.bindingKey]},getBinded:function(a){return this.isBinded(a)?a[this.bindingKey]:null},_validateString:function(a,b,c){var f,h=[];g(b)||(b=[b]);for(var i=0;i<b.length;i++){if(!(b[i]instanceof e))throw new Error("You must give an Assert or an Asserts array to validate a string");f=b[i].check(a,c),f instanceof d&&h.push(f)}return h.length?h:!0},_validateObject:function(a,b,d){if("object"!=typeof b)throw new Error("You must give a constraint to validate an object");return b instanceof c?b.check(a,d):new c(b).check(a,d)},_validateBindedObject:function(a,b){return a[this.bindingKey].check(a,b)}},b.errorCode={must_be_a_string:"must_be_a_string",must_be_an_array:"must_be_an_array",must_be_a_number:"must_be_a_number",must_be_a_string_or_array:"must_be_a_string_or_array"};var c=function(a,b){if(this.__class__="Constraint",this.options=b||{},this.nodes={},a)try{this._bootstrap(a)}catch(c){throw new Error("Should give a valid mapping object to Constraint",c,a)}};c.prototype={constructor:c,check:function(a,b){var c,d={};for(var h in this.nodes){for(var i=!1,j=this.get(h),k=g(j)?j:[j],l=k.length-1;l>=0;l--)"Required"!==k[l].__class__||(i=k[l].requiresValidation(b));if(this.has(h,a)||this.options.strict||i)try{this.has(h,this.options.strict||i?a:void 0)||(new e).HaveProperty(h).validate(a),c=this._check(h,a[h],b),(g(c)&&c.length>0||!g(c)&&!f(c))&&(d[h]=c)}catch(m){d[h]=m}}return f(d)?!0:d},add:function(a,b){if(b instanceof e||g(b)&&b[0]instanceof e)return this.nodes[a]=b,this;if("object"==typeof b&&!g(b))return this.nodes[a]=b instanceof c?b:new c(b),this;throw new Error("Should give an Assert, an Asserts array, a Constraint",b)},has:function(a,b){return b="undefined"!=typeof b?b:this.nodes,"undefined"!=typeof b[a]},get:function(a,b){return this.has(a)?this.nodes[a]:b||null},remove:function(a){var b=[];for(var c in this.nodes)c!==a&&(b[c]=this.nodes[c]);return this.nodes=b,this},_bootstrap:function(a){if(a instanceof c)return this.nodes=a.nodes;for(var b in a)this.add(b,a[b])},_check:function(a,b,d){if(this.nodes[a]instanceof e)return this._checkAsserts(b,[this.nodes[a]],d);if(g(this.nodes[a]))return this._checkAsserts(b,this.nodes[a],d);if(this.nodes[a]instanceof c)return this.nodes[a].check(b,d);throw new Error("Invalid node",this.nodes[a])},_checkAsserts:function(a,b,c){for(var d,e=[],f=0;f<b.length;f++)d=b[f].check(a,c),"undefined"!=typeof d&&!0!==d&&e.push(d);return e}};var d=function(a,b,c){if(this.__class__="Violation",!(a instanceof e))throw new Error("Should give an assertion implementing the Assert interface");this.assert=a,this.value=b,"undefined"!=typeof c&&(this.violation=c)};d.prototype={show:function(){var a={assert:this.assert.__class__,value:this.value};return this.violation&&(a.violation=this.violation),a},__toString:function(){return"undefined"!=typeof this.violation&&(this.violation='", '+this.getViolation().constraint+" expected was "+this.getViolation().expected),this.assert.__class__+' assert failed for "'+this.value+this.violation||""},getViolation:function(){var a,b;for(a in this.violation)b=this.violation[a];return{constraint:a,expected:b}}};var e=function(a){this.__class__="Assert",this.__parentClass__=this.__class__,this.groups=[],"undefined"!=typeof a&&this.addGroup(a)};e.prototype={construct:e,requiresValidation:function(a){return a&&!this.hasGroup(a)?!1:!a&&this.hasGroups()?!1:!0},check:function(a,b){if(this.requiresValidation(b))try{return this.validate(a,b)}catch(c){return c}},hasGroup:function(a){return g(a)?this.hasOneOf(a):"Any"===a?!0:this.hasGroups()?-1!==this.groups.indexOf(a):"Default"===a},hasOneOf:function(a){for(var b=0;b<a.length;b++)if(this.hasGroup(a[b]))return!0;return!1},hasGroups:function(){return this.groups.length>0},addGroup:function(a){return g(a)?this.addGroups(a):(this.hasGroup(a)||this.groups.push(a),this)},removeGroup:function(a){for(var b=[],c=0;c<this.groups.length;c++)a!==this.groups[c]&&b.push(this.groups[c]);return this.groups=b,this},addGroups:function(a){for(var b=0;b<a.length;b++)this.addGroup(a[b]);return this},HaveProperty:function(a){return this.__class__="HaveProperty",this.node=a,this.validate=function(a){if("undefined"==typeof a[this.node])throw new d(this,a,{value:this.node});return!0},this},Blank:function(){return this.__class__="Blank",this.validate=function(a){if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(""!==a.replace(/^\s+/g,"").replace(/\s+$/g,""))throw new d(this,a);return!0},this},Callback:function(a){if(this.__class__="Callback",this.arguments=Array.prototype.slice.call(arguments),1===this.arguments.length?this.arguments=[]:this.arguments.splice(0,1),"function"!=typeof a)throw new Error("Callback must be instanciated with a function");return this.fn=a,this.validate=function(a){var b=this.fn.apply(this,[a].concat(this.arguments));if(!0!==b)throw new d(this,a,{result:b});return!0},this},Choice:function(a){if(this.__class__="Choice",!g(a)&&"function"!=typeof a)throw new Error("Choice must be instanciated with an array or a function");return this.list=a,this.validate=function(a){for(var b="function"==typeof this.list?this.list():this.list,c=0;c<b.length;c++)if(a===b[c])return!0;throw new d(this,a,{choices:b})},this},Collection:function(a){return this.__class__="Collection",this.constraint="undefined"!=typeof a?a instanceof e?a:new c(a):!1,this.validate=function(a,c){var e,h=new b,i=0,j={},k=this.groups.length?this.groups:c;if(!g(a))throw new d(this,a,{value:b.errorCode.must_be_an_array});for(var l=0;l<a.length;l++)e=this.constraint?h.validate(a[l],this.constraint,k):h.validate(a[l],k),f(e)||(j[i]=e),i++;return f(j)?!0:j},this},Count:function(a){return this.__class__="Count",this.count=a,this.validate=function(a){if(!g(a))throw new d(this,a,{value:b.errorCode.must_be_an_array});var c="function"==typeof this.count?this.count(a):this.count;if(isNaN(Number(c)))throw new Error("Count must be a valid interger",c);if(c!==a.length)throw new d(this,a,{count:c});return!0},this},Email:function(){return this.__class__="Email",this.validate=function(a){var c=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(!c.test(a))throw new d(this,a);return!0},this},EqualTo:function(a){if(this.__class__="EqualTo","undefined"==typeof a)throw new Error("EqualTo must be instanciated with a value or a function");return this.reference=a,this.validate=function(a){var b="function"==typeof this.reference?this.reference(a):this.reference;if(b!==a)throw new d(this,a,{value:b});return!0},this},GreaterThan:function(a){if(this.__class__="GreaterThan","undefined"==typeof a)throw new Error("Should give a threshold value");return this.threshold=a,this.validate=function(a){if(""===a||isNaN(Number(a)))throw new d(this,a,{value:b.errorCode.must_be_a_number});if(this.threshold>=a)throw new d(this,a,{threshold:this.threshold});return!0},this},GreaterThanOrEqual:function(a){if(this.__class__="GreaterThanOrEqual","undefined"==typeof a)throw new Error("Should give a threshold value");return this.threshold=a,this.validate=function(a){if(""===a||isNaN(Number(a)))throw new d(this,a,{value:b.errorCode.must_be_a_number});if(this.threshold>a)throw new d(this,a,{threshold:this.threshold});return!0},this},InstanceOf:function(a){if(this.__class__="InstanceOf","undefined"==typeof a)throw new Error("InstanceOf must be instanciated with a value");return this.classRef=a,this.validate=function(a){if(1!=a instanceof this.classRef)throw new d(this,a,{classRef:this.classRef});return!0},this},Length:function(a){if(this.__class__="Length",!a.min&&!a.max)throw new Error("Lenth assert must be instanciated with a { min: x, max: y } object");return this.min=a.min,this.max=a.max,this.validate=function(a){if("string"!=typeof a&&!g(a))throw new d(this,a,{value:b.errorCode.must_be_a_string_or_array});if("undefined"!=typeof this.min&&this.min===this.max&&a.length!==this.min)throw new d(this,a,{min:this.min,max:this.max});if("undefined"!=typeof this.max&&a.length>this.max)throw new d(this,a,{max:this.max});if("undefined"!=typeof this.min&&a.length<this.min)throw new d(this,a,{min:this.min});return!0},this},LessThan:function(a){if(this.__class__="LessThan","undefined"==typeof a)throw new Error("Should give a threshold value");return this.threshold=a,this.validate=function(a){if(""===a||isNaN(Number(a)))throw new d(this,a,{value:b.errorCode.must_be_a_number});if(this.threshold<=a)throw new d(this,a,{threshold:this.threshold});return!0},this},LessThanOrEqual:function(a){if(this.__class__="LessThanOrEqual","undefined"==typeof a)throw new Error("Should give a threshold value");return this.threshold=a,this.validate=function(a){if(""===a||isNaN(Number(a)))throw new d(this,a,{value:b.errorCode.must_be_a_number});if(this.threshold<a)throw new d(this,a,{threshold:this.threshold});return!0},this},NotNull:function(){return this.__class__="NotNull",this.validate=function(a){if(null===a||"undefined"==typeof a)throw new d(this,a);return!0},this},NotBlank:function(){return this.__class__="NotBlank",this.validate=function(a){if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(""===a.replace(/^\s+/g,"").replace(/\s+$/g,""))throw new d(this,a);return!0},this},Null:function(){return this.__class__="Null",this.validate=function(a){if(null!==a)throw new d(this,a);return!0},this},Range:function(a,b){if(this.__class__="Range","undefined"==typeof a||"undefined"==typeof b)throw new Error("Range assert expects min and max values");return this.min=a,this.max=b,this.validate=function(a){try{return"string"==typeof a&&isNaN(Number(a))||g(a)?(new e).Length({min:this.min,max:this.max}).validate(a):(new e).GreaterThanOrEqual(this.min).validate(a)&&(new e).LessThanOrEqual(this.max).validate(a),!0}catch(b){throw new d(this,a,b.violation)}return!0},this},Regexp:function(a,c){if(this.__class__="Regexp","undefined"==typeof a)throw new Error("You must give a regexp");return this.regexp=a,this.flag=c||"",this.validate=function(a){if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(!new RegExp(this.regexp,this.flag).test(a))throw new d(this,a,{regexp:this.regexp,flag:this.flag});return!0},this},Required:function(){return this.__class__="Required",this.validate=function(a){if("undefined"==typeof a)throw new d(this,a);try{"string"==typeof a?(new e).NotNull().validate(a)&&(new e).NotBlank().validate(a):!0===g(a)&&(new e).Length({min:1}).validate(a)}catch(b){throw new d(this,a)}return!0},this},Unique:function(a){return this.__class__="Unique","object"==typeof a&&(this.key=a.key),this.validate=function(a){var c,e=[];if(!g(a))throw new d(this,a,{value:b.errorCode.must_be_an_array});for(var f=0;f<a.length;f++)if(c="object"==typeof a[f]?a[f][this.key]:a[f],"undefined"!=typeof c){if(-1!==e.indexOf(c))throw new d(this,a,{value:c});e.push(c)}return!0},this}},a.Assert=e,a.Validator=b,a.Violation=d,a.Constraint=c,Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!==d&&1/0!=d&&d!=-1/0&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1});var f=function(a){for(var b in a)return!1;return!0},g=function(a){return"[object Array]"===Object.prototype.toString.call(a)};return"function"==typeof define&&define.amd?define("vendors/validator.js/dist/validator",[],function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:window["undefined"!=typeof validatorjs_ns?validatorjs_ns:"Validator"]=a,a}();e="undefined"!=typeof e?e:"undefined"!=typeof module?module.exports:null;var f=function(a,b){this.__class__="ParsleyValidator",this.Validator=e,this.locale="en",this.init(a||{},b||{})};f.prototype={init:function(b,c){this.catalog=c;for(var d in b)this.addValidator(d,b[d].fn,b[d].priority,b[d].requirementsTransformer);a.emit("parsley:validator:init")},setLocale:function(a){if("undefined"==typeof this.catalog[a])throw new Error(a+" is not available in the catalog");return this.locale=a,this},addCatalog:function(a,b,c){return"object"==typeof b&&(this.catalog[a]=b),!0===c?this.setLocale(a):this},addMessage:function(a,b,c){return"undefined"==typeof this.catalog[a]&&(this.catalog[a]={}),this.catalog[a][b.toLowerCase()]=c,this},validate:function(){return(new this.Validator.Validator).validate.apply(new e.Validator,arguments)},addValidator:function(b,c,d,f){return this.validators[b.toLowerCase()]=function(b){return a.extend((new e.Assert).Callback(c,b),{priority:d,requirementsTransformer:f})},this},updateValidator:function(a,b,c,d){return this.addValidator(a,b,c,d)},removeValidator:function(a){return delete this.validators[a],this},getErrorMessage:function(a){var b;return b="type"===a.name?this.catalog[this.locale][a.name][a.requirements]:this.formatMessage(this.catalog[this.locale][a.name],a.requirements),""!==b?b:this.catalog[this.locale].defaultMessage},formatMessage:function(a,b){if("object"==typeof b){for(var c in b)a=this.formatMessage(a,b[c]);return a}return"string"==typeof a?a.replace(new RegExp("%s","i"),b):""},validators:{notblank:function(){return a.extend((new e.Assert).NotBlank(),{priority:2})},required:function(){return a.extend((new e.Assert).Required(),{priority:512})},type:function(b){var c;switch(b){case"email":c=(new e.Assert).Email();break;case"range":case"number":c=(new e.Assert).Regexp("^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$");break;case"integer":c=(new e.Assert).Regexp("^-?\\d+$");break;case"digits":c=(new e.Assert).Regexp("^\\d+$");break;case"alphanum":c=(new e.Assert).Regexp("^\\w+$","i");break;case"url":c=(new e.Assert).Regexp("(https?:\\/\\/)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,24}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)","i");break;default:throw new Error("validator type `"+b+"` is not supported")}return a.extend(c,{priority:256})},pattern:function(b){var c="";return/^\/.*\/(?:[gimy]*)$/.test(b)&&(c=b.replace(/.*\/([gimy]*)$/,"$1"),b=b.replace(new RegExp("^/(.*?)/"+c+"$"),"$1")),a.extend((new e.Assert).Regexp(b,c),{priority:64})},minlength:function(b){return a.extend((new e.Assert).Length({min:b
}),{priority:30,requirementsTransformer:function(){return"string"!=typeof b||isNaN(b)?b:parseInt(b,10)}})},maxlength:function(b){return a.extend((new e.Assert).Length({max:b}),{priority:30,requirementsTransformer:function(){return"string"!=typeof b||isNaN(b)?b:parseInt(b,10)}})},length:function(b){return a.extend((new e.Assert).Length({min:b[0],max:b[1]}),{priority:32})},mincheck:function(a){return this.minlength(a)},maxcheck:function(a){return this.maxlength(a)},check:function(a){return this.length(a)},min:function(b){return a.extend((new e.Assert).GreaterThanOrEqual(b),{priority:30,requirementsTransformer:function(){return"string"!=typeof b||isNaN(b)?b:parseInt(b,10)}})},max:function(b){return a.extend((new e.Assert).LessThanOrEqual(b),{priority:30,requirementsTransformer:function(){return"string"!=typeof b||isNaN(b)?b:parseInt(b,10)}})},range:function(b){return a.extend((new e.Assert).Range(b[0],b[1]),{priority:32,requirementsTransformer:function(){for(var a=0;a<b.length;a++)b[a]="string"!=typeof b[a]||isNaN(b[a])?b[a]:parseInt(b[a],10);return b}})},equalto:function(b){return a.extend((new e.Assert).EqualTo(b),{priority:256,requirementsTransformer:function(){return a(b).length?a(b).val():b}})}}};var g=function(){this.__class__="ParsleyUI"};g.prototype={listen:function(){return a.listen("parsley:form:init",this,this.setupForm),a.listen("parsley:field:init",this,this.setupField),a.listen("parsley:field:validated",this,this.reflow),a.listen("parsley:form:validated",this,this.focus),a.listen("parsley:field:reset",this,this.reset),a.listen("parsley:form:destroy",this,this.destroy),a.listen("parsley:field:destroy",this,this.destroy),this},reflow:function(a){if("undefined"!=typeof a._ui&&!1!==a._ui.active){var b=this._diff(a.validationResult,a._ui.lastValidationResult);a._ui.lastValidationResult=a.validationResult,a._ui.validatedOnce=!0,this.manageStatusClass(a),this.manageErrorsMessages(a,b),this.actualizeTriggers(a),(b.kept.length||b.added.length)&&"undefined"==typeof a._ui.failedOnce&&this.manageFailingFieldTrigger(a)}},getErrorsMessages:function(a){if(!0===a.validationResult)return[];for(var b=[],c=0;c<a.validationResult.length;c++)b.push(this._getErrorMessage(a,a.validationResult[c].assert));return b},manageStatusClass:function(a){!0===a.validationResult?this._successClass(a):a.validationResult.length>0?this._errorClass(a):this._resetClass(a)},manageErrorsMessages:function(b,c){if("undefined"==typeof b.options.errorsMessagesDisabled){if("undefined"!=typeof b.options.errorMessage)return c.added.length||c.kept.length?(0===b._ui.$errorsWrapper.find(".parsley-custom-error-message").length&&b._ui.$errorsWrapper.append(a(b.options.errorTemplate).addClass("parsley-custom-error-message")),b._ui.$errorsWrapper.addClass("filled").find(".parsley-custom-error-message").html(b.options.errorMessage)):b._ui.$errorsWrapper.removeClass("filled").find(".parsley-custom-error-message").remove();for(var d=0;d<c.removed.length;d++)this.removeError(b,c.removed[d].assert.name,!0);for(d=0;d<c.added.length;d++)this.addError(b,c.added[d].assert.name,void 0,c.added[d].assert,!0);for(d=0;d<c.kept.length;d++)this.updateError(b,c.kept[d].assert.name,void 0,c.kept[d].assert,!0)}},addError:function(b,c,d,e,f){b._ui.$errorsWrapper.addClass("filled").append(a(b.options.errorTemplate).addClass("parsley-"+c).html(d||this._getErrorMessage(b,e))),!0!==f&&this._errorClass(b)},updateError:function(a,b,c,d,e){a._ui.$errorsWrapper.addClass("filled").find(".parsley-"+b).html(c||this._getErrorMessage(a,d)),!0!==e&&this._errorClass(a)},removeError:function(a,b,c){a._ui.$errorsWrapper.removeClass("filled").find(".parsley-"+b).remove(),!0!==c&&this.manageStatusClass(a)},focus:function(a){if(!0===a.validationResult||"none"===a.options.focus)return a._focusedField=null;a._focusedField=null;for(var b=0;b<a.fields.length;b++)if(!0!==a.fields[b].validationResult&&a.fields[b].validationResult.length>0&&"undefined"==typeof a.fields[b].options.noFocus){if("first"===a.options.focus)return a._focusedField=a.fields[b].$element,a._focusedField.focus();a._focusedField=a.fields[b].$element}return null===a._focusedField?null:a._focusedField.focus()},_getErrorMessage:function(a,b){var c=b.name+"Message";return"undefined"!=typeof a.options[c]?window.ParsleyValidator.formatMessage(a.options[c],b.requirements):window.ParsleyValidator.getErrorMessage(b)},_diff:function(a,b,c){for(var d=[],e=[],f=0;f<a.length;f++){for(var g=!1,h=0;h<b.length;h++)if(a[f].assert.name===b[h].assert.name){g=!0;break}g?e.push(a[f]):d.push(a[f])}return{kept:e,added:d,removed:c?[]:this._diff(b,a,!0).added}},setupForm:function(b){b.$element.on("submit.Parsley",!1,a.proxy(b.onSubmitValidate,b)),!1!==b.options.uiEnabled&&b.$element.attr("novalidate","")},setupField:function(b){var c={active:!1};!1!==b.options.uiEnabled&&(c.active=!0,b.$element.attr(b.options.namespace+"id",b.__id__),c.$errorClassHandler=this._manageClassHandler(b),c.errorsWrapperId="parsley-id-"+("undefined"!=typeof b.options.multiple?"multiple-"+b.options.multiple:b.__id__),c.$errorsWrapper=a(b.options.errorsWrapper).attr("id",c.errorsWrapperId),c.lastValidationResult=[],c.validatedOnce=!1,c.validationInformationVisible=!1,b._ui=c,b.$element.is(b.options.excluded)||this._insertErrorWrapper(b),this.actualizeTriggers(b))},_manageClassHandler:function(b){if("string"==typeof b.options.classHandler&&a(b.options.classHandler).length)return a(b.options.classHandler);var c=b.options.classHandler(b);return"undefined"!=typeof c&&c.length?c:"undefined"==typeof b.options.multiple||b.$element.is("select")?b.$element:b.$element.parent()},_insertErrorWrapper:function(b){var c;if("string"==typeof b.options.errorsContainer){if(a(b.options.errorsContainer).length)return a(b.options.errorsContainer).append(b._ui.$errorsWrapper);window.console&&window.console.warn&&window.console.warn("The errors container `"+b.options.errorsContainer+"` does not exist in DOM")}else"function"==typeof b.options.errorsContainer&&(c=b.options.errorsContainer(b));return"undefined"!=typeof c&&c.length?c.append(b._ui.$errorsWrapper):"undefined"==typeof b.options.multiple?b.$element.after(b._ui.$errorsWrapper):b.$element.parent().after(b._ui.$errorsWrapper)},actualizeTriggers:function(b){var c=b.$element;if(b.options.multiple&&(c=a("["+b.options.namespace+'multiple="'+b.options.multiple+'"]')),c.off(".Parsley"),!1!==b.options.trigger){var d=b.options.trigger.replace(/^\s+/g,"").replace(/\s+$/g,"");""!==d&&c.on(d.split(" ").join(".Parsley ")+".Parsley",a.proxy("function"==typeof b.eventValidate?b.eventValidate:this.eventValidate,b))}},eventValidate:function(a){new RegExp("key").test(a.type)&&!this._ui.validationInformationVisible&&this.getValue().length<=this.options.validationThreshold||(this._ui.validatedOnce=!0,this.validate())},manageFailingFieldTrigger:function(b){return b._ui.failedOnce=!0,b.options.multiple&&a("["+b.options.namespace+'multiple="'+b.options.multiple+'"]').each(function(){return new RegExp("change","i").test(a(this).parsley().options.trigger||"")?void 0:a(this).on("change.ParsleyFailedOnce",!1,a.proxy(b.validate,b))}),b.$element.is("select")&&!new RegExp("change","i").test(b.options.trigger||"")?b.$element.on("change.ParsleyFailedOnce",!1,a.proxy(b.validate,b)):new RegExp("keyup","i").test(b.options.trigger||"")?void 0:b.$element.on("keyup.ParsleyFailedOnce",!1,a.proxy(b.validate,b))},reset:function(a){a.$element.off(".Parsley"),a.$element.off(".ParsleyFailedOnce"),"undefined"!=typeof a._ui&&"ParsleyForm"!==a.__class__&&(a._ui.$errorsWrapper.removeClass("filled").children().remove(),this._resetClass(a),a._ui.validatedOnce=!1,a._ui.lastValidationResult=[],a._ui.validationInformationVisible=!1)},destroy:function(a){this.reset(a),"ParsleyForm"!==a.__class__&&("undefined"!=typeof a._ui&&a._ui.$errorsWrapper.remove(),delete a._ui)},_successClass:function(a){a._ui.validationInformationVisible=!0,a._ui.$errorClassHandler.removeClass(a.options.errorClass).addClass(a.options.successClass)},_errorClass:function(a){a._ui.validationInformationVisible=!0,a._ui.$errorClassHandler.removeClass(a.options.successClass).addClass(a.options.errorClass)},_resetClass:function(a){a._ui.$errorClassHandler.removeClass(a.options.successClass).removeClass(a.options.errorClass)}};var h=function(c,d,e,f){this.__class__="OptionsFactory",this.__id__=b.hash(4),this.formOptions=null,this.fieldOptions=null,this.staticOptions=a.extend(!0,{},c,d,e,{namespace:f})};h.prototype={get:function(a){if("undefined"==typeof a.__class__)throw new Error("Parsley Instance expected");switch(a.__class__){case"Parsley":return this.staticOptions;case"ParsleyForm":return this.getFormOptions(a);case"ParsleyField":case"ParsleyFieldMultiple":return this.getFieldOptions(a);default:throw new Error("Instance "+a.__class__+" is not supported")}},getFormOptions:function(c){return this.formOptions=b.attr(c.$element,this.staticOptions.namespace),a.extend({},this.staticOptions,this.formOptions)},getFieldOptions:function(c){return this.fieldOptions=b.attr(c.$element,this.staticOptions.namespace),null===this.formOptions&&"undefined"!=typeof c.parent&&(this.formOptions=this.getFormOptions(c.parent)),a.extend({},this.staticOptions,this.formOptions,this.fieldOptions)}};var i=function(c,d){if(this.__class__="ParsleyForm",this.__id__=b.hash(4),"OptionsFactory"!==b.get(d,"__class__"))throw new Error("You must give an OptionsFactory instance");this.OptionsFactory=d,this.$element=a(c),this.validationResult=null,this.options=this.OptionsFactory.get(this)};i.prototype={onSubmitValidate:function(b){return this.validate(void 0,void 0,b),!1===this.validationResult&&b instanceof a.Event&&(b.stopImmediatePropagation(),b.preventDefault()),this},validate:function(b,c,d){this.submitEvent=d,this.validationResult=!0;var e=[];a.emit("parsley:form:validate",this),this._refreshFields();for(var f=0;f<this.fields.length;f++)(!b||this._isFieldInGroup(this.fields[f],b))&&(e=this.fields[f].validate(c),!0!==e&&e.length>0&&this.validationResult&&(this.validationResult=!1));return a.emit("parsley:form:"+(this.validationResult?"success":"error"),this),a.emit("parsley:form:validated",this),this.validationResult},isValid:function(a,b){this._refreshFields();for(var c=0;c<this.fields.length;c++)if((!a||this._isFieldInGroup(this.fields[c],a))&&!1===this.fields[c].isValid(b))return!1;return!0},_isFieldInGroup:function(c,d){return b.isArray(c.options.group)?-1!==a.inArray(d,c.options.group):c.options.group===d},_refreshFields:function(){return this.actualizeOptions()._bindFields()},_bindFields:function(){var a=this;return this.fields=[],this.fieldsMappedById={},this.$element.find(this.options.inputs).each(function(){var b=new window.Parsley(this,{},a);"ParsleyField"!==b.__class__&&"ParsleyFieldMultiple"!==b.__class__||b.$element.is(b.options.excluded)||"undefined"==typeof a.fieldsMappedById[b.__class__+"-"+b.__id__]&&(a.fieldsMappedById[b.__class__+"-"+b.__id__]=b,a.fields.push(b))}),this}};var j=function(c,d,e,f,g){var h={};if(!new RegExp("ParsleyField").test(b.get(c,"__class__")))throw new Error("ParsleyField or ParsleyFieldMultiple instance expected");if("function"==typeof window.ParsleyValidator.validators[d]&&(h=window.ParsleyValidator.validators[d](e)),"Assert"!==h.__parentClass__)throw new Error("Valid validator expected");var i=function(){return"undefined"!=typeof c.options[d+"Priority"]?c.options[d+"Priority"]:b.get(h,"priority")||2};return f=f||i(),"function"==typeof h.requirementsTransformer&&(e=h.requirementsTransformer(),h=window.ParsleyValidator.validators[d](e)),a.extend(h,{name:d,requirements:e,priority:f,groups:[f],isDomConstraint:g||b.attr(c.$element,c.options.namespace,d)})},k=function(c,d,e){this.__class__="ParsleyField",this.__id__=b.hash(4),this.$element=a(c),"undefined"!=typeof e?(this.parent=e,this.OptionsFactory=this.parent.OptionsFactory,this.options=this.OptionsFactory.get(this)):(this.OptionsFactory=d,this.options=this.OptionsFactory.get(this)),this.constraints=[],this.constraintsByName={},this.validationResult=[],this._bindConstraints()};k.prototype={validate:function(b){return this.value=this.getValue(),a.emit("parsley:field:validate",this),a.emit("parsley:field:"+(this.isValid(b,this.value)?"success":"error"),this),a.emit("parsley:field:validated",this),this.validationResult},isValid:function(a,b){this.refreshConstraints();var c=this._getConstraintsSortedPriorities();if(0===c.length)return this.validationResult=[];if(("undefined"==typeof b||null===b)&&(b=this.getValue()),!b.length&&!this._isRequired()&&"undefined"==typeof this.options.validateIfEmpty&&!0!==a)return this.validationResult=[];if(!1===this.options.priorityEnabled)return!0===(this.validationResult=this.validateThroughValidator(b,this.constraints,"Any"));for(var d=0;d<c.length;d++)if(!0!==(this.validationResult=this.validateThroughValidator(b,this.constraints,c[d])))return!1;return!0},getValue:function(){var a;return a="undefined"!=typeof this.options.value?this.options.value:this.$element.val(),"undefined"==typeof a||null===a?"":!0===this.options.trimValue?a.replace(/^\s+|\s+$/g,""):a},refreshConstraints:function(){return this.actualizeOptions()._bindConstraints()},addConstraint:function(a,b,c,d){if(a=a.toLowerCase(),"function"==typeof window.ParsleyValidator.validators[a]){var e=new j(this,a,b,c,d);"undefined"!==this.constraintsByName[e.name]&&this.removeConstraint(e.name),this.constraints.push(e),this.constraintsByName[e.name]=e}return this},removeConstraint:function(a){for(var b=0;b<this.constraints.length;b++)if(a===this.constraints[b].name){this.constraints.splice(b,1);break}return delete this.constraintsByName[a],this},updateConstraint:function(a,b,c){return this.removeConstraint(a).addConstraint(a,b,c)},_bindConstraints:function(){for(var a=[],b={},c=0;c<this.constraints.length;c++)!1===this.constraints[c].isDomConstraint&&(a.push(this.constraints[c]),b[this.constraints[c].name]=this.constraints[c]);this.constraints=a,this.constraintsByName=b;for(var d in this.options)this.addConstraint(d,this.options[d]);return this._bindHtml5Constraints()},_bindHtml5Constraints:function(){(this.$element.hasClass("required")||this.$element.attr("required"))&&this.addConstraint("required",!0,void 0,!0),"string"==typeof this.$element.attr("pattern")&&this.addConstraint("pattern",this.$element.attr("pattern"),void 0,!0),"undefined"!=typeof this.$element.attr("min")&&"undefined"!=typeof this.$element.attr("max")?this.addConstraint("range",[this.$element.attr("min"),this.$element.attr("max")],void 0,!0):"undefined"!=typeof this.$element.attr("min")?this.addConstraint("min",this.$element.attr("min"),void 0,!0):"undefined"!=typeof this.$element.attr("max")&&this.addConstraint("max",this.$element.attr("max"),void 0,!0),"undefined"!=typeof this.$element.attr("minlength")&&"undefined"!=typeof this.$element.attr("maxlength")?this.addConstraint("length",[this.$element.attr("minlength"),this.$element.attr("maxlength")],void 0,!0):"undefined"!=typeof this.$element.attr("minlength")?this.addConstraint("minlength",this.$element.attr("minlength"),void 0,!0):"undefined"!=typeof this.$element.attr("maxlength")&&this.addConstraint("maxlength",this.$element.attr("maxlength"),void 0,!0);var a=this.$element.attr("type");return"undefined"==typeof a?this:"number"===a?"undefined"==typeof this.$element.attr("step")||0===parseFloat(this.$element.attr("step"))%1?this.addConstraint("type","integer",void 0,!0):this.addConstraint("type","number",void 0,!0):new RegExp(a,"i").test("email url range")?this.addConstraint("type",a,void 0,!0):this},_isRequired:function(){return"undefined"==typeof this.constraintsByName.required?!1:!1!==this.constraintsByName.required.requirements},_getConstraintsSortedPriorities:function(){for(var a=[],b=0;b<this.constraints.length;b++)-1===a.indexOf(this.constraints[b].priority)&&a.push(this.constraints[b].priority);return a.sort(function(a,b){return b-a}),a}};var l=function(){this.__class__="ParsleyFieldMultiple"};l.prototype={addElement:function(a){return this.$elements.push(a),this},refreshConstraints:function(){var b;if(this.constraints=[],this.$element.is("select"))return this.actualizeOptions()._bindConstraints(),this;for(var c=0;c<this.$elements.length;c++)if(a("html").has(this.$elements[c]).length){b=this.$elements[c].data("ParsleyFieldMultiple").refreshConstraints().constraints;for(var d=0;d<b.length;d++)this.addConstraint(b[d].name,b[d].requirements,b[d].priority,b[d].isDomConstraint)}else this.$elements.splice(c,1);return this},getValue:function(){if("undefined"!=typeof this.options.value)return this.options.value;if(this.$element.is("input[type=radio]"))return a("["+this.options.namespace+'multiple="'+this.options.multiple+'"]:checked').val()||"";if(this.$element.is("input[type=checkbox]")){var b=[];return a("["+this.options.namespace+'multiple="'+this.options.multiple+'"]:checked').each(function(){b.push(a(this).val())}),b.length?b:[]}return this.$element.is("select")&&null===this.$element.val()?[]:this.$element.val()},_init:function(a){return this.$elements=[this.$element],this.options.multiple=a,this}};var m=a({}),n={};a.listen=function(a){if("undefined"==typeof n[a]&&(n[a]=[]),"function"==typeof arguments[1])return n[a].push({fn:arguments[1]});if("object"==typeof arguments[1]&&"function"==typeof arguments[2])return n[a].push({fn:arguments[2],ctxt:arguments[1]});throw new Error("Wrong parameters")},a.listenTo=function(a,b,c){if("undefined"==typeof n[b]&&(n[b]=[]),!(a instanceof k||a instanceof i))throw new Error("Must give Parsley instance");if("string"!=typeof b||"function"!=typeof c)throw new Error("Wrong parameters");n[b].push({instance:a,fn:c})},a.unsubscribe=function(a,b){if("undefined"!=typeof n[a]){if("string"!=typeof a||"function"!=typeof b)throw new Error("Wrong arguments");for(var c=0;c<n[a].length;c++)if(n[a][c].fn===b)return n[a].splice(c,1)}},a.unsubscribeTo=function(a,b){if("undefined"!=typeof n[b]){if(!(a instanceof k||a instanceof i))throw new Error("Must give Parsley instance");for(var c=0;c<n[b].length;c++)if("undefined"!=typeof n[b][c].instance&&n[b][c].instance.__id__===a.__id__)return n[b].splice(c,1)}},a.unsubscribeAll=function(a){"undefined"!=typeof n[a]&&delete n[a]},a.emit=function(a,b){if("undefined"!=typeof n[a])for(var c=0;c<n[a].length;c++)if("undefined"!=typeof n[a][c].instance){if(b instanceof k||b instanceof i)if(n[a][c].instance.__id__!==b.__id__){if(n[a][c].instance instanceof i&&b instanceof k)for(var d=0;d<n[a][c].instance.fields.length;d++)if(n[a][c].instance.fields[d].__id__===b.__id__){n[a][c].fn.apply(m,Array.prototype.slice.call(arguments,1));continue}}else n[a][c].fn.apply(m,Array.prototype.slice.call(arguments,1))}else n[a][c].fn.apply("undefined"!=typeof n[a][c].ctxt?n[a][c].ctxt:m,Array.prototype.slice.call(arguments,1))},a.subscribed=function(){return n},window.ParsleyConfig=window.ParsleyConfig||{},window.ParsleyConfig.i18n=window.ParsleyConfig.i18n||{},window.ParsleyConfig.i18n.en=a.extend(window.ParsleyConfig.i18n.en||{},{defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",number:"This value should be a valid number.",integer:"This value should be a valid integer.",digits:"This value should be digits.",alphanum:"This value should be alphanumeric."},notblank:"This value should not be blank.",required:"This value is required.",pattern:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or fewer.",length:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or fewer.",check:"You must select between %s and %s choices.",equalto:"This value should be the same."}),"undefined"!=typeof window.ParsleyValidator&&window.ParsleyValidator.addCatalog("en",window.ParsleyConfig.i18n.en,!0);var o=function(c,d,e){if(this.__class__="Parsley",this.__version__="2.0.6",this.__id__=b.hash(4),"undefined"==typeof c)throw new Error("You must give an element");if("undefined"!=typeof e&&"ParsleyForm"!==e.__class__)throw new Error("Parent instance must be a ParsleyForm instance");return this.init(a(c),d,e)};o.prototype={init:function(a,d,e){if(!a.length)throw new Error("You must bind Parsley on an existing element.");if(this.$element=a,this.$element.data("Parsley")){var f=this.$element.data("Parsley");return"undefined"!=typeof e&&(f.parent=e),f}return this.OptionsFactory=new h(c,b.get(window,"ParsleyConfig")||{},d,this.getNamespace(d)),this.options=this.OptionsFactory.get(this),this.$element.is("form")||b.attr(this.$element,this.options.namespace,"validate")&&!this.$element.is(this.options.inputs)?this.bind("parsleyForm"):this.$element.is(this.options.inputs)&&!this.$element.is(this.options.excluded)?this.isMultiple()?this.handleMultiple(e):this.bind("parsleyField",e):this},isMultiple:function(){return this.$element.is("input[type=radio], input[type=checkbox]")&&"undefined"==typeof this.options.multiple||this.$element.is("select")&&"undefined"!=typeof this.$element.attr("multiple")},handleMultiple:function(c){var d,e,f,g=this;if(this.options=a.extend(this.options,c?c.OptionsFactory.get(c):{},b.attr(this.$element,this.options.namespace)),this.options.multiple?e=this.options.multiple:"undefined"!=typeof this.$element.attr("name")&&this.$element.attr("name").length?e=d=this.$element.attr("name"):"undefined"!=typeof this.$element.attr("id")&&this.$element.attr("id").length&&(e=this.$element.attr("id")),this.$element.is("select")&&"undefined"!=typeof this.$element.attr("multiple"))return this.bind("parsleyFieldMultiple",c,e||this.__id__);if("undefined"==typeof e)return window.console&&window.console.warn&&window.console.warn("To be binded by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.",this.$element),this;if(e=e.replace(/(:|\.|\[|\]|\{|\}|\$)/g,""),"undefined"!=typeof d&&a('input[name="'+d+'"]').each(function(){a(this).is("input[type=radio], input[type=checkbox]")&&a(this).attr(g.options.namespace+"multiple",e)}),a("["+this.options.namespace+"multiple="+e+"]").length)for(var h=0;h<a("["+this.options.namespace+"multiple="+e+"]").length;h++)if("undefined"!=typeof a(a("["+this.options.namespace+"multiple="+e+"]").get(h)).data("Parsley")){f=a(a("["+this.options.namespace+"multiple="+e+"]").get(h)).data("Parsley"),this.$element.data("ParsleyFieldMultiple")||(f.addElement(this.$element),this.$element.attr(this.options.namespace+"id",f.__id__));break}return this.bind("parsleyField",c,e,!0),f||this.bind("parsleyFieldMultiple",c,e)},getNamespace:function(a){return"undefined"!=typeof this.$element.data("parsleyNamespace")?this.$element.data("parsleyNamespace"):"undefined"!=typeof b.get(a,"namespace")?a.namespace:"undefined"!=typeof b.get(window,"ParsleyConfig.namespace")?window.ParsleyConfig.namespace:c.namespace},bind:function(c,e,f,g){var h;switch(c){case"parsleyForm":h=a.extend(new i(this.$element,this.OptionsFactory),new d,window.ParsleyExtend)._bindFields();break;case"parsleyField":h=a.extend(new k(this.$element,this.OptionsFactory,e),new d,window.ParsleyExtend);break;case"parsleyFieldMultiple":h=a.extend(new k(this.$element,this.OptionsFactory,e),new d,new l,window.ParsleyExtend)._init(f);break;default:throw new Error(c+"is not a supported Parsley type")}return"undefined"!=typeof f&&b.setAttr(this.$element,this.options.namespace,"multiple",f),"undefined"!=typeof g?(this.$element.data("ParsleyFieldMultiple",h),h):(new RegExp("ParsleyF","i").test(h.__class__)&&(this.$element.data("Parsley",h),a.emit("parsley:"+("parsleyForm"===c?"form":"field")+":init",h)),h)}},a.fn.parsley=a.fn.psly=function(b){if(this.length>1){var c=[];return this.each(function(){c.push(a(this).parsley(b))}),c}return a(this).length?new o(this,b):void(window.console&&window.console.warn&&window.console.warn("You must bind Parsley on an existing element."))},window.ParsleyUI="function"==typeof b.get(window,"ParsleyConfig.ParsleyUI")?(new window.ParsleyConfig.ParsleyUI).listen():(new g).listen(),"undefined"==typeof window.ParsleyExtend&&(window.ParsleyExtend={}),"undefined"==typeof window.ParsleyConfig&&(window.ParsleyConfig={}),window.Parsley=window.psly=o,window.ParsleyUtils=b,window.ParsleyValidator=new f(window.ParsleyConfig.validators,window.ParsleyConfig.i18n),!1!==b.get(window,"ParsleyConfig.autoBind")&&a(function(){a("[data-parsley-validate]").length&&a("[data-parsley-validate]").parsley()})}),window.ParsleyConfig=window.ParsleyConfig||{},window.ParsleyConfig.i18n=window.ParsleyConfig.i18n||{},window.ParsleyConfig.i18n.zh_cn=$.extend(window.ParsleyConfig.i18n.zh_cn||{},{defaultMessage:"不正确的值",type:{email:"请输入一个有效的电子邮箱地址",url:"请输入一个有效的链接",number:"请输入正确的数字",integer:"请输入正确的整数",digits:"请输入正确的号码",alphanum:"请输入字母或数字"},notblank:"请输入值",required:"必填项",pattern:"格式不正确",min:"输入值请大于或等于 %s",max:"输入值请小于或等于 %s",range:"输入值应该在 %s 到 %s 之间",minlength:"请输入至少 %s 个字符",maxlength:"请输入至多 %s 个字符",length:"字符长度应该在 %s 到 %s 之间",mincheck:"请至少选择 %s 个选项",maxcheck:"请选择不超过 %s 个选项",check:"请选择 %s 到 %s 个选项",equalto:"输入值不同"}),"undefined"!=typeof window.ParsleyValidator&&window.ParsleyValidator.addCatalog("zh_cn",window.ParsleyConfig.i18n.zh_cn,!0),define("parsleyjssc",["parsleyjs"],function(){}),window.ParsleyConfig=window.ParsleyConfig||{},window.ParsleyConfig.i18n=window.ParsleyConfig.i18n||{},window.ParsleyConfig.i18n.ko=$.extend(window.ParsleyConfig.i18n.ko||{},{defaultMessage:"입력하신 내용이 올바르지 않습니다.",type:{email:"입력하신 이메일이 유효하지 않습니다.",url:"입력하신 URL이 유효하지 않습니다.",number:"입력하신 전화번호가 올바르지 않습니다.",integer:"입력하신 URL이 유효하지 않습니다.",digits:"숫자를 입력하여 주십시오.",alphanum:"입력하신 내용은 알파벳과 숫자의 조합이어야 합니다."},notblank:"공백은 입력하실 수 없습니다.",required:"필수 입력사항입니다.",pattern:"입력하신 내용이 올바르지 않습니다.",min:"입력하신 내용이 %s보다 크거나 같아야 합니다. ",max:"입력하신 내용이 %s보다 작거나 같아야 합니다.",range:"입력하신 내용이 %s보다 크고 %s 보다 작아야 합니다.",minlength:"%s 이상의 글자수를 입력하십시오. ",maxlength:"%s 이하의 글자수를 입력하십시오. ",length:"입력하신 내용의 글자수가 %s보다 크고 %s보다 작아야 합니다.",mincheck:"최소한 %s개를 선택하여 주십시오. ",maxcheck:"%s개 또는 그보다 적게 선택하여 주십시오.",check:"선택하신 내용이 %s보다 크거나 %s보다 작아야 합니다.",equalto:"같은 값을 입력하여 주십시오."}),"undefined"!=typeof window.ParsleyValidator&&window.ParsleyValidator.addCatalog("ko",window.ParsleyConfig.i18n.ko,!0),define("parsleyjsko",["parsleyjs"],function(){}),window.ParsleyConfig=window.ParsleyConfig||{},window.ParsleyConfig.i18n=window.ParsleyConfig.i18n||{},window.ParsleyConfig.i18n.ja=$.extend(window.ParsleyConfig.i18n.ja||{},{defaultMessage:"無効な値です。",type:{email:"正しいメールアドレスを入力してください。",url:"正しいURLを入力してください。",number:"正しい数字を入力してください。",integer:"正しい数値を入力してください。",digits:"正しい桁数で入力してください。",alphanum:"正しい英数字を入力してください。"},notblank:"この値を入力してください",required:"この値は必須です。",pattern:"この値は無効です。",min:"%s 以上の値にしてください。",max:"%s 以下の値にしてください。",range:"%s から %s の値にしてください。",minlength:"%s 文字以上で入力してください。",maxlength:"%s 文字以下で入力してください。",length:"%s から %s 文字の間で入力してください。",mincheck:"%s 個以上選択してください。",maxcheck:"%s 個以下選択してください。",check:"%s から %s 個選択してください。",equalto:"値が違います。"}),"undefined"!=typeof window.ParsleyValidator&&window.ParsleyValidator.addCatalog("ja",window.ParsleyConfig.i18n.ja,!0),define("parsleyjsja",["parsleyjs"],function(){}),window.ParsleyConfig=window.ParsleyConfig||{},window.ParsleyConfig.i18n=window.ParsleyConfig.i18n||{},window.ParsleyConfig.i18n.th=$.extend(window.ParsleyConfig.i18n.th||{},{defaultMessage:"ค่านี้ดูเหมือนว่าจะไม่ถูกต้อง",type:{email:"ค่านี้ควรจะเป็นอีเมลที่ถูกต้อง",url:"ค่านี้ควรจะเป็น url ที่ถูกต้อง",number:"ค่านี้ควรจะเป็นตัวเลขที่ถูกต้อง",integer:"ค่านี้ควรจะเป็นจำนวนเต็มที่ถูกต้อง",digits:"ค่านี้ควรเป็นทศนิยมที่ถูกต้อง",alphanum:"ค่านี้ควรเป็นอักขระตัวอักษรหรือตัวเลขที่ถูกต้อง"},notblank:"ค่านี้ไม่ควรจะว่าง",required:"ค่านี้จำเป็น",pattern:"ค่านี้ดูเหมือนว่าจะไม่ถูกต้อง",min:"ค่านี้ควรมากกว่าหรือเท่ากับ %s.",max:"ค่านี้ควรจะน้อยกว่าหรือเท่ากับ %s.",range:"ค่ายี้ควรจะอยู่ระหว่าง %s และ %s.",minlength:"ค่านี้สั้นเกินไป ควรจะมี %s อักขระหรือมากกว่า",maxlength:"ค่านี้ยาวเกินไป ควรจะมี %s อักขระหรือน้อยกว่า",length:"ความยาวของค่านี้ไม่ถูกต้อง ควรมีความยาวอยู่ระหว่าง %s และ %s อักขระ",mincheck:"คุณควรเลือกอย่างน้อย %s ตัวเลือก",maxcheck:"คุณควรเลือก %s ตัวเลือกหรือน้อยกว่า",check:"คุณควรเลือกระหว่าง %s และ %s ตัวเลือก",equalto:"ค่านี้ควรจะเหมือนกัน"}),"undefined"!=typeof window.ParsleyValidator&&window.ParsleyValidator.addCatalog("th",window.ParsleyConfig.i18n.th,!0),define("parsleyjsth",["parsleyjs"],function(){}),define("initialSetups",["underscore.string","helper","moment","jquery","jquery-ui","jquery-placeholder","momenttc","momentko","momentja","momentru","momentvn","momentth","momentde","momentfr","momentcn","parsleyjssc","parsleyjsko","parsleyjsja","parsleyjsth"],function(a,b,c,d){function e(){var a=window.location.pathname;return a.indexOf("waybill")>0?"th"==b.getSiteLanguage()||"vi"==b.getSiteLanguage()?"en":b.getSiteLanguage():a.indexOf("rate")>0?b.getSiteLanguage():"ko"==b.getSiteLanguage()||"ja"==b.getSiteLanguage()||"ru"==b.getSiteLanguage()||"vi"==b.getSiteLanguage()||"th"==b.getSiteLanguage()?"en":b.getSiteLanguage()}function f(){return d(this).hasClass("disabled")?!1:void 0}function g(a){a.hasClass("disabled")&&!a.data("binded-click")&&(a.on("click",f),a.data("binded-click",!0))}function h(a){a.data("binded-enter")||(a.on("keyup",function(a){return 13===a.keyCode?(a.stopPropagation(),!1):void 0}),a.data("binded-enter",!0))}window.ORDER_SYMBOLS="abcdefghigklmnopqrstuvwxyz",window.cache={},window.console||(window.console={log:function(){}});var i=_.indexOf;_.indexOf=function(a,b,c){return"string"==typeof a?a.indexOf(b):i(a,b,c)},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/gm,"")}),d("input, textarea").placeholder(),String.prototype.commaReplace=function(){return this.replace(/\uFF0C/g,",")},_.str=a,_.mixin(_.str.exports());var j=d(".ie8").length,k=d(".ie9").length,l=j||k;d.ajaxSetup({data:{lang:e(),region:b.getSiteLocation(),translate:"hk"!=b.getSiteLocation()&&"tw"!=b.getSiteLocation()||"tc"!==b.getSiteLanguage()?"":"tc"},cache:!l}),window._l=function(a,b){var c=window._ejsLabel;return c&&c[a]?c[a]:b?b:a},window._p=_.sprintf,window.Helper=b;var m=d("#cnnic-link");if(m){var n=m.attr("href"),o="000000"+Math.round(1e6*Math.random());o=o.substr(o.length-6),m.attr("href",_p(n,o))}d(window).on("beforeunload",function(){d(".detail-location-input input").each(function(){this.value=""})}),c.lang(b.getStandardLocale()),d(window.document).on("mouseup","button",function(){g(d(this))}),d(window.document).on("keydown","form",function(a){13===a.keyCode&&(g(d(this).find("button")),h(d(a.currentTarget)))})}),define("models/detailRegion",["backbone"],function(a){return a.Model.extend({})}),define("collections/detailRegions",["backbone","models/detailRegion","helper"],function(a,b,c){var d="A000810000",e="A000820000",f="A000710000",g="A000086000",h="852",i="853",j="886";return a.Collection.extend({model:b,initialize:function(a){this.customURL=a.customURL},relativeURLOnRegion:function(a){return"POPULAR"===a.code?"region/popularRegions":"HKMCTW"===a.code||"GLOBAL"===a.code?this.subRegionURL("A000000000",-1):this.subRegionURL(a.code,a.level)},subRegionURL:function(a,b){var c=this.customURL()||"region/%s/subRegions?level=%s";return $(".range-page").length>0&&"international"===$(".range-page .detail-location-picker li.current").data("tab")&&(c="region/%s/subRegions/origins?level=%s"),$(".range-page").length>0&&"hk-mc-tw"===$(".range-page .detail-location-picker li.current").data("tab")&&(c="region/%s/subRegions?level=%s"),null==b&&(b=-1),_.sprintf(c,a,b)},parse:function(a){return a=_.filter(a,function(a){return a.name}),_.each(a,function(a){var b=-1!==_.indexOf([d,e,f],a.parentCode);b&&(a.countryCode=a.parentCode),a.name=a.name.replace("印度尼西亚","印尼").replace("印度尼西亞","印尼"),"hk"===c.getSiteLocation()&&("澳大利亚"===a.name||"澳大利亞"===a.name)&&(a.name=a.name.replace("澳大利亚","澳洲").replace("澳大利亞","澳洲")),
a.name=a.name.replace(/( Province)|( City)|( District)|( County)/g,"")}),a},parseHKTWMCAndGlobal:function(a){if("HKMCTW"===a||"GLOBAL"===a){var b="HKMCTW"===a,c=_.filter(this.models,function(a){if(a.get("code")===g)return!1;var c=-1!==_.indexOf([d,e,f],a.get("code"));return b?c:!c});this.set(c)}},fetchRegions:function(a,b){this.fetchingRegionCode=a.code,this.fetchedRegionsBackup=this.fetchedRegionsBackup||{};var d=this.fetchedRegionsBackup[a.code];if(d&&d.relativeURLOnRegion===this.relativeURLOnRegion(a))return this.reset().set(d.data),this.isFetchingData=!1,this.errorLoadingData=!1,b&&b(d.respond,d.status),void this.trigger("dataFetched");this.isFetchingData=!0,this.errorLoadingData=!1;var e=this;this.trigger("dataFetched");var f=this.relativeURLOnRegion(a);this.url=c.getRESTfulDomain(f);var g=a.code;this.fetch({complete:function(a,c){"success"===c&&(e.fetchedRegionsBackup[g]={respond:a,status:c,data:e.toJSON(),relativeURLOnRegion:f}),b&&e.fetchingRegionCode===g&&(e.fetchingRegionCode=null,b(a,c))},success:function(){e.parseHKTWMCAndGlobal(g),e.fetchingRegionCode===g&&(e.isFetchingData=!1,e.errorLoadingData=!1,e.trigger("dataFetched"))},error:function(){e.fetchingRegionCode===a.code&&(e.isFetchingData=!1,e.errorLoadingData=!0,e.trigger("dataFetched"))}})}},{isChinaMainland:function(a){return a===g},isNotAboard:function(a){return a===d||a===e||a===f||a===g},isNotAboardForRate:function(a){return a==h||a==i||a==j}})}),define("models/payFee",["backbone","helper","utils/time","initialSetups","collections/detailRegions"],function(a,b,c,d,e){var f={Package:{Code:"C201",Name:_l("包裹")},Package1:{Code:"C223",Name:_l("包裹")},Package2:{Code:"C224",Name:_l("包裹")},Package3:{Code:"C902",Name:_l("包裹")},File:{Code:"C1",Name:_l("文件")},File1:{Code:"C101",Name:_l("文件")},File2:{Code:"C901",Name:_l("文件")}},g=["A000001000","A000092000","A000063000","A000066000","A000061000","A000007000","A000052000","A000011000","A000095000","A000049000","A000033000","A000043000","A000032000","A000359000","A000385000","A000045000","A000034000","A000372000","A000030000","A000036000","A000353000","A000039000","A000358000","A000371000","A000370000","A000352000","A000031000","A000048000","A000351000","A000420000","A000040000","A000044000","A000421000","A000386000","A000046000","A000356000","A000357000","A000055000","A000673000","A000971000","A000164000","A000062000","A000091000","A000855000","A000880000","A000094000","A000056000"],h=["#EF7D00","#E30413","#FFED00","#009440"],i=a.Model.extend({defaults:{link:"#",isPromotion:!1},notContainIntro:function(){var a=this.get("intro");return!a||0===a.length||1===a.length&&""===a[0]}},{parse:function(a,b,c){return this.replaceCurrencyName(a),this.appendAddtionalPayFee(a,b,c),this.appendShouldShowCargoType(a,b,c),this.roundPayFeeWeight(a),this.deliverDate(a),this.setColor(a),this.filterPrice(a,c),this.mergeRemoteDataWithOpenCMS(a)},updateLimitTypeName:function(a){"T4"!=a.limitTypeCode||"3"!==a.destView&&"3"!==a.orgionView||("sc"===b.getSiteLanguage()?a.limitTypeName="国际标快":"tc"===b.getSiteLanguage()?a.limitTypeName="國際標快":"ja"===b.getSiteLanguage()?a.limitTypeName="SFスタンダードエクスプレス":a.limitTypeName="SF Standard Express(International)")},deliverDate:function(a){return a.deliverTime&&!a.internet&&(a.deliverDate=c.relativeDate(moment(a.deliverTime)),a.deliverMomentTime=moment(a.deliverTime).format("HH:mm")),this},setColor:function(a){return a.limitTypeCode&&(a.serTextColor="white","T104"==a.limitTypeCode?a.serviceColor=h[0]:"T801"==a.limitTypeCode?a.serviceColor=h[1]:"T4"==a.limitTypeCode?(a.serviceColor=h[2],a.serTextColor="black"):"T6"==a.limitTypeCode&&(a.serviceColor=h[3])),this},roundPayFeeWeight:function(a){a.weight=Math.max(a.weight,.1)},additionalPayFeeAvailableAtLocation:function(a,b,c){var d=_.indexOf(a.originLocations.split(","),b)>=0,e=_.indexOf(a.destsLocations.split(","),c)>=0;return a.bothRequired?d&&e:d||e},appendAddtionalPayFee:function(a,b,c){var d=this;a.additionalPayFees=_.filter(window.additionalServiceList,function(e){return d.additionalPayFeeAvailableAtLocation(e,b,c)?"overdue-refund"===e.code?-1!==_.indexOf(e.availableService,a.limitTypeCode)?!0:!1:"earlier-shipping-lower-price"===e.code&&0!=a.regionFreight?!0:!1:!1})},mergeRemoteDataWithOpenCMS:function(a){var b=_.filter(window.serviceList,function(b){return b.limitTypeCode==a.limitTypeCode});return void 0!=b&&b.length>1&&(b=_.filter(b,function(b){return b.limitTypeName==a.limitTypeName})),_.extend(a,0==b.length?{}:b[0])},replaceCargoTypeName:function(a){return(a.cargoTypeCode===f.Package.Code||a.cargoTypeCode===f.Package1.Code||a.cargoTypeCode===f.Package2.Code||a.cargoTypeCode===f.Package3.Code)&&(a.cargoTypeName=f.Package.Name),(a.cargoTypeCode===f.File.Code||a.cargoTypeCode===f.File1.Code||a.cargoTypeCode===f.File2.Code)&&(a.cargoTypeName=f.File.Name),this},replaceCurrencyName:function(a){return"人民币"===a.currencyName?(a.currencyName="",a.freight=Number(a.freight+a.fuelCost)+"元",a.totalFreight=a.totalFreight+"元"):a.freight=Number(a.freight+a.fuelCost),"人民币"===a.destCurrencyName?(a.destCurrencyName="",a.destFreight=Number(a.destFreight+a.destFuelCost)+"元"):a.destFreight=Number(a.destFreight+a.destFuelCost),this},appendShouldShowCargoType:function(a,b,c){return a.shouldShowCargoType=this.shouldShowCargoType(a,b,c),this},filterPrice:function(a,b){return-1!==_.indexOf(g,b)&&(a.destFreight="",a.destCurrencyName=_l("暂未开通")),this},shouldShowCargoType:function(a,b,c){var d=e.isChinaMainland(b),f=e.isNotAboard(c);return!(d&&f)}});return i.CargoType=f,i}),define("collections/payFee",["backbone","underscore","event","helper","models/payFee"],function(a,b,c,d,e){var f="R10202",g=1,h=0,i=a.Collection.extend({model:e,comparator:"order",url:function(){var a="origin="+this.originCode+"&dest="+this.destCode+"&parentOrigin="+this.originCode+"&parentDest="+this.destCode+"&weight="+this.weight+"&time="+encodeURIComponent(this.time)+"&volume="+this.volume;return b.isBlank(this.queryType)||0==this.queryType||(a+="&queryType="+this.queryType),d.getRESTfulDomain("rate/newRates?"+a)},initialize:function(a){this.initialPayFees=b(a),this.listenTo(c,c.RateSearch,this.rateSearch)},shouldShowCargoType:function(){var a=this.findWhere({cargoTypeCode:e.CargoType.Package.Code}),b=this.findWhere({cargoTypeCode:e.CargoType.File.Code}),c=this.findWhere({cargoTypeCode:e.CargoType.Package3.Code}),d=this.findWhere({cargoTypeCode:e.CargoType.File2.Code}),f=this.findWhere({cargoTypeCode:e.CargoType.Package1.Code}),g=this.findWhere({cargoTypeCode:e.CargoType.File1.Code});return Boolean(a&&b)||Boolean(f&&g)||Boolean(c&&d)},withoutOutskirts:function(){return this.filter(function(a){return a.get("distanceTypeCode")!==f})},withOutskirts:function(){return this.where({distanceTypeCode:f})},withPromotion:function(){return this.filter(function(a){return a.has("promotionMessage")&&""!==a.get("promotionMessage")})},isChinaRegion:function(a){return"A000086000"===a||"A000820000"===a||"A000810000"===a||"A000710000"===a?!0:!1},rateSearch:function(a){if(this.originCountryCode=a.originCountryCode||this.originCountryCode,this.destsCountryCode=a.destsCountryCode||this.destsCountryCode,this.originCode=a.originCode?a.originCode:this.originCode,this.destCode=a.destCode?a.destCode:this.destCode,this.time=a.time?a.time:b.isBlank(this.time)?moment(new Date).format():this.time,this.queryType=a.queryType?a.queryType:this.queryType,this.flag=a.flag?a.flag:!1,this.originCode&&this.destCode&&this.time){g=this.isChinaRegion(this.originCountryCode)&&this.isChinaRegion(this.destsCountryCode)?"1.0":"0.5";var c=$("input.weight").val();this.flag?this.weight=""!=c&&void 0!=c?c:g:this.weight=isNaN(Number(a.weight))?g:Number(a.weight),this.volume=a.height&&a.length&&a.width?a.height*a.length*a.width:h,this.checkCondition(a);var d=this;this.fetch({beforeSend:function(){return void 0==d.checkResult||d.checkResult.canSearch?void 0:(d.trigger("outOfRange"),!1)},error:function(a,b){d.trigger("showDefault"),404===b.status?d.trigger("notFound"):d.trigger("networkErorr")}})}},parse:function(a){var c=this;return a=b.map(a,function(a){return e.parse(a,c.originCountryCode,c.destsCountryCode)}),this.uniqueSevices(a)},uniqueSevices:function(a){return b.uniq(a,function(a){return a.cargoTypeCode+a.limitTypeCode+a.distanceTypeCode})},availableAdditionalServices:function(){return b.chain(this.pluck("additionalPayFees")).flatten().union().compact().value()},checkCondition:function(a){var b=new Object;if(b.canSearch=!0,b.errs=[],"A"==a.destCode.substr(0,1)||"A"==a.originCode.substr(0,1))return void(this.checkResult=b);var c=isNaN(Number(a.weight))?1:Number(a.weight),d=isNaN(Number(a.height))?0:Number(a.height),e=isNaN(Number(a.width))?0:Number(a.width),f=isNaN(Number(a.length))?0:Number(a.length);c>80&&(b.canSearch=!1,b.errs.push("0")),f+e+d>300&&(b.canSearch=!1,b.errs.push("1")),300>=f+e+d&&(f>160||e>160||d>160)&&80>=c&&b.errs.push("2"),this.checkResult=b}},{setupOrderSymbol:function(a){b.each(a,function(a,b){a.set("orderSymbol",window.ORDER_SYMBOLS[b])})}});return i}),function(a,b){function c(){return new Date(Date.UTC.apply(Date,arguments))}function d(){var a=new Date;return c(a.getFullYear(),a.getMonth(),a.getDate())}function e(a){return function(){return this[a].apply(this,arguments)}}function f(b,c){function d(a,b){return b.toLowerCase()}var e,f=a(b).data(),g={},h=new RegExp("^"+c.toLowerCase()+"([A-Z])");c=new RegExp("^"+c.toLowerCase());for(var i in f)c.test(i)&&(e=i.replace(h,d),g[e]=f[i]);return g}function g(b){var c={};if(o[b]||(b=b.split("-")[0],o[b])){var d=o[b];return a.each(n,function(a,b){b in d&&(c[b]=d[b])}),c}}var h=a(window),i=function(){var b={get:function(a){return this.slice(a)[0]},contains:function(a){for(var b=a&&a.valueOf(),c=0,d=this.length;d>c;c++)if(this[c].valueOf()===b)return c;return-1},remove:function(a){this.splice(a,1)},replace:function(b){b&&(a.isArray(b)||(b=[b]),this.clear(),this.push.apply(this,b))},clear:function(){this.length=0},copy:function(){var a=new i;return a.replace(this),a}};return function(){var c=[];return c.push.apply(c,arguments),a.extend(c,b),c}}(),j=function(b,c){this.dates=new i,this.viewDate=d(),this.focusDate=null,this._process_options(c),this.element=a(b),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=a(p.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(a,b){return parseInt(b)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};j.prototype={constructor:j,_process_options:function(b){this._o=a.extend({},this._o,b);var c=this.o=a.extend({},this._o),d=c.language;switch(o[d]||(d=d.split("-")[0],o[d]||(d=m.language)),c.language=d,c.startView){case 2:case"decade":c.startView=2;break;case 1:case"year":c.startView=1;break;default:c.startView=0}switch(c.minViewMode){case 1:case"months":c.minViewMode=1;break;case 2:case"years":c.minViewMode=2;break;default:c.minViewMode=0}c.startView=Math.max(c.startView,c.minViewMode),c.multidate!==!0&&(c.multidate=Number(c.multidate)||!1,c.multidate!==!1&&(c.multidate=Math.max(0,c.multidate))),c.multidateSeparator=String(c.multidateSeparator),c.weekStart%=7,c.weekEnd=(c.weekStart+6)%7;var e=p.parseFormat(c.format);c.startDate!==-(1/0)&&(c.startDate?c.startDate instanceof Date?c.startDate=this._local_to_utc(this._zero_time(c.startDate)):c.startDate=p.parseDate(c.startDate,e,c.language):c.startDate=-(1/0)),c.endDate!==1/0&&(c.endDate?c.endDate instanceof Date?c.endDate=this._local_to_utc(this._zero_time(c.endDate)):c.endDate=p.parseDate(c.endDate,e,c.language):c.endDate=1/0),c.daysOfWeekDisabled=c.daysOfWeekDisabled||[],a.isArray(c.daysOfWeekDisabled)||(c.daysOfWeekDisabled=c.daysOfWeekDisabled.split(/[,\s]*/)),c.daysOfWeekDisabled=a.map(c.daysOfWeekDisabled,function(a){return parseInt(a,10)});var f=String(c.orientation).toLowerCase().split(/\s+/g),g=c.orientation.toLowerCase();if(f=a.grep(f,function(a){return/^auto|left|right|top|bottom$/.test(a)}),c.orientation={x:"auto",y:"auto"},g&&"auto"!==g)if(1===f.length)switch(f[0]){case"top":case"bottom":c.orientation.y=f[0];break;case"left":case"right":c.orientation.x=f[0]}else g=a.grep(f,function(a){return/^left|right$/.test(a)}),c.orientation.x=g[0]||"auto",g=a.grep(f,function(a){return/^top|bottom$/.test(a)}),c.orientation.y=g[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var c,d,e,f=0;f<a.length;f++)c=a[f][0],2===a[f].length?(d=b,e=a[f][1]):3===a[f].length&&(d=a[f][1],e=a[f][2]),c.on(e,d)},_unapplyEvents:function(a){for(var c,d,e,f=0;f<a.length;f++)c=a[f][0],2===a[f].length?(e=b,d=a[f][1]):3===a[f].length&&(e=a[f][1],d=a[f][2]),c.off(d,e)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(function(b){-1===a.inArray(b.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(function(b){-1===a.inArray(b.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:a.proxy(function(a){this._focused_from=a.target},this)}],[this.element,{blur:a.proxy(function(a){this._focused_from=a.target},this)}]),this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{"mousedown touchstart":a.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).length||this.picker.is(a.target)||this.picker.find(a.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(b,c){var d=c||this.dates.get(-1),e=this._utc_to_local(d);this.element.trigger({type:b,date:e,dates:a.map(this.dates,this._utc_to_local),format:a.proxy(function(a,b){0===arguments.length?(a=this.dates.length-1,b=this.o.format):"string"==typeof a&&(b=a,a=this.dates.length-1),b=b||this.o.format;var c=this.dates.get(a);return p.formatDate(c,b,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(a){return a&&new Date(a.getTime()+6e4*a.getTimezoneOffset())},_local_to_utc:function(a){return a&&new Date(a.getTime()-6e4*a.getTimezoneOffset())},_zero_time:function(a){return a&&new Date(a.getFullYear(),a.getMonth(),a.getDate())},_zero_utc_time:function(a){return a&&new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()))},getDates:function(){return a.map(this.dates,this._utc_to_local)},getUTCDates:function(){return a.map(this.dates,function(a){return new Date(a)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,b),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,a.map(b,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:e("setDates"),setUTCDate:e("setUTCDates"),setValue:function(){var a=this.getFormattedDate();this.isInput?this.element.val(a).change():this.component&&this.element.find("input").val(a).change()},getFormattedDate:function(c){c===b&&(c=this.o.format);var d=this.o.language;return a.map(this.dates,function(a){return p.formatDate(a,c,d)}).join(this.o.multidateSeparator)},setStartDate:function(a){this._process_options({startDate:a}),this.update(),this.updateNavArrows()},setEndDate:function(a){this._process_options({endDate:a}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(a){this._process_options({daysOfWeekDisabled:a}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var b=this.picker.outerWidth(),c=this.picker.outerHeight(),d=10,e=h.width(),f=h.height(),g=h.scrollTop(),i=parseInt(this.element.parents().filter(function(){return"auto"!==a(this).css("z-index")}).first().css("z-index"))+10,j=this.component?this.component.parent().offset():this.element.offset(),k=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),l=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),m=j.left,n=j.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(m-=b-l)):(this.picker.addClass("datepicker-orient-left"),j.left<0?m-=j.left-d:j.left+b>e&&(m=e-b-d));var o,p,q=this.o.orientation.y;"auto"===q&&(o=-g+j.top-c,p=g+f-(j.top+k+c),q=Math.max(o,p)===p?"top":"bottom"),this.picker.addClass("datepicker-orient-"+q),"top"===q?n+=k:n-=c+parseInt(this.picker.css("padding-top")),this.picker.css({top:n,left:m,zIndex:i})}},_allow_update:!0,update:function(){if(this._allow_update){var b=this.dates.copy(),c=[],d=!1;arguments.length?(a.each(arguments,a.proxy(function(a,b){b instanceof Date&&(b=this._local_to_utc(b)),c.push(b)},this)),d=!0):(c=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),c=c&&this.o.multidate?c.split(this.o.multidateSeparator):[c],delete this.element.data().date),c=a.map(c,a.proxy(function(a){return p.parseDate(a,this.o.format,this.o.language)},this)),c=a.grep(c,a.proxy(function(a){return a<this.o.startDate||a>this.o.endDate||!a},this),!0),this.dates.replace(c),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),d?this.setValue():c.length&&String(b)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&b.length&&this._trigger("clearDate"),this.fill()}},fillDow:function(){var a=this.o.weekStart,b="<tr>";if(this.o.calendarWeeks){var c='<th class="cw">&nbsp;</th>';b+=c,this.picker.find(".datepicker-days thead tr:first-child").prepend(c)}for(;a<this.o.weekStart+7;)b+='<th class="dow">'+o[this.o.language].daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+o[this.o.language].monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").html(a)},setRange:function(b){b&&b.length?this.range=a.map(b,function(a){return a.valueOf()}):delete this.range,this.fill()},getClassNames:function(b){var c=[],d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),f=new Date;return b.getUTCFullYear()<d||b.getUTCFullYear()===d&&b.getUTCMonth()<e?c.push("old"):(b.getUTCFullYear()>d||b.getUTCFullYear()===d&&b.getUTCMonth()>e)&&c.push("new"),this.focusDate&&b.valueOf()===this.focusDate.valueOf()&&c.push("focused"),this.o.todayHighlight&&b.getUTCFullYear()===f.getFullYear()&&b.getUTCMonth()===f.getMonth()&&b.getUTCDate()===f.getDate()&&c.push("today"),-1!==this.dates.contains(b)&&c.push("active"),(b.valueOf()<this.o.startDate||b.valueOf()>this.o.endDate||-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled))&&c.push("disabled"),this.range&&(b>this.range[0]&&b<this.range[this.range.length-1]&&c.push("range"),-1!==a.inArray(b.valueOf(),this.range)&&c.push("selected")),c},fill:function(){var d,e=new Date(this.viewDate),f=e.getUTCFullYear(),g=e.getUTCMonth(),h=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),i=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),j=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,k=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,l=o[this.o.language].today||o.en.today||"",m=o[this.o.language].clear||o.en.clear||"";this.picker.find(".datepicker-days thead th.datepicker-switch").text(o[this.o.language].months[g]+" "+f),this.picker.find("tfoot th.today").text(l).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(m).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var n=c(f,g-1,28),q=p.getDaysInMonth(n.getUTCFullYear(),n.getUTCMonth());n.setUTCDate(q),n.setUTCDate(q-(n.getUTCDay()-this.o.weekStart+7)%7);var r=new Date(n);r.setUTCDate(r.getUTCDate()+42),r=r.valueOf();for(var s,t=[];n.valueOf()<r;){if(n.getUTCDay()===this.o.weekStart&&(t.push("<tr>"),this.o.calendarWeeks)){var u=new Date(+n+(this.o.weekStart-n.getUTCDay()-7)%7*864e5),v=new Date(Number(u)+(11-u.getUTCDay())%7*864e5),w=new Date(Number(w=c(v.getUTCFullYear(),0,1))+(11-w.getUTCDay())%7*864e5),x=(v-w)/864e5/7+1;t.push('<td class="cw">'+x+"</td>")}if(s=this.getClassNames(n),s.push("day"),this.o.beforeShowDay!==a.noop){var y=this.o.beforeShowDay(this._utc_to_local(n));y===b?y={}:"boolean"==typeof y?y={enabled:y}:"string"==typeof y&&(y={classes:y}),y.enabled===!1&&s.push("disabled"),y.classes&&(s=s.concat(y.classes.split(/\s+/))),y.tooltip&&(d=y.tooltip)}s=a.unique(s),t.push('<td class="'+s.join(" ")+'"'+(d?' title="'+d+'"':"")+">"+n.getUTCDate()+"</td>"),n.getUTCDay()===this.o.weekEnd&&t.push("</tr>"),n.setUTCDate(n.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(t.join(""));var z=this.picker.find(".datepicker-months").find("th:eq(1)").text(f).end().find("span").removeClass("active");a.each(this.dates,function(a,b){b.getUTCFullYear()===f&&z.eq(b.getUTCMonth()).addClass("active")}),(h>f||f>j)&&z.addClass("disabled"),f===h&&z.slice(0,i).addClass("disabled"),f===j&&z.slice(k+1).addClass("disabled"),t="",f=10*parseInt(f/10,10);var A=this.picker.find(".datepicker-years").find("th:eq(1)").text(f+"-"+(f+9)).end().find("td");f-=1;for(var B,C=a.map(this.dates,function(a){return a.getUTCFullYear()}),D=-1;11>D;D++)B=["year"],-1===D?B.push("old"):10===D&&B.push("new"),-1!==a.inArray(f,C)&&B.push("active"),(h>f||f>j)&&B.push("disabled"),t+='<span class="'+B.join(" ")+'">'+f+"</span>",f+=1;A.html(t)},updateNavArrows:function(){if(this._allow_update){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&b<=this.o.startDate.getUTCFullYear()&&c<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&b>=this.o.endDate.getUTCFullYear()&&c>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&b<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&b>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(b){b.preventDefault();var d,e,f,g=a(b.target).closest("span, td, th");if(1===g.length)switch(g[0].nodeName.toLowerCase()){case"th":switch(g[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var h=p.modes[this.viewMode].navStep*("prev"===g[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,h),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,h),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var i=new Date;i=c(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0),this.showMode(-2);var j="linked"===this.o.todayBtn?null:"view";this._setDate(i,j);break;case"clear":var k;this.isInput?k=this.element:this.component&&(k=this.element.find("input")),k&&k.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":g.is(".disabled")||(this.viewDate.setUTCDate(1),g.is(".month")?(f=1,e=g.parent().find("span").index(g),d=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(e),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(c(d,e,f))):(f=1,e=0,d=parseInt(g.text(),10)||0,this.viewDate.setUTCFullYear(d),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(c(d,e,f))),this.showMode(-1),this.fill());break;case"td":g.is(".day")&&!g.is(".disabled")&&(f=parseInt(g.text(),10)||1,d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),g.is(".old")?0===e?(e=11,d-=1):e-=1:g.is(".new")&&(11===e?(e=0,d+=1):e+=1),this._setDate(c(d,e,f)))}this.picker.is(":visible")&&this._focused_from&&a(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(a){var b=this.dates.contains(a);if(a){if(this.o.multidate===!1)this.dates.clear(),this.dates.push(a);else if(-1!==b?this.dates.remove(b):this.dates.push(a),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)}else this.dates.clear()},_setDate:function(a,b){b&&"date"!==b||this._toggle_multidate(a&&new Date(a)),b&&"view"!==b||(this.viewDate=a&&new Date(a)),this.fill(),this.setValue(),this._trigger("changeDate");var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&c.change(),!this.o.autoclose||b&&"date"!==b||this.hide()},moveMonth:function(a,c){if(!a)return b;if(!c)return a;var d,e,f=new Date(a.valueOf()),g=f.getUTCDate(),h=f.getUTCMonth(),i=Math.abs(c);if(c=c>0?1:-1,1===i)e=-1===c?function(){return f.getUTCMonth()===h}:function(){return f.getUTCMonth()!==d},d=h+c,f.setUTCMonth(d),(0>d||d>11)&&(d=(d+12)%12);else{for(var j=0;i>j;j++)f=this.moveMonth(f,c);d=f.getUTCMonth(),f.setUTCDate(g),e=function(){return d!==f.getUTCMonth()}}for(;e();)f.setUTCDate(--g),f.setUTCMonth(d);return f},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))return void(27===a.keyCode&&this.show());var b,c,e,f=!1,g=this.focusDate||this.viewDate;switch(a.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),a.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;b=37===a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.dates.get(-1)||d(),b),e=this.moveYear(g,b),this._trigger("changeYear",this.viewDate)):a.shiftKey?(c=this.moveMonth(this.dates.get(-1)||d(),b),e=this.moveMonth(g,b),this._trigger("changeMonth",this.viewDate)):(c=new Date(this.dates.get(-1)||d()),c.setUTCDate(c.getUTCDate()+b),e=new Date(g),e.setUTCDate(g.getUTCDate()+b)),this.dateWithinRange(c)&&(this.focusDate=this.viewDate=e,this.setValue(),this.fill(),a.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;b=38===a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.dates.get(-1)||d(),b),e=this.moveYear(g,b),this._trigger("changeYear",this.viewDate)):a.shiftKey?(c=this.moveMonth(this.dates.get(-1)||d(),b),e=this.moveMonth(g,b),this._trigger("changeMonth",this.viewDate)):(c=new Date(this.dates.get(-1)||d()),c.setUTCDate(c.getUTCDate()+7*b),e=new Date(g),e.setUTCDate(g.getUTCDate()+7*b)),this.dateWithinRange(c)&&(this.focusDate=this.viewDate=e,this.setValue(),this.fill(),a.preventDefault());break;case 32:break;case 13:g=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(g),f=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(a.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(f){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var h;this.isInput?h=this.element:this.component&&(h=this.element.find("input")),h&&h.change()}},showMode:function(a){a&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter(".datepicker-"+p.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var k=function(b,c){this.element=a(b),this.inputs=a.map(c.inputs,function(a){return a.jquery?a[0]:a}),delete c.inputs,a(this.inputs).datepicker(c).bind("changeDate",a.proxy(this.dateUpdated,this)),this.pickers=a.map(this.inputs,function(b){return a(b).data("datepicker")}),this.updateDates()};k.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.getUTCDate()}),this.updateRanges()},updateRanges:function(){var b=a.map(this.dates,function(a){return a.valueOf()});a.each(this.pickers,function(a,c){c.setRange(b)})},dateUpdated:function(b){if(!this.updating){this.updating=!0;var c=a(b.target).data("datepicker"),d=c.getUTCDate(),e=a.inArray(b.target,this.inputs),f=this.inputs.length;if(-1!==e){if(a.each(this.pickers,function(a,b){b.getUTCDate()||b.setUTCDate(d)}),d<this.dates[e])for(;e>=0&&d<this.dates[e];)this.pickers[e--].setUTCDate(d);else if(d>this.dates[e])for(;f>e&&d>this.dates[e];)this.pickers[e++].setUTCDate(d);this.updateDates(),delete this.updating}}},remove:function(){a.map(this.pickers,function(a){a.remove()}),delete this.element.data().datepicker}};var l=a.fn.datepicker;a.fn.datepicker=function(c){var d=Array.apply(null,arguments);d.shift();var e;return this.each(function(){var h=a(this),i=h.data("datepicker"),l="object"==typeof c&&c;if(!i){var n=f(this,"date"),o=a.extend({},m,n,l),p=g(o.language),q=a.extend({},m,p,n,l);if(h.is(".input-daterange")||q.inputs){var r={inputs:q.inputs||h.find("input").toArray()};h.data("datepicker",i=new k(this,a.extend(q,r)))}else h.data("datepicker",i=new j(this,q))}return"string"==typeof c&&"function"==typeof i[c]&&(e=i[c].apply(i,d),e!==b)?!1:void 0}),e!==b?e:this};var m=a.fn.datepicker.defaults={autoclose:!1,beforeShowDay:a.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},n=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=j;var o=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],
today:"Today",clear:"Clear"}},p={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,p.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(a){var b=a.replace(this.validParts,"\x00").split("\x00"),c=a.match(this.validParts);if(!b||!b.length||!c||0===c.length)throw new Error("Invalid date format.");return{separators:b,parts:c}},parseDate:function(d,e,f){function g(){var a=this.slice(0,m[k].length),b=m[k].slice(0,a.length);return a===b}if(!d)return b;if(d instanceof Date)return d;"string"==typeof e&&(e=p.parseFormat(e));var h,i,k,l=/([\-+]\d+)([dmwy])/,m=d.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(d)){for(d=new Date,k=0;k<m.length;k++)switch(h=l.exec(m[k]),i=parseInt(h[1]),h[2]){case"d":d.setUTCDate(d.getUTCDate()+i);break;case"m":d=j.prototype.moveMonth.call(j.prototype,d,i);break;case"w":d.setUTCDate(d.getUTCDate()+7*i);break;case"y":d=j.prototype.moveYear.call(j.prototype,d,i)}return c(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),0,0,0)}m=d&&d.match(this.nonpunctuation)||[],d=new Date;var n,q,r={},s=["yyyy","yy","M","MM","m","mm","d","dd"],t={yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2e3+b)},m:function(a,b){if(isNaN(a))return a;for(b-=1;0>b;)b+=12;for(b%=12,a.setUTCMonth(b);a.getUTCMonth()!==b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};t.M=t.MM=t.mm=t.m,t.dd=t.d,d=c(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0);var u=e.parts.slice();if(m.length!==u.length&&(u=a(u).filter(function(b,c){return-1!==a.inArray(c,s)}).toArray()),m.length===u.length){var v;for(k=0,v=u.length;v>k;k++){if(n=parseInt(m[k],10),h=u[k],isNaN(n))switch(h){case"MM":q=a(o[f].months).filter(g),n=a.inArray(q[0],o[f].months)+1;break;case"M":q=a(o[f].monthsShort).filter(g),n=a.inArray(q[0],o[f].monthsShort)+1}r[h]=n}var w,x;for(k=0;k<s.length;k++)x=s[k],x in r&&!isNaN(r[x])&&(w=new Date(d),t[x](w,r[x]),isNaN(w)||(d=w))}return d},formatDate:function(b,c,d){if(!b)return"";"string"==typeof c&&(c=p.parseFormat(c));var e={d:b.getUTCDate(),D:o[d].daysShort[b.getUTCDay()],DD:o[d].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:o[d].monthsShort[b.getUTCMonth()],MM:o[d].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m,b=[];for(var f=a.extend([],c.separators),g=0,h=c.parts.length;h>=g;g++)f.length&&b.push(f.shift()),b.push(e[c.parts[g]]);return b.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};p.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+p.headTemplate+"<tbody></tbody>"+p.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+"</table></div></div>",a.fn.datepicker.DPGlobal=p,a.fn.datepicker.noConflict=function(){return a.fn.datepicker=l,this},a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(b){var c=a(this);c.data("datepicker")||(b.preventDefault(),c.datepicker("show"))}),a(function(){a('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery),define("datepicker",["bootstrap","jquery"],function(a){return function(){var b;return b||a.datepicker}}(this)),function(a){a.fn.datepicker.dates["zh-CN"]={days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["周日","周一","周二","周三","周四","周五","周六","周日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],today:"今天",format:"yyyy年mm月dd日",weekStart:1}}(jQuery),define("datepickercn",["datepicker"],function(a){return function(){var b;return b||a.datepickercn}}(this)),define("utils/datepickerlist",["jquery","moment","utils/time"],function(a,b,c){a.fn.datepickerlist=function(d){function e(){j=[];var a=l.days<0,c=a?-l.days:l.days,d=l.baseMomentDate,e=l.synServerTim?l.synServerTim:void 0;h.html("").addClass("datepicker-list");for(var i=null,k=0;c>k;k++)i=g(b(d).subtract("days",a?-k:k),e),h.append(i),j.push(i);h.on("setDate",function(a,b){f(b)})}function f(c){a.each(j,function(a,d){d.data("date")==b(c).format(l.format)&&d.addClass("selected")})}function g(d,e){var f=a('<p class="datepicker-list__item"/>');return d.format(l.format)===(e?e:b()).format(l.format)&&f.addClass("today"),f.append(a('<span class="name" />').html(c.relativeDate(d,e)),a('<span class="date" />').html(d.format(l.format))).data("date",d.format(l.format)).on("click",function(){h.find(".datepicker-list__item").removeClass("selected"),a(this).addClass("selected"),h.trigger("changeDate",[a(this).data("date")])}),f}var h=a(this),i={format:"YYYY-MM-DD",days:5},j=[],k="object"==typeof d&&d,l=a.extend({},i,k);return e(),h}}),define("views/detailDateTimePicker/picker",["backbone","datepicker","datepickercn","templates","moment","helper","utils/datepickerlist"],function(a,b,c,d,e,f){return a.View.extend({events:{"click input":"toggleLocationPicker","click .input-group-addon":"toggleLocationPicker",toggle:"toggleLocationPicker","click .detail-date-time-picker":"stopPropagation",click:"stopPropagation","click .date-time-tabs li":"toggleDateTime","mousewheel .picker-wrapper":"mouseWheelChangeOnTimes","click .indicator":"scrollPage","click .times li":"timeClicked"},changeTimeToNow:function(){var a=this;$("body").on("click",function(){a.resetNowTimeDescription()})},resetNowTimeDescription:function(){this.selectedMoment.isSame(this.nextHalfHourInTheFuture())&&this.$("input").val(_l("现在"))},initialize:function(){this.$pickerWrapper=$('<div class="detail-date-time-picker toggle-plugins"></div>'),this.$el.append(this.$pickerWrapper),this.showTimePicker=!0,this.synServerTim=this.options&&this.options.synServerTim?this.options.synServerTim:e(),this.selectedMoment=this.nextHalfHourInTheFuture(),this.$("input").data("time",this.selectedMoment.format()),this.render(),this.changeTimeToNow()},stopPropagation:function(a){a.stopPropagation()},showPicker:function(){$(".toggle-plugins").hide(),this.$pickerWrapper.show(),this.selectedTimeChanged(),this.render()},toggleLocationPicker:function(a){this.$pickerWrapper.is(":visible")?(this.$pickerWrapper.hide(),this.resetNowTimeDescription()):(a&&a.stopPropagation(),this.showPicker())},nextHalfHourInTheFuture:function(){var a=this.synServerTim.clone().startOf("hour").add("minutes",30);return a.isBefore(this.synServerTim)&&a.add("minutes",30),a},selectedTimeChanged:function(){var a=this.$("input");""!=this.selectedMoment&&this.selectedMoment.isSame(this.synServerTim,"day")&&0==this.selectedMoment.hour()&&0==this.selectedMoment.minutes()?(a.val(_l("现在")),a.data("time","")):(a.val(this.selectedMoment.format("YYYY-MM-DD HH: mm")).trigger("change"),a.data("time",this.selectedMoment.format()))},render:function(){this.showTimePicker?(this.preRenderTimePicker(),this.$pickerWrapper.html(d.detailedDateTimePicker({showTimePicker:this.showTimePicker,times:this.times,selectedTime:this.selectedMoment.format("HH: mm")})),this.scrollToSelectedTime(),this.contentScrolled()):(this.$pickerWrapper.html(d.detailedDateTimePicker({showTimePicker:this.showTimePicker})),this.postRenderDatePicker())},preRenderTimePicker:function(){for(var a=e(this.selectedMoment.format()).startOf("day"),b=[],c=0;48>c;c++)a.isAfter(this.synServerTim)&&b.push(a.format("HH: mm")),a.add("minutes",30);this.times=b},scrollToSelectedTime:function(){var a=this.$(".picker-wrapper"),b=0;this.$(".times li.current").length>0&&(b=this.$(".times li.current").position().top);var c=this.$(".picker-wrapper").height();a.scrollTop(b-c/3)},startDate:function(){return"0d"},endDate:function(){return!1},postRenderDatePicker:function(){var a=this,b=e(this.selectedMoment.format());a.endDate()?this.$(".detail-date-picker").datepickerlist({format:"YYYY-MM-DD",baseMomentDate:a.synServerTim.clone().add("days",parseInt(a.startDate())),days:-parseInt(a.endDate()),synServerTim:a.synServerTim}).on("changeDate",function(c,d){d&&a.pickDate(d),b&&(a.showTimePicker=!0,a.render())}).trigger("setDate",b.startOf("day").toDate()).on("click",a.stopPropagation):this.$(".detail-date-picker").datepicker({language:f.getStandardLocale(),startDate:a.startDate(),endDate:a.endDate(),todayBtn:"linked"}).on("changeDate",function(c){c.date&&a.pickDate(c.date),b&&!b.isSame(e(c.date),"date")&&(a.showTimePicker=!0,a.render())}).datepicker("setDate",b.startOf("day").toDate()).on("click",a.stopPropagation)},toggleDateTime:function(a){this.showTimePicker=$(a.currentTarget).hasClass("time"),this.render()},pickDate:function(a){this.selectedMoment.year(e(a).year()),this.selectedMoment.month(e(a).month()),this.selectedMoment.date(e(a).date()),this.selectedMoment.isBefore(this.synServerTim)&&(this.selectedMoment=this.nextHalfHourInTheFuture(),this.$("input").data("time",this.selectedMoment.format())),this.showTimePicker=!0},timeClicked:function(a){this.$(".times li").removeClass("current"),$(a.currentTarget).addClass("current");var b=e($(a.currentTarget).text(),"HH: mm");this.selectedMoment.hour(b.hour()),this.selectedMoment.minutes(b.minutes()),this.selectedTimeChanged(),$("body").click()},mouseWheelChangeOnTimes:function(a){var b=a.originalEvent.deltaY,c=$(a.currentTarget);if(b){var d=c.scrollTop();return c.scrollTop(d+b),this.contentScrolled(),!1}},contentScrolled:function(){var a=this.$(".picker-wrapper"),b=a.scrollTop(),c=this.$(".indicator.top"),d=this.$(".indicator.bottom");0===b?c.addClass("disabled"):c.removeClass("disabled"),b>=a.find(".times").height()-a.height()?d.addClass("disabled"):d.removeClass("disabled")},scrollPage:function(a){a.stopPropagation();var b,c=$(a.currentTarget).hasClass("top"),d=this.$(".picker-wrapper"),e=d.scrollTop();b=c?e-d.height():e+d.height();var f=this;return d.animate({scrollTop:b},500,function(){f.contentScrolled()}),!1}})}),define("views/detailDateTimePicker/pickerForUcmpOrder",["views/detailDateTimePicker/picker","templates","helper"],function(a,b,c){return a.extend({initialize:function(){this.$pickerWrapper=$('<div class="detail-date-time-picker toggle-plugins"></div>'),this.$el.append(this.$pickerWrapper),this.showTimePicker=!0,this.synServerTim=this.options.synServerTim,this.selectedMoment=this.nextHourInTheFuture(),this.render()},preRenderTimePicker:function(){var a=[],b=this.options.synServerTim,c=this.options.firstPickedStartDateTime,d=this.options.firstPickedEndDateTime;this.selectedMoment.isSame(this.options.firstPickedStartDateTime.clone().add("days",-1),"day")?(this.selectedMoment=this.options.firstPickedStartDateTime.clone(),c=this.options.firstPickedStartDateTime,d=this.options.firstPickedEndDateTime):this.selectedMoment.isSame(this.options.firstPickedStartDateTime,"day")?d.isAfter(this.nextHourInTheFuture())?c.clone().add("hour",1).isAfter(this.nextHourInTheFuture())?(c=this.options.firstPickedStartDateTime,d=this.options.firstPickedEndDateTime,(this.selectedMoment.isBefore(c)||this.selectedMoment.isAfter(d))&&(this.selectedMoment=c.clone())):(c=this.nextHourInTheFuture(),d=this.options.firstPickedEndDateTime,(this.selectedMoment.isBefore(c)||this.selectedMoment.isAfter(d))&&(this.selectedMoment=c.clone()),a.push(_l("一小时内"))):(this.selectedMoment=this.options.secondPickedStartDateTime.clone(),c=this.options.secondPickedStartDateTime,d=this.options.secondPickedEndDateTime):this.options.firstPickedStartDateTime.diff(b,"days")>1&&this.selectedMoment.isSame(b,"day")?(this.selectedMoment=this.options.firstPickedStartDateTime.clone(),c=this.options.firstPickedStartDateTime,d=this.options.firstPickedEndDateTime):this.selectedMoment.isSame(this.options.secondPickedStartDateTime,"day")?(c=this.options.secondPickedStartDateTime,d=this.options.secondPickedEndDateTime,(this.selectedMoment.isBefore(c)||this.selectedMoment.isAfter(d))&&(this.selectedMoment=c.clone())):this.selectedMoment.isSame(this.options.thirdPickedStartDateTime,"day")&&(c=this.options.thirdPickedStartDateTime,d=this.options.thirdPickedEndDateTime,(this.selectedMoment.isBefore(c)||this.selectedMoment.isAfter(d))&&(this.selectedMoment=c.clone()));var e=this.selectedMoment.clone().startOf("day");if(this.options.isToManland)for(var f=0;24>f;f++)e.isBefore(c)||e.isAfter(d.clone().subtract("hour",1))||a.push(e.format("HH:mm")+"~"+e.clone().add("hour",1).format("HH:mm")),e.add("hour",1);else for(var f=0;24>f;f++)e.isBefore(c)||e.isAfter(d.clone().subtract("hour",1))||a.push(e.format("HH:mm")),e.add("hour",1);this.times=a},startDate:function(){var a=0;return this.options.firstPickedEndDateTime.isAfter(this.nextHourInTheFuture())||(a=1),this.options.firstPickedStartDateTime.diff(this.options.synServerTim.clone().startOf("day"),"days")+a},endDate:function(){return this.options.firstPickedEndDateTime.isAfter(this.nextHourInTheFuture())?3:2},selectedTimeChanged:function(){var a=this.options.synServerTim,b=this.$("input");""!=this.selectedMoment&&this.selectedMoment.isSame(a,"day")&&0==this.selectedMoment.hour()&&0==this.selectedMoment.minutes()?(b.val(_l("一小时内")),b.data("time","")):(b.data("time",this.selectedMoment.format()),this.options.isToManland?b.val(this.selectedMoment.format("YYYY-MM-DD HH:mm")+"~"+this.selectedMoment.clone().add("hour",1).format("HH:mm")):b.val(this.selectedMoment.format("YYYY-MM-DD HH:mm"))),b.trigger("change")},renderPicker:function(){$(".toggle-plugins").hide(),this.$pickerWrapper.show(),this.render()},render:function(){if(this.showTimePicker){if(this.preRenderTimePicker(),this.options.isToManland)var a=this.selectedMoment.format("HH:mm")+"~"+this.selectedMoment.clone().add("hour",1).format("HH:mm");else var a=this.selectedMoment.format("HH:mm");this.$pickerWrapper.html(b.detailedDateTimePicker({showTimePicker:this.showTimePicker,times:this.times,selectedTime:a})),this.scrollToSelectedTime(),this.contentScrolled()}else this.$pickerWrapper.html(b.detailedDateTimePicker({showTimePicker:this.showTimePicker})),this.postRenderDatePicker()},nextHourInTheFuture:function(){return 0!==this.synServerTim.minutes()?this.synServerTim.clone().add(1,"hour").startOf("hour"):this.synServerTim},toggleLocationPicker:function(a){$(".dropdown-menu").is(":visible")&&$(".dropdown-menu").closest(".btn-group").removeClass("open"),this.$pickerWrapper.is(":visible")?this.$pickerWrapper.hide():(a&&a.stopPropagation(),this.renderPicker())},pickDate:function(a){this.selectedMoment.year(moment(a).year()),this.selectedMoment.month(moment(a).month()),this.selectedMoment.date(moment(a).date()),this.selectedMoment.isBefore(this.synServerTim)&&(this.selectedMoment=this.nextHourInTheFuture(),this.$("input").data("time",this.selectedMoment.format())),this.showTimePicker=!0},timeClicked:function(a){if(this.$(".times li").removeClass("current"),$(a.currentTarget).addClass("current"),this.options.isToManland)var b=moment($(a.currentTarget).text().split("~")[0],"HH:mm");else var b=moment($(a.currentTarget).text(),"HH:mm");this.selectedMoment.hour(b.hour()),this.selectedMoment.minutes(b.minutes()),this.selectedTimeChanged(),$("body").click()}})}),define("views/detailedLocationPicker/amapPicker",["backbone","templates","jquery-ui"],function(a,b){return a.View.extend({initialize:function(a){var c=_cmsConfig.sfMapSrc,d={city:a.city,district:a.district},e=this.$el.val(),f=c+"&q="+e+"&city="+d.city+"&district="+d.district+"&cb=?",g=this;$.getJSON(f,function(a){var c=a.result,d=a.status;0==d&&c.POISum>0?g.$el.siblings(".tab").show().html(b.autocompleteCity({results:c.POISet})):g.$el.siblings(".tab").hide()})}})}),define("models/addressBook",["backbone"],function(a){return a.Model.extend({defaults:{searchParm:null},initialize:function(){this.judgeMember()},judgeMember:function(){var b=this;a.ajax({type:"POST",url:Helper.getRESTfulDomain("member/"+this.get("mobile")+"/exists"),success:function(a){a.errorcode&&"SFMEM-20010"==a.errorcode?b.trigger("isMember"):b.trigger("isNotMember")}})},fetchAddressBook:function(b){var c=this,d={condition:this.get("searchParm"),pageNo:b,rowCount:"10",memType:"",mobile:this.get("mobile")};a.ajax({type:"POST",url:Helper.getRESTfulDomain("cx/getAddressBook")+"?"+c.get("signature"),data:JSON.stringify(d),contentType:"application/json; charset=UTF-8",error:function(a){504==a.status?c.trigger("signatureError"):c.trigger("networkError")},success:function(a){c.set("addressBooks",a),c.set("totalPage",a.totalPage),c.set("currentPage",a.currentPage),c.trigger("fetchSuccess")}})},saveToAddressBook:function(b,c){var d=this,e={address:b.address,city:b.location.cityName,cityCode:b.location.cityCode,companyName:b.companyName,contactName:b.contactName,contactPhone:b.contactPhone,contactTel:b.contactTel,country:"中国",countryCode:"A000086000",county:b.location.countyName,countyCode:b.location.countyCode,isDefault:"0",locationCode:b.location.locationCode,province:b.location.provinceName,provinceCode:b.location.provinceCode,addressId:c,memType:b.memType,latitude:b.latitude,longitude:b.longitude};a.ajax({type:"POST",url:Helper.getRESTfulDomain("cx/addressBook/saveOrUpdateAddress")+"?"+d.get("signature"),data:JSON.stringify(e),dataType:"text",contentType:"application/json;charset=UTF-8",error:function(a){504==a.status?d.trigger("signatureError"):d.trigger("saveFail")},success:function(){d.trigger("saveSuccess",b)}})},deleteOneAddress:function(b){var c=this,d={addressId:b};a.ajax({type:"POST",url:Helper.getRESTfulDomain("cx/addressBook/deleteAddress")+"?"+c.get("signature"),data:JSON.stringify(d),dataType:"text",contentType:"application/json;charset=UTF-8",error:function(a){504==a.status?c.trigger("signatureError"):c.trigger("deleteFail")},success:function(){c.trigger("deleteSuccess")}})},registMember:function(){var b=this;a.ajax({type:"POST",dataType:"text",url:Helper.getRESTfulDomain("cx/"+this.get("mobile")+"/regist")+"?"+b.get("signature"),error:function(a){504==a.status?b.trigger("signatureError"):b.trigger("regError",a)},success:function(a){b.trigger("regSuccess",a)}})}})}),define("models/regionTabs",["backbone","helper"],function(a,b){return a.Model.extend({initialize:function(a){this.getSelectedArea=a.getSelectedArea,this.getMaxLevel=a.getMaxLevel,this.getMinLevel=a.getMinLevel,this.setSelectedArea=a.setSelectedArea,this.datasource={"main-land-provinces":[{displayName:_l("省/直辖市"),pinToLeft:!0,parentRegion:{name:_l("省/直辖市"),code:"A000086000"},selected:!0}],"main-land":[{displayName:_l("常用市"),alwaysDisplayName:!0,pinToLeft:!0,parentRegion:{name:_l("常用市"),code:"POPULAR"},selected:!0},{displayName:_l("省/直辖市"),pinToLeft:!0,parentRegion:{name:_l("省/直辖市"),code:"A000086000"},selected:!1}],"hk-mc-tw":[{pinToLeft:!0,displayName:_l("港澳台"),parentRegion:{name:_l("港澳台"),code:"HKMCTW"},selected:!0}],international:[{displayName:_l("海外"),parentRegion:{name:_l("海外"),code:"GLOBAL"},selected:!0}]}},getAreaDefaultRegionTab:function(a){return this.datasource[a]},saveStateToCookie:function(){Modernizr.localstorage&&(localStorage.setItem("currentSelectedArea",this.getSelectedArea()),localStorage.setItem(this.getSelectedArea()+b.assemabledLocationAndLanguageQureyString(),JSON.stringify(this.regionTabs)))},restoreStateFromCookie:function(a){if(Modernizr.localstorage){var c;c=a?this.getSelectedArea():localStorage.getItem("currentSelectedArea")||this.getSelectedArea();var d=JSON.parse(localStorage.getItem(c+b.assemabledLocationAndLanguageQureyString()));_.isEmpty(d)?this.resetRegionTab():(this.regionTabs=this.trimSavedStateIfNeeded(d),this.setSelectedArea(c),this.trigger("regionTabUpdated"))}},trimSavedStateIfNeeded:function(a){var b=this;if(a=_.filter(a,function(a){var c;return c=a.selectedRegion?b.getMaxLevel(a.selectedRegion.code,a.selectedRegion.countryCode):b.getMaxLevel(),a.parentRegion.level?a.parentRegion.level<c:!0}),!this.getCurrentSelectedTab()){var c=_.last(_.filter(a,function(a){return a.selectedRegion}));c.selected=!0}return a},resetRegionTab:function(){this.regionTabs=this.getAreaDefaultRegionTab(this.getSelectedArea()),this.trigger("regionTabUpdated")},getRegionTabs:function(){return this.regionTabs},cleanRegionTabsSelectedStatus:function(){_.each(this.regionTabs,function(a){a.selected=!1})},activeTabByParentCode:function(a){this.cleanRegionTabsSelectedStatus();var b=_.find(this.regionTabs,function(b){return b.parentRegion.code===a});b&&(b.selected=!0),this.trimTabsAfterCurrentIndex(),this.trigger("regionTabUpdated")},getCurrentSelectedTab:function(){var a=_.findWhere(this.regionTabs,{selected:!0})||_.first(this.regionTabs);return a&&(a.selected=!0),a},hasReachedMaxLevel:function(){var a=this.getCurrentSelectedTab().selectedRegion;return a.level>=this.getMaxLevel(a.code,a.countryCode,a.rateCode)},hasReachedMinLevel:function(){var a=this.getCurrentSelectedTab().selectedRegion;return a.level>=this.getMinLevel(a.code,a.countryCode,a.rateCode)},updateCurrentTabWithSelectedRegion:function(a){var b=this.getCurrentSelectedTab();b&&b.pinToLeft&&_.each(this.regionTabs,function(a){a.pinToLeft&&(a.selectedRegion=null)}),b&&(b.selectedRegion=a)},trimTabsAfterCurrentIndex:function(){var a;_.each(this.regionTabs,function(b,c){(b.pinToLeft||b.selected===!0)&&(a=c)}),this.regionTabs=_.first(this.regionTabs,a+1)},getSelectedLocationDescription:function(){var a=_.map(this.regionTabs,function(a){return a.selectedRegion?a.selectedRegion.title:""});return a=_.filter(a,function(a){return a&&a.length>0}),a.join("-")},appendSelectedRegionToTabs:function(a){this.cleanRegionTabsSelectedStatus(),this.regionTabs.push({parentRegion:a,selected:!0})},handleNewChoosedRegion:function(a){this.trimTabsAfterCurrentIndex(),this.updateCurrentTabWithSelectedRegion(a)}})}),define("views/detailedLocationPicker/picker",["backbone","templates","collections/detailRegions","models/regionTabs","jquery-ui"],function(a,b,c,d){return a.View.extend({events:{"click .input-group-addon":"toggleLocationPicker","click input":"toggleLocationPicker","click .detail-location-picker":"stopPropagation",mouseout:"stopPropagation","click .area-level-tabs li":"areaTabSwitch","click .region-level-tabs li":"regionTabClicked","click .regions li a":"regionChanged","click .pages-switch li":"pageSwitcherClicked","change input":"selectedRegionChanged",toggle:"toggleLocationPicker","click .hide-picker":"clearCurrentSelection","keydown input":"hideLocationPicker","blur input":"checkInputChanged"},initialize:function(){_.bindAll(this,"getMaxLevel"),_.bindAll(this,"getMinLevel"),_.bindAll(this,"getSelectedArea"),_.bindAll(this,"getCustomURL"),_.bindAll(this,"setSelectedArea"),this.regionTabsModel=new d({getMaxLevel:this.getMaxLevel,getMinLevel:this.getMinLevel,getSelectedArea:this.getSelectedArea,setSelectedArea:this.setSelectedArea}),this.setupLocationPicker(),this.setupDetailRegions(),this.restoreLocationPickerState(),this.primaryButton=$(".location-inputs .primary-button"),this.destInput=$("input.dests").last(),this.originInput=$("input.origins").last(),this.DUTCG=["A311000000","A111000000","A591100000","A121000000","A000830000","065","A00084","A00720000","081","060","082","001","084","0056","066","061","976"],this.DUTCGLength=this.DUTCG.length,this.isDests=this.$input.hasClass("dests");var a=this;this.$("input").autocomplete({minLength:1,delay:300,select:function(b,c){b.stopPropagation(),a.$input.val(c.item.value),a.handleInputedRegion(c.item),$(b.target).hasClass("dests")&&!_.isEmpty(a.originInput.val())&&a.primaryButton.removeClass("disabled"),$(b.target).hasClass("origins")&&(a.destInput.val(""),a.destInput.data("code",""),a.destInput.trigger("change"))},source:function(b,c){var d=b.term;if(!(d in cache)||(c(cache[d]),a.isDests)){var e={query:b.term,limit:50,level:3},f="region/live/origin",g="region/live/origin/"+a.originInput.data("code")+"/dests";$.getJSON(Helper.getRESTfulDomain(a.isDests?g:f),e,function(b,e,f){cache[d]=_.chain(b).filter(function(b){for(var c=0;c<a.DUTCGLength;c++)if(b.code===a.DUTCG[c])return!1;return!0}).map(function(a){return a.value=a.label=a.name,a}).value(),c(cache[d])})}}}).autocomplete("instance")._renderItem=function(a,b){return $("<li>").append(b.label+"<br>").appendTo(a)};var b=this.$(".detail-location-input.origin-price").data("selected-area"),c=this.$(".detail-location-input.dest-price").data("selected-area");"hk-mc-tw"===b&&this.$(".detail-location-input.origin-price").data("max-level",1),"hk-mc-tw"===c&&this.$(".detail-location-input.origin-price").data("max-level",1)},saveLocationPickerState:function(){this.$el.data("do-save-state")&&"international"!==this.getSelectedArea()&&this.regionTabsModel.saveStateToCookie()},checkInputChanged:function(a){var b=$(a.target),c=this.regionTabsModel.getSelectedLocationDescription();c&&b.val()===c||this.$detailedLocationPicker.is(":visible")||(this.regionTabsModel.resetRegionTab(),navigator.userAgent.indexOf("MSIE 8.0")>0?b.val(b.attr("placeholder")).addClass("placeholder").trigger("blur.placeholder"):b.val("").data("code",""),this.primaryButton.addClass("disable"))},restoreLocationPickerState:function(){if(this.$el.data("do-restore-state")){this.regionTabsModel.restoreStateFromCookie(this.$el.data("only-current-tab"));var a=_.last(_.filter(this.regionTabsModel.getRegionTabs(),function(a){return a.selectedRegion}));if(!a)return;if(this.$input.data("code")&&this.$input.data("code")!==a.selectedRegion.code)return void this.regionTabsModel.resetRegionTab();a&&a.selectedRegion.level>=this.getMinLevel(a.selectedRegion.code,a.selectedRegion.countryCode,a.selectedRegion.rateCode)&&(this.updateLocationPickerSelectionToInput(a.selectedRegion),this.triggerRegionModelUpdated())}else this.regionTabsModel.resetRegionTab()},resetLocationPicker:function(){this.regionTabsModel.resetRegionTab(),this.$input.val(""),this.$input.data("code","")},getMaxLevel:function(a,b,c){return b&&this.$el.data("max-"+b)?this.$el.data("max-"+b):c&&this.$el.data("max-"+c)?this.$el.data("max-"+c):this.$el.data("max-level")||5},getMinLevel:function(a,b,c){return b&&this.$el.data("min-"+b)?this.$el.data("min-"+b):this.$el.data("min-level")||this.getMaxLevel(a,b,c)},getSelectedArea:function(){if(this.$el.data("selected-area"))return this.$el.data("selected-area");var a=(window._cmsConfig?window._cmsConfig.language||"sc":"sc",window._cmsConfig?window._cmsConfig.region||"cn":"cn");return"hk"===a||"tw"===a?"hk-mc-tw":"cn"===a?"main-land":"international"},setSelectedArea:function(a){this.$el.data("selected-area",a)},getCustomURL:function(){return this.$el.data("custom-url")},setupLocationPicker:function(){this.$detailedLocationPicker=$('<div class="detail-location-picker toggle-plugins"></div>'),this.$el.append(this.$detailedLocationPicker),this.$input=this.$("input")},setupDetailRegions:function(){this.regions=new c({customURL:this.getCustomURL}),this.listenTo(this.regions,"dataFetched",this.render);var a=this;this.listenTo(this.regionTabsModel,"regionTabUpdated",function(){a.$detailedLocationPicker.is(":visible")?(a.regions.fetchRegions(a.regionTabsModel.getCurrentSelectedTab().parentRegion),a.regionTabDirty=!1):a.regionTabDirty=!0})},availableRegions:function(){var a=$(".store-address-picker");return a&&a.length>0?this.regions.models:this.regions.where({availableAsOrigin:!0})},unavailableRegions:function(){var a=$(".store-address-picker");return a&&a.length>0?[]:this.regions.where({availableAsOrigin:!1})},areaTabs:function(){return{showAreaTab:!this.$el.data("hide-area-tab"),showMainLand:!this.$el.data("hide-main-land"),showHKMCTW:!this.$el.data("hide-hkmctw"),showGlobe:!this.$el.data("hide-globe"),currentTab:this.getSelectedArea()||this.selectedAreaTab}},render:function(){var a=this.regionTabsModel.getCurrentSelectedTab(),c=this.availableRegions(),d=b.detailedLocationPicker({availableRegions:c,unavailableRegions:this.unavailableRegions(),regionTabs:this.regionTabsModel.getRegionTabs(),areaTabs:this.areaTabs(),pageLimit:52,shouldShowFussySelection:this.shouldShowFussySelection(),currentSelectedRegionCode:a.selectedRegion?a.selectedRegion.code:void 0,isLoading:this.regions.isFetchingData,showNotAvailable:0===c.length,errorLoading:this.regions.errorLoadingData});this.$detailedLocationPicker.html(d)},shouldShowFussySelection:function(){if(this.$el.data("hide-fussy-selector"))return!1;var a=this.regionTabsModel.getCurrentSelectedTab().parentRegion.level;return a+1>this.getMinLevel()},showPicker:function(){$(".toggle-plugins").hide(),this.regionTabDirty&&this.regions.fetchRegions(this.regionTabsModel.getCurrentSelectedTab().parentRegion),this.$detailedLocationPicker.show()},clearCurrentSelection:function(){$(".toggle-plugins").hide();var a=this.regionTabsModel.getCurrentSelectedTab();a.selectedRegion=null,this.updateLocationPickerSelectionToInput(a.parentRegion),this.render()},toggleLocationPicker:function(a){if(this.$detailedLocationPicker.is(":visible"))this.$detailedLocationPicker.hide();else{if(a&&a.stopPropagation(),_.isEmpty(this.$input.val())){this.regionTabsModel.resetRegionTab();var b=this.regionTabsModel.regionTabs[0];b.selected=!0,b.selectedRegion=null}else this.$input.select();this.$input.attr("disabled")||this.showPicker()}},hideLocationPicker:function(a){this.$detailedLocationPicker.is(":visible")&&this.$detailedLocationPicker.hide()},stopPropagation:function(a){a.stopPropagation()},selectedRegionChanged:function(a){var b=$(a.currentTarget);_.isEmpty(b.data("code"))&&_.isEmpty(b.val())&&(this.$el.data("selected-area",""),this.resetLocationPicker())},setLocationCodeInInput:function(a,b,c,d){this.$input.data("code",a),this.$input.data("rateCode",b),this.$input.data("country-code",c),this.$input.data("level",d)},pageSwitcherClicked:function(a){this.$(".pages-switch li").removeClass("current");var b=$(a.currentTarget);b.addClass("current"),this.$(".regions-page").removeClass("current"),this.$(".regions-page[data-page="+b.text()+"]").addClass("current")},areaTabSwitch:function(a){this.selectedAreaTab=$(a.currentTarget).data("tab"),this.$el.data("selected-area",this.selectedAreaTab),this.regionTabsModel.resetRegionTab(),this.render()},regionTabClicked:function(a){var b=$(a.currentTarget).data("code");this.regionTabsModel.activeTabByParentCode(b)},updateLocationPickerSelectionToInput:function(a){this.render(),this.setLocationCodeInInput(a.code,a.rateCode,a.countryCode,a.level);var b=this.regionTabsModel.getSelectedLocationDescription();this.$input.val()!==b&&(this.$input.trigger("blur.placeholder").val(b).attr("title",b).trigger("change"),$(".dest-price input").length>0&&$(".dest-price input").removeAttr("disabled"))},triggerRegionModelUpdated:function(){this.$el.trigger("regionModelUpdate",[{regionTabs:this.regionTabsModel.getRegionTabs()}])},preProcessInput:function(a){var b={};switch(a.countryCode){case"A000086000":this.$el.data("selected-area","main-land"),b.activeTab={code:"A000086000"},b.handleRegon={code:a.parentCode};break;case"A000710000":case"A000810000":case"A000820000":this.$el.data("selected-area","hk-mc-tw"),b.handleRegon=b.activeTab={code:"HKMCTW"};break;default:this.$el.data("selected-area","international"),b.handleRegon=b.activeTab={code:"GLOBAL"}}return b},handleInputedRegion:function(a){var b=this.preProcessInput(a);this.regionTabsModel.resetRegionTab(),this.regionTabsModel.activeTabByParentCode(b.activeTab.code),this.regionTabsModel.handleNewChoosedRegion(b.handleRegon),this.regionTabsModel.appendSelectedRegionToTabs(b.handleRegon);var c={code:a.code,countryCode:a.countryCode,rateCode:null,
name:a.name,level:a.level,title:a.name,provinceRateCode:null,provinceName:null};this.renderRengionChanged(c)},regionChanged:function(a){var b=null;a.preventDefault();var c=$(a.currentTarget);b={code:c.data("code"),countryCode:c.data("country-code"),rateCode:c.data("rate-code"),name:c.text().trim(),level:c.data("level"),title:c.prop("title"),provinceRateCode:c.data("province-rate-code"),provinceName:c.data("province-name"),provinceCode:c.data("province-code")},this.renderRengionChanged(b)},renderRengionChanged:function(a){this.regionTabsModel.handleNewChoosedRegion(a),this.triggerRegionModelUpdated();var b=this;return this.regionTabsModel.hasReachedMinLevel()&&(b.updateLocationPickerSelectionToInput(a),this.saveLocationPickerState()),this.regionTabsModel.hasReachedMaxLevel()?void this.$detailedLocationPicker.hide():void this.regions.fetchRegions(a,function(c,d){"success"===d&&b.availableRegions().length>0?(b.regionTabsModel.appendSelectedRegionToTabs(a),b.render()):(404===c.status||0===b.availableRegions().length)&&(b.updateLocationPickerSelectionToInput(a),b.regionTabsModel.trigger("regionTabUpdated")),b.$detailedLocationPicker.show()})}})}),function(a){"use strict";var b=function(a,b){this.init(a,b)},c=null;b.prototype={init:function(b,c){this.$element=a(b);var d=c&&c.bootstrapMajorVersion?c.bootstrapMajorVersion:a.fn.bootstrapPaginator.defaults.bootstrapMajorVersion;this.$element.attr("id");if(2===d&&!this.$element.is("div"))throw"in Bootstrap version 2 the pagination must be a div element. Or if you are using Bootstrap pagination 3. Please specify it in bootstrapMajorVersion in the option";if(d>2&&!this.$element.is("ul"))throw"in Bootstrap version 3 the pagination root item must be an ul element.";this.currentPage=1,this.lastPage=1,this.setOptions(c),this.initialized=!0},setOptions:function(b){this.options=a.extend({},this.options||a.fn.bootstrapPaginator.defaults,b),this.totalPages=parseInt(this.options.totalPages,10),this.numberOfPages=parseInt(this.options.numberOfPages,10),b&&"undefined"!=typeof b.currentPage&&this.setCurrentPage(b.currentPage),this.listen(),this.render(),this.initialized||this.lastPage===this.currentPage||this.$element.trigger("page-changed",[this.lastPage,this.currentPage])},listen:function(){this.$element.off("page-clicked"),this.$element.off("page-changed"),"function"==typeof this.options.onPageClicked&&this.$element.bind("page-clicked",this.options.onPageClicked),"function"==typeof this.options.onPageChanged&&this.$element.on("page-changed",this.options.onPageChanged),this.$element.bind("page-clicked",this.onPageClicked)},destroy:function(){this.$element.off("page-clicked"),this.$element.off("page-changed"),this.$element.removeData("bootstrapPaginator"),this.$element.empty()},show:function(a){this.setCurrentPage(a),this.render(),this.lastPage!==this.currentPage&&this.$element.trigger("page-changed",[this.lastPage,this.currentPage])},showNext:function(){var a=this.getPages();a.next&&this.show(a.next)},showPrevious:function(){var a=this.getPages();a.prev&&this.show(a.prev)},showFirst:function(){var a=this.getPages();a.first&&this.show(a.first)},showLast:function(){var a=this.getPages();a.last&&this.show(a.last)},onPageItemClicked:function(a){var b=a.data.type,c=a.data.page;this.$element.trigger("page-clicked",[a,b,c])},onPageClicked:function(b,c,d,e){var f=a(b.currentTarget);switch(d){case"first":f.bootstrapPaginator("showFirst");break;case"prev":f.bootstrapPaginator("showPrevious");break;case"next":f.bootstrapPaginator("showNext");break;case"last":f.bootstrapPaginator("showLast");break;case"page":f.bootstrapPaginator("show",e)}},render:function(){var b=this.getValueFromOption(this.options.containerClass,this.$element),c=this.options.size||"normal",d=this.options.alignment||"left",e=this.getPages(),f=2===this.options.bootstrapMajorVersion?a("<ul></ul>"):this.$element,g=2===this.options.bootstrapMajorVersion?this.getValueFromOption(this.options.listContainerClass,f):null,h=null,i=null,j=null,k=null,l=null,m=0;switch(this.$element.prop("class",""),this.$element.addClass("pagination"),c.toLowerCase()){case"large":case"small":case"mini":this.$element.addClass(a.fn.bootstrapPaginator.sizeArray[this.options.bootstrapMajorVersion][c.toLowerCase()])}if(2===this.options.bootstrapMajorVersion)switch(d.toLowerCase()){case"center":this.$element.addClass("pagination-centered");break;case"right":this.$element.addClass("pagination-right")}for(this.$element.addClass(b),this.$element.empty(),2===this.options.bootstrapMajorVersion&&(this.$element.append(f),f.addClass(g)),this.pageRef=[],e.first&&(h=this.buildPageItem("first",e.first),h&&f.append(h)),e.prev&&(i=this.buildPageItem("prev",e.prev),i&&f.append(i)),m=0;m<e.length;m+=1)l=this.buildPageItem("page",e[m]),l&&f.append(l);e.next&&(j=this.buildPageItem("next",e.next),j&&f.append(j)),e.last&&(k=this.buildPageItem("last",e.last),k&&f.append(k))},buildPageItem:function(b,c){var d=a("<li></li>"),e=a("<a></a>"),f="",g="",h=this.options.itemContainerClass(b,c,this.currentPage),i=this.getValueFromOption(this.options.itemContentClass,b,c,this.currentPage),j=null;switch(b){case"first":if(!this.getValueFromOption(this.options.shouldShowPage,b,c,this.currentPage))return;f=this.options.itemTexts(b,c,this.currentPage),g=this.options.tooltipTitles(b,c,this.currentPage);break;case"last":if(!this.getValueFromOption(this.options.shouldShowPage,b,c,this.currentPage))return;f=this.options.itemTexts(b,c,this.currentPage),g=this.options.tooltipTitles(b,c,this.currentPage);break;case"prev":if(!this.getValueFromOption(this.options.shouldShowPage,b,c,this.currentPage))return;f=this.options.itemTexts(b,c,this.currentPage),g=this.options.tooltipTitles(b,c,this.currentPage);break;case"next":if(!this.getValueFromOption(this.options.shouldShowPage,b,c,this.currentPage))return;f=this.options.itemTexts(b,c,this.currentPage),g=this.options.tooltipTitles(b,c,this.currentPage);break;case"page":if(!this.getValueFromOption(this.options.shouldShowPage,b,c,this.currentPage))return;f=this.options.itemTexts(b,c,this.currentPage),g=this.options.tooltipTitles(b,c,this.currentPage)}return d.addClass(h).append(e),e.addClass(i).html(f).on("click",null,{type:b,page:c},a.proxy(this.onPageItemClicked,this)),this.options.pageUrl&&e.attr("href",this.getValueFromOption(this.options.pageUrl,b,c,this.currentPage)),this.options.useBootstrapTooltip?(j=a.extend({},this.options.bootstrapTooltipOptions,{title:g}),e.tooltip(j)):e.attr("title",g),d},setCurrentPage:function(a){if(a>this.totalPages||1>a)throw"Page out of range";this.lastPage=this.currentPage,this.currentPage=parseInt(a,10)},getPages:function(){var a=this.totalPages,b=this.currentPage%this.numberOfPages===0?(parseInt(this.currentPage/this.numberOfPages,10)-1)*this.numberOfPages+1:parseInt(this.currentPage/this.numberOfPages,10)*this.numberOfPages+1,c=[],d=0,e=0;for(b=1>b?1:b,d=b,e=0;e<this.numberOfPages&&a>=d;d+=1,e+=1)c.push(d);return c.first=1,this.currentPage>1?c.prev=this.currentPage-1:c.prev=1,this.currentPage<a?c.next=this.currentPage+1:c.next=a,c.last=a,c.current=this.currentPage,c.total=a,c.numberOfPages=this.options.numberOfPages,c},getValueFromOption:function(a){var b=null,c=Array.prototype.slice.call(arguments,1);return b="function"==typeof a?a.apply(this,c):a}},c=a.fn.bootstrapPaginator,a.fn.bootstrapPaginator=function(c){var d=arguments,e=null;return a(this).each(function(f,g){var h=a(g),i=h.data("bootstrapPaginator"),j="object"!=typeof c?null:c;if(!i)return i=new b(this,j),h=a(i.$element),void h.data("bootstrapPaginator",i);if("string"==typeof c){if(!i[c])throw"Method "+c+" does not exist";e=i[c].apply(i,Array.prototype.slice.call(d,1))}else e=i.setOptions(c)}),e},a.fn.bootstrapPaginator.sizeArray={2:{large:"pagination-large",small:"pagination-small",mini:"pagination-mini"},3:{large:"pagination-lg",small:"pagination-sm",mini:""}},a.fn.bootstrapPaginator.defaults={containerClass:"",size:"normal",alignment:"left",bootstrapMajorVersion:2,listContainerClass:"",itemContainerClass:function(a,b,c){return b===c?"active":""},itemContentClass:function(a,b,c){return""},currentPage:1,numberOfPages:5,totalPages:1,pageUrl:function(a,b,c){return null},onPageClicked:null,onPageChanged:null,useBootstrapTooltip:!1,shouldShowPage:function(a,b,c){var d=!0;switch(a){case"first":d=1!==c;break;case"prev":d=1!==c;break;case"next":d=c!==this.totalPages;break;case"last":d=c!==this.totalPages;break;case"page":d=!0}return d},itemTexts:function(a,b,c){switch(a){case"first":return"&lt;&lt;";case"prev":return"&lt;";case"next":return"&gt;";case"last":return"&gt;&gt;";case"page":return b}},tooltipTitles:function(a,b,c){switch(a){case"first":return"Go to first page";case"prev":return"Go to previous page";case"next":return"Go to next page";case"last":return"Go to last page";case"page":return b===c?"Current page is "+b:"Go to page "+b}},bootstrapTooltipOptions:{animation:!0,html:!0,placement:"top",selector:!1,title:"",container:!1}},a.fn.bootstrapPaginator.Constructor=b}(window.jQuery),define("bootstrapPagination",["bootstrap"],function(){}),define("views/bootstrapPagination",["backbone","bootstrapPagination"],function(a){return a.View.extend({initialize:function(){this.currentPage=this.options.currentPage,this.numberOfPages=this.options.numberOfPages,this.totalPages=this.options.totalPages,this.initPagination()},initPagination:function(){var a=this;this.$(".pagination").bootstrapPaginator({currentPage:a.currentPage,numberOfPages:a.numberOfPages,totalPages:a.totalPages,size:"normal",bootstrapMajorVersion:3,alignment:"center",itemTexts:function(a,b,c){switch(a){case"first":return _l("首页");case"prev":return _l("上一页");case"next":return _l("下一页");case"last":return _l("末页");case"page":return b}},itemContainerClass:function(a,b,c){return b===c?"active":"pointer-cursor"},onPageClicked:function(b,c,d,e){a.$el.trigger("pageClicked",e)}})}})}),define("views/order/addressBookContent",["backbone","templates","helper","models/addressBook","views/detailedLocationPicker/picker","views/detailedLocationPicker/amapPicker","views/bootstrapPagination","parsleyjs"],function(Backbone,EJS,Helper,AddressBook,DetailedLocationPicker,AmapPickerView,bootstrapPaginationView){return Backbone.View.extend({events:{"click .select-confirm":"confirmAddress","click .try-again":"fetchAddressBookAgain","click .search":"fetchAddressBookFromInput","click .add":"addOneAddress","click .modify":"modifyAddress","click .save-success":"showAddressBook","click .delete":"deleteAddress","click .delete-cancle":"cancleDlete","click .delete-yes":"confirmDelete","regionModelUpdate .detail-location-input":"regionModelUpdate","keydown #add-detailaddress":"selectDetailFromAmap","click .hideTab":"hideDetailFromAmap","click .autocompleteResult div":"selectAddress","click .save-address":"saveOneAddress","change .reg-checkbox":"regButtonToggleAvtive","click .reg-confirm":"regMember","click .reg-success-confirm":"showAddressBook","pageClicked .bootstrap-pagination":"jumpPage","hide.bs.modal #dealOneAddress":"dealOneAddressContentHide"},initialize:function(){window.ParsleyValidator.setLocale(Helper.getSiteLanguage()),this.model=new AddressBook({mobile:this.options.mobile,signature:this.options.signature}),this.listenTo(this.model,"isMember",this.showAddressBookList),this.listenTo(this.model,"isNotMember",this.showMemberRegist),this.listenTo(this.model,"regSuccess",this.regSuccessOption),this.listenTo(this.model,"regError",this.regErrorOption),this.listenTo(this.model,"fetchSuccess",this.showSuccess),this.listenTo(this.model,"networkError",this.showNetworkError),this.listenTo(this.model,"saveSuccess",this.saveOneAddSuccess),this.listenTo(this.model,"saveFail",this.saveOneAddFail),this.listenTo(this.model,"deleteFail",this.deleteOneAddFail),this.listenTo(this.model,"deleteSuccess",this.deleteOneAddSuccess),this.listenTo(this.model,"signatureError",this.signatureExceed)},handleServiceAgreementModal:function(){if(0==$("#service-agreement").length){var a=EJS.modal({title:_l("服务条款"),id:"service-agreement",body:$(".service-agreement-content").html(),fade:!0});$(".service-agreement-content").html(a).show()}},showMemberRegist:function(){this.handleServiceAgreementModal();var a=EJS.memberRegist({mobile:this.model.get("mobile")});this.showModal(_l("会员注册"),"memberReg",a)},showAddressBookList:function(){this.activeEV="init";var a=EJS.addressBook({loadingImg:Helper.getResourceURL("images/order/loading.gif")});this.showModal(_l("从地址簿选择"),"addressBook",a),this.model.fetchAddressBook(1)},showModal:function(a,b,c){var d=EJS.modal({title:a,id:b,body:c,fade:!1});this.$el.append($(d)),this.$("#"+b).modal("show")},showSuccess:function(){if(this.$(".add").addClass("black").attr("disabled",!1),this.$("dl").hide(),this.model.get("addressBooks").addressList.length>0){var a=EJS.addressSuccessBody({addressBookList:this.model.get("addressBooks").addressList});this.$("table.address").append($(a));new bootstrapPaginationView({el:this.$(".bootstrap-pagination"),totalPages:this.model.get("totalPage"),currentPage:this.model.get("currentPage"),numberOfPages:3})}else"init"==this.activeEV?this.$(".address_fetch_null").show():this.$(".address_search_null").show()},jumpPage:function(a,b){this.showLoading(),this.model.fetchAddressBook(b)},showNetworkError:function(){this.$(".add").removeClass("black").attr("disabled",!0),this.$("dl").hide(),this.$(".address_networkErr").show()},showLoading:function(){this.$(".address_success").remove(),this.$("dl").hide(),this.$(".address_loading").show()},showAddressBook:function(){this.$el.trigger("showAddressBook",this.options.fillOption)},confirmAddress:function(){if(1==this.$(".address-radio:checked").length){this.$(".err-select-tip").hide();var a=_.findWhere(this.model.get("addressBooks").addressList,{addressId:this.$(".address-radio:checked").closest("tr").data("addid")}),b={contactName:a.contactName,contactTel:a.contactTel,companyName:a.companyName,contactPhone:a.contactPhone,location:{provinceName:a.province,provinceCode:a.provinceCode,cityName:a.city,cityCode:a.locationCode,countyName:a.county,countyCode:a.countyCode},address:a.address};this.$el.trigger("addressSelected",b),this.$("#addressBook").modal("hide")}else this.$(".err-select-tip").show()},fetchAddressBookAgain:function(){this.showLoading(),this.model.fetchAddressBook(this.model.get("currentPage"))},fetchAddressBookFromInput:function(){if(this.activeEV="search",this.$(".search-form").parsley().validate()){this.showLoading();var a=this.$(".search-input").val();this.model.set("searchParm",a),this.model.fetchAddressBook(1)}},popOneAddressContent:function(a,b){var c=EJS.addressBookaddOrmod({addressBook:b});this.$("#addressBook").modal("hide"),this.$("#dealOneAddress").remove(),this.showModal(a,"dealOneAddress",c),new DetailedLocationPicker({el:this.$(".detail-location-input")});var d=this;this.$("#dealOneAddress").on("failedEvent",function(){d.$("#addressBook").modal("show")}),this.$("#dealOneAddress").on("successEvent",function(){var a=EJS.saveWarnTip();d.$("#saveWarn").remove(),d.showModal(_l("温馨提示"),"saveWarn",a)})},addOneAddress:function(){this.popOneAddressContent(_l("新增地址"),null)},modifyAddress:function(a){var b=_.findWhere(this.model.get("addressBooks").addressList,{addressId:this.$(a.target).closest("tr").data("addid")});this.add_location={provinceName:b.province,provinceCode:b.provinceCode,cityName:b.city,cityCode:b.cityCode,countyName:b.county,countyCode:b.countyCode,locationCode:b.locationCode},this.popOneAddressContent(_l("修改地址"),b)},deleteAddress:function(a){this.$("#addressBook").modal("hide");var b=this.$(a.target).closest("tr").data("addid"),c=_.findWhere(this.model.get("addressBooks").addressList,{addressId:b}),d=EJS.deleteWarnTip({tel:c.contactTel,name:c.contactName,addressId:b});this.$("#deleteConfirm").remove(),this.showModal(_l("温馨提示"),"deleteConfirm",d)},cancleDlete:function(){this.$("#deleteConfirm").modal("hide"),this.$("#addressBook").modal("show")},confirmDelete:function(a){this.$(a.target).button("loading").attr("disabled",!0);var b=this.$(a.target).data("addressid");this.model.deleteOneAddress(b)},deleteOneAddFail:function(){this.$(".delete-fail-tip").show(),this.$(".delete-yes").button("reset").attr("disabled",!1)},deleteOneAddSuccess:function(){this.$("#deleteConfirm").modal("hide"),this.$el.trigger("showAddressBook",this.options.fillOption)},getLocationData:function(a){a=_.filter(a,function(a){return a.selectedRegion});var b,c,d,e,f,g;return 1===a.length?(locationCode=a[0].selectedRegion.rateCode,b=a[0].selectedRegion.provinceCode,c=a[0].selectedRegion.provinceName,d=a[0].selectedRegion.code,e=a[0].selectedRegion.name,f="",g=""):2===a.length?(locationCode=a[0].selectedRegion.rateCode,b=a[0].selectedRegion.provinceCode,c=a[0].selectedRegion.provinceName,d=a[0].selectedRegion.code,e=a[0].selectedRegion.name,f=a[1].selectedRegion.code,g=a[1].selectedRegion.name):(locationCode=a[2].selectedRegion.rateCode,b=a[0].selectedRegion.code,c=a[0].selectedRegion.name,d=a[1].selectedRegion.code,e=a[1].selectedRegion.name,f=a[2].selectedRegion.code,g=a[2].selectedRegion.name),{locationCode:locationCode,provinceCode:b,provinceName:c,cityCode:d,cityName:e,countyCode:f,countyName:g}},regionModelUpdate:function(a,b){this.add_location=this.getLocationData(b.regionTabs)},selectDetailFromAmap:function(a){var b=$(a.target),c=(b.val(),this.$("#add-address").val()),d="",e="";c.split("-").length>2?(d=c.split("-")[1],e=c.split("-")[2]):(d=c.split("-")[0],e=c.split("-")[1]),new AmapPickerView({el:b,city:d,district:e}),this.$(".hideTab").show()},hideDetailFromAmap:function(a){this.$(".autocompleteResult").hide(),this.$(".hideTab").hide()},selectAddress:function(a){var b=$(a.currentTarget).find("a")[0].innerHTML;this.$("#add-detailaddress").val(b),this.$(".autocompleteResult").hide()},saveOneAddress:function(a){if(this.$(".address-form").parsley().validate()){var b=this.$(a.target).data("addressid");if(b)var c=_.findWhere(this.model.get("addressBooks").addressList,{addressId:b}),d={contactName:this.$("#add-name").val(),contactTel:this.$("#add-mobile").val(),companyName:this.$("#add-company").val(),contactPhone:this.$("#add-phone").val(),location:this.add_location,address:this.$("#add-detailaddress").val(),latitude:"",longitude:"",memType:c.memType};else var d={contactName:this.$("#add-name").val(),contactTel:this.$("#add-mobile").val(),companyName:this.$("#add-company").val(),contactPhone:this.$("#add-phone").val(),location:this.add_location,address:this.$("#add-detailaddress").val(),latitude:"",longitude:"",memType:2};this.$(".save-address").button("loading").attr("disabled",!0),this.model.saveToAddressBook(d,b)}},saveOneAddSuccess:function(a){this.$("#dealOneAddress").data("option",!0),this.$("#dealOneAddress").modal("hide")},saveOneAddFail:function(){this.$(".save-fail").show(),this.$(".save-address").button("reset").attr("disabled",!1)},regButtonToggleAvtive:function(a){this.$(a.target).prop("checked")?this.$(".reg-confirm").attr("disabled",!1):this.$(".reg-confirm").attr("disabled",!0)},regMember:function(a){this.$(a.target).button("loading").attr("disabled",!0),this.model.registMember()},regSuccessOption:function(data){"success"==eval("("+data+")").message?(this.$(".reg-wrapper").hide(),this.$(".reg-success").show()):this.$(".reg-error").show(),this.$(".reg-confirm").button("reset").attr("disabled",!1)},regErrorOption:function(a,b){504==b.status?this.signatureExceed():this.$(".reg-error").show(),this.$(".reg-confirm").button("reset").attr("disabled",!1)},signatureExceed:function(){this.$el.trigger("signatureExceed")},dealOneAddressContentHide:function(a){$(a.target).data("option")?$(a.target).trigger("successEvent"):$(a.target).trigger("failedEvent")}})}),void 0===dpUI)var dpUI={data:{},helper:{},options:{},versions:{}};dpUI.helper.data2obj=function(a){if(void 0===a)return!1;for(var b={},c=0;c<a.attributes.length;c++)if((a.attributes[c].nodeName+"").indexOf("data-")>-1){var d=(a.attributes[c].nodeName+"").substring(5),e=a.attributes[c].value;"true"==e.toLowerCase()?e=!0:"false"==e.toLowerCase()?e=!1:parseFloat(e)+""==e&&(e=parseFloat(e)),b[d]=e}return b},dpUI.helper.formatter=function(a,b){if(!b||0==b.length)return a+"";var c=Math.floor(a),d=a-c,e=b.indexOf("."),f=b.length-e-1;for(c+="";c.length<e;)c="0"+c;for(d=Math.round(d*Math.pow(10,f))+"";d.length<f;)d+="0";return c+"."+d},dpUI.helper.betterParseFloat=function(a){return isNaN(parseFloat(a))?a.length<2?parseFloat(a):dpUI.helper.betterParseFloat(a.substring(1)):parseFloat(a)},dpUI.versions.numberPicker="2.0.0",dpUI.numberPicker=function(a,b){var c={start:0,min:!1,max:!1,step:1,format:!1,formatter:function(a){return a},increaseText:"+",decreaseText:"-",onReady:function(){},onMin:function(){},onMax:function(){},beforeIncrease:function(){},beforeDecrease:function(){},beforeChange:function(){},afterIncrease:function(){},afterDecrease:function(){},afterChange:function(){}};$(a).each(function(){function a(a){a=dpUI.helper.betterParseFloat(a),isNaN(a)&&(a=d.number),e.removeClass("dpui-numberPicker-min").removeClass("dpui-numberPicker-max"),d.options.beforeChange.call(d,d,d.number),d.options.min!==!1&&a<=d.options.min?(e.addClass("dpui-numberPicker-min"),d.number=d.options.min):d.options.max!==!1&&a>=d.options.max?(e.addClass("dpui-numberPicker-max"),d.number=d.options.max):d.number=a,d.number=1<=10*Number(d.number)%10&&5>=10*Number(d.number)%10?(10*Math.floor(10*Number(d.number)/10)+5)/10:Math.round(d.number),f.val(d.options.formatter(dpUI.helper.formatter(d.number,d.options.format))),d.options.afterChange.call(d,d,d.number)}var d=this,e=$(d);d.options=$.extend(c,b),d.options=$.extend(d.options,dpUI.helper.data2obj(d)),d.number=dpUI.helper.betterParseFloat(d.options.start),e.addClass("dpui-numberPicker");var f=e.find(".dpui-numberPicker-input");f.val(d.options.formatter(dpUI.helper.formatter(d.number,d.options.format))),d.options.min!==!1&&d.options.start==d.options.min&&e.addClass("dpui-numberPicker-min"),d.options.max!==!1&&d.options.start==d.options.max&&e.addClass("dpui-numberPicker-max"),d.set=function(b){a(b)},d.increase=function(){d.options.beforeIncrease.call(d,d,d.number),a(d.number+d.options.step),d.options.afterIncrease.call(d,d,d.number)},d.decrease=function(){d.options.beforeDecrease.call(d,d,d.number),a(d.number-d.options.step),d.options.afterDecrease.call(d,d,d.number)},e.find(".dpui-numberPicker-decrease").on("click",d.decrease),e.find(".dpui-numberPicker-increase").on("click",d.increase),f.on("change",function(){d.set(f.val())})})},function(a){a.fn.dpNumberPicker=function(a){if("string"==typeof a){if("increase"==a.toLowerCase())this.each(function(){this.increase()});else if("decrease"==a.toLowerCase())this.each(function(){this.decrease()});else if("set"==a.toLowerCase()&&arguments.length>1){var b=arguments[1];this.each(function(){this.set(b)})}}else dpUI.numberPicker(this.selector,a)}}(jQuery),define("numberpicker",["jquery"],function(){}),define("views/order",["backbone","models/orderUcmp","collections/payFee","models/payFee","helper","views/detailDateTimePicker/pickerForUcmpOrder","views/detailedLocationPicker/amapPicker","event","templates","views/order/addressBookContent","numberpicker","parsleyjs"],function(a,b,c,d,e,f,g,h,i,j){return a.View.extend({initialize:function(){window.ParsleyValidator.setLocale(e.getSiteLanguage()),$(".delay-content").show(),$(".confirm-content").show(),this.delayModal(),this.confirmModal(),this.handleModal(),this.$(".pay-type").data("value","1"),this.$(".weight").data("value","1"),this.model=new b,this.model.getSynServerTim(),this.priceCollections=new c,this.listenTo(this.model,"success",this.renderSuccess),this.listenTo(this.model,"fail",this.renderFail),this.listenTo(this.model,"error",this.renderError),this.listenTo(this.model,"parameterInvalid",this.parameterInvalid),this.$timePickerWrapper=this.$(".detail-date-time-input-for-order"),this.$validationCode=this.$(".validation-code");var a=this;dpUI.numberPicker("#np",{start:1,min:.5,max:999,step:.5,format:"#.#",formatter:function(a){return a},beforeChange:function(){var b=a.$(".dpui-numberPicker-input").val();Number(b)||$(".dpui-numberPicker-input").val("1.0")},afterChange:function(){a.$(".dpui-numberPicker-input").val();return a.$(".over-weight").hide(),Number(a.$(".dpui-numberPicker-input").val())>Number(a.$(".over-weight-forbidden-tip").attr("weight-valve"))?void a.$(".over-weight-forbidden-tip").show():(Number(a.$(".dpui-numberPicker-input").val())>Number(a.$(".addition-rate-because-over-weight").attr("weight-valve"))?a.$(".addition-rate-because-over-weight").show():a.$(".over-weight").hide(),a.$(".weight").data("value",Number(a.$(".dpui-numberPicker-input").val())),a.$(".weight").data("weight",Number(a.$(".dpui-numberPicker-input").val())),void(1==a.model.get("toMainland")&&a.model.has("senderLocationCityCode")&&a.model.has("receiverLocationCityCode")&&a.fetchPriceAndTimes()))}})},events:{"click .validation-code":"getValidationCode","change .sender-location input":"onSenderLocationChanged","change .receiver-location input":"onReceiverLocationChanged","click .submit-order .primary-button":"submitOrderWidthSignature","click .receiver-areas .toggle-tab":"onReceiverAreaChanged","change #is-valuation-service":"onValuationServiceChanged","input #valuation-service":"onValuationServicePriseChanged","click .dropdown-menu a":"onDropDownChange","click .weight a":"onWeightChange","click .product-type a":"onProductTypeChange","click .pay-type a":"onPayTypeChange","click .receiver-item a":"onReceiverItemChange","click .receiver-item .ok":"confirmReceiverItem","click .receiver-item .cancle":"cancelReceiverItem","regionModelUpdate .sender-location .detail-location-input":"senderRegionModelUpdate","regionModelUpdate .receiver-location .detail-location-input":"receiverRegionModelUpdate","input #sender-mobile":"onSenderMobilePhoneChange","keyup #receiver-mobile, #receiver-phone":"onReceiverMobilePhoneChange","blur #valuation-service":"onNumberBlur","keydown #sender-address-detail":"selectDetailFromAmap","click #hideTab":"hideDetailFromAmap","click #autocompleteResult div":"selectAddress","click .confirm":"closeConfirm","click .no":"closeDelay","click .yes":"proceed","change #date":"onSelectDateChange","click .term":"viewContent","click .address-book":"showAddressBookContent","addressSelected .address-content":"fillAddress","showAddressBook .address-content":"showAddressBookContentByTrigger","signatureExceed .address-content":"showSignatureExceedError","click .other-info-toggle":"toggleOtherInfoContent","click .leave-a-mesg li":"markMesg"},viewContent:function(a){$(".news-content").show()},getValidationCode:function(a){this.$(".error-for-validation-code").hide(),a.preventDefault(),a.stopPropagation();var b=this;e.imgVrfCodePC(b,a,b.getSMSCodefromServer)},getSMSCodefromServer:function(b,c,d){var f=$("#sender-mobile").val(),g=function(){$(".maskDiv").remove(),$(".imgVrfCodePanel").remove(),$(".imgVrfStyle").remove()};this.$(".error-for-validation-code").hide(),a.ajax({type:"POST",url:e.getRESTfulDomain("sms/order/"+f+"/notification?app=sms&answer="+d+"&lang="+e.getSiteLanguage()+"&region="+e.getSiteLocation()),error:function(a){403===a.status?($(".imgVrfCodeIpt").val(""),$(".imgVrfCodePic").attr("src",e.getRESTfulDomain("captcha/sms?force=true&time="+(new Date).getTime())),$(".imgVrfCodePanel .tip").show().text(_l("请输入正确的验证码"))):(g(),b.renderValidationFailed(a))},success:function(){g(),b.renderValidationSuccess()}})},renderValidationSuccess:function(){var a=this.$(".count-down-button");a.trigger("start"),this.$("#validation").val("")},renderValidationFailed:function(a){410==a.status?(this.$(".limit-send-sms").show(),this.$validationCode.trigger("reset")):(this.$(".get-validation-code-failed").show(),this.$validationCode.trigger("reset"))},onNumberBlur:function(a){var b=$(a.target),c=b.val(),d=Number(c);isNaN(d)||b.val(d)},validate:function(a){var b=/^1\d{10}$/;return b.test(a)},onReceiverMobilePhoneChange:function(){this.$("#receiver-mobile").val()||this.$("#receiver-phone").val()?this.$(".receiver-both-phone-mobile").hide():this.$(".receiver-both-phone-mobile").show()},onSenderMobilePhoneChange:function(){this.$(".error-for-validation-code").hide();var a=this.$("#sender-mobile").val();this.$(".validation-code").trigger("shouldBeActive",this.validate(a))},onDropDownChange:function(a){a.preventDefault();var b=$(a.target);0==b.parents(".product-type").length&&0==b.parents(".receiver-item").length&&b.parents(".btn-group").find("button").html(b.text()+'<span class="caret"></span>')},getLocationData:function(a){a=_.filter(a,function(a){return a.selectedRegion});var b,c,d,e,f,g;return 1===a.length?(b=a[0].selectedRegion.provinceRateCode,c=a[0].selectedRegion.provinceName,d=a[0].selectedRegion.rateCode,e=a[0].selectedRegion.name,f="",g=""):2===a.length?(b=""===a[0].selectedRegion.provinceRateCode||null==a[0].selectedRegion.provinceRateCode?a[0].selectedRegion.rateCode:a[0].selectedRegion.provinceRateCode,c=""===a[0].selectedRegion.provinceName||null==a[0].selectedRegion.provinceName?a[0].selectedRegion.name:a[0].selectedRegion.provinceName,d=a[0].selectedRegion.rateCode,e=a[0].selectedRegion.name,f="",g=a[1].selectedRegion.name):(b=a[1].selectedRegion.rateCode||a[2].selectedRegion.rateCode,c=a[1].selectedRegion.name,d=a[2].selectedRegion.rateCode,e=a[1].selectedRegion.name,f="",g=a[2].selectedRegion.name),{provinceCode:b,provinceName:c,cityCode:d,cityName:e,countyCode:f,countyName:g}},senderRegionModelUpdate:function(a,b){this.senderLocation=this.getLocationData(b.regionTabs)},receiverRegionModelUpdate:function(a,b){this.receiverLocation=this.getLocationData(b.regionTabs)},onPayTypeChange:function(a){a.preventDefault(),this.$(".pay-type").data("value",$(a.target).data("value"))},resetProductTyeList:function(){var a=$(".product-type").siblings("button");a.html(_l("请选择快递产品")+'<span class="caret"></span>'),this.model.set("productType","")},onProductTypeChange:function(a){a.preventDefault();var b=$(a.target);if(b.parents(".product-type-ul").length>0){if(b.parents(".product-type-ul").hasClass("product-not-allowed"))return void a.stopPropagation();b.parents(".btn-group").find("button").html(b.parents(".product-type-ul").attr("product-name")+'<span class="caret"></span>');var c=b.parents("a.product-type-link").data("value");this.model.set("productType",c),this.$(".product-type-not-select").hide()}},onWeightChange:function(a){a.preventDefault(),this.$(".weight").data("value",$(a.target).data("value")),this.$(".weight").data("weight",$(a.target).data("weight"))},onValuationServiceChanged:function(a){$(a.target).is(":checked")?(this.$(".valuation-service-content").show(),this.$("#valuation-service").trigger("input"),this.$(".valuation-service-not-select").hide(),this.$(".valuation-service-selected").show(),this.$(".valuation-service-content input").attr("data-parsley-required","true")):(this.$(".valuation-service-content").hide(),this.$(".valuation-service-not-select").show(),this.$(".valuation-service-selected").hide(),this.$(".valuation-service-content input").val("").removeAttr("data-parsley-required"))},onValuationServicePriseChanged:function(a){$(a.target).val($(a.target).val().replace(/[^0-9.]/g,""));var b;if(isNaN($(a.target).val())?(this.$("#valuation-service-prise").data("prise","").html(""),this.$(".valuation-service-selected").find(".number").text("sc"==e.getSiteLanguage()?"0 元":"RMB 0")):0==$(a.target).val()||""==$(a.target).val()?(this.$("#valuation-service-prise").data("prise","").html(""),this.$(".valuation-service-selected").find(".number").text("sc"==e.getSiteLanguage()?"0 元":"RMB 0")):0<$(a.target).val()&&$(a.target).val()<=500?b=1:500<$(a.target).val()&&$(a.target).val()<=1e3?b=2:1e3<$(a.target).val()&&$(a.target).val()<=5e5&&(b=(5*$(a.target).val()/1e3).toFixed(0)),$(a.target).val()>5e5?($(a.target).val($(a.target).val().substring(0,$(a.target).val().length-1)),this.$(".valuation-service-too-big").addClass("error").show()):this.$(".valuation-service-too-big").addClass("error").hide(),b){this.$("#valuation-service-prise").data("prise",b).html("￥"+b);
var c="sc"==e.getSiteLanguage()?$(a.target).val()+" 元":"RMB "+$(a.target).val();this.$(".valuation-service-selected").find(".number").text(c)}},onReceiverAreaChanged:function(a){a.preventDefault(),this.$(".receiver-areas .toggle-tab").removeClass("checked");var b=$(a.target);b.addClass("checked"),b.data("mainland")?(this.model.set("toMainland",!0),this.showProductTypeView(),this.medicineContentToggle(),this.$(".hide-in-hk").show(),this.$(".submit-order .primary-button").text(_l("下单"))):(this.model.set("toMainland",!1),$(".medicineordered").hide(),this.$(".hide-in-hk").hide(),this.$(".submit-order .primary-button").text(_l("预约"))),this.render()},onReceiverItemChange:function(a){a.preventDefault();var b=$(a.target).closest("a");b.find('input[type="checkbox"]').prop("checked")?b.find('input[type="checkbox"]').attr("checked",!1):b.find('input[type="checkbox"]').attr("checked",!0),b.find('input[type="checkbox"]').hasClass("medicineCBox")&&this.medicineContentToggle(),b.find('input[type="checkbox"]').hasClass("othersCBox")&&this.othersContentToggle();var c=this,d="";c.$(".receiver-item").find('input[type="checkbox"]:checked').each(function(){$(this).next("label").text()!=_l("其他")?d+=$(this).next("label").text()+",":1==c.$(".receiver-item").find('input[type="checkbox"]:checked').length&&(d+=$(this).next("label").text()+",")}),""==d?(c.$(".receiver-item").data("value",""),c.$(".receiver-item-not-select").addClass("error").show(),$(a.target).parents(".btn-group").find(".dropdown-toggle").html(_l("请选择寄托物")+'<span class="caret"></span>')):(d=d.substring(0,d.length-1),c.$(".receiver-item").data("value",d),c.$(".receiver-item-not-select").hide(),$(a.target).parents(".btn-group").find(".dropdown-toggle").html(d+'<span class="caret"></span>')),a.stopPropagation()},confirmReceiverItem:function(a){a.preventDefault()},cancelReceiverItem:function(a){a.preventDefault(),this.$(".receiver-item").find('input[type="checkbox"]:checked').length>0&&a.stopPropagation(),$(a.target).parents(".btn-group").find(".dropdown-toggle").html(_l("请选择寄托物")+'<span class="caret"></span>'),this.$(".receiver-item").find('input[type="checkbox"]').prop("checked",!1),this.medicineContentToggle(),this.othersContentToggle(),this.$(".receiver-item").data("value",""),this.$(".receiver-item-not-select").addClass("error").show()},medicineContentToggle:function(){1==this.$(".medicineCBox").prop("checked")?(this.$(".medicineContent").show(),$(".medicineordered").show(),this.$(".medicine-type-select").addClass("error").show()):(this.$(".medicineContent").hide(),this.$(".medicineContent").find("textarea").val(""),$(".medicineordered").hide(),this.$(".medicine-type-select").hide())},othersContentToggle:function(a){1==this.$(".othersCBox").prop("checked")?(this.$(".othersContent").show(),this.$(".othersContent").find("input").attr("data-parsley-required","true")):(this.$(".othersContent").hide(),this.$(".othersContent").find("input").val(""),this.$(".othersContent").find("input").attr("data-parsley-required","false"))},isFormsValidated:function(){var a=!0,b=!0,c=!0,d=!0,e=!0,f=!0;if(this.model.get("toMainland")){if(c=this.$(".date-form").parsley().validate(),b=this.$(".receiver-form").parsley().validate(),a=this.$(".sender-form").parsley().validate(),this.model.get("productType")||(this.$(".product-type-not-select").addClass("error").show(),d=!1),""===this.$("#receiver-mobile").val()&&""===this.$("#receiver-phone").val())return this.$(".receiver-both-phone-mobile").show(),!1}else c=this.$(".date-form").parsley().validate(),a=this.$(".sender-form").parsley().validate();return this.$("#leave-other-mesg").parsley().validate().length>0&&1!=this.$("#leave-other-mesg").parsley().validate()&&(e=!1),this.$(".leave-a-mesg li.active").length>3&&(f=!1,this.$(".leave-a-mesg-limit").show()),a&&b&&c&&d&&e&&f},submitOrderWidthSignature:function(){this.model.get("premobile")&&this.model.get("premobile")==this.$("#sender-mobile").val()&&this.model.get("signature")?this.onSubmitOrder():this.getSignature(this.onSubmitOrder)},submitOrderWidthAgree:function(){var b="",c="";this.$("#medicineContent").is(":visible")&&(b=this.$("#medicineContent").val()),this.$("#othersContent").is(":visible")&&(c=this.$("#othersContent").val());var d=_.compact([this.$(".receiver-item").data("value"),c]).join("");data.receiver={company:this.$("#receiver-company").val(),contactName:this.$("#receiver-name").val(),phone:this.$("#receiver-phone").val(),mobile:this.$("#receiver-mobile").val(),location:this.receiverLocation,address:this.$("#receiver-address-detail").val(),prodType:this.model.get("productType"),payType:this.$(".pay-type").data("value"),cargoName:d,desc:b,isSecureValue:this.$("#is-valuation-service").is(":checked")?1:0,secureValue:this.$("#valuation-service").val(),securePrise:this.$("#valuation-service-prise").data("prise")};var f={countryCode:"CN",langCode:e.getSiteLanguage(),mediaCode:"PC.OWF",systemCode:"ESG-OWF-CORE",productCode:this.model.get("productType"),srcCode:this.$(".sender-location input").data("rate-code"),destCode:this.$(".receiver-location input").data("rate-code"),weight:this.$(".weight").data("weight"),sendTime:moment(data.reserveTime).format("YYYY-MM-DD HH:mm:ss")},g=this.$(".weight").data("weight");if(Number(g)>=21){var h=this;a.ajax({type:"POST",url:e.getUcmpOrderRemoteUrl("api/orderService/inquireTransportWarning"),data:JSON.stringify(f),contentType:"application/json; charset=UTF-8",success:function(a){var b=a.result.timeAfterDelay;null!=b&&""!=b?"T4"==h.model.get("productType")||"ZT4"==h.model.get("productType")?($(".grapTime").html(moment(b).format("LL")+moment(b).format("HH:mm")),h.showDelay()):h.showConfirm():h.model.submitOrder(data)}})}else this.model.submitOrder(data)},onSubmitOrder:function(){if(this.isFormsValidated()){var a=this.$("#date"),b="",c="";this.model.get("toMainland")&&a.data("time")&&(b=moment(this.$("#date").data("time")).format("YYYY-MM-DD HH:mm:ss"),c=moment(this.$("#date").data("time")).add("hour",1).format("YYYY-MM-DD HH:mm:ss"));var d=[];if(this.$(".leave-a-mesg li").each(function(){$(this).hasClass("active")&&d.push($(this).find(".mesg").html())}),d.push(this.$("#leave-other-mesg").val()),d=_.compact(d).join(),data={orderRemark:d,weight:this.$(".weight").data("weight")||this.$(".weight").val(),reserveTime:a.data("time")?a.data("time"):this.model.get("synServerTim").format(),expectStartTm:b,expectFinishTm:c,sender:{company:this.$("#sender-company").val(),contactName:this.$("#sender-name").val(),phone:this.$("#sender-phone").val(),mobile:this.$("#sender-mobile").val(),location:this.senderLocation,address:this.$("#sender-address-detail").val()}},this.model.set("code",this.$("#validation").val()),this.model.set("mobile",this.$("#sender-mobile").val()),this.model.get("toMainland"))if(this.$("#agree-term-content").is(":checked"))this.submitOrderWidthAgree();else{this.viewContent(),$("#term-content").modal("show");var e=this;$("#agreeTermContent button").one("click",function(){e.$("#agree-term-content").attr("checked",!0),e.submitOrderWidthAgree()})}else this.model.submitOrder(data)}else this.$(".errorgroup .must-input-check").show()},handleModal:function(){var a=i.modal({title:"",id:"term-content",body:$(".news-content").html(),fade:!0});$(".news-content").html(a)},delayModal:function(){var a=i.modal({title:"",id:"delay-content",body:$(".delay-content").html(),fade:!0});$(".delay-content").html(a)},showDelay:function(){$("#delay-content").modal("show")},showConfirm:function(){$("#confirm-content").modal("show")},confirmModal:function(){var a=i.modal({title:"",id:"confirm-content",body:$(".confirm-content").html(),fade:!0});$(".confirm-content").html(a)},closeConfirm:function(){$("#confirm-content").modal("hide")},closeDelay:function(){$("#delay-content").modal("hide")},proceed:function(){$("#delay-content").modal("hide"),this.model.submitOrder(data)},renderFail:function(a){this.showSignatureExceedError(),this.$(".errorgroup").children().find("div").hide(),"PARAMETER_ERROR_BOOKTIME_OUTTIME".toLowerCase()===a.errorCode.toLowerCase()||"PARAMETER_ERROR_BOOKTIME_NOSERVER".toLowerCase()===a.errorCode.toLowerCase()||"EXPECTSTARTTM_ERROR_OUTTIME".toLowerCase()===a.errorCode.toLowerCase()?this.$(".errorgroup .out-of-service-time").show():a.errorCode.toLowerCase().indexOf("ORDER_ERROR_ISSPIT".toLowerCase())>=0?this.$(".errorgroup .malicious-order").show():"NO_ANY_EXPRESS_SERVICE".toLowerCase()===a.errorCode.toLowerCase()?this.$(".errorgroup .delivery-services-not-available").show():"ONLY_SEND_SERVICE".toLowerCase()===a.errorCode.toLowerCase()?this.$(".errorgroup .abnormal-account").show():this.$(".errorgroup .invalid-input").show()},renderError:function(a){if(this.$(".errorgroup").children().find("div").hide(),"403"==a.status){var b=JSON.parse(a.responseText);"003"===b.code?this.$(".errorgroup .verification-code-expired").show():"004"===b.code?this.$(".errorgroup .verification-code-invalid").show():this.$(".errorgroup .invalid-input").show()}else"504"==a.status?this.showSignatureExceedError():this.$(".errorgroup .invalid-input").show()},renderSuccess:function(){this.$el.hide(),this.model.get("toMainland")&&$(".brief-order").html(i.briefOrder({data:this.model.get("briefOrderJSON")})).show(),$(".order-success").show(),window.scrollTo(0,0)},render:function(){if(this.model.has("firstPickedStartDateTime")&&this.model.has("firstPickedEndDateTime")){var a=this.model.get("firstPickedStartDateTime"),b=this.model.get("firstPickedEndDateTime"),c=this.model.get("secondPickedStartDateTime"),d=this.model.get("secondPickedEndDateTime"),e=this.model.get("thirdPickedStartDateTime"),g=this.model.get("thirdPickedEndDateTime"),h=this.model.get("synServerTim");h.isAfter(a)&&h.isBefore(b)?this.$("#date").val(_l("一小时内")):this.$("#date").val(""),this.$("#date").data("time",""),this.TimePickerView&&(this.TimePickerView.remove(),this.$(".detail-date-time-input-for-order-container").append(this.$timePickerWrapper)),this.TimePickerView=new f({el:this.$(".detail-date-time-input-for-order"),isToManland:this.model.get("toMainland"),synServerTim:h.clone(),firstPickedStartDateTime:a.clone(),firstPickedEndDateTime:b.clone(),secondPickedStartDateTime:c.clone(),secondPickedEndDateTime:d.clone(),thirdPickedStartDateTime:e.clone(),thirdPickedEndDateTime:g.clone()})}},onSenderLocationChanged:function(){this.$("#date").removeData("time");var a=this.$(".sender-location input").data("rate-code");this.model.set("senderLocationCityCode",a),this.render(),this.$(".tab").hide(),this.showProductTypeView()},onReceiverLocationChanged:function(){var a=this.$(".receiver-location input").data("rate-code");this.model.set("receiverLocationCityCode",a),this.showProductTypeView()},selectDetailFromAmap:function(a){var b=$(a.target),c=(b.val(),this.$("#sender-address").val()),d="",e="";c.split("-").length>2?(d=c.split("-")[1],e=c.split("-")[2]):(d=c.split("-")[0],e=c.split("-")[1]),new g({el:b,city:d,district:e}),this.$("#hideTab").show()},hideDetailFromAmap:function(a){this.$(".tab").hide(),this.$("#hideTab").hide()},selectAddress:function(a){var b=$(a.currentTarget).find("a")[0].innerHTML;this.$("#sender-address-detail").val(b),this.$(".tab").hide()},parameterInvalid:function(){this.$(".error .invalid-input").show()},fetchPriceAndTimes:function(){var a=this;a.priceCollections.url=a.url(),a.priceCollections.fetch({error:function(){var b=new d;b.attributes.cargoTypeCode="C201",b.attributes.cargoTypeName="",b.attributes.currencyName="",b.attributes.destCurrencyName="",b.attributes.destFreight=_l("以收派员巴枪价格为准"),b.attributes.destFuelCost=0,b.attributes.freight=_l("以收派员巴枪价格为准"),b.attributes.fuelCost=0,b.attributes.limitTypeCode="T4",b.attributes.limitTypeName="顺丰标快",b.attributes.weight=1,b.attributes.deliverTime="约2-4天",b.attributes.addTime=null,b.attributes.distanceTypeCode="",b.attributes.distanceTypeName="",b.attributes.expectArriveTm=null,b.attributes.otherService=null,b.attributes.internet=!1,b.attributes.closedTime=null,b.attributes.orgionView="1",b.attributes.destView="1",b.attributes.destFuelFlg=!0,b.attributes.weightUnit="kg",b.attributes.destWeightUnit="kg",b.attributes.destWeight=1,b.attributes.defaultFlg=!0,a.priceCollections.models=[],a.priceCollections.models.push(b);var c=a.priceCollections.toJSON();a.renderProductTypeList(c)},success:function(){var b=a.priceCollections.toJSON();a.renderProductTypeList(b)}})},url:function(){var a=this,b=a.$("#date"),c=b.data("time")?moment(b.data("time")).format():a.model.get("synServerTim").format(),d="origin="+a.$(".sender-location input").data("code")+"&dest="+a.$(".receiver-location input").data("code")+"&weight="+a.$(".weight").val()+"&time="+encodeURIComponent(c)+"&queryType=2";return e.getRESTfulDomain("rate?"+d)},renderProductTypeList:function(a){var b=_.groupBy(a,"limitTypeCode"),c=_.first(b.T1||b.T104),d=_.first(b.T8||b.T801),e=_.first(b.T4),f=_.first(b.T6),g=this,h=g.$("#date"),j=h.data("time")?moment(h.data("time")):g.model.get("synServerTim").clone(),k=g.model.get("firstPickedEndDateTime").clone(),l=g.model.get("secondPickedEndDateTime").clone(),m=g.model.get("thirdPickedEndDateTime").clone(),n=_.find([k,l,m],function(a){return j.get("date")===a.get("date")});_.isUndefined(n)||_.isNull(n)||_.isEmpty(n)||(c&&(_.isEmpty(c.closedTime)||moment(n.format("YYYY-MM-DD")+" "+c.closedTime,"YYYY-MM-DD HH:mm").isAfter(n)&&(c.closedTime=n.clone())),d&&(_.isEmpty(d.closedTime)||moment(n.format("YYYY-MM-DD")+" "+d.closedTime,"YYYY-MM-DD HH:mm").isAfter(n)&&(d.closedTime=n.clone())),e&&(e.closedTime=n.format()),f&&(f.closedTime=n.format())),g.$(".product-type").empty().append(i.orderProductTypeList({t1:c,t8:d,t4:e,t6:f})),g.resetProductTyeList()},showProductTypeView:function(){1==this.model.get("toMainland")&&this.model.has("senderLocationCityCode")&&this.model.has("receiverLocationCityCode")&&this.fetchPriceAndTimes()},onSelectDateChange:function(){1==this.model.get("toMainland")&&this.model.has("receiverLocationCityCode")&&this.fetchPriceAndTimes()},getSignature:function(b){if(1==this.$("#sender-mobile").parsley().validate()){var c=this.$("#sender-mobile").val();if(1==this.$("#validation").parsley().validate()){var d=this.$("#validation").val(),f=this;a.ajax({type:"get",url:e.getRESTfulDomain("cx/"+c+"/signature"),headers:{"SMS-Verification-App":"order","SMS-Verification-Code":d,"SMS-Verification-Mobile":c},success:function(a){f.model.set("signature",a.signature),f.model.set("premobile",c),f.$(".error-for-validation-code").hide(),b.bind(f)()},error:function(a){if(f.$(".error-for-validation-code").hide(),f.$("#validation").focus(),403==a.status){var b=JSON.parse(a.responseText);"003"===b.code?f.$(".limit-send-sms").show():"004"===b.code?f.$(".validation-code-error").show():"002"===b.code?f.$(".validation-not-send").show():f.$(".validation-code-network-error").show()}else f.$(".validation-code-network-error").show()}})}else this.$("#validation").focus()}else this.$("#sender-mobile").focus()},showAddressBookContent:function(a){a.preventDefault(),this.addressBookFillOption=this.$(a.target).data("option"),this.model.get("premobile")&&this.model.get("premobile")==this.$("#sender-mobile").val()&&this.model.get("signature")?this.showAddressBook():this.getSignature(this.showAddressBook)},removeAddressBookView:function(){this.addressBook&&this.addressBook.remove()},showAddressBook:function(){this.removeAddressBookView(),this.$(".address-content-wrapper").append('<div class="address-content"></div>'),this.addressBook=new j({el:this.$(".address-content"),mobile:this.$("#sender-mobile").val(),signature:this.model.get("signature"),fillOption:this.addressBookFillOption})},showAddressBookContentByTrigger:function(a,b){this.$(".address-book[data-option="+b+"]").trigger("click")},fillAddress:function(a,b){if("sender"==this.addressBookFillOption){this.senderLocation=b.location,this.$("#sender-name").val(b.contactName),this.$("#sender-company").val(b.companyName);var c=_.uniq(_.compact([b.location.provinceName,b.location.cityName,b.location.countyName]),!0).join("-");this.$("#sender-address").val(c).attr("titlt",c).data("code",b.location.countyCode).data("rate-code",b.location.cityCode),this.$("#sender-address-detail").val(b.address),this.$("#sender-mobile").val(b.contactTel),this.$("#sender-phone").val(b.contactPhone),this.onSenderLocationChanged()}else{this.receiverLocation=b.location,this.$("#receiver-name").val(b.contactName),this.$("#receiver-company").val(b.companyName);var c=_.uniq(_.compact([b.location.provinceName,b.location.cityName,b.location.countyName]),!0).join("-");this.$("#receiver-address").val(c).attr("title",c).data("code",b.location.countyCode).data("rate-code",b.location.cityCode),this.$("#receiver-address-detail").val(b.address),this.$("#receiver-mobile").val(b.contactTel),this.$("#receiver-phone").val(b.contactPhone),this.onReceiverLocationChanged()}},showSignatureExceedError:function(){this.model.set("signature",""),this.removeAddressBookView(),this.$("#validation").focus(),this.$(".signature-exceed-error").show()},toggleOtherInfoContent:function(a){this.$(".other-info-content").slideToggle();var b=this.$(a.target).closest(".other-info-toggle");b.find("span").hasClass("aicon-chevron-double-up")?b.find("span").removeClass("aicon-chevron-double-up").addClass("aicon-chevron-double-down"):b.find("span").removeClass("aicon-chevron-double-down").addClass("aicon-chevron-double-up")},markMesg:function(a){var b=this.$(a.target).closest("li");if(3==this.$(".leave-a-mesg li.active").length){if(!b.hasClass("active"))return void this.$(".leave-a-mesg-limit").show();b.removeClass("active")}else b.toggleClass("active");this.$(".leave-a-mesg-limit").hide()}})}),define("views/store/input",["backbone","helper","jquery"],function(a,b,c){var d=1,e=2,f="hk",g="tw",h=852,i=853,j=886;return a.View.extend({events:{"click .primary-button":"onSearch","change input":"inputChanged","keyup .virtual-address-code, .address-keyword":"inputChanged","change .address":"addressPickerChanged","regionModelUpdate .detail-location-input":"regionModelUpdate","click .switcher":"switchSearching","click .storeTypeList.dropdown-menu a":"selectStoreType"},initialize:function(a){this.switchStatus=d,this.$searchButton=this.$el.find(".primary-button"),this.taiwanStores=a.taiwanStores,this.chineseStores=a.chineseStores,this.map=a.map,this.googleMap=a.googleMap,this.$(".detail-location-input").data("max-A000710000",5),this.$(".detail-location-input").data("max-A000810000",5),this.$(".detail-location-input").data("max-852",5),this.$(".detail-location-input").data("max-886",5),this.$(".detail-location-input").data("hide-fussy-selector",!0),this.listenTo(this.taiwanStores,"notFound",this.showNotFoundError),this.listenTo(this.taiwanStores,"virtualNotFound",this.showVirtualNotFoundError),this.listenTo(this.chineseStores,"notFound",this.showNotFoundError),this.listenTo(this.chineseStores,"virtualNotFound",this.showVirtualNotFoundError),this.listenTo(this.chineseStores,"sync",this.resetView),this.listenTo(this.taiwanStores,"sync",this.resetView),this.handleQueryStringFromURL()},showMap:function(){c(".store-map-container").removeClass("hide"),this.isNotAboardForRate()?(c("#china-store-google-map").removeClass("hide"),c("#china-store-map").addClass("hide")):(c("#china-store-google-map").addClass("hide"),c("#china-store-map").removeClass("hide"))},hideMap:function(){c(".store-map-container").addClass("hide"),c(".china-store-google-map").addClass("hide"),c(".china-store-map").addClass("hide")},addressPickerChanged:function(){this.isTaiWanAddress||this.$(".address-keyword").show()},switchSearching:function(a){a.preventDefault(),this.clearError();var b=c(a.target);this.switchStatus===d?(b.text(b.data("text-picker")),this.$(".store-address-picker").hide(),this.$(".to-mark").hide(),this.$(".address-keyword").hide(),this.$(".address-keyword").val(""),this.$(".virtual-address-code").show(),this.switchStatus=e,this.inputChanged()):(b.text(b.data("text-virtual")),this.$(".store-address-picker").show(),this.$(".to-mark").show(),""!==this.$(".address").val()&&this.$(".address-keyword").show(),this.$(".virtual-address-code").hide(),this.switchStatus=d,this.inputChanged())},handleQueryStringFromURL:function(){var a=b.getQueryStrings();a&&a.locationName&&a.locationCode&&a.locationCountryCode&&a.lang===b.getSiteLanguage()&&(this.$searchButton.button("loading"),this.$("input.address").data("code",a.locationCode),this.$("input.address").val(a.locationName),this.$("input.address-keyword").val(a.locationKeyword).show(),this.isTaiWanAddress="A000710000"===a.locationCountryCode||j==a.locationRateCode,this.isNotAboardForRate()?this.googleMap.searchByAddrName(a.locationName+(a.locationKeyword||""),b.getSiteLanguage()):this.isTaiWanAddress?this.taiwanStores.searchStores(a.locationName+"-"+(a.locationKeyword||"")):this.map.searchByAddressName(a.locationName+(a.locationKeyword||"")))},resetView:function(){this.$searchButton.button("reset"),this.showMap()},inputChanged:function(){if(this.switchStatus===d){var a=this.$(".address-keyword").val().length>20;a?this.$(".keyword-error").show():this.$(".keyword-error").hide(),this.$searchButton.toggleClass("disabled",_.isEmpty(this.$(".address").data("code"))||a)}else this.$searchButton.toggleClass("disabled",_.isEmpty(this.$(".virtual-address-code").val()))},regionModelUpdate:function(a,b){var c=b.regionTabs;this.isTaiWanAddress=_.find(c,function(a){return a.selectedRegion?"A000710000"===a.selectedRegion.code:!1})},validateVirtualAddressCode:function(){var a=!1,b=this.$(".virtual-address-code").val(),c=new RegExp(/[a-zA-Z0-9]{3,33}$/);new RegExp(/[a-zA-Z0-9]{3,33}$/);return a=c.test(b)},isNotAboardForRate:function(){var a=!1,c=f==b.getSiteLocation()||g==b.getSiteLocation();if(this.switchStatus===d){var e=this.$(".address").data("rate-code");if(!e){var k=b.getQueryStrings();k&&k.locationRateCode&&(e=k.locationRateCode)}a=c&&(e==h||e==i||e==j)}else{var l=this.$(".virtual-address-code").val();a=c&&(_.indexOf(l,"SF852")>=0||_.indexOf(l,"SF853")>=0||_.indexOf(l,"SF886")>=0||_.indexOf(l,"TW")>=0)}return a},isTaiWanAddr:function(){var a=b.getQueryStrings();return a&&a.locationName&&a.locationCode&&a.locationCountryCode&&a.lang===b.getSiteLanguage()?"A000710000"===a.locationCountryCode:!1},onSearch:function(){this.clearError(),this.$searchButton.button("loading");var a=this.$(".virtual-address-code").val();this.switchStatus===d?this.isNotAboardForRate()?this.googleMap.searchByAddrName(this.getAddressName(),b.getSiteLanguage()):this.isTaiWanAddr()||this.isTaiWanAddress?this.taiwanStores.searchStores(this.getAddressName()):this.map.searchByAddressName(this.getAddressName()):this.validateVirtualAddressCode()?this.isNotAboardForRate()?this.chineseStores.searchByVirtualAddressCodeHMT(a,this.googleMap):_.indexOf(a,"SF886")>=0||_.indexOf(a,"TW")>=0?this.taiwanStores.searchByVirtualAddressCode(a):this.chineseStores.searchByVirtualAddressCode(a):(this.$searchButton.button("reset"),this.showVirtualAddressCodeError())},clearError:function(){this.$(".error").hide()},showNotFoundError:function(){this.clearError(),this.$searchButton.button("reset"),this.$(".not-found-error").show(),this.hideMap()},showVirtualNotFoundError:function(){this.clearError(),this.$searchButton.button("reset"),this.$(".not-found-virtual-error").show(),this.hideMap()},showVirtualAddressCodeError:function(){this.clearError(),this.$searchButton.button("reset"),this.$(".virtual-address-code-error").show(),this.hideMap()},getAddressName:function(){return this.isTaiWanAddr()||this.isTaiWanAddress?this.$(".address").val():this.$(".address").val()+this.$(".address-keyword").val()},selectStoreType:function(a){var b=c(a.currentTarget),d=b.text();this.$(".storeType").val(d),window.storeType=b.data("code")}})}),define("views/store/map",["backbone"],function(a){return a.View.extend({events:{"click .close":"closeTip"},initialize:function(){this.listenTo(this.collection,"sync",this.render)},closeTip:function(){this.model.closeOverlayTip()},render:function(){$(".store-result").hide(),this.$el.show()}})}),define("views/store/taiwanStoresResult",["backbone","templates","jquery"],function(a,b,c){return a.View.extend({initialize:function(){this.listenTo(this.collection,"sync",this.render)},render:function(){c(".store-result").hide(),this.$el.show(),this.$el.find(".results").html(b.taiwanStoresTable({stores:this.collection.toJSON()}))}})}),define("models/store",["backbone","templates"],function(a,b){var c="1",d="2",e="3",f="4",g="5";return a.Model.extend({parse:function(a){return null==window.storeType?a:window.storeType==a.storeType?a:void 0},parseData:function(){var a;this.has("serviceContent")&&(a=this.get("serviceContent"),_.indexOf(a,c)>=0&&this.set("service_content_type",this.getCMSLabels().serviceContent1),_.indexOf(a,d)>=0&&this.set("service_content_type",this.getCMSLabels().serviceContent2),_.indexOf(a,e)>=0&&this.set("service_content_type",this.getCMSLabels().serviceContent3),_.indexOf(a,f)>=0&&this.set("service_content_type",this.getCMSLabels().serviceContent4),_.indexOf(a,g)>=0&&this.set("service_content_type",this.getCMSLabels().serviceContent5),this.set("telephone",this.get("tel")),this.set("virtual_addr",this.get("code")))},parseTWData:function(){var a;this.has("service_content_type")&&(a=this.get("service_content_type"),_.indexOf(a,c)>=0&&this.set("service_content_type",this.getCMSLabels().serviceContent1),_.indexOf(a,d)>=0&&this.set("service_content_type",this.getCMSLabels().serviceContent2),_.indexOf(a,e)>=0&&this.set("service_content_type",this.getCMSLabels().serviceContent3),_.indexOf(a,f)>=0&&this.set("service_content_type",this.getCMSLabels().serviceContent4),_.indexOf(a,g)>=0&&this.set("service_content_type",this.getCMSLabels().serviceContent5))},updateServices:function(){var a;if(this.has("serviceContent")){a=this.get("serviceContent");var b=[];_.indexOf(a,c)>=0&&b.push({flag:"self-send",name:this.getCMSLabels().serviceContent1}),_.indexOf(a,d)>=0&&b.push({flag:"self-get",name:this.getCMSLabels().serviceContent2}),_.indexOf(a,e)>=0&&b.push({flag:"self-send-get",name:this.getCMSLabels().serviceContent3}),_.indexOf(a,f)>=0&&b.push({flag:"personal-address",name:this.getCMSLabels().serviceContent4}),_.indexOf(a,g)>=0&&b.push({flag:"convenient",name:this.getCMSLabels().serviceContent5}),this.set("services",b)}},getType:function(){var a;return a="1"===this.get("storeType")?this.getCMSLabels().type1:"2"===this.get("storeType")?this.getCMSLabels().type2:"3"===this.get("storeType")?this.getCMSLabels().type3:"4"===this.get("storeType")?this.getCMSLabels().type4:"5"===this.get("storeType")?this.getCMSLabels().type5:this.getCMSLabels().type5},getLabel:function(){var a={};return a.type=this.getType(),this.get("code")?"SF"===this.get("code").substring(0,2).toUpperCase()?a.code=this.get("code"):a.code="SF"+this.get("code"):a.code="",a},getImageUrl:function(){var a;return"1"===this.get("storeType")?this.get("selfSendDiscount")||this.get("selfPickupDiscount")?(a=this.getCMSLabels().type6Image,this.set("tipImageUrl",this.getCMSLabels().type6ImageTip)):(a=this.getCMSLabels().type1Image,this.set("tipImageUrl",this.getCMSLabels().type1ImageTip)):"2"===this.get("storeType")?(a=this.getCMSLabels().type2Image,this.set("tipImageUrl",this.getCMSLabels().type2ImageTip)):"3"===this.get("storeType")?(a=this.getCMSLabels().type3Image,this.set("tipImageUrl",this.getCMSLabels().type3ImageTip)):"4"===this.get("storeType")?(a=this.getCMSLabels().type4Image,this.set("tipImageUrl",this.getCMSLabels().type4ImageTip)):"5"===this.get("storeType")?(a=this.getCMSLabels().type5Image,this.set("tipImageUrl",this.getCMSLabels().type5ImageTip)):(a=this.getCMSLabels().type5Image,this.set("tipImageUrl",this.getCMSLabels().type5ImageTip)),a=a.substring(a.indexOf("/resource")),location.protocol+"//"+location.host+a},getLabelOption:function(){var a=new MLabelOptions;return a.content="",a.hasBorder=!1,a.hasBackground=!1,a.labelPosition=new MPoint(12,-8),a},getMarkerOptions:function(){this.updateServices();var a={};return a.icon=this.getImageUrl(),a},getContent:function(){var a=b.storePoint({store:this.toJSON(),label:this.getLabel()}).replace(/(\r\n|\n|\r)/gm,"");return a},getCMSLabels:function(){return window._cmsLabels},getMarker:function(){var a=this.getMarkerOptions();this.get("lng")&&this.get("lat")&&(a.position=new AMap.LngLat(this.get("lng"),this.get("lat")));var b=new AMap.Marker(a);return b},getMarkerTipContent:function(a){var c=b.storePoint({tipImageUrl:a.getImageUrl(),services:a.updateServices(),store:a.toJSON(),label:a.getLabel()});return c.replace(/(\r\n|\n|\r)/gm,"")},getMapBarMarker:function(){var a=new MPoint(this.get("lng"),this.get("lat"));this.updateServices(),this.getImageUrl();var c=b.storePoint({store:this.toJSON(),label:this.getLabel()}).replace(/(\r\n|\n|\r)/gm,""),d=new MMarker(a,new MIcon(this.getImageUrl(),32,32),new MInfoWindow("",c));return this.set("markerId",d.id),d}})}),define("collections/chineseStores",["backbone","underscore","models/store","helper"],function(a,b,c,d){return a.Collection.extend({model:c,url:d.getRESTfulDomain("store"),searchByVirtualAddressCode:function(a){this.searchStores({virtualAddressCode:a})},searchStores:function(a){var c="notFound";b.has(a,"virtualAddressCode")&&(c="virtualNotFound"),this.fetch({data:a,error:function(a,b){404===b.status?a.trigger(c):a.trigger(c)}})},searchByVirtualAddressCodeHMT:function(a,b){this.searchStoresHMT({virtualAddressCode:a},b)},searchStoresHMT:function(a,c){var d="notFound";b.has(a,"virtualAddressCode")&&(d="virtualNotFound"),this.fetch({data:a,success:function(a){c.drawPoint(a)},error:function(a,b){404===b.status?a.trigger(d):a.trigger(d)}})}})}),define("collections/taiwanStores",["backbone","underscore","models/store","helper"],function(a,b,c,d){return a.Collection.extend({model:c,searchStores:function(a){var b=a.split("-");this.url=d.getRESTfulDomain("store/taiwan"),this.fetch({data:{province:b[0],city:b[1],county:b[2],lang:"tw"===d.getSiteLocation().toLowerCase()?"tc":"sc",start:0,end:100},success:function(a){a.each(function(a){a.parseTWData()})},error:function(a,b){404===b.status&&a.trigger("notFound")}})},searchByVirtualAddressCode:function(a){this.url=d.getRESTfulDomain("store"),this.fetch({data:{virtualAddressCode:a},success:function(a){a.each(function(a){a.parseData()})},error:function(a,b){404===b.status&&a.trigger("virtualNotFound")}})},parse:function(a){return a.result?a.result:a}})}),define("models/mapFix",["underscore"],function(a){var b={"香港香港岛上环":{Y:"22.283696",X:"114.157047"},"香港香港岛西环":{Y:"22.282147",X:"114.140739"},"香港香港岛鸭脷洲":{Y:"22.23818",X:"114.159794"},"香港香港岛北角":{Y:"22.288064",X:"114.20567"},"香港香港岛湾仔":{Y:"22.2761507532427",X:"114.175157546997"},"香港新界葵涌":{Y:"22.3619033549806",X:"114.134945869445"},"香港新界马鞍山":{Y:"22.421899",X:"114.236526"},"香港新界将军澳":{Y:"22.304602",X:"114.264615"},"香港九龙长沙湾":{Y:"22.332174",X:"114.161038"},"香港新界大埔":{Y:"22.44324",X:"114.17078"},"香港九龙慈云山":{Y:"22.345432",X:"114.205306"},"香港九龙观塘":{Y:"22.310935",X:"114.227943"},"香港九龙荔枝角":{Y:"22.334833",X:"114.153013"},"香港九龙美孚":{Y:"22.336778537476",X:"114.140181541442"},"香港九龙九龙湾":{Y:"22.317584",X:"114.216184"},"香港九龙彩虹":{Y:"22.331757",X:"114.212065"},"香港离岛大屿山":{X:"114.010277",Y:"22.279089"},"澳门路环":{X:"113.559153",Y:"22.116473"},"香港离岛马湾":{X:"114.062328",Y:"22.346307"}},c={"香港香港岛":{Y:"22.2761507532427",X:"114.175157546997"},"香港离岛":{X:"113.941032",Y:"22.278811"},"香港新界":{Y:"22.3619033549806",X:"114.134945869445"}},d=function(d){var e=c[d];if(e)return e;var f=a.find(a.keys(b),function(b){return-1!==a.indexOf(d,b)});return f?b[f]:void 0};return{searchFixies:d}}),define("models/map",["backbone","models/mapFix"],function(a,b){return a.Model.extend({initialize:function(){var a={};a.zoom=4,a.center=new AMap.LngLat(104.195397,35.86166),a.resizeEnable=!0,a.scrollWheel=!0,a.lang="zh_cn";var b=new AMap.Map(this.get("mapContainer"),a);b.plugin(["AMap.ToolBar"],function(){b.addControl(new AMap.ToolBar)}),b.plugin(["AMap.Scale"],function(){b.addControl(new AMap.Scale)});var c=new AMap.PlaceSearch({pageSize:1,pageIndex:1});this.mapObj=b,this.placeSearch=c,
this.listenTo(this.get("stores"),"sync",this.storesChange),_.bindAll(this,"openOverlayTip","onGeocodeReturn")},storesChange:function(){var a=this;window.setTimeout(function(){a.clearPoints(),a.get("stores").each(function(b){b.getMarker().getPosition()&&a.drawPoint(b.getMarker(),b.getContent())}),a.setZoomAndCenter()},500)},drawPoint:function(a,b){a.setMap(this.mapObj),AMap.event.addListener(a,"click",function(){var c=new AMap.InfoWindow({isCustom:!0,content:b,offset:new AMap.Pixel(8,-41)});c.open(a.getMap(),a.getPosition())})},clearPoints:function(){this.mapObj.clearMap()},searchByAddressName:function(a){a=a.replace(/-/g,"");var c=b.searchFixies(a);if(c)return void this.onGeocodeReturn({list:[{x:c.X,y:c.Y,range:window._cmsLabels.queryRadius}]});var d=this.onGeocodeReturn;this.placeSearch.search(a,function(a,b){var c={};"complete"===a&&b.poiList.pois[0]&&(c.list=[{x:b.poiList.pois[0].location.lng,y:b.poiList.pois[0].location.lat}]),d(c)})},onGeocodeReturn:function(a){this.set("longitudeAndLatitude",{longitude:a.list?a.list[0].x:0,latitude:a.list?a.list[0].y:0,range:window._cmsLabels.queryRadius}),this.get("stores").searchStores(this.get("longitudeAndLatitude"))},setZoomAndCenter:function(){var a=this.get("stores");1===a.size()?this.mapObj.setZoomAndCenter(window._cmsLabels.defaultLevel,new AMap.LngLat(a.at(0).get("lng"),a.at(0).get("lat"))):null!=this.get("longitudeAndLatitude")&&this.mapObj.setZoomAndCenter(window._cmsLabels.defaultLevel,new AMap.LngLat(this.get("longitudeAndLatitude").longitude,this.get("longitudeAndLatitude").latitude))},closeOverlayTip:function(){this.mapObj.clearInfoWindow()},openOverlayTip:function(a,b){var c=new AMap.InfoWindow({isCustom:!0,content:b,offset:new AMap.Pixel(16,-45)});c.open(this.mapObj,a.getPosition())}})}),define("models/mapBar",["backbone","models/mapFix"],function(a,b){return a.Model.extend({initialize:function(){maplet=new Maplet(this.get("mapContainer")),maplet.centerAndZoom(new MPoint(116.38749,39.90515),window._cmsLabels.defaultLevel),maplet.addControl(new MStandardControl),maplet.customInfoWindow=!0,this.listenTo(this.get("stores"),"sync",this.storesChange)},storesChange:function(){var a=this;window.setTimeout(function(){a.clearPoints(),a.closeOverlayTip(),a.get("stores").each(function(b){a.drawPoint(b)}),a.setZoomAndCenter()},500)},drawPoint:function(a){marker=a.getMapBarMarker(),maplet.addOverlay(marker),MEvent.addListener(marker,"iw_beforeopen",this.showCustomIw),MEvent.addListener(marker,"click",function(a){maplet.setCenter(new MPoint(a.pt.lon,a.pt.lat))})},showCustomIw:function(a,b,c){var d={pin:!1,zindex:1001,content:a.info.content,location:{type:"xy",x:10,y:-16},zoomhide:!0};p=new MPanel(d),MPanel.enableDragMap(p.dom,!1),maplet.addPanel(p)},clearPoints:function(){maplet.clearOverlays(!1)},searchByAddressName:function(c){c.split("-").length>2?city=c.split("-")[1]:city=c.split("-")[0],c=c.replace(/-/g,"");var d=b.searchFixies(c);if(d)return void this.onGeocodeReturn(d.X,d.Y);var e=this;a.ajax({type:"GET",dataType:"json",url:Helper.getRESTfulDomain("store/getLatLonByAddress?city="+city+"&encode=UTF-8&customer=2&keyword="+c),success:function(a){x=a.strlatlon.split(",")[0],y=a.strlatlon.split(",")[1],e.onGeocodeReturn(x,y)}})},onGeocodeReturn:function(a,b){this.set("longitudeAndLatitude",{longitude:a?a:0,latitude:b?b:0,range:window._cmsLabels.queryRadius}),this.get("stores").searchStores(this.get("longitudeAndLatitude"))},closeOverlayTip:function(){_.each(maplet.getPanels(),function(a){maplet.removePanel(a)})},setZoomAndCenter:function(){var a=this.get("stores");1===a.size()?null!=a.at(0).get("lng")&&(maplet.setCenter(new MPoint(a.at(0).get("lng"),a.at(0).get("lat"))),maplet.setZoomLevel(window._cmsLabels.defaultLevel)):(maplet.setCenter(new MPoint(this.get("longitudeAndLatitude").longitude,this.get("longitudeAndLatitude").latitude)),maplet.setZoomLevel(window._cmsLabels.defaultLevel))}})}),define("models/googleMap",["backbone","models/mapFix","models/store"],function(a,b,c){return a.Model.extend({initialize:function(){this.otherStore=new c,this.marker_hk=new google.maps.Marker;var a=new google.maps.LatLng(22.396428,114.109497),b={zoom:4,center:a,mapTypeId:google.maps.MapTypeId.ROADMAP};this.mapObj=new google.maps.Map($("#"+this.get("mapContainer")).get(0),b),this.marker_hk.setMap(this.mapObj),this.marker_hk.setVisible(!0),this.markersArray=[],this.clickMarkersArray=null,this.geocoder=new google.maps.Geocoder},searchByAddrName:function(a,b){var c=this;this.geocoder.geocode({address:a,language:this.getLanguageCode(b)},function(a,b){if(b==google.maps.GeocoderStatus.OK){var d=a[0].geometry.location;c.mapObj.setCenter(d),c.mapObj.setZoom(4);var e=new String(d),a=e.substring(1,e.length-1),f=a.split(",");c.set("longitudeAndLatitude",{longitude:f[1].trim(),latitude:f[0].trim(),range:window._cmsLabels.queryRadius}),c.get("stores").searchStoresHMT(c.get("longitudeAndLatitude"),c)}})},drawPoint:function(a){var b=this.mapObj,c=0,d=this.otherStore;this.deleteMarkersArray();var e=this;b.setZoom(12),a.each(function(a){if(null!=a.get("lat")){var f=new google.maps.LatLng(a.get("lat"),a.get("lng"));0==c&&(b.setZoom(12),b.setCenter(f),c++);var g=new google.maps.Marker({icon:e.getIconUrl(a),position:f,map:b,visible:!0});e.markersArray.push(g);var h=d.getMarkerTipContent(a),i=new google.maps.InfoWindow({maxWidth:380,maxHeight:260,content:h.replace('class="store"','class="store-new"')});google.maps.event.addListener(g,"click",function(){e.clickMarkersArray&&e.clickMarkersArray.close(),i.open(b,g),e.clickMarkersArray=i})}})},deleteMarkersArray:function(){if(this.markersArray&&this.markersArray.length>0){for(i=0;i<this.markersArray.length;i++)this.markersArray[i].setMap(null);this.markersArray=[],this.markersArray.length=0}},getLanguageCode:function(a){var b=a;return"SC"==b?"zh":"TC"==b?"zh-TW":"EN"==b?"en":b},getIconUrl:function(a){var b;return b=a.get("selfSendDiscount")||a.get("selfPickupDiscount")?this.otherStore.getCMSLabels().type5Image:"1"===a.get("storeType")?this.otherStore.getCMSLabels().type1Image:"2"===a.get("storeType")?this.otherStore.getCMSLabels().type2Image:"3"===a.get("storeType")?this.otherStore.getCMSLabels().type3Image:"6"===a.get("storeType")?this.otherStore.getCMSLabels().type6Image:"9"===a.get("storeType")?this.otherStore.getCMSLabels().type9Image:this.otherStore.getCMSLabels().type4Image,"/"===b[0]?location.protocol+"//"+location.host+b:location.protocol+"//"+location.host+location.pathname+b}})}),define("views/store/storeManager",["backbone","jquery","views/store/input","views/store/map","views/store/taiwanStoresResult","collections/chineseStores","collections/taiwanStores","models/map","models/mapBar","models/googleMap","helper"],function(a,b,c,d,e,f,g,h,i,j,k){return a.View.extend({initialize:function(){var a,i=new f,l=new h({mapContainer:"china-store-map",stores:i});"hk"===k.getSiteLocation()||"tw"===k.getSiteLocation()?(a=new j({mapContainer:"china-store-google-map",stores:i}),b(".store-map-container").removeClass("hide"),b("#china-store-google-map").removeClass("hide"),b("#china-store-map").addClass("hide")):a=l;var m=new g;new c({el:b(".store-input-view"),chineseStores:i,map:l,googleMap:a,taiwanStores:m}),new d({el:this.$(".store-map"),collection:i,model:l,googleMap:a}),new e({el:this.$(".store-table"),collection:m})}})}),define("models/currency",["backbone"],function(a){return a.Model.extend({initialize:function(){}})}),define("collections/currency",["backbone","models/currency","helper","moment"],function(a,b,c,d){return a.Collection.extend({model:b,url:c.getRESTfulDomain("exrate/currencies"),initialize:function(){this.fetch()},fetchRate:function(b,e,f){return a.ajax({url:c.getRESTfulDomain("exrate"),data:{time:f||d().format(),originCode:b,destCode:e}})}})}),define("views/currency",["backbone","collections/currency","templates"],function(a,b,c){return a.View.extend({events:{"click .origin .dropdown-menu a":"selectOriginCurrency","click .dest .dropdown-menu a":"selectDestCurrency","keyup .origin input":"originInputChanged","change #time-picker":"fetchRate"},initialize:function(){this.collection=new b,this.listenTo(this.collection,"sync",this.render),this.originUnit=1,this.render()},numberCheck:function(a){var b=$(a.currentTarget).val();(isNaN(b)||-1!==_.indexOf(b,"."))&&(b=b.replace(/[^0-9]/g,""),$(a.currentTarget).val(b)),b.length>9&&$(a.currentTarget).val(b.substr(0,9))},originInputChanged:function(a){this.numberCheck(a),this.originUnit=Math.round(Number($(a.currentTarget).val())),this.currencyRate&&this.setResultText()},setResultText:function(){var a;if(Number(this.originUnit)){var b=this.originUnit*this.currencyRate;a=Math.round(1e6*b)/1e6}else a=this.$(".result-text").data("placeholder");var c=this.selectedDest.code;this.$(".result-text").html("<small>"+c+"</small> "+a).show()},selectOriginCurrency:function(a){var b=$(a.currentTarget);this.selectedOrigin={name:b.text(),code:b.data("code")},this.$(".origin .input-group-addon").text(b.data("code")).show(),this.fetchRate()},selectDestCurrency:function(a){var b=$(a.currentTarget);this.selectedDest={name:b.text(),code:b.data("code")},this.$(".dest .input-group-addon").text(b.data("code")).show(),this.fetchRate()},fetchRate:function(){if(!this.selectedOrigin||!this.selectedDest)return this.isFetchRateFromServer=!1,this.render(),void this.$(".result-text").hide();var a=this;a.$(".error").hide(),a.isFetchRateFromServer=!0,a.currencyRate=null,a.render(),this.collection.fetchRate(this.selectedOrigin.code,this.selectedDest.code,this.$("#time-picker").data("date")).success(function(b){a.currencyRate=b,a.isFetchRateFromServer=!1,a.render()}).error(function(b){a.isFetchRateFromServer=!1,a.currencyRate=void 0,a.render(),404===b.status?a.$(".error[data-error=not-found]").show():a.$(".error[data-error=network]").show()})},availableOriginCurrencies:function(){return this.selectedDest?this.collection.models:this.collection.models},availableDestCurrencies:function(){return this.selectedOrigin?this.collection.models:this.collection.models},render:function(){this.selectedOrigin&&this.$(".origin .dropdown-toggle .selected-currency").text(this.selectedOrigin.name),this.selectedDest&&this.$(".dest .dropdown-toggle .selected-currency").text(this.selectedDest.name),this.$(".origin input").val(this.originUnit),this.currencyRate?this.setResultText():this.isFetchRateFromServer?this.$(".result-text").html(this.$(".result-text").data("loading-text")).show():this.$(".result-text").hide(),this.$(".origin .dropdown-menu").html(c.dropdownTemplates({dropdownItems:this.availableOriginCurrencies()})),this.$(".dest .dropdown-menu").html(c.dropdownTemplates({dropdownItems:this.availableDestCurrencies()}))}})}),define("views/detailedLocationPicker/originPicker",["views/detailedLocationPicker/picker"],function(a){return a.extend({availableRegions:function(){return this.regions.where({availableAsOrigin:!0})},unavailableRegions:function(){return this.regions.where({availableAsOrigin:!1,opening:!0})}})}),define("views/detailedLocationPicker/destPicker",["views/detailedLocationPicker/picker"],function(a){return a.extend({availableRegions:function(){return this.regions.where({availableAsDestination:!0})},unavailableRegions:function(){return this.regions.where({availableAsDestination:!1,opening:!0})}})}),define("views/detailedLocationPicker/available",["views/detailedLocationPicker/picker"],function(a){return a.extend({availableRegions:function(){return"international"===this.getSelectedArea()?this.regions.models:this.regions.filter(function(a){return a.get("availableAsOrigin")||a.get("availableAsDestination")})},unavailableRegions:function(){return this.regions.filter(function(a){return!a.get("availableAsOrigin")&&!a.get("availableAsDestination")&&a.get("opening")})}})}),define("views/detailedLocationPicker/pricePicker",["views/detailedLocationPicker/picker"],function(a){return a.extend({availableRegions:function(){return"international"===this.getSelectedArea()?this.regions.models:this.regions.filter(function(a){return a.get("available")||a.get("availableAsOrigin")&&a.get("availableAsDestination")})},unavailableRegions:function(){return this.regions.filter(function(a){return!a.get("availableAsOrigin")&&!a.get("availableAsDestination")&&a.get("opening")})}})}),define("views/detailDateTimePicker/timeQueryPicker",["views/detailDateTimePicker/picker","helper"],function(a,b){return a.extend({preRenderTimePicker:function(){var a=moment(this.selectedMoment.format()).startOf("day");if(!this.times){for(var b=[],c=0;48>c;c++)b.push(a.format("HH: mm")),a.add("minutes",30);this.times=b}},postRenderDatePicker:function(){var a={language:b.getStandardLocale(),startDate:this.startDate(),todayBtn:"linked"};this.endDate()&&(a.endDate=this.endDate());var c=this,d=moment(this.selectedMoment.format());this.$(".detail-date-picker").datepicker(a).on("changeDate",function(a){a.date&&c.pickDate(a.date),d&&!d.isSame(moment(a.date),"date")&&(c.showTimePicker=!0,c.render())}).datepicker("setDate",d.startOf("day").toDate()).on("click",this.stopPropagation)},pickDate:function(a){this.selectedMoment.year(moment(a).year()),this.selectedMoment.month(moment(a).month()),this.selectedMoment.date(moment(a).date()),this.selectedTimeChanged(),this.showTimePicker=!0},startDate:function(){return"-7d"}})}),define("views/detailDatePicker/picker",["backbone","datepicker","datepickercn","templates","moment","helper"],function(a,b,c,d,e,f){return a.View.extend({events:{"click input":"toggleLocationPicker","click .input-group-addon":"toggleLocationPicker",toggle:"toggleLocationPicker",click:"stopPropagation"},initialize:function(){this.$pickerWrapper=$('<div class="detail-date-picker toggle-plugins"></div>'),this.$el.append(this.$pickerWrapper),this.render()},stopPropagation:function(a){a.stopPropagation()},showPicker:function(){$("body").click(),this.$pickerWrapper.show()},toggleLocationPicker:function(a){this.$pickerWrapper.is(":visible")?this.$pickerWrapper.hide():(a&&a.stopPropagation(),this.showPicker())},startDate:function(){return"1993-01-01"},render:function(){var a=this;this.$(".detail-date-picker").datepicker({language:f.getStandardLocale(),startDate:a.startDate(),endDate:"0d",todayBtn:"linked"}).on("changeDate",function(b){if(b.date){var c=e(b.date);c.isSame(e(),"day")?a.$("input").val(_l("今天")):a.$("input").val(e(b.date).format("YYYY-MM-DD")),a.$("input").data("date",e(b.date).format()).trigger("change")}a.$pickerWrapper.hide()}).datepicker("setDate","0d")}})}),define("views/detailDatePicker/pickerForTrack",["views/detailDatePicker/picker"],function(a){return a.extend({startDate:function(){return"-61d"}})}),define("collections/invoices",["backbone","helper"],function(a,b){return a.Collection.extend({parse:function(a){return _.each(a,function(a){a.invoiceID=a.id,a.id=null}),a},fetchInvoiceDetails:function(a,c,d){var e=this;this.url=b.getRESTfulDomain(_p("invoices/%s?code=%s&answer=%s&app=invoice",a,c,d)),this.fetch({error:function(a,b){404===b.status?e.trigger("notFound"):403===b.status?e.trigger("validationCodeError"):e.trigger("networkError")}})}})}),define("views/invoices",["backbone","collections/invoices","templates","helper"],function(a,b,c,d){return a.View.extend({events:{"keyup #invoice-number":"invoiceNumberUpdated","keyup #invoice-code":"invoiceCodeUpdated","keyup #validation-search-code":"inputUpdated","click .refresh":"reloadValidateCodeImage","click #validation-search-image":"reloadValidateCodeImage","click .primary-button":"queryInvoices"},initialize:function(){this.collection=new b,this.listenTo(this.collection,"sync",this.render),this.listenTo(this.collection,"notFound",this.showNotFoundError),this.listenTo(this.collection,"networkError",this.showNetworkError),this.listenTo(this.collection,"validationCodeError",this.showValidationCodeError),this.reloadValidateCodeImage()},invoiceNumberUpdated:function(a){var b=$(a.currentTarget).val(),c=b.replace(/[^0-9]/g,"");b!==c&&$(a.currentTarget).val(c),this.inputUpdated()},invoiceCodeUpdated:function(a){var b=$(a.currentTarget).val(),c=b.replace(/[^0-9A-Za-z]/g,"");b!==c&&$(a.currentTarget).val(c),this.inputUpdated()},reloadValidateCodeImage:function(){var a=d.getRESTfulDomain("captcha/invoice?force=true&time="+moment());this.$("#validation-search-image").attr("src",a),this.$("#validation-search-code").val("")},render:function(){var a=this.$(".results");if(this.collection.length){var b=this.$(".primary-button");b.html(b.data("resetText")),this.reloadValidateCodeImage();var d=this.collection.toJSON();a.html(c.invoicesResult({results:d})),a.slideDown()}else a.slideUp()},inputUpdated:function(){var a=this.$("#invoice-number").val(),b=this.$("#invoice-code").val(),c=this.$("#validation-search-code").val();this.$(".primary-button").toggleClass("disabled",!(a&&b&&c)),this.$(".error").hide()},resetLoading:function(){this.$(".error").hide(),this.$(".primary-button").button("reset")},showNotFoundError:function(){var a=this.$(".primary-button");a.html(a.data("resetText")),this.$(".error[data-error=not-found]").show(),this.reloadValidateCodeImage()},showNetworkError:function(){this.resetLoading(),this.$(".error[data-error=network]").show()},showValidationCodeError:function(){var a=this.$(".primary-button");a.html(a.data("resetText")),this.$(".error[data-error=validation-code]").show()},queryInvoices:function(){var a=this.$(".primary-button");this.resetLoading(),a.button("loading");var b=this.$("#invoice-number").val(),c=this.$("#invoice-code").val(),d=this.$("#validation-search-code").val(),e=this;this.$(".results").slideUp(function(){e.collection.fetchInvoiceDetails(b,c,d)})}})}),define("views/range/input",["backbone","collections/detailRegions"],function(a,b){return a.View.extend({events:{"click .primary-button":"queryRangeDetail","change .detail-location-input input":"inputChanged","keyup .abroad-zip-code-input input":"zipCodeinputChanged","regionModelUpdate .detail-location-input":"regionModelUpdate"},initialize:function(){this.$(".detail-location-input").data("max-A000710000",5),this.$(".detail-location-input").data("max-886",5)},inputChanged:function(){var a=this.$("input").data("code"),c=this.$("input").data("country-code"),d=this.$("input").data("rate-code"),e=b.isNotAboard(c),f=b.isNotAboardForRate(d),g=Boolean(a);e||f?this.$(".abroad-zip-code-input").hide():(this.$(".abroad-zip-code-input").show(),this.$(".abroad-zip-code-input input").val(""),g=g&&Boolean(this.$(".abroad-zip-code-input input").val())),this.$(".primary-button").toggleClass("disabled",!g)},numberCheck:function(a){var b=$(a.currentTarget).val();/[^a-zA-Z0-9]/g.test(b)&&(b=b.replace(/[^a-zA-Z0-9]/g,""),$(a.currentTarget).val(b)),/[a-z]/g.test(b)&&$(a.currentTarget).val(b.toUpperCase())},zipCodeinputChanged:function(a){this.numberCheck(a);var b=this.$("input").data("code"),c=Boolean(b)&&Boolean(this.$(".abroad-zip-code-input input").val());this.$(".primary-button").toggleClass("disabled",!c)},regionModelUpdate:function(a,b){this.isTaiWanAddress=_.some(b.regionTabs,function(a){return a.selectedRegion&&"A000710000"===a.selectedRegion.code}),this.isHongKongAddress=_.some(b.regionTabs,function(a){return a.selectedRegion&&"A000810000"===a.selectedRegion.code}),this.isMacaoAddress=_.some(b.regionTabs,function(a){return a.selectedRegion&&"A000820000"===a.selectedRegion.code});var c=$(a.currentTarget),d=$("li[class='current']");this.isChoosingAbord="international"===d.data("tab")||"international"===c.data("selected-area"),c.data("max-level",this.isChoosingAbord?1:4)},queryRangeDetail:function(a){var b=this.$("input").data("code"),c=this;this.model.clear().trigger("sync");var d=$(a.currentTarget);d.button("loading"),this.$(".error").hide(),this.model.set({locationName:this.$("input").val(),locationCode:this.$("input").data("code"),locationCountryCode:this.$("input").data("country-code"),locationRateCode:this.$("input").data("rate-code"),isTaiWanAddress:this.isTaiWanAddress,isHongKongAddress:this.isHongKongAddress,isMacaoAddress:this.isMacaoAddress,isChoosingAbord:this.isChoosingAbord,zipCodeInputed:this.$(".abroad-zip-code-input input").val()}),this.model.fetchRegion(b,{error:function(){c.isChoosingAbord?c.$(".error[data-error=zip-code-not-found]").show():c.$(".error[data-error=not-found]").show()},complete:function(){d.button("reset")}})}})}),define("views/range/result",["backbone","templates","helper"],function(a,b,c){return a.View.extend({events:{"click .result-regions li":"rangeClicked"},initialize:function(){this.listenTo(this.model,"sync",this.render)},closePreviousPopover:function(a){var b=this.$(".result-region-detail-wrapper");b.length?b.fadeOut(function(){b.remove(),a()}):a()},storeURL:function(a,b,d,e,f){var g=f?"&locationKeyword="+f:"";return c.getDynamicURLWithContext("/store/?locationName="+a+"&locationCode="+b+"&locationCountryCode="+d+g+"&lang="+c.getSiteLanguage()+"&locationRateCode="+e)},rangeDescriptionDatasource:function(){return[{availableAsOrigin:!0,availableAsDestination:!1,selfSend:!1,selfPickup:!1,showRemark:!1,remarks:[{litterTag:_l("收"),remark:_l("仅支持上门收件服务，暂不支持上门派件")}]},{availableAsOrigin:!1,availableAsDestination:!0,selfSend:!1,selfPickup:!1,showRemark:!1,remarks:[{litterTag:_l("派"),remark:_l("仅支持上门派件服务，暂不支持上门收件")}]},{availableAsOrigin:!0,availableAsDestination:!1,selfSend:!0,selfPickup:!1,showRemark:!0,remarks:[{litterTag:_l("自"),remark:_l("仅支持到店自寄服务，暂不支持上门收派件")}]},{availableAsOrigin:!1,availableAsDestination:!0,selfSend:!1,selfPickup:!0,showRemark:!0,remarks:[{litterTag:_l("自"),remark:_l("仅支持到店自取服务，暂不支持上门收派件")}]},{availableAsOrigin:!0,availableAsDestination:!0,selfSend:!0,selfPickup:!0,showRemark:!0,remarks:[{litterTag:_l("自"),remark:_l("仅支持到店自寄自取服务，暂不支持上门收派件")}]}]},getAvailableDescription:function(a){var b=_.findWhere(this.rangeDescriptionDatasource(),{availableAsOrigin:a.availableAsOrigin,availableAsDestination:a.availableAsDestination,selfSend:a.selfSend,selfPickup:a.selfPickup}),c=b?b.remarks:[];return a.addTime&&c.push({litterTag:_l("时"),remark:_p(_l("上门服务需要加时：+%s天"),a.addTime),remark_content:a.remark}),c},getShowRemark:function(a){var b=_.findWhere(this.rangeDescriptionDatasource(),{availableAsOrigin:a.availableAsOrigin,availableAsDestination:a.availableAsDestination,selfSend:a.selfSend,selfPickup:a.selfPickup});return void 0!=b&&void 0!=b.showRemark&&b.showRemark?!0:!1},getShowRemarkFromEnd:function(a){return a.get("isTaiWanAddress")||a.get("isHongKongAddress")||a.get("isMacaoAddress")},rangeClicked:function(a){return},render:function(){if(this.model.get("type")||this.model.get("name")){this.$el.slideDown();var a=this.model.toJSON(),d=$(".detail-location-input input.no-left-border").prop("title");d&&a&&(a.name=d),a.isChoosingAbord?this.$el.html(b.rangeResultInternational(a)):(a.storeLinkURL=this.storeURL(a.locationName,a.locationCode,a.locationCountryCode,a.locationRateCode),a.lang=c.getSiteLanguage(),a.region=c.getSiteLocation(),this.$el.html(b.rangeResult(a)))}else this.$el.slideUp()}})}),define("models/range",["backbone","helper"],function(a,b){return a.Model.extend({fetchRegion:function(a,c){this.get("isChoosingAbord")?this.url=b.getRESTfulDomain("region/"+a+"/globalRange?zipCode="+this.get("zipCodeInputed")):this.url=b.getRESTfulDomain("region/"+a+"/range"),this.fetch(c)}})}),define("views/range/range",["backbone","views/range/input","views/range/result","models/range"],function(a,b,c,d){return a.View.extend({el:".range-page",initialize:function(){this.model=new d,this.inputView=new b({el:this.$(".range-input"),model:this.model}),this.resultView=new c({el:this.$(".range-result"),model:this.model})}})}),define("views/inputIndicator",["backbone"],function(a){var b="852",c="853",d="886";return a.View.extend({events:{"keyup input":"inputKeyupTriggered","change .phone-number-area":"selectChangeTriggered"},selectChangeTriggered:function(a){var e=this.$("#hk-area-list").val(),f=this.$(".phone-number-input");null==e?hasValidationReg=/^1\d{10}$/:b==e?hasValidationReg=/^[569]{1}\d{7}$/:c==e?hasValidationReg=/^6\d{7}$/:d==e&&(hasValidationReg=/^[0]{0,1}9\d{8}$/);var g=hasValidationReg.test(f.val());g?(f.toggleClass("success-indicator",!0),f.toggleClass("warning-indicator",!1)):(f.toggleClass("success-indicator",!1),f.toggleClass("warning-indicator",!0))},inputKeyupTriggered:function(a){var e=$(a.currentTarget),f=e.data("validation-regexp"),g=/^1\d{10}$/,h=/^8\d{10,12}$/,i=/^[569]{1}\d{7}$/,j=/^6\d{7}$/,k=/^[0]{0,1}9\d{8}$/,l=!1,m=this.$("#hk-area-list").val();if(f){if(":phone"===f?(null==m?f=/^1\d{10}$/:b==m?f=/^[569]{1}\d{7}$/:c==m?f=/^6\d{7}$/:d==m&&(f=/^[0]{0,1}9\d{8}$/),l=f.test(e.val())):":subPhone"===f&&(l=/^1\d+$/.test(e.val())?g.test(e.val()):h.test(e.val())||i.test(e.val())||j.test(e.val())||k.test(e.val())),_.isEmpty(e.val()))return e.toggleClass("success-indicator",!1),void e.toggleClass("warning-indicator",!1);l?(e.toggleClass("success-indicator",!0),e.toggleClass("warning-indicator",!1)):(e.toggleClass("success-indicator",!1),e.toggleClass("warning-indicator",!0))}}})}),define("models/payFeeComment",["backbone","event"],function(a,b){return a.Model.extend({defaults:{shouldShow:!1},initialize:function(){this.listenTo(b,b.RateSearch,this.refresh)},refresh:function(a){if(this.originCode=a.originCode?a.originCode:this.originCode,this.originCountryCode=a.originCountryCode?a.originCountryCode:this.originCountryCode,this.destCode=a.destCode?a.destCode:this.destCode,this.destCountryCode=a.destCountryCode?a.destCountryCode:this.destCountryCode,this.originCode&&this.destCode){var b=_.indexOf(this.get("originLocations").split(" "),this.originCode)>=0,c=_.indexOf(this.get("originLocations").split(" "),this.originCountryCode)>=0,d=_.indexOf(this.get("destsLocations").split(" "),this.destCode)>=0,e=_.indexOf(this.get("destsLocations").split(" "),this.destCountryCode)>=0;this.get("bothRequired")?(b||c)&&(d||e)?this.set("shouldShow",!0):this.set("shouldShow",!1):c||b||e||d?this.set("shouldShow",!0):this.set("shouldShow",!1)}}})}),define("collections/payFeeComments",["backbone","models/payFeeComment"],function(a,b){return a.Collection.extend({model:b})}),define("views/payFee/payFee",["backbone","bootstrap","templates","utils/time"],function(a,b,c,d){return a.View.extend({tagName:"tr",template:c.payFee,initialize:function(a){var b=this.model.toJSON(),c=$(".payFee-page .origin-price .area-level-tabs li.current").data("tab"),e=$(".payFee-page .dest-price .area-level-tabs li.current").data("tab");("main-land"!=c||"main-land"!=e)&&(b.notmainland=!0),b.deliverTime?b.relativeDate=d.relativeDate(moment(b.deliverTime)):b.internet||("T104"==b.limitTypeCode?b.deliverTimeForType=_l("当日送达"):"T801"==b.limitTypeCode?b.deliverTimeForType=_l("次早送达"):"T4"==b.limitTypeCode?(b.deliverTimeForType="2-3"+_l("天"),"hk-mc-tw"==c&&"hk-mc-tw"==e?b.deliverTimeForType="":"2"==b.orgionView&&"2"==b.destView&&(b.deliverTimeForType="")):"T6"==b.limitTypeCode?(b.deliverTimeForType="3-5"+_l("天"),"hk-mc-tw"==c&&"hk-mc-tw"==e?b.deliverTimeForType="":"2"==b.orgionView&&"2"==b.destView&&(b.deliverTimeForType="")):b.deliverTimeForType=""),b.showDestCurrencyPrice=a.showDestCurrencyPrice,b.isChinaMainLandService=a.isChinaMainLandService,this.$el.html(this.template({service:b,serviceColor:_l(b.limitTypeCode+"color"),originArea:c,destArea:e}))},bindServiceIntroPopover:function(){var a=this.model.get("intro");if(!this.model.notContainIntro()){var b=c.payFeeInfo,d=this.$(".service-info a");d.popover({content:b({serviceInfos:a}),html:!0,trigger:"hover",placement:"bottom"})}}})}),define("views/payFee/payFeeInitial",["backbone","templates","views/payFee/payFee"],function(a,b,c){return c.extend({template:b.payFeeInitial,initialize:function(){var a=this.model.toJSON(),b=["#EF7D00","#E30413","#FFED00","#009440"];a.limitTypeCode&&(a.serTextColor="white","T104"==a.limitTypeCode?a.serviceColor=b[0]:"T801"==a.limitTypeCode?a.serviceColor=b[1]:"T4"==a.limitTypeCode?(a.serviceColor=b[2],a.serTextColor="black"):"T6"==a.limitTypeCode?a.serviceColor=b[3]:(a.serTextColor="",a.serviceColor="")),this.$el.html(this.template(a))}})}),define("models/rateSearchOption",["backbone"],function(a){return a.Model.extend({defaults:{weight:"",height:"",length:"",width:""}})}),define("views/payFee/payFees",["backbone","templates","views/payFee/payFee","views/payFee/payFeeInitial","models/rateSearchOption","collections/payFee","collections/detailRegions","models/payFee"],function(a,b,c,d,e,f,g,h){return a.View.extend({tagName:"table",className:"services",template:b.payFee,initialize:function(){var a=this;this.listenTo(this.collection,"sync",this.render),this.listenTo(this.collection,"showDestCurrency",this.appendServicesWithoutOutskirts),this.listenTo(this.collection,"outOfRange",this.render),this.listenTo(this.collection,"showDefault",this.showDefaultRule);var b=this.collection.withPromotion();f.setupOrderSymbol(b),_.each(b,function(b){var c=new d({model:b});a.$el.append(c.$el)})},render:function(){var a=this.collection.checkResult,b=this.showSearchHint();return a.canSearch?(this.appendServicesWithoutOutskirts(),this.$el.addClass("show-cargo-type"),void this.$el.prepend(b)):void this.$el.html(b)},isQueryLocationChinaMainLand:function(){var a=g.isNotAboard(this.collection.originCountryCode),b=g.isNotAboard(this.collection.destsCountryCode);return a&&b},appendServicesWithoutOutskirts:function(){var a=this;this.$el.empty();var b,d=this.collection.withOutskirts();if(d.length>0)b=d,_.each(b,function(a){a.attributes.limitTypeName+="<em style='color:red;'>("+_l("郊")+")</em>"});else{var e=this.collection.withoutOutskirts();b=e}f.setupOrderSymbol(b),_.each(b,function(b){var d=b.attributes;if("T4"!=d.limitTypeCode||"1"!==d.destView||"1"!==d.orgionView||d.deliverTime){var e=new c({model:b,showDestCurrencyPrice:a.collection.showDestCurrencyPrice,isChinaMainLandService:a.isQueryLocationChinaMainLand()});a.$el.append(e.$el)}})},showSearchHint:function(){var a=$("<tbody><tr><td style='padding: 0 33px;color:red' colspan='4'></td></tr></tbody>"),b=[_l("重量超限,"),_l("体积超限,")],c=this.collection.checkResult,d="";return c.canSearch&&this.arrayContain(c.errs,"2")?d=_l("您的快件属于超长件，收件时将收取相应的超长附加费。感谢您对顺丰速运的关注与支持，如有疑问，可致电4008-111-111咨询。"):c.canSearch||(d=_l("很抱歉，您的快件"),$.each(c.errs,function(a,c){d+=b[c]}),d+=_l("暂时不能提供收寄服务。感谢您对顺丰速运的关注与支持，如有疑问，可致电4008-111-111咨询。")),a.find("td").text(d),0==c.errs.length?"":a.html()},arrayContain:function(a,b){if(void 0==a)return!1;for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1},showDefaultRule:function(){var a=this;this.$el.empty();var b,d=a.collection.models;b=0==d.length?new h:d[0],b.attributes.cargoTypeCode="C201",b.attributes.cargoTypeName="",b.attributes.currencyName="",b.attributes.destCurrencyName="",b.attributes.destFreight=_l("以收派员巴枪价格为准"),b.attributes.destFuelCost=0,b.attributes.freight=_l("以收派员巴枪价格为准"),b.attributes.fuelCost=0,b.attributes.limitTypeCode="T4",b.attributes.limitTypeName=_l("顺丰标快"),b.attributes.weight=1,b.attributes.deliverTime=_l("约2-4天"),b.attributes.addTime=null,b.attributes.distanceTypeCode="",b.attributes.distanceTypeName="",b.attributes.expectArriveTm=null,b.attributes.otherService=null,b.attributes.internet=!1,b.attributes.closedTime=null,b.attributes.orgionView="1",b.attributes.destView="1",b.attributes.destFuelFlg=!0,b.attributes.weightUnit="kg",b.attributes.destWeightUnit="kg",b.attributes.destWeight=1;var e=new c({model:b,showDestCurrencyPrice:a.collection.showDestCurrencyPrice,isChinaMainLandService:a.isQueryLocationChinaMainLand()});a.$el.append(e.$el)}})}),define("views/payFee/comments",["backbone","templates"],function(a,b){return a.View.extend({className:"service-comments",template:b.payFeeComments,initialize:function(){this.listenTo(this.collection,"change:shouldShow",this.render)},render:function(){this.collection.findWhere({shouldShow:!0})?this.$el.html(this.template({comments:this.collection.toJSON()})).show():this.$el.hide()}})}),define("views/payFee/moreWeight",["jquery","backbone","templates","event"],function(a,b,c,d){return b.View.extend({className:"more-weight",template:c.moreWeight,events:{"click .weight-search":"weightSearch",
click:"stopPropagation","keyup input":"refreshSearchButton","blur #weight-value, #length-value, #width-value, #height-value":"onNumberBlur"},onNumberBlur:function(b){var c=a(b.target),d=c.val(),e=Number(d);isNaN(e)||c.val(e)},initialize:function(){this.listenTo(this.model,"change",this.render),this.$el.html(this.template()),this.$("input").placeholder(),this.$length=this.$(".length-value"),this.$weight=this.$(".weight-value"),this.$height=this.$(".height-value"),this.$width=this.$(".width-value"),this.$weightBtn=a('[data-tab="weight"]'),this.listenTo(d,d.RateSearch,this.reloadOnFetch)},reloadOnFetch:function(a){a.originCountryCode&&("A000810000"===a.originCountryCode?(this.$(".extra-weight-side-note").show(),this.$weightBtn.addClass("has-extra")):(this.$(".extra-weight-side-note").hide(),this.$weightBtn.removeClass("has-extra")))},numberCheck:function(b){var c=a(b.currentTarget).val();isNaN(c)&&(c=c.replace(/[^0-9\.]/g,""),c.split(".").length>2&&(c=c.replace(/\.+$/,"")),a(b.currentTarget).val(c))},getRoundWeight:function(){var b=a("input.dests").last().data("country-code"),c=a("input.origins").last().data("country-code");return this.isChinaRegion(b)&&this.isChinaRegion(c)?Math.round(10*Number(this.$weight.val()))/10:Math.round(100*Number(this.$weight.val()))/100},isChinaRegion:function(a){return"A000086000"===a||"A000820000"===a||"A000810000"===a||"A000710000"===a?!0:!1},hasWeightInput:function(){return this.getRoundWeight()>0},hasSizeInput:function(){return Number(this.$height.val())*Number(this.$length.val())*Number(this.$width.val())>0},refreshSearchButton:function(a){this.numberCheck(a),this.$(".weight-search").toggleClass("disabled",!this.hasWeightInput()&&!this.hasSizeInput())},reloadModel:function(){this.model.set({weight:this.$weight.val(),height:this.$height.val(),length:this.$length.val(),width:this.$width.val()})},searchOptionChange:function(){this.reloadModel()},stopPropagation:function(a){a.stopPropagation()},toggleWeightPanel:function(){var a=this.$(".weight-panel");a.toggle()},weightSearch:function(){return this.getRoundWeight()&&this.$weight.val(this.getRoundWeight()),(this.hasSizeInput()||this.hasWeightInput())&&d.trigger(d.RateSearch,{weight:this.$weight.val(),height:this.$height.val(),length:this.$length.val(),width:this.$width.val(),originCode:a("input.origins").last().data("code"),destCode:a("input.dests").last().data("code"),destCountryCode:a("input.origins").last().data("country-code"),originCountryCode:a("input.origins").last().data("country-code")}),this.toggleWeightPanel(),!1},render:function(){this.$length.val(this.model.get("length")),this.$weight.val(this.model.get("weight")),this.$height.val(this.model.get("height")),this.$width.val(this.model.get("width"))}})}),define("views/payFee/topBar",["backbone","templates","models/rateSearchOption","views/payFee/moreWeight"],function(a,b,c,d){return a.View.extend({events:{"click li[data-tab=price-toggle] a":"priceCurrecyToggle","click li[data-tab=weight] a":"moreWeightToggle"},initialize:function(){this.render(!1)},setupMoreWeightPannel:function(){var a=new c;this.moreWeightView=new d({model:a}),this.$(".more-weight-wrapper").html(this.moreWeightView.$el),this.changeWeightUnit()},changeWeightUnit:function(){var a=$("input.origins.autocomplete"),b=a.data("code"),c=$("#unitWeight"),d=$("#length-value"),e=$("#width-value"),f=$("#height-value");"A000001000"==b?(c.text("lbs"),d.attr("placeholder","in"),e.attr("placeholder","in"),f.attr("placeholder","in")):c.text("kg")},moreWeightToggle:function(a){a.preventDefault(),a.stopPropagation(),this.moreWeightView.toggleWeightPanel()},priceCurrecyToggle:function(a){a.preventDefault(),this.collection.showDestCurrencyPrice=!this.collection.showDestCurrencyPrice,this.collection.trigger("showDestCurrency"),this.render(this.collection.showDestCurrencyPrice)},render:function(a){this.$el.html(b.topBarUtils({showDestCurrency:a})),this.setupMoreWeightPannel()}})}),define("views/payFee/payFeesContainer",["backbone","collections/payFee","collections/payFeeComments","views/payFee/payFees","views/payFee/comments","views/payFee/topBar","event","templates","helper"],function(a,b,c,d,e,f,g,h,i){return a.View.extend({template:h.payFeeContainer,initialize:function(){this.collection=new b(window.serviceList),this.listenTo(g,g.RateSearch,this.searchStart),this.listenTo(this.collection,"sync",this.searchComplete),this.listenTo(this.collection,"notFound",this.searchNotFound),this.listenTo(this.collection,"networkErorr",this.searchFailed),this.listenTo(this.collection,"showDestCurrency",this.appendTopbarUtils),this.$el.html(this.template()),this.$serviceWrapper=this.$(".service-wrapper"),this.$serviceInternet=this.$(".service-internet-wrapper"),this.$searching=this.$(".searching"),this.topbarUtilsView=new f({el:this.$(".utils"),collection:this.collection}),this.$additionalServicesLink=this.$(".additional-services-link"),this.appendServices(),this.appendServiceComments()},searchStart:function(){this.collection.checkResult.canSearch?($("#noData").remove(),this.$serviceInternet.empty(),this.$el.slideUp()):($(".service-comments").hide(),$(".services-bottom-bar").hide())},searchComplete:function(){g.trigger("RateSearchCompleted",!0),this.topbarUtilsView.$el.show(),this.$el.slideDown(),$("li[data-tab=price-toggle] a").show();var a=this.collection.availableAdditionalServices();_.isEmpty(a)?(this.$(".services-bottom-bar").toggleClass("empty-content",!0),this.$additionalServicesLink.html("")):(this.$(".services-bottom-bar").toggleClass("empty-content",!1),this.$additionalServicesLink.html(h.addtionalService({additionalServices:a}))),_.isEmpty(this.collection.models)?this.$serviceWrapper.append("<span id='noData' style='margin-left: 45%;vertical-align: middle;font-size: 20px;color: red;'>"+_l("暂无数据")+"</span>"):this.$serviceInternet.html(h.payFeeInternet({service:this.collection.models[0].toJSON()}))},searchNotFound:function(){g.trigger("RateSearchFailed"),this.topbarUtilsView.$el.show(),this.$el.slideDown(),$("li[data-tab=price-toggle] a").hide()},searchFailed:function(){g.trigger("RateSearchFailed"),this.topbarUtilsView.$el.show(),this.$el.slideDown(),$("li[data-tab=price-toggle] a").hide()},appendServices:function(){this.$servicesView=new d({collection:this.collection}),this.$serviceWrapper.append(this.$servicesView.$el);var a=i.getQueryStrings();a&&a.destName&&a.destCode&&a.originName&&a.originCode||this.$el.slideDown()},appendServiceComments:function(){var a=new c(window.serviceComment);this.$commentsView=new e({collection:a}),this.$serviceWrapper.append(this.$commentsView.$el)}})}),define("views/payFee/locationInput",["backbone","helper","event"],function(a,b,c){return a.View.extend({events:{"click .primary-button":"queryRate","change input.origins":"originInputChanged","change input.dests":"destInputChanged","blur input.dests":"destInputChanged","change #weight":"weightChanged","regionModelUpdate .detail-location-input":"regionModelUpdate"},initialize:function(){this.$(".origin-price").data("custom-url",_.sprintf(b.urls.subregionOrigin,{parentCode:"%s",level:"%s"})),this.originPrice=this.$(".detail-location-input.origin-price"),this.destPrice=this.$(".detail-location-input.dest-price"),this.originInput=this.$("input.origins.autocomplete"),this.destsInput=this.$("input.dests.autocomplete");var a=this.originPrice.data("selected-area"),d=this.destPrice.data("selected-area");"hk-mc-tw"===a&&this.originPrice.data("max-level",4),"hk-mc-tw"===d&&this.originPrice.data("max-level",4),this.originPrice.data("max-A000710000",4),this.originPrice.data("max-A000820000",4),this.originPrice.data("max-A000810000",4),this.originPrice.data("max-886",4),this.destPrice.data("max-A000710000",4),this.destPrice.data("max-A000810000",4),this.destPrice.data("max-A000820000",4),this.destPrice.data("max-886",4),this.$el.data("redirect")||(this.listenTo(c,"RateSearchCompleted",this.searchComplete),this.listenTo(c,"RateSearchFailed",this.searchFailed),this.listenTo(c,c.RateSearch,this.searchStart),this.handleQueryStringsFromURL())},handleQueryStringsFromURL:function(){var a=b.getQueryStrings();a&&"waybill"===a.from&&(this.originInput.val(""),this.originInput.val(a.originName),this.destsInput.val(a.destName),this.$("#weight").val(Number(a.weight)),this.$(".time-query input").val(this.nextHalfHourInTheFuture(decodeURIComponent(a.time)).format("YYYY-MM-DD HH:mm"))),a&&a.destName&&a.destCode&&a.originName&&a.originCode&&a.lang===b.getSiteLanguage()&&(this.originInput.data("code",a.originCode),this.originInput.data("country-code",a.originCountryCode),this.originInput.val(a.originName),this.destsInput.data("code",a.destCode),this.destsInput.data("country-code",a.destCountryCode),this.destsInput.val(a.destName),this.$(".primary-button").toggleClass("disabled",!0),this.inputChanged(),this.queryRate())},nextHalfHourInTheFuture:function(a){var b=moment(a).startOf("hour").add("minutes",30);return b.isBefore()&&b.add("minutes",30),b},regionModelUpdate:function(a){var b=$(a.currentTarget),c=(this.originInput.data("country-code"),"international"===b.find(".area-level-tabs").find(".current").data("tab"));"hk-mc-tw"===b.find(".area-level-tabs").find(".current").data("tab");b.data("max-level",c?1:4)},searchStart:function(){this.$(".primary-button").button("loading")},searchComplete:function(a){this.$(".primary-button").button("reset")},searchFailed:function(){this.$(".primary-button").button("reset")},originInputChanged:function(){var a=this.originInput.data("code"),c=this.$("#weightUnit"),d=$("#unitWeight"),e=$("#length-value"),f=$("#width-value"),g=$("#height-value");"A000001000"==a?(c.text("lbs"),d.text("lbs"),e.attr("placeholder","in"),f.attr("placeholder","in"),g.attr("placeholder","in")):(c.text("kg"),d.text("kg"));var h=this.originInput.data("country-code"),i=this.destsInput;if(i.data("origin-country-code",h),a){var j=_.sprintf(b.urls.subregionDest,{parentCode:"%s",originCode:a,level:"%s"});$(".dest-price").first().data("custom-url",j),$(".dest-price").last().data("custom-url",j),i.data("code")&&(i.val(""),i.data("code","")),i.trigger("change")}this.inputChanged()},destInputChanged:function(){this.inputChanged()},inputChanged:function(){var a=this.originInput.data("code"),b=this.destsInput.data("code");this.destsInput.attr("disabled",!a);var c=a&&b&&this.weightChanged(),d=this.$(".primary-button");d.toggleClass("disabled",!c),c&&d.text(d.data("resetText")),this.$(".error").hide(),"A000710000"===this.originInput.data("code")&&"A000710000"===this.destsInput.data("code")&&this.$(".primary-button").toggleClass("disabled",!0)},weightChanged:function(){if(0===this.$("input.weight").length)return!0;var a=this.$("input.weight").val();return isNaN(a)||_.isEmpty(a)||_.isNull(a)?(this.$("input.weight").val(1),!0):!0},getQueryType:function(){var a,b,c,d,e,f,g=$(".payFee-page .origin-price .area-level-tabs li.current").data("tab"),h=$(".payFee-page .dest-price .area-level-tabs li.current").data("tab");return"main-land"==g?a=!0:"hk-mc-tw"==g?b=!0:"international"==g&&(c=!0),"main-land"==h?d=!0:"hk-mc-tw"==h?e=!0:"international"==h&&(f=!0),a&&d?"2":a&&e?"3":b&&d?"4":a&&f||c&&d||c&&f?"5":b&&f||c&&e?"9":b&&e?"12":"0"},queryRate:function(){var a=this.originInput.data("code"),d=this.destsInput.data("code"),e=this.originInput.data("country-code"),f=this.destsInput.data("country-code"),g=this.$("input.date").data("time"),h=this.getQueryType();if(this.$el.data("redirect")){var i=this.originInput.val(),j=this.destsInput.val();return void(location.href=b.getDynamicURLWithContext("/price/?originCode="+a+"&originCountryCode="+e+"&originName="+i+"&destCode="+d+"&destCountryCode="+f+"&destName="+j+"&time="+encodeURIComponent(g)+"&queryType="+h+"&flag="+!0+"&lang="+b.getSiteLanguage()))}this.$(".error").hide(),this.searchStart(),c.trigger(c.RateSearch,{originCode:a,destCode:d,originCountryCode:e,destsCountryCode:f,time:g,flag:!0,queryType:h})}})}),function(a,b){"use strict";a.ajaxPrefilter(function(a,b,c){return a.iframe?"iframe":void 0}),a.ajaxTransport("iframe",function(b,c,d){function e(){j.replaceWith(function(a){return i.get(a)}),f.remove(),g.attr("src","javascript:false;").remove()}var f=null,g=null,h="iframe-"+a.now(),i=a(b.files).filter(":file:enabled"),j=null;return b.dataTypes.shift(),i.length?(f=a("<form enctype='multipart/form-data' method='post'></form>").hide().attr({action:b.url,target:h}),"string"==typeof b.data&&b.data.length>0&&a.error("data must not be serialized"),a.each(b.data||{},function(b,c){a.isPlainObject(c)&&(b=c.name,c=c.value),a("<input type='hidden'>").attr({name:b,value:c}).appendTo(f)}),a("<input type='hidden' value='IFrame' name='X-Requested-With'>").appendTo(f),j=i.after(function(b){return a(this).clone().prop("disabled",!0)}).next(),i.appendTo(f),{send:function(b,c){g=a("<iframe src='javascript:false;' name='"+h+"' style='display:none'></iframe>"),g.on("load",function(){g.off("load").on("load",function(){var a,b=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,d=b.documentElement?b.documentElement:b.body,f=d.getElementsByTagName("textarea")[0],g=f?f.getAttribute("data-type"):null,h={html:d.innerHTML,text:g?f.value:d?d.textContent||d.innerText:null},i=200;e();try{a=JSON.parse(h.text),i=a.error||200,delete a.error,h.text=JSON.stringify(a)}catch(j){}c(i,200==i?"success":"error",h,g?"Content-Type: "+g:null)}),f[0].submit()}),a("body").append(f,g)},abort:function(){null!==g&&(g.off("load").attr("src","javascript:false;"),e())}}):void 0})}(jQuery),define("jquery.iframe-transport",["jquery"],function(){}),define("models/clearance",["backbone","jquery","helper","jquery.iframe-transport"],function(a,b,c){return a.Model.extend({uploadClearance:function(b){var d=this;a.ajax({type:" POST",dataType:"json",data:b.data,files:b.files,iframe:!0,processData:!1,url:c.getRESTfulDomain("clearance/upload"),error:function(a,b,c){d.trigger("clearance-failed",a.responseText)},success:function(a,b,c){d.trigger("clearance-success",a,c.responseText)}})},uploadClearanceqingguan:function(b){var d=this;a.ajax({type:" POST",dataType:"json",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:{cardType:b.cardType,imageType:b.imageType,bno:b.bno},files:b.files,iframe:!0,processData:!1,url:c.getRESTfulDomain("clearance/clearanceImageUpload"),error:function(a,b,c){d.trigger("clearance-failed",a.responseText)},success:function(a,b,c){d.trigger("clearanceqingguan-success",a,c.responseText)}})}})}),define("views/claims",["templates","backbone","models/clearance","helper"],function(a,b,c,d){return b.View.extend({el:$(".claim"),initialize:function(){this.$steps=[this.$(".step_1"),this.$(".step_2"),this.$(".step_3")],this.$protocalWrapper=this.$("#protocalWrapper"),this.$invalidTips=this.$(".invalid-claims-tips"),this.$errorWrapper=this.$(".form-group.error"),this.errCodes=[],this.isValidClaimsBillNo=!1},events:{"keyup #carryId":"checkCarryidBeforeSubmit","click #bankCode_ul li a":"selectBank","click #submitBtn":"postInfo","keyup #phone":"isMemberByPhone","click #getCaptcha":"getCaptcha","click #confirmBtn":"confirm","click #backModifyBtn":"backModify","change #countProvince":"setCode"},parseChineseChar:function(a){return encodeURIComponent(a).replace(/%[A-F\d]{2}/g,"U")},checkCarryidBeforeSubmit:function(a){a.preventDefault();var b=this,c=$(a.target).val();b.$(".invalid-claims-tips ul>li").hide(),b.$invalidTips.hide(),b.checkBillNo(c)},checkBillNo:function(a){var c=this;if(!c.validBillnoLength(a))return void c.setValidCheckingBillNo(!1);var c=this;b.ajax({type:"GET",url:d.getRESTfulDomain("claims/"+a+"/check?app=claims"),error:function(a){c.handleCheckingError(a)},success:function(a){c.handleCheckingSuccess(a)}})},setValidCheckingBillNo:function(a){this.isValidClaimsBillNo=a,a?this.$("#submitBtn").removeClass("disabled"):this.$("#submitBtn").addClass("disabled")},validBillnoLength:function(a){var b=this;return a.length<12?(b.$invalidTips.show(),b.$(".invalid-claims-tips ul>li[invalid-code=2]").show(),!1):a.length>12||!/^\d{12}$/.test(a)?(b.$invalidTips.show(),b.$(".invalid-claims-tips ul>li[invalid-code=2]").show(),!1):!0},handleCheckingError:function(a){var b=this,c=".invalid-claims-tips ul>li[invalid-code=500]";403===a.status?(b.$invalidTips.show(),b.$(c).show()):(b.$invalidTips.show(),b.$(c).show())},handleCheckingSuccess:function(a){var b=a.code,c=this;if(0==b)c.setValidCheckingBillNo(!0),c.$invalidTips.hide();else{(61===b||62===b)&&(b=61);var d=".invalid-claims-tips ul>li[invalid-code="+b+"]";c.$invalidTips.show(),c.$(d).show()}},selectBank:function(a){a.preventDefault();var b=$(a.target).data("value"),c=$(a.target).text(),d=$(a.target).parents("ul");d.prevAll("input[name='bankCode']").val(b),d.prevAll("input[name='bankCodeTxt']").val(c),d.prevAll("button").html(c+'<span class="caret"></span>')},postInfo:function(){this.setCode();var b=this;return b.checkAllInputs()?(this.$steps[1].html(a.claims({data:this.serializeObject(this.$("form").serializeArray())})),void this.showStep(2)):(b.renderErrMsg(),!1)},checkAllInputs:function(){return this.errCodes=[],this.checkCarryId(),this.checkEndClaimMoney(),this.checkCompensateAmt(),this.checkBankCode(),this.checkBankname(),this.checkCountName(),this.checkCustomerBankCard(),this.checkCountProvince(),this.checkPurp(),this.checkPhone(),this.checkCapcha(),this.renderErrMsg(),this.checkArea(),0==this.errCodes.length},isMemberByPhone:function(){var a=this.$("#phone").val(),c=/^6\d{7}$/;if(c.test(a))this.$(".area :radio")[0].checked=!0,this.$(".area").show();else{var e=this.$(".area :radio:checked");e.length>0&&(e[0].checked=!1,this.$(".area").hide())}if(!this.isValidMainlandPhoneNumber(a)){var f=this.$("#protocal:checked");return f.length>0&&(f[0].checked=!1,this.$protocalWrapper.hide()),!1}var g=this;b.ajax({type:"POST",url:d.getRESTfulDomain(_p("member/%(phone)s/exists?lang=%(lang)s&region=%(region)s",{phone:a,lang:d.getSiteLanguage(),region:d.getSiteLocation()})),success:function(a){g.errCodes=[],"1"===a.status?(g.$("#protocal")[0].checked=!0,g.$protocalWrapper.show("")):(g.$("#protocal")[0].checked=!1,g.$protocalWrapper.hide())},error:function(){}})},getCaptcha:function(a){var b=this;d.imgVrfCodePC(b,a,b.getCaptchaone)},getCaptchaone:function(a,c,e){var f=$("#phone").val();if(!d.isValidPhoneNumber(f))return a.errCodes.push("910"),a.renderErrMsg(),!1;if(!a.checkArea())return a.errCodes.push("913"),a.renderErrMsg(),!1;if(""==a.$("#carryId").val()||"none"!=a.$invalidTips.css("display"))return a.errCodes.push("901"),a.renderErrMsg(),!1;var g=30,h=a.$("#getCaptcha").attr("disabled",!0);b.ajax({type:"POST",url:d.getRESTfulDomain("sms/claims/"+a.$("#phone").val()+"/notification?app=sms&lang="+d.getSiteLanguage()+"&region="+d.getSiteLocation()+"&billno="+a.$("#carryId").val()+"&answer="+e),error:function(b){a.errCodes=[],403===b.status?a.errCodes.push("916"):a.errCodes.push("915"),a.renderErrMsg(),a.showStep(1),a.$("#getCaptcha").attr("disabled",!1)},success:function(b){a.errCodes=[],a.renderErrMsg(),a.showStep(1);var c=function(){setTimeout(function(){return 0==g?(h.text(_l("获取验证码")),h.attr("disabled",!1),!1):(h.text(_l("重新获取")+g--),void c())},1e3)};c()}})},isValidMainlandPhoneNumber:function(a){var b=/^1\d{10}$/;return b.test(a)},renderErrMsg:function(){this.$("#errMsgWrapper li").hide(),this.errCodes.length>0&&_.each(this.errCodes,function(a){this.$("#errMsgWrapper li[errCode="+a+"]").show()})},checkCarryId:function(){(""==this.$("#carryId").val()||12!=this.$("#carryId").val().length)&&this.errCodes.push("901")},checkEndClaimMoney:function(){var a=this.$("#endClaimMoney").val();""!=a&&/^\d+(\.\d{1,2})?$/.test(a)||this.errCodes.push("902")},checkCompensateAmt:function(){var a=this.$("#compensateAmt").val();""!=a&&/^\d+(\.\d{1,2})?$/.test(a)||this.errCodes.push("903")},checkBankCode:function(){""==this.$("#bankCode").val()&&this.errCodes.push("904")},checkBankname:function(){var a=this.$("#bankName").val();a=this.parseChineseChar(a),""==a&&this.errCodes.push("905"),a.length>100&&this.errCodes.push("1105")},checkCountName:function(){var a=this.$("#countName").val();a=this.parseChineseChar(a),""==a&&this.errCodes.push("906"),a.length>100&&this.errCodes.push("1104")},checkCustomerBankCard:function(){var a=this.$("#customerBankCard").val();""==a&&this.errCodes.push("907"),(!/^\d*$/.test(a)||a.length>25)&&this.errCodes.push("1106")},checkCountProvince:function(){""==this.$("#countProvince").val()&&this.errCodes.push("908")},checkPurp:function(){0===this.$(":radio[name=ctgyPurp]:checked").length&&this.errCodes.push("909")},checkPhone:function(){d.isValidPhoneNumber(this.$("#phone").val())||this.errCodes.push("910")},checkCapcha:function(){(""==this.$("#capcha").val()||6!=this.$("#capcha").val().length)&&this.errCodes.push("911")},checkArea:function(){return this.$(".area").is(":visible")&&0==this.$(".area :radio:checked").length?(this.errCodes.push("914"),!1):!0},showStep:function(a){_.each(this.$steps,function(a){a.hide()}),this.$steps[a-1].show()},confirm:function(){var a=this;this.errCodes.length>0?(a.renderErrMsg(),a.showStep(1)):b.ajax({type:"POST",url:d.getRESTfulDomain("claims/sendCustomer?app=claims"),headers:{"SMS-Verification-App":"claims","SMS-Verification-Code":this.$("#capcha").val(),"SMS-Verification-Mobile":this.$("#phone").val()},data:this.$("form").serializeArray(),error:function(b){if(a.errCodes=[],403===b.status){var c=JSON.parse(b.responseText);!c||"003"!==c.code&&"002"!==c.code?a.errCodes.push("911"):a.errCodes.push("912")}else a.errCodes.push("913");var d=a.$("#getCaptcha");d.text(_l("获取验证码")),d.attr("disabled",!1),a.renderErrMsg(),a.showStep(1)},success:function(b){if("0"==b.claimsRst){if(a.$("#protocal").is(":checked")){var c=_l("您已经成功注册为顺丰会员，账号为")+a.$("#phone").val()+_l("。密码会在稍后发送到您的手机。"),d=_l("注册会员失败。"),e="1"==b.regRst&&a.$("")?c:d;a.$(".step_3").append("<p>"+e+"</p>")}a.showStep(3)}else{var f=b;("2"===f.claimsRst||"48"===f.claimsRst)&&(f.claimsRst="2"),("5"===f.claimsRst||"47"===f.claimsRst)&&(f.claimsRst="5"),("1"===f.claimsRst||"46"===f.claimsRst)&&(f.claimsRst="1"),("3"===f.claimsRst||"49"===f.claimsRst)&&(f.claimsRst="3"),a.errCodes=[],a.errCodes.push(f.claimsRst),a.renderErrMsg(),a.showStep(1)}}})},backModify:function(){this.showStep(1)},serializeObject:function(a){var b={};return $.each(a,function(){void 0!==b[this.name]?(b[this.name].push||(b[this.name]=[b[this.name]]),b[this.name].push(this.value||"")):b[this.name]=this.value||""}),b},setCode:function(){this.$("#countProvinceCode").val(this.$("#countProvince").data("code"))}})}),define("views/clearance",["templates","backbone","models/clearance","helper"],function(a,b,c,d){return b.View.extend({$el:$(".clearance-page"),initialize:function(){this.model=new c,this.$imgBackWrapper=this.$("#imgBackWrapper"),this.$billNumber=this.$("#bno"),this.$cardType=this.$("#cardType"),this.$submitButton=this.$("#submitButton"),this.$imgBackWrapper=this.$("#imgBackWrapper"),this.$idcardFront=this.$("#idcardFront"),this.$idcardBack=this.$("#idcardBack"),this.$errorWrapper=this.$(".form-group.error"),this.errCodes=[],this.listenTo(this.model,"clearance-failed",this.clearanceFail),this.listenTo(this.model,"clearance-success",this.clearanceSuccess),this.listenTo(this.model,"clearanceqingguan-success",this.clearanceqingguanSuccess),this.check=!0},events:{"click #btutypeqingguan .label-button":"changeTypeqingguan","click #btntype .label-button":"changeType","change #bno":"checkAll","change #idcardFront":"checkAll","change #idcardBack":"checkAll","change #clearanceImage":"checkAll","click #submitButton":"submitButtonImage","click .require-policy input.policy":"agreePrivacy"},submitButtonImage:function(a){var b=$(".label-button.selected").attr("btn-type");"passport"==b||"others"==b||"identity"==b?this.uploadClearance():this.uploadClearanceqingguan()},changeType:function(a){$("#btutypeqingguan .label-button").removeClass("selected"),$("#file-pathF").attr("placeholder",_l("上传证件正面图片")),a.stopPropagation();var b=$(a.target),c=b.attr("btn-type");b.addClass("selected").siblings().removeClass("selected"),this.$cardType.val(b.attr("btn-value")),"passport"==c||"others"==c?(this.$imgBackWrapper.find("input").val(""),this.$imgBackWrapper.hide()):this.$imgBackWrapper.show(),this.checkAll()},changeTypeqingguan:function(a){$("#btntype .label-button").removeClass("selected"),$("#file-pathF").attr("placeholder",_l("上传图片")),a.stopPropagation();var b=$(a.target);b.attr("btn-type");b.addClass("selected").siblings().removeClass("selected"),this.$cardType.val(b.attr("btn-value")),this.$imgBackWrapper.find("input").val(""),this.$imgBackWrapper.hide(),this.checkAll()},checkAll:function(){this.check=!0,this.errCodes=[],this.checkBillNumber(),this.checkImg(),"cn"!=d.getSiteLocation()&&this.checkPrivacyPolicy(),this.renderMsg(this.errCodes),this.check?this.$submitButton.removeAttr("disabled"):this.$submitButton.attr("disabled","disabled")},checkBillNumber:function(){var a=this.$billNumber.val();""==a||void 0==a?(this.errCodes.push("4"),this.check=!1):/^\d{12}$/.test(a)||(this.errCodes.push("7"),this.check=!1)},checkImg:function(){var a=/.*(jpg|JPG|jpeg|JPEG|gif|GIF|png|PNG)$/;"1"===this.$cardType.val()?""==this.$idcardFront.val()||void 0==this.$idcardFront.val()||""==this.$idcardBack.val()||void 0==this.$idcardBack.val()?(this.check=!1,this.errCodes.push("2")):a.test(this.$idcardFront.val())&&a.test(this.$idcardBack.val())||(this.check=!1,this.errCodes.push("21")):""==this.$idcardFront.val()||void 0==this.$idcardFront.val()?(this.check=!1,this.errCodes.push("2")):a.test(this.$idcardFront.val())||(this.check=!1,this.errCodes.push("21"))},renderMsg:function(a){var b=this.$errorWrapper;this.clearHint(),this.$errorWrapper.show(),_.each(a,function(a,c,d){b.find("#err-"+a).css("display","block")})},uploadClearanceqingguan:function(){if(this.checkAll(),0===this.errCodes.length){var a=$(".label-button.selected").attr("btn-type"),b=$(".label-button.selected").attr("btn-value"),c=this.$billNumber.val();$('input[name="idcardFront"]').attr("name","clearanceImage"),$('input[id="idcardFront"]').attr("id","clearanceImage"),this.model.uploadClearanceqingguan({files:this.$("form :file"),cardType:a,imageType:b,bno:c})}},uploadClearance:function(){if($('input[name="clearanceImage"]').attr("name","idcardFront"),$('input[id="clearanceImage"]').attr("id","idcardFront"),this.checkAll(),0===this.errCodes.length){var a={};_.each(this.$('form :input[type="text"]').add('form :input[type="hidden"]'),function(b){a[b.name]=b.value}),this.model.uploadClearance({files:this.$("form :file"),data:a})}},clearHint:function(){this.$errorWrapper.hide().find("b").hide()},clearanceFail:function(a){this.renderMsg([9])},clearanceqingguanSuccess:function(a){this.renderMsg([a[0].code]),500===a[0].code&&this.renderMsg([9]),100===a[0].code&&this.renderMsg([0]),100==a[0].code&&($(".form-horizontal")[0].reset(),this.$submitButton.attr("disabled","disabled"))},clearanceSuccess:function(a){this.renderMsg([a.code]),500===a.code&&this.renderMsg([9]),0==a.code&&($(".form-horizontal")[0].reset(),this.$submitButton.attr("disabled","disabled"))},agreePrivacy:function(a){var b=$(a.currentTarget);b.attr("checked")?($(".require-policy .error-prompt").hide(),this.checkAll()):($(".require-policy .error-prompt").show(),this.$submitButton.attr("disabled","disabled"))},checkPrivacyPolicy:function(){$("#policy").attr("checked")?$(".require-policy .checkbox").removeClass("s-prompt"):($(".require-policy .error-prompt").prop("lastChild").nodeValue=_l("必须同意隐私声明"),$(".require-policy .error-prompt").show(),$(".require-policy .checkbox").addClass("s-prompt"),this.check=!1,this.errCodes.push("201"))}})}),define("models/otherService",["backbone"],function(a){return a.Model.extend({availableAt:function(a){var b=a.origin,c=a.dests;b!=_l("中国件")&&b!=_l("香港件")&&b!=_l("台湾件")&&b!=_l("澳门件")&&(b=_l("国际件")),c!=_l("中国件")&&c!=_l("香港件")&&c!=_l("台湾件")&&c!=_l("澳门件")&&(c=_l("国际件"));for(var d={originLocations:b,destsLocations:c},e=this.get("locations"),f=!1,g=0;g<e.length;g++)JSON.stringify(d)==JSON.stringify(e[g])&&(f=!0);return f}})}),define("collections/otherServices",["backbone","models/otherService"],function(a,b){return a.Collection.extend({model:b,comparator:"order",filterOtherServicesWithLocations:function(a){var b=_.filter(this.models,function(b){return b.availableAt({origin:a.originCountryCode,dests:a.destsCountryCode})});b.length?this.trigger("availableOtherServicesFound",b):$(".payFee-page .other-services-container").css("display","none")}})}),define("views/otherService",["event","templates","models/otherService","backbone","collections/otherServices"],function(a,b,c,d,e){return d.View.extend({template:b.otherService,initialize:function(){this.$otherServices=$('<div class="other-services"></div>'),this.$el.append(this.$otherServices),this.listenTo(a,a.RateSearch,this.rateSearchStarted),this.listenTo(a,"RateSearchCompleted",this.render),this.otherServices=new e(window.otherServiceList),this.listenTo(this.otherServices,"availableOtherServicesFound",this.appendOtherServices)},appendOtherServices:function(a){this.$otherServices.html(this.template({otherServices:a})),this.$el.fadeIn()},rateSearchStarted:function(a){this.locations=_.extend(this.locations||{},a),this.$el.slideUp(),this.$otherServices.html("")},render:function(a){if(a){var b=this.locations;b.originCode&&b.destCode&&(this.otherServices.filterOtherServicesWithLocations(b),this.$el.is(":visible")&&this.$el.slideDown())}}})}),define("collections/rules",["backbone","helper"],function(a,b){return a.Collection.extend({fetchURL:function(a,c){c=c||{},this.url=b.getRESTfulDomain(a),this.reset().fetch(c)},fetchOrigins:function(){this.fetchURL("regulation/origins")},fetchDests:function(a){this.fetchURL(_p("regulation/dests?originCode=%s",encodeURIComponent(a)))},fetchItems:function(a,b){this.fetchURL(_p("regulation/items?originCode=%s&destCode=%s",encodeURIComponent(a),encodeURIComponent(b)))},fetchDetails:function(a,b,c){var d=this;this.fetchURL(_p("regular/tax?code=%s&flag=%s&descType=%s&goodCode=%s&goodName=%s&weight=%s&goodValue=%s&currentPage=%s&pageSize=%s",encodeURIComponent(a),encodeURIComponent(b),encodeURIComponent(c.descType),encodeURIComponent(c.goodCode),encodeURIComponent(c.goodName),c.weight,encodeURIComponent(c.goodValue),c.currentPage,c.pageSize),{error:function(a,b){404===b.status?d.trigger("notFound"):d.trigger("networkError")}})}})}),define("models/rules",["backbone","helper"],function(a,b){return a.Model.extend({fetchDetails:function(c,d,e){var f=this;a.ajax({type:"GET",url:b.getRESTfulDomain(_p("regular/tax?code=%s&flag=%s&descType=%s&goodCode=%s&goodName=%s&weight=%s&goodValue=%s&currentPage=%s&pageSize=%s",encodeURIComponent(c),encodeURIComponent(d),encodeURIComponent(e.descType),encodeURIComponent(e.goodCode),encodeURIComponent(e.goodName),e.weight,encodeURIComponent(e.goodValue),e.currentPage,e.pageSize)),error:function(a,b){404===b.status?f.trigger("notFound"):f.trigger("networkError")},success:function(a,b){f.trigger("fetchSuccess",a)}})}})}),define("views/importExportRule",["backbone","underscore","bootstrap","helper","collections/rules","models/rules","templates"],function(a,b,c,d,e,f,g){return a.View.extend({events:{"click .origin .dropdown-menu a":"selectOrigin","click .dest .dropdown-menu a":"selectDest","click .recieve-type .dropdown-menu a":"selectRecieveType","click .submit-query":"queryDetails","click .clear-query":"clearInput","click .rule-pagination-src .pagination a":"gotoSrcPage","click .rule-pagination-dest .pagination a":"gotoDestPage","click .src-table td a.tax-details":"showsSrcTaxDetails","click .dest-table td a.tax-details":"showsDestTaxDetails","click td a.tax-images":"showsTaxImages"},initialize:function(){this.pageSize=10,this.origins={cn:[{code:"CN",name:"中国大陆",tname:"中國大陸",ename:"Chinese Mainland"},{code:"TW",name:"中国台湾",tname:"台灣",ename:"Taiwan China"},{code:"HK",name:"中国香港",tname:"香港",ename:"Hong Kong China"},{code:"MO",name:"中国澳门",tname:"澳門",ename:"Macau China"},{code:"IN",name:"印度",tname:"印度",ename:"India"},{code:"KH",
name:"柬埔寨",tname:"柬埔寨",ename:"Cambodia"},{code:"AU",name:"澳大利亚",tname:"澳大利亞",ename:"Australia"},{code:"SG",name:"新加坡",tname:"新加坡",ename:"Singapore"},{code:"MY",name:"马来西亚",tname:"馬來西亞",ename:"Malaysia"},{code:"TH",name:"泰国",tname:"泰國",ename:"Thailand"},{code:"VN",name:"越南",tname:"越南",ename:"Vietnam"},{code:"JP",name:"日本",tname:"日本",ename:"Japan"},{code:"US",name:"美国",tname:"美國",ename:"United States"},{code:"KR",name:"韩国",tname:"韓國",ename:"Korea"},{code:"RU",name:"俄罗斯",tname:"俄羅斯",ename:"Russia"},{code:"MN",name:"蒙古国",tname:"蒙古國",ename:"Mongolia"},{code:"ID",name:"印度尼西亚",tname:"印尼",ename:"Indonesia"}]},this.srcDetails=new f,this.destDetails=new f,this.listenTo(this.srcDetails,"fetchSuccess",this.renderSrcResults),this.listenTo(this.srcDetails,"notFound",this.showNotFoundError),this.listenTo(this.srcDetails,"networkError",this.showNetworkError),this.listenTo(this.destDetails,"fetchSuccess",this.renderDestResults),this.listenTo(this.destDetails,"notFound",this.showNotFoundError),this.render(),$("[data-toggle='tooltip']").tooltip({html:!0})},selectOrigin:function(a){var b=$(a.currentTarget);this.originSelected={name:b.text(),code:b.data("code")},this.render()},selectDest:function(a){var b=$(a.currentTarget);this.destSelected={name:b.text(),code:b.data("code")},this.render()},selectRecieveType:function(a){var b=$(a.currentTarget);this.recieveTypeSelected={name:b.text(),code:b.data("code")},this.render()},renderDropdowns:function(){this.$(".origin .dropdown-menu").html(g.dropdownRuleTemplates({dropdownItems:b.sortBy(this.origins.cn,"ename")})),this.$(".dest .dropdown-menu").removeClass("hidden"),this.$(".dest .dropdown-menu").html(g.dropdownRuleTemplates({dropdownItems:b.sortBy(this.origins.cn,"ename")}))},renderDropdownTitle:function(){var a=this.$(".origin .dropdown-toggle .selected-dropdown"),b=this.originSelected?this.originSelected.name:a.data("origin-text");a.text(b);var c=this.$(".dest .dropdown-toggle .selected-dropdown"),d=this.destSelected?this.destSelected.name:c.data("origin-text");c.text(d);var e=this.$(".recieve-type .dropdown-toggle .selected-dropdown"),f=this.recieveTypeSelected?this.recieveTypeSelected.name:e.data("origin-text");e.text(f)},updateQueryButtonStatus:function(){var a=this.originSelected&&this.destSelected&&this.recieveTypeSelected;this.$(".submit-query").toggleClass("disabled",!a)},renderResults:function(){this.$(".results"),this.$(".results .src-table tbody"),this.$(".results .dest-table tbody")},renderSrcResults:function(a){var c=this.$(".results"),d=this.$(".results .src-table tbody");0==a.code?a.goods&&!b.isEmpty(a.goods)?(this.currentSrcGoods=a.goods,d.empty().html(g.importExportRuleResult({results:a.goods,pageIndex:window.pageIndex||1,pageSize:this.pageSize})),this.printPageNavLinkList(".rule-pagination-src",a.page.totalPage),this.$(".results .src-table").show(),this.$(".rule-pagination-src").show(),c.slideDown()):(d.empty(),c.slideUp()):(c.slideDown(),this.$(".results .src-table").show(),this.$(".rule-pagination-src").hide(),d.empty())},renderDestResults:function(a){var c=this.$(".results"),d=this.$(".results .dest-table tbody");0==a.code?a.goods&&!b.isEmpty(a.goods)?(this.currentDestGoods=a.goods,d.empty().html(g.importExportRuleResult({results:a.goods,pageIndex:window.pageIndex||1,pageSize:this.pageSize})),this.printPageNavLinkList(".rule-pagination-dest",a.page.totalPage),this.$(".results .dest-table").show(),this.$(".rule-pagination-dest").show(),c.slideDown()):(d.empty(),c.slideUp()):(c.slideDown(),this.$(".results .dest-table").show(),this.$(".rule-pagination-dest").hide(),d.empty())},render:function(){this.renderDropdownTitle(),this.renderDropdowns(),this.updateQueryButtonStatus()},gotoSrcPage:function(a){var b=this,c=$(a.currentTarget);a.stopPropagation();var d=c.attr("data-pageindex");window.pageIndex=Number(d);var e={descType:b.recieveTypeSelected.code,goodCode:$.trim(b.$("input[name=goodCode]").val()),goodName:$.trim(b.$("input[name=goodName]").val()),weight:$.trim(b.$("input[name=weight]").val()),goodValue:$.trim(b.$("input[name=goodValue]").val()),currentPage:d,pageSize:b.pageSize};b.srcDetails.fetchDetails(b.originSelected.code,"E",e)},gotoDestPage:function(a){var b=this,c=$(a.currentTarget);a.stopPropagation();var d=c.attr("data-pageindex");window.pageIndex=Number(d);var e={descType:b.recieveTypeSelected.code,goodCode:$.trim(b.$("input[name=goodCode]").val()),goodName:$.trim(b.$("input[name=goodName]").val()),weight:$.trim(b.$("input[name=weight]").val()),goodValue:$.trim(b.$("input[name=goodValue]").val()),currentPage:d,pageSize:b.pageSize};b.destDetails.fetchDetails(b.destSelected.code,"I",e)},showsSrcTaxDetails:function(a){var b=this,c=$(a.currentTarget);a.stopPropagation();var d=c.attr("item-index"),e=Number(d),f=b.currentSrcGoods[e].taxs,h=g.tooltipsTable({taxs:f});c.attr("title",h),$(".tooltip").remove(),c.tooltip("toggle"),$(".tooltip").css({top:"30px","z-index":"1000",background:"#D0CECE",position:"absolute"}),$(".tooltip table").css({background:"#D0CECE",width:"300px","text-align":"center"}),c.attr("title","")},showsDestTaxDetails:function(a){var b=this,c=$(a.currentTarget);a.stopPropagation();var d=c.attr("item-index"),e=Number(d),f=b.currentDestGoods[e].taxs,h=g.tooltipsTable({taxs:f});c.attr("title",h),$(".tooltip").remove(),c.tooltip("toggle"),$(".tooltip").css({top:"30px","z-index":"1000",background:"#D0CECE",position:"absolute"}),$(".tooltip table").css({background:"#D0CECE",width:"300px","text-align":"center"}),c.attr("title","")},showsTaxImages:function(a){var b=$(a.currentTarget);a.stopPropagation();var c=b.attr("image-src"),e=d.getImportAndExportPicture()+c;window.open(e)},queryDetails:function(){var a=this,b={descType:a.recieveTypeSelected.code,goodCode:$.trim(a.$("input[name=goodCode]").val()),goodName:$.trim(a.$("input[name=goodName]").val()),weight:$.trim(a.$("input[name=weight]").val()),goodValue:$.trim(a.$("input[name=goodValue]").val()),currentPage:1,pageSize:a.pageSize};a.checkInput(b)&&(this.$(".error").hide(),this.$(".results").slideUp(function(){a.srcDetails.fetchDetails(a.originSelected.code,"E",b),a.destDetails.fetchDetails(a.destSelected.code,"I",b)}))},checkInput:function(a){var b=this;return""==a.goodValue||d.parseChineseChar(a.goodValue).length>50?(this.$(".error[data-error=input-invalid]").text(_l("请输入必填项")).show(),b.$("input[name=goodValue]").focus(),!1):""==a.weight||d.parseChineseChar(a.weight).length>50?(this.$(".error[data-error=input-invalid]").text(_l("请输入必填项")).show(),b.$("input[name=weight]").focus(),!1):""!=a.goodName&&d.parseChineseChar(a.goodName).length>50?(this.$(".error[data-error=input-invalid]").show(),b.$("input[name=goodName]").focus(),!1):""!=a.goodCode&&d.parseChineseChar(a.goodCode).length>50?(this.$(".error[data-error=input-invalid]").show(),b.$("input[name=goodCode]").focus(),!1):""==a.goodCode&&""==a.goodName?(this.$(".error[data-error=input-invalid]").text(_l("品名与商品代码至少输入一项")).show(),b.$("input[name=goodCode]").focus(),!1):!0},clearInput:function(){this.$("input[type=text]").val("")},resetQueryButton:function(){this.$(".submit-query").button("reset")},showNotFoundError:function(){this.$(".error[data-error=not-found]").show(),this.resetQueryButton()},showNetworkError:function(){this.$(".error[data-error=network]").show(),this.resetQueryButton()},paginationNews:function(){this.show(this.newsOfPage(1)),this.pageCount()>1&&this.printPageNavLinkList()},printPageNavLinkList:function(a,b){var c=window.pageIndex||1;$(a).html(g.pagination({pageIndex:c,pageCount:b}))},pageCount:function(){var a=window.news.size(),b=window.newsPageSize;return a%b===0?a/b:Math.floor(a/b)+1}})}),define("models/waybill",["backbone","helper"],function(a,b){return a.Model.extend({defaults:{isChecked:!0},fetchBillDetailsByPhoneNumber:function(c){return a.ajax({type:"get",url:b.getRESTfulDomain("bills/"+this.id+"/info?phone="+c)})},fetchWeixinDetail:function(){return a.ajax({url:b.getRESTfulDomain("weixin/"+this.id+"/ticket")})},requestRefundWithPhoneNumber:function(c){return a.ajax({type:"post",url:b.getRESTfulDomain("bills/"+this.id+"/refundRequest"),data:{phone:c}})},isRefundable:function(){var a=this.get("refundable");if(!a)return!1;var b=_.findWhere(window.additionalServiceList,{code:"CSTF"});return b?-1===_.indexOf(b.availableService,this.get("limitTypeCode"))?!1:a:!0},overdueRefundLink:function(){var a=_.findWhere(window.additionalServiceList,{code:"CSTF"});return a.link},fetchRatedService:function(c){return a.ajax({url:b.getRESTfulDomain("bills/"+this.id+"/satisfactions/"),data:{phone:c}})},rateService:function(c){var d={rate:c.rate,phone:this.get("phone"),party:c.responder};return a.ajax({type:"POST",url:b.getRESTfulDomain("bills/"+this.id+"/satisfactions/"+b.assemabledLocationAndLanguageQureyString()),data:JSON.stringify(d),headers:{"Content-Type":"application/json"}})},requestSMSCodefromServer:function(c,d,e){var f;return f="th"==b.getSiteLanguage()||"ru"==b.getSiteLanguage()||"vi"==b.getSiteLanguage()||"ge"==b.getSiteLanguage()||"fr"==b.getSiteLanguage()?"en":b.getSiteLanguage(),d=d||"billPicture",a.ajax({type:"post",url:b.getRESTfulDomain(_p("sms/%s/%s/notification?billID=%s&lang=%s&region=%s&app=sms&answer=%s",d,c,this.id,f,b.getSiteLocation(),e))})},requestBillImage:function(c){return a.ajax({url:b.getRESTfulDomain(_p("billPicture/%(waybillID)s/requestImage",{waybillID:this.id})),headers:{"SMS-Verification-Code":c,"SMS-Verification-Mobile":this.get("senderPhone"),"SMS-Verification-App":"billPicture"}})},requestBillConfirmation:function(c){return a.ajax({url:b.getRESTfulDomain(_p("billPicture/%(waybillID)s/requestConfirmation?answer="+c+"&app=bill",{waybillID:this.id}))})},requestBillImageHead:function(b){return a.ajax({type:"GET",url:b})},requestBillInfo:function(c){return a.ajax({url:b.getRESTfulDomain(_p("billPicture/%(waybillID)s/requestImage",{waybillID:this.id})),headers:{"SMS-Verification-Code":c,"SMS-Verification-Mobile":this.get("senderPhone"),"SMS-Verification-App":"billInfo"}})},billInfoURL:function(c){var d;d="th"==b.getSiteLanguage()||"ru"==b.getSiteLanguage()||"vi"==b.getSiteLanguage()||"ge"==b.getSiteLanguage()||"fr"==b.getSiteLanguage()?"en":b.getSiteLanguage();var e=b.getRESTfulDomain(_p("bills/%(id)s/billInfo?lang=%(lang)s&region=%(region)s",{id:this.id,lang:d,region:b.getSiteLocation()}));return a.ajax({type:"GET",url:e,headers:{"SMS-Verification-Code":c,"SMS-Verification-Mobile":this.get("senderPhone"),"SMS-Verification-App":"billInfo"}})},requestChangeRecipientInfo:function(c){return a.ajax({url:b.getRESTfulDomain(_p("shortcutTools/%(waybillID)s/changeRecipientInfo/smsVerification",{waybillID:this.id})),headers:{"SMS-Verification-Code":c,"SMS-Verification-Mobile":this.get("messageValidationPhone"),"SMS-Verification-App":"changeRecipientInfo"}})},shortcutToolsService:function(c,d){return a.ajax({type:"POST",url:b.getRESTfulDomain("shortcutTools/"+this.id+"/"+d+"/sendWorkOrders"),data:JSON.stringify(c),headers:{"Content-Type":"application/json"}})},billImageURL:function(a){var c;return c="th"==b.getSiteLanguage()||"ru"==b.getSiteLanguage()||"vi"==b.getSiteLanguage()||"ge"==b.getSiteLanguage()||"fr"==b.getSiteLanguage()?"en":b.getSiteLanguage(),b.getRESTfulDomain(_p("billPicture/image?"+a+"&lang=%(lang)s&region=%(region)s",{lang:c,region:b.getSiteLocation()}))},hasRegistMember:function(c){return a.ajax({type:"POST",url:b.getRESTfulDomain(_p("member/%(phone)s/exists?lang=%(lang)s&region=%(region)s",{phone:c,lang:b.getSiteLanguage(),region:b.getSiteLocation()}))})},registMember:function(c){return a.ajax({type:"POST",url:b.getRESTfulDomain(_p("member/regist?"+c+"&lang=%(lang)s&region=%(region)s",{lang:b.getSiteLanguage(),region:b.getSiteLocation()}))})},requestPrecedence:function(c){return a.ajax({type:"post",url:b.getRESTfulDomain(_p("priorityDelivery/%(waybillID)s/hasten?lang=%(lang)s&region=%(region)s",{waybillID:this.id,lang:b.getSiteLanguage(),region:b.getSiteLocation()})),headers:{"SMS-Verification-Code":c,"SMS-Verification-Mobile":this.get("senderPhone"),"SMS-Verification-App":"priorityDelivery"}})}},{fetchUserIpByNullUrl:function(b){return a.ajax({type:"HEAD",url:"/log?billnumber="+b.join(",")})},parse:function(a){var c=!1;return a.routes=_.filter(a.routes,function(a){return"sc"===b.getSiteLanguage()?(a.remark.indexOf("运单资料&签收图")>=0&&(c=!0),a.remark.indexOf("运单资料&签收图")<0):"tc"===b.getSiteLanguage()?(a.remark.indexOf("運單資料&簽收圖")>=0&&(c=!0),a.remark.indexOf("運單資料&簽收圖")<0):(a.remark.indexOf("運單資料&簽收圖")>=0&&(c=!0),a.remark.indexOf("AWB Info & POD")<0)}),c&&(a.signed=c),0==a.routes.length?null:(a.routes=_.sortBy(a.routes,function(a){return a.scanDateTime}).reverse(),a.routes=this.appendPreviousScanTime(a.routes),a)},appendPreviousScanTime:function(a){var b;return _.each(a,function(a){b&&(a.lastRouteScanDateTime=b.scanDateTime),b=a}),a},validateBillNumber:function(a){var b=/^\d{12}$/;return b.test(a.trim())},validateBillNumbers:function(a){var b=!0,c=this;return _.each(a,function(a){a.length&&!c.validateBillNumber(a)&&(b=!1)}),b}})}),define("collections/waybills",["backbone","models/waybill","underscore","helper"],function(a,b,c,d){return a.Collection.extend({model:b,initialize:function(){this.billNumbers=[]},parse:function(a){return a=c.map(a,function(a){return b.parse(a)})},findWaybillById:function(a){return this.findWhere({id:a})},updateSubscribedStatus:function(a){c.each(this.models,function(b){b.get("delivered")||b.set("isChecked",a)})},getSubscribedWaybills:function(){return this.where({isChecked:!0,delivered:!1})},isAllChecked:function(){var a=this.subsribableWaybills();return a.length?this.getSubscribedWaybills().length===a.length:!1},subsribableWaybills:function(){return this.where({delivered:!1})},subscribeSelectedWaybillsWithEmails:function(b){var e=c.map(this.getSubscribedWaybills(),function(a){return a.id});return a.ajax({url:d.getRESTfulDomain("bills/"+e.join(",")+"/subscription/email?lang="+d.getSiteLanguage()+"&region="+d.getSiteLocation()),type:"POST",data:JSON.stringify(b),headers:{"Content-Type":"application/json"}})},fetchWeiXinQRCodeForSelectedBills:function(){var b=c.map(this.getSubscribedWaybills(),function(a){return a.id});return a.ajax({url:d.getRESTfulDomain("weixin/"+b.join(",")+"/ticket")})}})}),define("views/waybill/detail/routes",["backbone","templates","helper"],function(a,b,c){return a.View.extend({events:{showTabDetail:"render",'click  div[data-toggle="status-toggle"] .status-update-tab':"showRoutesByDate",'click  div[data-toggle="status-toggle"] .arrow':"showRoutesByDate"},initialize:function(){this.tab=$(b.waybillDetailRouteTab()),this.$el=$('<li data-detail="waybill-status" class="status-updates"></li>')},render:function(){var a=this.model.toJSON(),d=_.groupBy(a.routes,function(a){return moment(a.scanDateTime).format("YYYY-MM-DD")}),e=b.waybillDetailRoute({results:_.pairs(d),dateDescriptionForRoute:this.dateDescriptionForRoute,toLocalDate:this.toLocalDate,toLocalTime:this.toLocalTime,limitCodes:a.limitTypeCode,T13_virtualAddressCodeList:c.getT13_virtualAddressCodeList(),T14_virtualAddressCodeList:c.getT14_virtualAddressCodeList()});this.$el.html(e)},dateDescriptionForRoute:function(a){var b="YYYY-MM-DD HH:mm:ss";if(a.lastRouteScanDateTime){var c=moment(a.scanDateTime);c.isSame(a.lastRouteScanDateTime,"day")&&(b="HH:mm:ss")}return moment(a.scanDateTime).format(b)},toLocalDate:function(a){return moment(a).format("YYYY-MM-DD dddd")},toLocalTime:function(a){return moment(a).format("HH:mm:ss")},showRoutesByDate:function(a){a.stopPropagation();var b=$(a.target);b.parents(".status-update-box").toggleClass("open")}})}),define("views/waybill/detail/validatePhoneNumber",["backbone","templates","helper"],function(a,b,c){return a.View.extend({events:{"click .primary-button":"submitValidationData","keyup .phone-number-input":"inputChanged"},inputChanged:function(a){var b=c.isValidPhoneNumber($(a.currentTarget).val());this.$(".primary-button").toggleClass("disabled",!b),this.$(".error").hide()},submitValidationData:function(a){function b(){d.button("reset"),c.$(".error").show()}var c=this,d=$(a.currentTarget);d.button("loading"),this.$(".error").hide();var e=this.$(".phone-number-input").val();this.submitCallBack(e,b)},render:function(){this.$el.html(b.waybillValidationView()),this.$("input").placeholder()}})}),define("views/waybill/detail/info",["backbone","templates","views/waybill/detail/validatePhoneNumber"],function(a,b,c){return a.View.extend({events:{showTabDetail:"render"},initialize:function(){this.tab=$(b.waybillDetailInfoTab()),this.$el=$('<li data-detail="waybill-details" class="status-infos"></li>')},fetchBillDetails:function(a,b){var c=this;a||(a=this.model.get("phone")),this.model.fetchBillDetailsByPhoneNumber(a).success(function(b){c.model.set(b),c.model.set("phone",a),c.model.set("infoFetched",!0),c.render()}).error(function(){c.model.set("phone",void 0),b&&b()})},render:function(){return this.model.get("phone")?void(this.model.get("infoFetched")?this.$el.html(b.waybillDetailInfo({result:this.model.toJSON()})):(this.$el.html(b.waybillDetailInfo({result:null})),this.fetchBillDetails())):void this.renderValidationView()},renderValidationView:function(){var a=new c({el:this.$el,model:this.model}),b=this;a.submitCallBack=function(a,c){b.fetchBillDetails(a,c)},a.render()}})}),define("views/waybill/detail/qrcode",["backbone","templates","helper"],function(a,b,c){return a.View.extend({initialize:function(){this.tab=$(b.waybillDetailQRcodeTab()),this.initializePopover(),this.bindEventOnShow()},initializePopover:function(){this.tab.popover({content:b.waybillDetailQRCode({showLoading:!0,qrcodeURL:c.getResourceURL("images/QR-code.png"),billNumber:this.model.id}),html:!0,trigger:"hover",placement:"bottom",container:"#waybill-"+this.model.id})},bindEventOnShow:function(){var a=this;this.tab.on("hide.bs.popover",function(){a.tab.data("showingPopover",!1)}),this.tab.on("shown.bs.popover",function(){a.tab.data("showingPopover",!0),a.fetchedWeixinDetail||(a.fetchedWeixinDetail=!0,a.model.fetchWeixinDetail().success(function(d){a.tab.attr("data-content",b.waybillDetailQRCode({showLoading:!1,showError:!1,qrcodeURL:c.getWeiXinQRCodeURL(d.ticket),billNumber:a.model.id})),a.tab.data("showingPopover")&&a.tab.popover("show")}).error(function(){a.tab.attr("data-content",b.waybillDetailQRCode({showLoading:!1,showError:!0,qrcodeURL:c.getResourceURL("images/QR-code.png"),billNumber:a.model.id})),a.tab.data("showingPopover")&&a.tab.popover("show")}))})}})}),define("views/waybill/detail/refund",["backbone","templates","helper"],function(a,b,c){return a.View.extend({events:{"click .primary-button":"requestRefund","keyup .phone-number-input":"inputChanged",showTabDetail:"render"},initialize:function(){this.tab=$(b.waybillDetailRefundTab()),this.$el=$('<li data-detail="waybill-refund" class="status-refund"></li>'),this.listenTo(this.model,"change:paymentPhone",this.render),this.listenTo(this.model,"change:validationRequired",this.render)},render:function(){var a=b.waybillDetailRefund({result:this.model.toJSON(),link:this.model.overdueRefundLink()});this.$el.html(a)},inputChanged:function(a){var b=c.isValidPhoneNumber($(a.currentTarget).val());this.$(".primary-button").toggleClass("disabled",!b)},requestRefund:function(a){function b(){f.button("reset"),e.$(".error").show()}function d(){e.model.set("paymentPhone",g),"1"===g[0]&&e.model.set("validationRequired",!0)}var e=this,f=$(a.currentTarget);this.$(".error").hide();var g=this.$(".phone-number-input").val();c.isValidPhoneNumber(this.$(".phone-number-input").val())?(f.button("loading"),this.model.requestRefundWithPhoneNumber(g).success(d).error(b)):b()}})}),define("views/waybill/detail/precedence",["backbone","templates","helper"],function(a,b,c){return a.View.extend({events:{"click .count-down-button":"getValidationCode","click .submit-application":"submitApplication","keyup input":"inputChanged",showTabDetail:"render"},initialize:function(){this.tab=$(b.waybillDetailPrecedenceTab()),this.$el=$('<li data-detail="waybill-precedence" class="status-precedence"></li>'),this.isSendedExistsRequest=!1},inputChanged:function(){var a=this.$("#sender-phone-number-input").val(),b=this.model.get("senderPhone")||c.isValidPhoneNumber(a);this.$(".count-down-button").trigger("shouldBeActive",b);var d=this.$("#sender-sms-validation-input").val(),e=b&&d;this.$(".submit-application").toggleClass("disabled",!e),this.$(".error").hide();var f=this.model.get("cachePhone");this.hasRegistMember(a,f)},hasRegistMember:function(a,b){var d=this;c.isValidPhoneNumber(a)||b?d.isSendedExistsRequest||d.model.hasRegistMember(a).success(function(a){"1"===a.status&&(d.model.set("showRegisterMemberInPrecedence",!0),d.$("#precedence-show-register-member").show(),d.$("#precedence-register-member").prop("checked",!0))}).error(function(a){}):(d.model.set("showRegisterMemberInPrecedence",!1),d.$("#precedence-show-register-member").hide())},render:function(){this.$el.html(b.waybillDetailPrecedence({result:this.model.toJSON()}))},getValidationCode:function(a){a.preventDefault(),a.stopPropagation();var b=this;c.imgVrfCodePC(b,a,b.requestSMSCodefromServer)},requestSMSCodefromServer:function(a,b,d){var e=$(b.currentTarget);a.$(".error, .message").hide();var f=a.$("#sender-phone-number-input").val();f=_.isEmpty(f)?a.model.get("senderPhone"):f,e.button("loading"),a.model.requestSMSCodefromServer(f,"priorityDelivery",d).success(function(b){a.model.set("senderPhone",f),a.model.set("phone",f),a.model.set("cachePhone",f),"sc"===c.getSiteLanguage()&&(a.isSendedExistsRequest=!0,b?a.encryptQueryString=b.message||JSON.parse(b).message:a.encryptQueryString=""),a.render();var d=a.$(".count-down-button");d.trigger("start")}).error(function(b){e.button("reset"),403===b.status?a.$(".error[data-error=wrong-phone-number]").show():410===b.status?a.$(".error[data-error=limit-send-sms]").show():a.$(".error[data-error=phone-number-network-error]").show()})},submitApplication:function(a){var b=$(a.currentTarget);b.button("loading");var d=this.$("#sender-sms-validation-input").val(),e=this;this.$(".error").hide(),e.encryptQueryString&&"sc"===c.getSiteLanguage()&&e.registMember(e.encryptQueryString),this.model.requestPrecedence(d).success(function(){e.model.set("precedenceRequested",!0),e.render()}).error(function(a){if(403===a.status){var c=JSON.parse(a.responseText);!c||"003"!==c.code&&"002"!==c.code?e.$(".error[data-error=wrong-validation-code]").show():e.$(".error[data-error=expired-validation-code]").show()}else e.$(".error[data-error=submit-network-error]").show();b.button("reset")})},registMember:function(a){var c=this;c.$("#precedence-show-register-member").is(":visible")&&c.$("#precedence-register-member").is(":checked")&&c.model.registMember(a).success(function(a){var c=a.status||JSON.parse(a).status;"1"===c&&($(".shipping-detail-page").append(b.registerMemberPop()),window.setTimeout(function(){$(".shipping-detail-page").children("#registerMemberPop").remove()},5e3))}).error(function(a){})}})}),define("views/waybill/detail/satisfaction",["backbone","templates","views/waybill/detail/validatePhoneNumber"],function(a,b,c){return a.View.extend({events:{"click .available .rate-button":"rateButtonClicked",showTabDetail:"render"},initialize:function(){this.tab=$(b.waybillDetailSatisfactionTab()),this.$el=$('<li data-detail="waybill-satisfaction" class="status-satisfaction"></li>')},fetchRatedService:function(a,b){var c=this;a||(a=this.model.get("phone")),this.model.fetchRatedService(a).success(function(b){_.each(b,function(a){"RECEIVER"===a.party?c.model.set("receiverRate",a.rate):"SENDER"===a.party&&c.model.set("senderRate",a.rate)}),c.model.set("satisfactionFetched",!0),c.model.set("phone",a),c.model.set("satisfactionFetched",!0),c.render()}).error(function(){c.model.set("phone",void 0),b&&b()})},render:function(){return this.model.get("phone")?void(this.model.get("satisfactionFetched")?this.$el.html(b.waybillDetailSatisfaction({result:this.model.toJSON()})):(this.$el.html(b.waybillDetailSatisfaction({result:null})),this.fetchRatedService())):void this.renderValidationView()},renderValidationView:function(){var a=new c({el:this.$el,model:this.model}),b=this;a.submitCallBack=function(a,c){b.fetchRatedService(a,c)},a.render()},rateButtonClicked:function(a){var b=$(a.currentTarget);this.$(".rate-button[data-responder="+b.data("responder")+"]").removeClass("active"),this.$(".error,.loading,.message").hide();var c=this;this.$(".loading").show(),this.model.rateService({responder:b.data("responder"),rate:b.data("rate")}).success(function(){c.$(".loading").hide(),"receiver"===b.data("responder")?c.model.set("receiverRate",b.data("rate")):c.model.set("senderRate",b.data("rate")),c.render(),c.$(".message").show()}).error(function(){c.$(".loading").hide(),c.$(".error").show()})}})});var $$,$$B,$$A,$$F,$$D,$$E,$$CE,$$S;!function(a){var b,c,d,e,f,g,h,i;if(b=function(a){return"string"==typeof a?document.getElementById(a):a},b.emptyFunction=function(){},b.extend=function(b,c,d){d===a&&(d=!0);for(var e in c)!d&&e in b||(b[e]=c[e]);return b},b.deepextend=function(a,b){for(var c in b){var d=b[c];a!==d&&("object"==typeof d?a[c]=arguments.callee(a[c]||{},d):a[c]=d)}return a},b.wrapper=function(a,b){var c=function(){a.apply(this,arguments)},d=function(){};return d.prototype=b.prototype,c.prototype=new d,c},c=function(a){var b={msie:/msie/.test(a)&&!/opera/.test(a),opera:/opera/.test(a),safari:/webkit/.test(a)&&!/chrome/.test(a),firefox:/firefox/.test(a),chrome:/chrome/.test(a)},c="";for(var d in b)if(b[d]){c="safari"==d?"version":d;break}return b.version=c&&RegExp("(?:"+c+")[\\/: ]([\\d.]+)").test(a)?RegExp.$1:"0",b.ie=b.msie,b.ie6=b.msie&&6==parseInt(b.version,10),b.ie7=b.msie&&7==parseInt(b.version,10),b.ie8=b.msie&&8==parseInt(b.version,10),b}(window.navigator.userAgent.toLowerCase()),d=function(){function b(b,c){if(a===b.length){for(var d in b)if(!1===c(b[d],d,b))break}else for(var e=0,f=b.length;f>e&&!(e in b&&!1===c(b[e],e,b));e++);}var c={isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},indexOf:function(a,b,c){if(a.indexOf)return isNaN(c)?a.indexOf(b):a.indexOf(b,c);var d=a.length;for(c=isNaN(c)?0:0>c?Math.ceil(c)+d:Math.floor(c);d>c;c++)if(a[c]===b)return c;return-1},lastIndexOf:function(a,b,c){if(a.lastIndexOf)return isNaN(c)?a.lastIndexOf(b):a.lastIndexOf(b,c);var d=a.length;for(c=isNaN(c)||c>=d-1?d-1:0>c?Math.ceil(c)+d:Math.floor(c);c>-1;c--)if(a[c]===b)return c;return-1}};return b({forEach:function(a,c,d){b(a,function(){c.apply(d,arguments)})},map:function(a,c,d){var e=[];return b(a,function(){e.push(c.apply(d,arguments))}),e},filter:function(a,c,d){var e=[];return b(a,function(a){c.apply(d,arguments)&&e.push(a)}),e},every:function(a,c,d){var e=!0;return b(a,function(){return c.apply(d,arguments)?void 0:(e=!1,!1)}),e},some:function(a,c,d){var e=!1;return b(a,function(){return c.apply(d,arguments)?(e=!0,!1):void 0}),e}},function(a,b){c[b]=function(c,d,e){return c[b]?c[b](d,e):a(c,d,e)}}),c}(),e=function(){var a=Array.prototype.slice;return{bind:function(b,c){var d=a.call(arguments,2);return function(){return b.apply(c,d.concat(a.call(arguments)))}},bindAsEventListener:function(b,c){var d=a.call(arguments,2);return function(a){return b.apply(c,[g.fixEvent(a)].concat(d))}}}}(),f={getScrollTop:function(a){var b=a?a.ownerDocument:document;return b.documentElement.scrollTop||b.body.scrollTop},getScrollLeft:function(a){var b=a?a.ownerDocument:document;return b.documentElement.scrollLeft||b.body.scrollLeft},contains:document.defaultView?function(a,b){return!!(16&a.compareDocumentPosition(b))}:function(a,b){return a!=b&&a.contains(b)},rect:function(a){var b=0,d=0,e=0,g=0;if(!a.getBoundingClientRect||c.ie8){for(var h=a;h;)b+=h.offsetLeft,d+=h.offsetTop,h=h.offsetParent;e=b+a.offsetWidth,g=d+a.offsetHeight}else{var i=a.getBoundingClientRect();b=e=f.getScrollLeft(a),d=g=f.getScrollTop(a),b+=i.left,e+=i.right,d+=i.top,g+=i.bottom}return{left:b,top:d,right:e,bottom:g}},clientRect:function(a){var b=f.rect(a),c=f.getScrollLeft(a),d=f.getScrollTop(a);return b.left-=c,b.right-=c,b.top-=d,b.bottom-=d,b},curStyle:document.defaultView?function(a){return document.defaultView.getComputedStyle(a,null)}:function(a){return a.currentStyle},getStyle:document.defaultView?function(a,b){var c=document.defaultView.getComputedStyle(a,null);return b in c?c[b]:c.getPropertyValue(b)}:function(a,b){var c=a.style,d=a.currentStyle;if("opacity"==b){if(/alpha\(opacity=(.*)\)/i.test(d.filter)){var e=parseFloat(RegExp.$1);return e?e/100:0}return 1}"float"==b&&(b="styleFloat");var f=d[b]||d[i.camelize(b)];if(!/^-?\d+(?:px)?$/i.test(f)&&/^\-?\d/.test(f)){var g=c.left,h=a.runtimeStyle,j=h.left;h.left=d.left,c.left=f||0,f=c.pixelLeft+"px",c.left=g,h.left=j}return f},setStyle:function(a,b,e){if(a.length||(a=[a]),"string"==typeof b){var f=b;b={},b[f]=e}d.forEach(a,function(a){for(var d in b){var e=b[d];"opacity"==d&&c.ie?a.style.filter=(a.currentStyle&&a.currentStyle.filter||"").replace(/alpha\([^)]*\)/,"")+" alpha(opacity="+(100*e|0)+")":"float"==d?a.style[c.ie?"styleFloat":"cssFloat"]=e:a.style[i.camelize(d)]=e}})},getSize:function(a){var b=a.offsetWidth,c=a.offsetHeight;if(!b&&!c){var d,e=!f.contains(document.body,a);e&&(d=a.parentNode,document.body.insertBefore(a,document.body.childNodes[0]));var g=a.style,h={position:"absolute",visibility:"hidden",display:"block",left:"-9999px",top:"-9999px"},i={position:g.position,visibility:g.visibility,display:g.display,left:g.left,top:g.top};f.setStyle(a,h),b=a.offsetWidth,c=a.offsetHeight,f.setStyle(a,i),e&&(d?d.appendChild(a):document.body.removeChild(a))}return{width:b,height:c}}},g=function(){function a(){var a=!0,c=b(),d=this.events[c.type];for(var e in d)this.$$handleEvent=d[e],this.$$handleEvent(c)===!1&&(a=!1);return a}function b(a){if(a)return a;a=window.event,a.pageX=a.clientX+f.getScrollLeft(a.srcElement),a.pageY=a.clientY+f.getScrollTop(a.srcElement),a.target=a.srcElement,a.stopPropagation=c,a.preventDefault=d;var b={mouseout:a.toElement,mouseover:a.fromElement}[a.type];return b&&(a.relatedTarget=b),a}function c(){this.cancelBubble=!0}function d(){this.returnValue=!1}var e,g,h=1,i=function(a,b,c){c.$$guid||(c.$$guid=h++),a.events||(a.events={});var d=a.events[b];d||(d=a.events[b]={},a["on"+b]&&(d[0]=a["on"+b]))};if(window.addEventListener){var j={mouseenter:"mouseover",mouseleave:"mouseout"};e=function(a,b,c){if(b in j){i(a,b,c);var d=a.events[b][c.$$guid]=function(b){var d=b.relatedTarget;d&&(a==d||16&a.compareDocumentPosition(d))||c.call(this,b)};a.addEventListener(j[b],d,!1)}else a.addEventListener(b,c,!1)},g=function(a,b,c){b in j?a.events&&a.events[b]&&(a.removeEventListener(j[b],a.events[b][c.$$guid],!1),delete a.events[b][c.$$guid]):a.removeEventListener(b,c,!1)}}else e=function(b,c,d){i(b,c,d),b.events[c][d.$$guid]=d,b["on"+c]=a},g=function(a,b,c){a.events&&a.events[b]&&delete a.events[b][c.$$guid]};return{addEvent:e,removeEvent:g,fixEvent:b}}(),h=function(){var a=1;return{addEvent:function(b,c,d){d.$$$guid||(d.$$$guid=a++),b.cusevents||(b.cusevents={}),b.cusevents[c]||(b.cusevents[c]={}),b.cusevents[c][d.$$$guid]=d},removeEvent:function(a,b,c){a.cusevents&&a.cusevents[b]&&delete a.cusevents[b][c.$$$guid]},fireEvent:function(a,b){if(a.cusevents){var c=Array.prototype.slice.call(arguments,2),d=a.cusevents[b];for(var e in d)d[e].apply(a,c)}},clearEvent:function(a){if(a.cusevents){for(var b in a.cusevents){var c=a.cusevents[b];for(var d in c)c[d]=null;a.cusevents[b]=null}a.cusevents=null}}}}(),i={camelize:function(a){return a.replace(/-([a-z])/gi,function(a,b){return b.toUpperCase()})}},c.ie6)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(j){}$$=b,$$B=c,$$A=d,$$F=e,$$D=f,$$E=g,$$CE=h,$$S=i}(),define("cjl",function(a){return function(){var b;return b||a.cjl}}(this));var ImageTrans=function(a,b){this._initialize(a,b),this._initMode(),this._support?(this._initContainer(),this._init()):this.onError("not support")};ImageTrans.prototype={_initialize:function(a,b){var a=this._container=$$(a);this._clientWidth=a.clientWidth,this._clientHeight=a.clientHeight,
this._img=new Image,this._style={},this._x=this._y=1,this._radian=0,this._support=!1,this._init=this._load=this._show=this._dispose=$$.emptyFunction;var c=this._setOptions(b);this._zoom=c.zoom,this.onPreLoad=c.onPreLoad,this.onLoad=c.onLoad,this.onError=c.onError,this._LOAD=$$F.bind(function(){this.onLoad(),this._load(),this.reset(),this._img.style.visibility="visible"},this),$$CE.fireEvent(this,"init")},_setOptions:function(a){return this.options={mode:"css3|filter|canvas",zoom:.1,onPreLoad:function(){},onLoad:function(){},onError:function(a){}},$$.extend(this.options,a||{})},_initMode:function(){var a=ImageTrans.modes;this._support=$$A.some(this.options.mode.toLowerCase().split("|"),function(b){return b=a[b],b&&b.support?(b.init&&(this._init=b.init),b.load&&(this._load=b.load),b.show&&(this._show=b.show),b.dispose&&(this._dispose=b.dispose),$$A.forEach(ImageTrans.transforms,function(a,b){this[b]=function(){a.apply(this,[].slice.call(arguments)),this._show()}},this),!0):void 0},this)},_initContainer:function(){var a=this._container,b=a.style,c=$$D.getStyle(a,"position");this._style={position:b.position,overflow:b.overflow},"relative"!=c&&"absolute"!=c&&(b.position="relative"),$$CE.fireEvent(this,"initContainer")},load:function(a){if(this._support){var b=this._img,c=this;b.onload||(b.onload=this._LOAD),b.onerror||(b.onerror=function(){c.onError("err image")}),b.style.visibility="hidden",this.onPreLoad(),b.src=a}},reset:function(){this._support&&(this._x=this._y=1,this._radian=0,this._show())},dispose:function(){this._support&&(this._dispose(),$$CE.fireEvent(this,"dispose"),$$D.setStyle(this._container,this._style),this._container=this._img=this._img.onload=this._img.onerror=this._LOAD=null)}},ImageTrans.modes=function(){function a(a,b){$$D.setStyle(a,{position:"absolute",border:0,padding:0,margin:0,width:"auto",height:"auto",visibility:"hidden"}),b.appendChild(a)}function b(a,b,c){var d=Math.cos(a),e=Math.sin(a);return{M11:d*b,M12:-e*c,M21:e*b,M22:d*c}}var c;return{css3:{support:function(){var a=document.createElement("div").style;return $$A.some(["transform","MozTransform","webkitTransform","OTransform"],function(b){return b in a?(c=b,!0):void 0})}(),init:function(){a(this._img,this._container)},load:function(){var a=this._img;$$D.setStyle(a,{top:(this._clientHeight-a.height)/2+"px",left:(this._clientWidth-a.width)/2+"px",visibility:"visible"})},show:function(){var a=b(this._radian,this._y,this._x);this._img.style[c]="matrix("+a.M11.toFixed(16)+","+a.M21.toFixed(16)+","+a.M12.toFixed(16)+","+a.M22.toFixed(16)+", 0, 0)"},dispose:function(){this._container.removeChild(this._img)}},filter:{support:function(){return"filters"in document.createElement("div")}(),init:function(){a(this._img,this._container),this._img.style.filter="progid:DXImageTransform.Microsoft.Matrix(SizingMethod='auto expand')"},load:function(){this._img.onload=null,this._img.style.visibility="visible",this._img.style.width="1000px"},show:function(){var a=this._img;$$.extend(a.filters.item("DXImageTransform.Microsoft.Matrix"),b(this._radian,this._y,this._x)),a.style.top=(this._clientHeight-a.offsetHeight)/2+"px",a.style.left=(this._clientWidth-a.offsetWidth)/2+"px"},dispose:function(){this._container.removeChild(this._img)}},canvas:{support:function(){return"getContext"in document.createElement("canvas")}(),init:function(){var a=this._canvas=document.createElement("canvas");this._context=a.getContext("2d");$$D.setStyle(a,{position:"absolute",left:0,top:0}),a.width=this._clientWidth,a.height=this._clientHeight,this._container.appendChild(a)},show:function(){var a=this._img,b=this._context,c=this._clientWidth,d=this._clientHeight;b.save(),b.clearRect(0,0,c,d),b.translate(c/2,d/2),b.rotate(this._radian),b.scale(this._y,this._x),b.drawImage(a,-a.width/2,-a.height/2),b.restore()},dispose:function(){this._container.removeChild(this._canvas),this._canvas=this._context=null}}}}(),ImageTrans.transforms={rotate:function(a){this._radian=a},left:function(){this._radian-=Math.PI/2},right:function(){this._radian+=Math.PI/2},rotatebydegress:function(a){this._radian=a*Math.PI/180},scale:function(){function a(a,b){return a>0&&a>-b?-b:0>a&&b>a?b:0}return function(b){if(b){var c=a(this._y,b),d=a(this._x,b);this._y+c>.2&&this._x+d>.2&&c&&d&&(this._y+=c,this._x+=d)}}}(),zoomin:function(){this.scale(Math.abs(this._zoom))},zoomout:function(){this.scale(-Math.abs(this._zoom))}},ImageTrans.prototype._initialize=function(){function a(a){var b=$$D.clientRect(this._container);if(this._mrX=b.left+this._clientWidth/2,this._mrY=b.top+this._clientHeight/2,this._mrRadian=Math.atan2(a.clientY-this._mrY,a.clientX-this._mrX)-this._radian,$$E.addEvent(document,"mousemove",this._mrMOVE),$$E.addEvent(document,"mouseup",this._mrSTOP),$$B.ie){var c=this._container;$$E.addEvent(c,"losecapture",this._mrSTOP),c.setCapture()}else $$E.addEvent(window,"blur",this._mrSTOP),a.preventDefault()}function b(a){this.rotate(Math.atan2(a.clientY-this._mrY,a.clientX-this._mrX)-this._mrRadian),window.getSelection?window.getSelection().removeAllRanges():document.selection.empty()}function c(){if($$E.removeEvent(document,"mousemove",this._mrMOVE),$$E.removeEvent(document,"mouseup",this._mrSTOP),$$B.ie){var a=this._container;$$E.removeEvent(a,"losecapture",this._mrSTOP),a.releaseCapture()}else $$E.removeEvent(window,"blur",this._mrSTOP)}var d=ImageTrans.prototype._initialize,e={init:function(){this._mrX=this._mrY=this._mrRadian=0,this._mrSTART=$$F.bind(a,this),this._mrMOVE=$$F.bind(b,this),this._mrSTOP=$$F.bind(c,this)},initContainer:function(){$$E.addEvent(this._container,"mousedown",this._mrSTART)},dispose:function(){$$E.removeEvent(this._container,"mousedown",this._mrSTART),this._mrSTOP(),this._mrSTART=this._mrMOVE=this._mrSTOP=null}};return function(){var a=arguments[1];a&&a.mouseRotate===!1||$$A.forEach(e,function(a,b){$$CE.addEvent(this,b,a)},this),d.apply(this,arguments)}}(),ImageTrans.prototype._initialize=function(){function a(a){this.scale((a.wheelDelta?a.wheelDelta/-120:(a.detail||0)/3)*Math.abs(this._zoom)),a.preventDefault()}var b=ImageTrans.prototype._initialize,c=$$B.firefox?"DOMMouseScroll":"mousewheel",d={init:function(){this._mzZoom=$$F.bind(a,this)},initContainer:function(){$$E.addEvent(this._container,c,this._mzZoom)},dispose:function(){$$E.removeEvent(this._container,c,this._mzZoom),this._mzZoom=null}};return function(){var a=arguments[1];a&&a.mouseZoom===!1||$$A.forEach(d,function(a,b){$$CE.addEvent(this,b,a)},this),b.apply(this,arguments)}}(),define("imageTrans",["cjl"],function(){}),void 0===jQuery.migrateMute&&(jQuery.migrateMute=!0),function(a,b,c){function d(c){var d=b.console;f[c]||(f[c]=!0,a.migrateWarnings.push(c),d&&d.warn&&!a.migrateMute&&(d.warn("JQMIGRATE: "+c),a.migrateTrace&&d.trace&&d.trace()))}function e(b,e,f,g){if(Object.defineProperty)try{return Object.defineProperty(b,e,{configurable:!0,enumerable:!0,get:function(){return d(g),f},set:function(a){d(g),f=a}}),c}catch(h){}a._definePropertyBroken=!0,b[e]=f}var f={};a.migrateWarnings=[],!a.migrateMute&&b.console&&b.console.log&&b.console.log("JQMIGRATE: Logging is active"),a.migrateTrace===c&&(a.migrateTrace=!0),a.migrateReset=function(){f={},a.migrateWarnings.length=0},"BackCompat"===document.compatMode&&d("jQuery is not compatible with Quirks Mode");var g=a("<input/>",{size:1}).attr("size")&&a.attrFn,h=a.attr,i=a.attrHooks.value&&a.attrHooks.value.get||function(){return null},j=a.attrHooks.value&&a.attrHooks.value.set||function(){return c},k=/^(?:input|button)$/i,l=/^[238]$/,m=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,n=/^(?:checked|selected)$/i;e(a,"attrFn",g||{},"jQuery.attrFn is deprecated"),a.attr=function(b,e,f,i){var j=e.toLowerCase(),o=b&&b.nodeType;return i&&(4>h.length&&d("jQuery.fn.attr( props, pass ) is deprecated"),b&&!l.test(o)&&(g?e in g:a.isFunction(a.fn[e])))?a(b)[e](f):("type"===e&&f!==c&&k.test(b.nodeName)&&b.parentNode&&d("Can't change the 'type' of an input or button in IE 6/7/8"),!a.attrHooks[j]&&m.test(j)&&(a.attrHooks[j]={get:function(b,d){var e,f=a.prop(b,d);return f===!0||"boolean"!=typeof f&&(e=b.getAttributeNode(d))&&e.nodeValue!==!1?d.toLowerCase():c},set:function(b,c,d){var e;return c===!1?a.removeAttr(b,d):(e=a.propFix[d]||d,e in b&&(b[e]=!0),b.setAttribute(d,d.toLowerCase())),d}},n.test(j)&&d("jQuery.fn.attr('"+j+"') may use property instead of attribute")),h.call(a,b,e,f))},a.attrHooks.value={get:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?i.apply(this,arguments):("input"!==c&&"option"!==c&&d("jQuery.fn.attr('value') no longer gets properties"),b in a?a.value:null)},set:function(a,b){var e=(a.nodeName||"").toLowerCase();return"button"===e?j.apply(this,arguments):("input"!==e&&"option"!==e&&d("jQuery.fn.attr('value', val) no longer sets properties"),a.value=b,c)}};var o,p,q=a.fn.init,r=a.parseJSON,s=/^([^<]*)(<[\w\W]+>)([^>]*)$/;a.fn.init=function(b,c,e){var f;return b&&"string"==typeof b&&!a.isPlainObject(c)&&(f=s.exec(a.trim(b)))&&f[0]&&("<"!==b.charAt(0)&&d("$(html) HTML strings must start with '<' character"),f[3]&&d("$(html) HTML text after last tag is ignored"),"#"===f[0].charAt(0)&&(d("HTML string cannot start with a '#' character"),a.error("JQMIGRATE: Invalid selector string (XSS)")),c&&c.context&&(c=c.context),a.parseHTML)?q.call(this,a.parseHTML(f[2],c,!0),c,e):q.apply(this,arguments)},a.fn.init.prototype=a.fn,a.parseJSON=function(a){return a||null===a?r.apply(this,arguments):(d("jQuery.parseJSON requires a valid JSON string"),null)},a.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a.browser||(o=a.uaMatch(navigator.userAgent),p={},o.browser&&(p[o.browser]=!0,p.version=o.version),p.chrome?p.webkit=!0:p.webkit&&(p.safari=!0),a.browser=p),e(a,"browser",a.browser,"jQuery.browser is deprecated"),a.sub=function(){function b(a,c){return new b.fn.init(a,c)}a.extend(!0,b,this),b.superclass=this,b.fn=b.prototype=this(),b.fn.constructor=b,b.sub=this.sub,b.fn.init=function(d,e){return e&&e instanceof a&&!(e instanceof b)&&(e=b(e)),a.fn.init.call(this,d,e,c)},b.fn.init.prototype=b.fn;var c=b(document);return d("jQuery.sub() is deprecated"),b},a.ajaxSetup({converters:{"text json":a.parseJSON}});var t=a.fn.data;a.fn.data=function(b){var e,f,g=this[0];return!g||"events"!==b||1!==arguments.length||(e=a.data(g,b),f=a._data(g,b),e!==c&&e!==f||f===c)?t.apply(this,arguments):(d("Use of jQuery.fn.data('events') is deprecated"),f)};var u=/\/(java|ecma)script/i,v=a.fn.andSelf||a.fn.addBack;a.fn.andSelf=function(){return d("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),v.apply(this,arguments)},a.clean||(a.clean=function(b,e,f,g){e=e||document,e=!e.nodeType&&e[0]||e,e=e.ownerDocument||e,d("jQuery.clean() is deprecated");var h,i,j,k,l=[];if(a.merge(l,a.buildFragment(b,e).childNodes),f)for(j=function(a){return!a.type||u.test(a.type)?g?g.push(a.parentNode?a.parentNode.removeChild(a):a):f.appendChild(a):c},h=0;null!=(i=l[h]);h++)a.nodeName(i,"script")&&j(i)||(f.appendChild(i),i.getElementsByTagName!==c&&(k=a.grep(a.merge([],i.getElementsByTagName("script")),j),l.splice.apply(l,[h+1,0].concat(k)),h+=k.length));return l});var w=a.event.add,x=a.event.remove,y=a.event.trigger,z=a.fn.toggle,A=a.fn.live,B=a.fn.die,C="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",D=RegExp("\\b(?:"+C+")\\b"),E=/(?:^|\s)hover(\.\S+|)\b/,F=function(b){return"string"!=typeof b||a.event.special.hover?b:(E.test(b)&&d("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),b&&b.replace(E,"mouseenter$1 mouseleave$1"))};a.event.props&&"attrChange"!==a.event.props[0]&&a.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),a.event.dispatch&&e(a.event,"handle",a.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),a.event.add=function(a,b,c,e,f){a!==document&&D.test(b)&&d("AJAX events should be attached to document: "+b),w.call(this,a,F(b||""),c,e,f)},a.event.remove=function(a,b,c,d,e){x.call(this,a,F(b)||"",c,d,e)},a.fn.error=function(){var a=Array.prototype.slice.call(arguments,0);return d("jQuery.fn.error() is deprecated"),a.splice(0,0,"error"),arguments.length?this.bind.apply(this,a):(this.triggerHandler.apply(this,a),this)},a.fn.toggle=function(b,c){if(!a.isFunction(b)||!a.isFunction(c))return z.apply(this,arguments);d("jQuery.fn.toggle(handler, handler...) is deprecated");var e=arguments,f=b.guid||a.guid++,g=0,h=function(c){var d=(a._data(this,"lastToggle"+b.guid)||0)%g;return a._data(this,"lastToggle"+b.guid,d+1),c.preventDefault(),e[d].apply(this,arguments)||!1};for(h.guid=f;e.length>g;)e[g++].guid=f;return this.click(h)},a.fn.live=function(b,c,e){return d("jQuery.fn.live() is deprecated"),A?A.apply(this,arguments):(a(this.context).on(b,this.selector,c,e),this)},a.fn.die=function(b,c){return d("jQuery.fn.die() is deprecated"),B?B.apply(this,arguments):(a(this.context).off(b,this.selector||"**",c),this)},a.event.trigger=function(a,b,c,e){return c||D.test(a)||d("Global events are undocumented and deprecated"),y.call(this,a,b,c||document,e)},a.each(C.split("|"),function(b,c){a.event.special[c]={setup:function(){var b=this;return b!==document&&(a.event.add(document,c+"."+a.guid,function(){a.event.trigger(c,null,b,!0)}),a._data(this,c,a.guid++)),!1},teardown:function(){return this!==document&&a.event.remove(document,c+"."+a._data(this,c)),!1}}})}(jQuery,window),define("jquery-migrate",function(){}),function(a){var b;a.fn.jqprint=function(c){b=a.extend({},a.fn.jqprint.defaults,c);var d=this instanceof jQuery?this:a(this);if(b.operaSupport&&a.browser.opera){var e=window.open("","jqPrint-preview");e.document.open();var f=e.document}else{var g=a("<iframe  />");b.debug||g.css({position:"absolute",width:"0px",height:"0px",left:"-600px",top:"-600px"}),g.appendTo("body");var f=g[0].contentWindow.document}b.importCSS&&(a("link[media=print]").length>0?a("link[media=print]").each(function(){f.write("<link type='text/css' rel='stylesheet' href='"+a(this).attr("href")+"' media='print' />")}):a("link").each(function(){f.write("<link type='text/css' rel='stylesheet' href='"+a(this).attr("href")+"' />")})),b.printContainer?f.write(d.outer()):d.each(function(){f.write(a(this).html())}),f.close(),(b.operaSupport&&a.browser.opera?e:g[0].contentWindow).focus(),setTimeout(function(){(b.operaSupport&&a.browser.opera?e:g[0].contentWindow).print(),e&&e.close()},1e3)},a.fn.jqprint.defaults={debug:!1,importCSS:!0,printContainer:!0,operaSupport:!0},jQuery.fn.outer=function(){return a(a("<div></div>").html(this.clone())).html()}}(jQuery),define("jqprint",["jquery","jquery-migrate"],function(){}),define("views/waybill/detail/billPicture",["backbone","templates","helper","cjl","imageTrans","jqprint"],function(a,b,c){return a.View.extend({events:{"click .count-down-button":"requestSMSCodefromServer","click .submit-application":"submitApplication","keyup input":"inputChanged",showTabDetail:"render","click #waybill-signed-picture a.layer-close":"closeSignedPicture","click #rotate_pic":"rotate_pic","click #print_pic":"print_pic"},initialize:function(){$("body").css("position","relative"),this.tab=$(b.waybillDetailBillPictureTab()),this.$el=$('<li data-detail="waybill-picture" class="status-precedence"></li>'),this.isSendingMemberCount=!1,this.angel=0;var a=c.getResourceURL("images/mask-pic.png");this.$mask=$("<div class='maskLayer'>&nbsp;</div>").css({position:"absolute",top:"0",left:"0","background-color":"#000","background-color":"rgba(0,0,0,.5)",filter:"alpha(opacity=50)","background-image":"url("+a+")","background-repeat":"repeat",opacity:"0.2",filter:"alpha(opacity=20)",width:"100%",height:"100%","z-index":"900"})},inputChanged:function(){var a=this;if(a.deny)return void a.$(".error[data-error=wrong-validation-id]").show();if(!a.codeValidated){var b=a.$("#sender-phone-number-input").val(),d=a.model.get("cachePhone")||c.isValidPhoneNumber(b);a.$(".count-down-button").trigger("shouldBeActive",d);var e=a.$("#sender-sms-validation-input").val(),f=d&&e&&a.model.get("cachePhone");a.$(".submit-application").toggleClass("disabled",!f),a.$(".error").hide();var g=a.model.get("cachePhone");"sc"===c.getSiteLanguage()&&a.hasRegistMember(b,g)}},hasRegistMember:function(a,b){var d=this;c.isValidPhoneNumber(a)||b?d.isSendingMemberCount||d.model.hasRegistMember(a).success(function(a){"1"===a.status&&(d.model.set("showRegisterMemberInSignedPic",!0),d.$("#showRegisterMember").show().prop("checked",!0))}).error(function(a){}):(d.model.set("showRegisterMemberInSignedPic",!1),d.$("#showRegisterMember").hide().prop("checked",!0))},render:function(){this.$el.html(b.waybillDetailBillPicture({result:this.model.toJSON()})),this.$("input").placeholder()},requestSMSCodefromServer:function(a){var b=this;a.preventDefault(),a.stopPropagation(),c.imgVrfCodePC(b,a,b.smsCodefromServer)},smsCodefromServer:function(a,b,c){var d=$(b.currentTarget);a.$(".error, .message").hide();var e=a.$("#sender-phone-number-input").val();e=_.isEmpty(e)?a.model.get("cachePhone"):e,d.button("loading"),a.model.requestSMSCodefromServer(e,"billPicture",c).success(function(){a.model.set("senderPhone",e),a.model.set("phone",e),a.model.set("cachePhone",e),a.isSendingMemberCount=!0,a.render();var b=a.$(".count-down-button");b.trigger("start")}).error(function(b){d.button("reset"),403===b.status?a.$(".error[data-error=wrong-phone-number]").show():410===b.status?a.$(".error[data-error=limit-send-sms]").show():a.$(".error[data-error=phone-number-network-error]").show()})},submitApplication:function(a){var b=$(a.currentTarget),d=this.$("#sender-sms-validation-input").val(),e=this;e.$(".error").hide(),b.button("loading");var f=this.model.get("cachePhone");e.model.set("senderPhone",f),e.model.requestBillImage(d).success(function(a){return e.codeValidated=!0,e.$(".count-down-button").trigger("reset").addClass("disabled"),b.text(_l("确认")),b.toggleClass("disabled",!0),"sc"===c.getSiteLanguage()&&e.registMember(a.message),e.renderBillPicture(a),e.model.set("senderPhone",""),!1}).error(function(a){if(403===a.status){var b=a.responseText;b&&"2"===b?(e.$(".error[data-error=wrong-validation-id]").show(),e.$(".count-down-button").trigger("reset").addClass("disabled"),e.$(".submit-application").text(_l("确认")),e.$(".submit-application").toggleClass("disabled",!0),e.deny=!0):b&&"3"===b?e.$(".error[data-error=wrong-validation-phone]").show():b&&"4"===b?e.$(".error[data-error=wrong-validation-ip]").show():(b=JSON.parse(b),!b||"003"!==b.code&&"002"!==b.code?e.$(".error[data-error=wrong-validation-code]").show():e.$(".error[data-error=expired-validation-code]").show(),e.$(".submit-application").text(_l("确认")),e.$(".submit-application").toggleClass("disabled",!0))}else e.$(".error[data-error=submit-network-error]").show();e.model.set("senderPhone","")})},registMember:function(a){var c=this;c.$("#registerMember").is(":visible")&&c.$("#registerMember").is(":checked")&&c.model.registMember(a).success(function(a){"1"===a.status&&a.result&&($(".shipping-detail-page").append(b.registerMemberPop()),window.setTimeout(function(){$(".shipping-detail-page").children("#registerMemberPop").remove()},5e3))}).error(function(a){})},closeSignedPicture:function(a){this.$("#waybill-signed-picture").remove(),$("body").find(".maskLayer").remove(),this.render(),this.codeValidated=!1,this.model.set("senderPhone",""),this.model.set("cachePhone",""),this.isSendingMemberCount=!1},renderBillPicture:function(a){var c=this;this.model.requestBillImageHead(c.model.billImageURL(a.message)+"&head=true").success(function(d){if(""!=d){c.$el.append(b.waybillDetailBillPicturePop()),$("body").append(c.$mask);var e=$$("picContainer"),f=c.model.billImageURL(a.message);options={onLoad:function(){var a,b;window.ActiveXObject||"ActiveXObject"in window?(a=this._img.naturalHeight/this._clientHeight,b=this._img.naturalWidth/this._clientWidth,(a>1||b>1)&&this._img.naturalHeight>1e3&&this._img.naturalWidth>1e3?(this._img.style.width=(a>b?this._img.naturalWidth/a-30:this._img.naturalWidth/b-30)+"px",this._img.style.height=(a>b?this._img.naturalHeight/a-30:this._img.naturalHeight/b-30)+"px"):(this._img.style.width=this._img.naturalWidth+"px",this._img.style.height=this._img.naturalHeight+"px")):(a=this._img.height/this._clientHeight,b=this._img.width/this._clientWidth,(a>1||b>1)&&(this._img.style.width=(a>b?this._img.width/a-30:this._img.width/b-30)+"px"))}},c.it=new ImageTrans(e,options),c.it.load(f)}else c.$el.append(b.waybillDetailBillPicturePopNoImage()),$("body").append(c.$mask)}).error(function(){c.$el.append(b.waybillDetailBillPicturePopNoImage()),$("body").append(c.$mask)})},rotate_pic:function(){this.it.right()},print_pic:function(){var a=$("#picContainer").children("img")[0],b="visible"==$(a).css("visibility"),c=setInterval(function(){if(0!=a.width&&b){var d=a.width,e=a.height,f=$('<canvas width="'+d+'" height="'+e+'"></canvas>');f[0].getContext("2d").drawImage(a,0,0,d,e);var g=new Image;g.src=f[0].toDataURL(),$(g).css("width","90%"),$(g).jqprint(),clearInterval(c)}},200)}})}),define("views/waybill/detail/changeRecipientInfo",["backbone","helper","views/detailedLocationPicker/picker","templates","parsleyjs"],function(a,b,c,d){return a.View.extend({initialize:function(){this.tab=$(d.waybillChangeRecipientInfoTab()),this.$el=$('<li data-detail="waybill-changeinfo" class="changeinfo-update"></li>')},render:function(){var a=!1,b=this.model.toJSON().lstElementHtml;for(var e in b){var f=b[e];"waybillChangeRecipientInfo"==f.elementCode&&"true"==f.disable&&(a=!0)}var g=d.waybillChangeRecipientInfo({result:this.model.toJSON(),elementCode:"waybillChangeRecipientInfo",isOperate:a});this.$el.html(g),new c({el:this.$(".detail-location-input")}),this.inputChanged()},events:{"click #send-customer-message":"onSendCustomerMessage","click #receive-customer-message":"onReceiveCustomerMessage","click #artificial_customer_service":"artificialCustomerService","click #artificial-primary":"onSubmitChangeRecipientInfo","click #changeRecipientInfo-primary":"onSubmitChangeRecipientInfo","click .count-down-button":"requestSMSCodefromServer","keyup input":"inputChanged","click .submit-application":"submitApplication",showTabDetail:"render"},inputChanged:function(){if(!this.codeValidated){var a=this.$("#validated-phone-number-input").val(),c=this.model.get("messageValidationPhone")||b.isValidPhoneNumber(a);this.$(".count-down-button").trigger("shouldBeActive",c);var d=this.$("#validated-sms-validation-input").val(),e=c&&d&&this.model.get("messageValidationPhone");this.$(".submit-application").toggleClass("disabled",!e),this.$(".error").hide()}},onSendCustomerMessage:function(){this.model.set("validatedPhoneType","sender"),this.$(".message-changeinfo-validated").show(),this.$("#sender-validated-phone-number-label").show(),this.$("#receiver-validated-phone-number-label").hide(),this.$(".receive-address").hide(),this.$(".artificial_customer").hide(),this.$("#send-customer-message").addClass("current"),this.$("#receive-customer-message").removeClass("current"),this.$("#artificial_customer_service").removeClass("current"),this.$("#validated-phone-number-input").val("13632806059"),this.$("#validated-sms-validation-input").val(""),this.$(".submit-application").addClass("disabled"),this.inputChanged()},onReceiveCustomerMessage:function(){this.model.set("validatedPhoneType","receiver"),this.$(".message-changeinfo-validated").show(),this.$("#sender-validated-phone-number-label").hide(),this.$("#receiver-validated-phone-number-label").show(),this.$(".receive-address").hide(),this.$(".artificial_customer").hide(),this.$("#send-customer-message").removeClass("current"),this.$("#receive-customer-message").addClass("current"),this.$("#artificial_customer_service").removeClass("current"),this.$("#validated-phone-number-input").val("13632806059"),this.$("#validated-sms-validation-input").val(""),this.$(".submit-application").addClass("disabled"),this.inputChanged()},artificialCustomerService:function(){this.$(".message-changeinfo-validated").hide(),this.$(".receive-address").hide(),this.$(".artificial_customer").show(),this.$("#send-customer-message").removeClass("current"),this.$("#receive-customer-message").removeClass("current"),this.$("#artificial_customer_service").addClass("current")},onMessageSubmit:function(){this.$(".receive-address").show()},isChangeRecipientInfoValidated:function(){var a=!0;a=this.$(".contacter-changeRecipientInfo-form").parsley().validate();var b=!0;return""===this.$("#contacter-mobile").val()&&""===this.$("#contacter-phone").val()&&(this.$("#contacter-mobile").focus(),this.$(".contacter-both-phone-mobile").addClass("error").show(),b=!1),b?a:!1},requestSMSCodefromServer:function(a){var b=$(a.currentTarget),c=this;this.$(".error, .message").hide();var d=this.$("#validated-phone-number-input").val();d=_.isEmpty(d)?this.model.get("messageValidationPhone"):d,b.button("loading"),this.model.requestSMSCodefromServer(d,"changeRecipientInfo").success(function(){c.model.set("messageValidationPhone",d);var a=c.$(".count-down-button");a.trigger("start")}).error(function(a){b.button("reset"),403===a.status?c.$(".error[data-error=wrong-phone-number]").show():c.$(".error[data-error=phone-number-network-error]").show()})},submitApplication:function(a){var b=$(a.currentTarget),c=this.$("#validated-sms-validation-input").val(),d=this;this.$(".error").hide(),this.model.requestChangeRecipientInfo(c).success(function(){d.$(".message-changeinfo-validated").hide(),d.$(".receive-address").show()}).error(function(a){if(403===a.status){var c=a.responseText;c&&"2"===c?d.$(".error[data-error=wrong-validation-id]").show():c&&"3"===c?d.$(".error[data-error=wrong-validation-phone]").show():c&&"4"===c?d.$(".error[data-error=wrong-validation-ip]").show():d.$(".error[data-error=wrong-validation-code]").show()}else d.$(".error[data-error=submit-network-error]").show();b.button("reset")})},onSubmitChangeRecipientInfo:function(){var a;if(this.isChangeRecipientInfoValidated()){a={contacterName:this.$("#contacter-name").val(),phone:this.$("#contacter-phone").val(),mobile:this.$("#contacter-mobile").val(),location:this.$("#contacter-address").val(),address:this.$("#contacter-address-detail").val()};var b=this;this.model.shortcutToolsService(a,"waybillChangeRecipientInfo").success(function(a){b.$(".contacter-changeRecipientInfo-form").hide(),b.$("#changeRecipientInfo-success").show();var c=b.model.toJSON().lstElementHtml;for(var d in c){var e=c[d];"waybillChangeRecipientInfo"==e.elementCode&&(e.disable="true")}}).error(function(a){b.$(".error[data-error=submit-network-error]").show()})}}})}),define("views/waybill/detail/deliveryAgain",["backbone","helper","templates","parsleyjs"],function(a,b,c){return a.View.extend({initialize:function(){this.tab=$(c.waybillDeliveryAgainTab()),this.$el=$('<li data-detail="waybill-deliveryagain" class="deliveryagain-update"></li>')},render:function(){var a=!1,b=this.model.toJSON().lstElementHtml;for(var d in b){var e=b[d];"waybillDeliveryAgain"==e.elementCode&&"true"==e.disable&&(a=!0)}var f=c.waybillDeliveryAgain({result:this.model.toJSON(),elementCode:"waybillDeliveryAgain",isOperate:a});this.$el.html(f)},events:{"keyup #contacter-mobile, #contacter-phone":"onContacterMobilePhoneChange","click #deliveryAgain-primary":"onSubmitDeliveryAgain",showTabDetail:"render"},onContacterMobilePhoneChange:function(){this.$("#contacter-mobile").val()||this.$("#contacter-phone").val()?this.$(".contacter-both-phone-mobile").hide():this.$(".contacter-both-phone-mobile").show()},isDeliveryAgainFormsValidated:function(){var a=!0;a=this.$(".contacter-deliveryAgain-form").parsley().validate();var b=!0;return""===this.$("#contacter-mobile").val()&&""===this.$("#contacter-phone").val()&&(this.$("#contacter-mobile").focus(),this.$(".contacter-both-phone-mobile").addClass("error").show(),b=!1),b?a:!1},onSubmitDeliveryAgain:function(){var a;if(this.isDeliveryAgainFormsValidated()){a={contacterName:this.$("#contacter-name").val(),phone:this.$("#contacter-phone").val(),mobile:this.$("#contacter-mobile").val()};var b=this;this.model.shortcutToolsService(a,"waybillDeliveryAgain").success(function(a){b.$(".contacter-deliveryAgain-form").hide(),b.$("#deliveryAgain-success").show();var c=b.model.toJSON().lstElementHtml;for(var d in c){var e=c[d];"waybillDeliveryAgain"==e.elementCode&&(e.disable="true")}}).error(function(a){b.$(".error[data-error=submit-network-error]").show()})}}})}),define("views/waybill/detail/payFreightDeliveryAgain",["backbone","helper","templates","parsleyjs"],function(a,b,c){return a.View.extend({initialize:function(){this.tab=$(c.waybillPayFreightDeliveryAgainTab()),this.$el=$('<li data-detail="waybill-payfreight" class="payfreight-update"></li>')},render:function(){var a=!1,b=this.model.toJSON().lstElementHtml;for(var d in b){var e=b[d];"waybillPayFreightDeliveryAgain"==e.elementCode&&"true"==e.disable&&(a=!0)}var f=c.waybillPayFreightDeliveryAgain({result:this.model.toJSON(),elementCode:"waybillPayFreightDeliveryAgain",isOperate:a});this.$el.html(f)},events:{"keyup #contacter-mobile, #contacter-phone":"onContacterMobilePhoneChange","click #payFreight-primary":"onSubmitPayFreight","click #send-pay":"onSubmitSendPay","click #receive-pay":"onSubmitReceivePay",showTabDetail:"render"},onSubmitSendPay:function(){this.$("#send-pay").addClass("current"),this.$("#receive-pay").removeClass("current")},onSubmitReceivePay:function(){this.$("#receive-pay").addClass("current"),this.$("#send-pay").removeClass("current")},onContacterMobilePhoneChange:function(){this.$("#contacter-mobile").val()||this.$("#contacter-phone").val()?this.$(".contacter-both-phone-mobile").hide():this.$(".contacter-both-phone-mobile").show()},isPayFreightFormsValidated:function(){var a=!0;a=this.$(".contacter-payFreight-form").parsley().validate();var b=!0;return""===this.$("#contacter-mobile").val()&&""===this.$("#contacter-phone").val()&&(this.$("#contacter-mobile").focus(),this.$(".contacter-both-phone-mobile").addClass("error").show(),b=!1),b?a:!1},onSubmitPayFreight:function(){var a;if(this.isPayFreightFormsValidated()){a={contacterName:this.$("#contacter-name").val(),phone:this.$("#contacter-phone").val(),mobile:this.$("#contacter-mobile").val()};var b=this;this.model.shortcutToolsService(a,"waybillPayFreightDeliveryAgain").success(function(a){b.$(".contacter-payFreight-form").hide(),b.$("#payFreight-success").show();var c=b.model.toJSON().lstElementHtml;for(var d in c){var e=c[d];"waybillPayFreightDeliveryAgain"==e.elementCode&&(e.disable="true")}}).error(function(a){b.$(".error[data-error=submit-network-error]").show()})}}})}),define("views/waybill/detail/sendback",["backbone","helper","views/detailedLocationPicker/picker","templates","parsleyjs"],function(a,b,c,d){return a.View.extend({initialize:function(){this.tab=$(d.waybillSendBackTab()),this.$el=$('<li data-detail="waybill-sendback" class="sendback-update"></li>')},render:function(){var a=!1,b=this.model.toJSON().lstElementHtml;for(var e in b){var f=b[e];"waybillSendBack"==f.elementCode&&"true"==f.disable&&(a=!0)}var g=d.waybillSendBack({result:this.model.toJSON(),elementCode:"waybillSendBack",isOperate:a});this.$el.html(g),new c({el:this.$(".detail-location-input")})},events:{"click #back-primary":"onSubmitSendBackOrder","click #send-address":"onUseSendAddress","click #new-address":"onUseNewAddress","regionModelUpdate .contacter-location .detail-location-input":"contacterRegionModelUpdate","keyup #contacter-mobile, #contacter-phone":"onContacterMobilePhoneChange","keyup #backer-mobile, #backer-phone":"onBackerMobilePhoneChange",showTabDetail:"render"},onUseSendAddress:function(){this.$(".new-address-div").hide(),this.$("#send-address").addClass("current"),this.$("#new-address").removeClass("current")},onUseNewAddress:function(){this.$(".new-address-div").show(),
this.$("#new-address").addClass("current"),this.$("#send-address").removeClass("current")},onContacterMobilePhoneChange:function(){this.$("#contacter-mobile").val()||this.$("#contacter-phone").val()?this.$(".contacter-both-phone-mobile").hide():this.$(".contacter-both-phone-mobile").show()},onBackerMobilePhoneChange:function(){this.$("#backer-mobile").val()||this.$("#backer-phone").val()?this.$(".backer-both-phone-mobile").hide():this.$(".backer-both-phone-mobile").show()},contacterRegionModelUpdate:function(a,b){this.contacterLocation=b.regionTabs},getLocationData:function(a){a=_.filter(a,function(a){return a.selectedRegion});var b,c,d,e,f,g;return 2===a.length?(b=a[0].selectedRegion.provinceRateCode,c=a[0].selectedRegion.provinceName,d=a[0].selectedRegion.rateCode,e=a[0].selectedRegion.name,f="",g=a[1].selectedRegion.name):(b=a[0].selectedRegion.rateCode,c=a[0].selectedRegion.name,d=a[1].selectedRegion.rateCode,e=a[1].selectedRegion.name,f="",g=a[2].selectedRegion.name),{provinceCode:b,provinceName:c,cityCode:d,cityName:e,countyCode:f,countyName:g}},isSendBackFormsValidated:function(){var a=!0,b=!0,c=this.$("#new-address").attr("class");if("current"==c){a=this.$(".contacter-form").parsley().validate(),b=this.$(".backer-form").parsley().validate();var d=!0;if(""===this.$("#contacter-mobile").val()&&""===this.$("#contacter-phone").val()&&(this.$("#contacter-mobile").focus(),this.$(".contacter-both-phone-mobile").addClass("error").show(),d=!1),""===this.$("#backer-mobile").val()&&""===this.$("#backer-phone").val()&&(this.$("#backer-mobile").focus(),this.$(".backer-both-phone-mobile").addClass("error").show(),d=!1),!d)return!1}else{a=this.$(".contacter-form").parsley().validate();var d=!0;if(""===this.$("#contacter-mobile").val()&&""===this.$("#contacter-phone").val()&&(this.$("#contacter-mobile").focus(),this.$(".contacter-both-phone-mobile").addClass("error").show(),d=!1),!d)return!1}return a&&b},onSubmitSendBackOrder:function(){var a;if(this.isSendBackFormsValidated()){a={contacterName:this.$("#contacter-name").val(),phone:this.$("#contacter-phone").val(),mobile:this.$("#contacter-mobile").val(),location:this.$("#contacter-address").val(),address:this.$("#contacter-address-detail").val(),backerName:this.$("#backer-name").val(),backerMobile:this.$("#backer-mobile").val(),backerPhone:this.$("#backer-phone").val()};var b=this;this.model.shortcutToolsService(a,"waybillSendBack").success(function(a){b.$(".contacter-form").hide(),b.$(".backer-form").hide(),b.$("#send-back-success").show();var c=b.model.toJSON().lstElementHtml;for(var d in c){var e=c[d];"waybillSendBack"==e.elementCode&&(e.disable="true")}}).error(function(a){b.$(".error[data-error=submit-network-error]").show()})}}})}),define("models/GPS",["backbone","jquery","underscore"],function(a,b,c){return a.Model.extend({initialize:function(){var a=this.get("waybill"),b=a.get("data"),d=new MMapOptions;d.zoom=4,d.center=b.nowGps?new MLngLat(b.nowGps.longitude,b.nowGps.latitude):new MLngLat(104.195397,35.86166),d.toolbar=MConstants.DEFAULT,d.toolbarPos=new MPoint(20,20),d.overviewMap=MConstants.SHOW,d.scale=MConstants.SHOW,d.language=MConstants.MAP_CN,d.returnCoordType=MConstants.COORD_TYPE_OFFSET,d.zoomBox=!0,d.mapComButton=MConstants.SHOW_NO,d.requestNum=100,d.centerCross=MConstants.HIDE,this.mapObj=new MMap(a.get("id"),d),this.mapObj.setCtrlPanelState(MConstants.OVERVIEW_CTRL,MConstants.HIDE),c.each(["srcZoneCodeGps","descZoneCodeGps","nowGps"],function(a){b[a]&&this.drawPoint(this.getMarker(b[a],this.getMarkerOptions(a)))},this)},getMarker:function(a,b){var c=new MLngLat(a.longitude,a.latitude),d=new MMarker(c,b);return d},getMarkerOptions:function(a){var b=new MMarkerOptions;switch(a){case"srcZoneCodeGps":b.imageUrl=_l("gps-start","/images/gps-start.png");break;case"descZoneCodeGps":b.imageUrl=_l("gps-end","/images/gps-end.png");break;default:b.imageUrl=_l("gps-now","/images/gps-now.png")}return b.hasShadow=!1,b.picAgent=!1,b.canShowTip=!0,b},drawPoint:function(a){this.mapObj.addOverlay(a)}})}),define("views/waybill/detail/GPS",["backbone","templates","jquery","helper","models/GPS"],function(a,b,c,d,e){return a.View.extend({events:{showTabDetail:"render"},initialize:function(){this.tab=c(b.waybillDetailGPSTab()),this.$el=c('<li data-detail="waybill-gps" class="gps-infos"></li>');var a=this.model;c.get(d.getRESTfulDomain("bills/"+this.model.get("id")+"/gps")).done(function(b){try{b.nowGps=b.vheicleGpsInfo.pop().gps.pop()}catch(c){}a.set("data",b)})},render:function(){if(this.$el.html(b.waybillDetailGPS({result:this.model.toJSON()})),this.model.get("data")){new e({waybill:this.model})}}})}),define("views/waybill/detail/complain/waybillSendBacksView",["backbone","templates","views/detailedLocationPicker/picker"],function(a,b,c){return a.View.extend({initialize:function(){this.tab=$(b.waybillSendBackTab()),this.$el=$('<div data-auto-detail="waybill-return" class="waybill-auto-detail" style="display: none;"></div>'),this.subModel=_.find(this.model.get("lstElementHtml"),function(a){return"waybillSendBack"==a.elementCode}),this.subModel.formDatas=new Object},events:{showTabOper:"render","click #nextBtn":"step1","click #submitBtn":"step2","click #doneBtn":"step3","click .btn-radio":"selectWayToReturn","click .cancel-complain-btn":"cancelComplain"},render:function(){var a=b.waybillSendBack({model:this.subModel});this.$el.html(a),new c({el:this.$(".detail-location-input")}),this.steps=this.$(".step1,.step2,.step3")},step1:function(){this.checkStep1()},step2:function(){var b=this;if(b.checkStep2()){var c=$(this.steps.get(1));b.subModel.formDatas.name=c.find("#name").val(),b.subModel.formDatas.phone=c.find("#phone").val(),b.subModel.formDatas.address=c.find("#sender-address").val()+" "+c.find("#send_address_detail").val();var d=b.getAjaxData(b.subModel.formDatas,b.model);a.ajax({type:"POST",dataType:"json",data:d,url:Helper.getRESTfulDomain("complain/send"),error:function(a,b,c){alert(_l("网络异常无法提交，请拨打客服热线95338，顺丰员工将竭诚为您服务"))},success:function(a,c,d){"1000"==a.code?(b.subModel.opTime=b.formateDate(new Date,"yyyy-MM-dd hh:mm:ss"),b.subModel.disable="true",b.steps.hide(),$(b.steps.get(2)).show()):"1"==a.code?alert(_l("你的请求我们已经受理，请等待处理结果！")):alert(_l("网络异常，请拨打客服热线95338，顺丰员工将竭诚为您服务"))}})}},step3:function(){this.trigger("alreadyDone")},checkStep1:function(){var b=[],c=this,d=/^\d+$/,e=$(this.steps.get(0)),f=e.find("#phone").val(),g=e.find("#name").val(),h=this.model.get("id");return d.test(f)||b.push("3"),(null==g||void 0==g||""==g)&&b.push("2"),this.showError(e,b)?!1:void a.ajax({type:"POST",dataType:"json",data:{phone:f,carryId:h},url:Helper.getRESTfulDomain("complain/isPhoneMatch?lang="+Helper.getSiteLanguage()+"&region="+Helper.getSiteLocation()),error:function(a,b,c){alert(_l("网络异常无法提交，请拨打客服热线95338，顺丰员工将竭诚为您服务"))},success:function(a,d,h){a?(c.steps.hide(),$(c.steps.get(1)).show(),c.subModel.formDatas.originName=g,c.subModel.formDatas.originPhone=f):(b.push("1"),c.showError(e,b))}})},checkStep2:function(){var a=[],b=/^\d+$/,c=$(this.steps.get(1));return"origin"==$(".btn-radio.checked").data("way")?!0:(this.isNull(c.find("#name").val())&&a.push("2"),(this.isNull(c.find("#phone").val())||!b.test(c.find("#phone").val()))&&a.push("3"),(this.isNull(c.find("#sender-address").val())||this.isNull(c.find("#send_address_detail").val()))&&a.push("4"),!this.showError(c,a))},selectWayToReturn:function(a){$(".btn-radio").not(a.currentTarget).removeClass("checked").next().hide(),$(a.currentTarget).addClass("checked").next().show(),"origin"==$(a.currentTarget).data("way")?$("#step2_err_wrap").hide():$("#step2_err_wrap").show()},showError:function(a,b){var c=b.length>0;return b.length>0&&(a.find(".error").hide(),$.each(b,function(b,c){a.find("[errCode="+c+"]").show()})),c},isNull:function(a){return null==a||void 0==a||""==a},formateDate:function(a,b){var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b},getAjaxData:function(a,b){var c=new Object;return c.areaCode=b.get("originCode"),c.carryId=b.get("id"),c.linkMan=a.originName,c.linkPhone=a.originPhone,c.customerFeedback="104010900",c.focus="104010000",c.contactLink="104000000",c.content=""==a.address.trim()?a.originName+"+"+a.originPhone+" 通过官网反馈此件需退回至原寄件地址，请联系客户确认退回费用的支付问题":a.originName+"+"+a.originPhone+" 通过官网反馈此件需退回，退回件接收地址为"+a.address+"，退回件接收人为"+a.name+"，联系方式为"+a.phone+"，请联系客户确认退回费用的支付问题",c},cancelComplain:function(){this.trigger("alreadyDone")}})}),define("views/waybill/detail/complain/waybillChangeRecipienView",["backbone","templates","views/detailedLocationPicker/picker"],function(a,b,c){return a.View.extend({initialize:function(){this.tab=$(b.waybillChangeRecipientInfoTab()),this.$el=$('<div data-auto-detail="waybill-modify-info" class="waybill-auto-detail" style="display: block;"></div>'),this.subModel=_.find(this.model.get("lstElementHtml"),function(a){return"waybillChangeRecipientInfo"==a.elementCode}),this.subModel.formDatas=new Object},events:{showTabOper:"render","click #nextBtn":"step1","click #submitBtn":"step2","click #doneBtn":"step3","click .cancel-complain-btn":"cancelComplain"},render:function(){var a=b.waybillChangeRecipientInfo({model:this.subModel});this.$el.html(a),new c({el:this.$(".detail-location-input")}),this.steps=this.$(".step1,.step2,.step3")},step1:function(){this.checkStep1()},step2:function(){var b=this;if(b.checkStep2()){var c=$(this.steps.get(1));b.subModel.formDatas.name=c.find("#name").val(),b.subModel.formDatas.phone=c.find("#phone").val(),b.subModel.formDatas.address=c.find("#sender-address").val()+" "+c.find("#send_address_detail").val();var d=b.getAjaxData(b.subModel.formDatas,b.model);a.ajax({type:"POST",dataType:"json",data:d,url:Helper.getRESTfulDomain("complain/send"),error:function(a,b,c){alert(_l("网络异常无法提交，请拨打客服热线95338，顺丰员工将竭诚为您服务"))},success:function(a,c,d){"1000"==a.code?(b.subModel.opTime=b.formateDate(new Date,"yyyy-MM-dd hh:mm:ss"),b.subModel.disable="true",b.steps.hide(),$(b.steps.get(2)).show()):"1"==a.code?alert(_l("你的请求我们已经受理，请等待处理结果！")):alert(_l("网络异常，请拨打客服热线95338，顺丰员工将竭诚为您服务"))}})}},step3:function(){this.trigger("alreadyDone")},checkStep1:function(){var b=[],c=this,d=/^\d+$/,e=$(this.steps.get(0)),f=e.find("#phone").val(),g=e.find("#name").val(),h=this.model.get("id");return d.test(f)||b.push("3"),(null==g||void 0==g||""==g)&&b.push("2"),this.showError(e,b)?!1:void a.ajax({type:"POST",dataType:"json",data:{phone:f,carryId:h},url:Helper.getRESTfulDomain("complain/isPhoneMatch?lang="+Helper.getSiteLanguage()+"&region="+Helper.getSiteLocation()),error:function(a,b,c){alert(_("网络异常无法提交，请拨打客服热线95338，顺丰员工将竭诚为您服务"))},success:function(a,d,h){a?(c.steps.hide(),$(c.steps.get(1)).show(),c.subModel.formDatas.originName=g,c.subModel.formDatas.originPhone=f):(b.push("1"),c.showError(e,b))}})},checkStep2:function(){var a=[],b=/^\d+$/,c=$(this.steps.get(1));return this.isNull(c.find("#name").val())&&a.push("2"),(this.isNull(c.find("#phone").val())||!b.test(c.find("#phone").val()))&&a.push("3"),(this.isNull(c.find("#sender-address").val())||this.isNull(c.find("#send_address_detail").val()))&&a.push("4"),!this.showError(c,a)},selectWayToReturn:function(a){$(".btn-radio").not(a.currentTarget).removeClass("checked").next().hide(),$(a.currentTarget).addClass("checked").next().show(),"origin"==$(a.currentTarget).data("way")?$("#step2_err_wrap").hide():$("#step2_err_wrap").show()},showError:function(a,b){var c=b.length>0;return b.length>0&&(a.find(".error").hide(),$.each(b,function(b,c){a.find("[errCode="+c+"]").show()})),c},isNull:function(a){return null==a||void 0==a||""==a},formateDate:function(a,b){var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b},getAjaxData:function(a,b){var c=new Object;return c.areaCode=b.get("originCode"),c.carryId=b.get("id"),c.linkMan=a.originName,c.linkPhone=a.originPhone,c.customerFeedback="853249923",c.focus="853249870",c.contactLink="104000000",c.content=a.originName+"+"+a.originPhone+" 通过官网要求快件更改收方资料为："+a.name+" + "+a.phone+" + "+a.address+"，请核实跟进。",c},cancelComplain:function(){this.trigger("alreadyDone")}})}),define("views/waybill/detail/complain/waybillPayFreightDeliveryView",["backbone","templates"],function(a,b){return a.View.extend({initialize:function(){this.tab=$(b.waybillPayFreightDeliveryAgainTab()),this.$el=$('<div data-auto-detail="waybill-pay-ship" class="waybill-auto-detail" style="display: none;"></div>'),this.subModel=_.find(this.model.get("lstElementHtml"),function(a){return"waybillPayFreightDeliveryAgain"==a.elementCode}),this.subModel.formDatas=new Object},events:{showTabOper:"render","click #nextBtn":"step1","click #submitBtn":"step2","click #doneBtn":"step3","click .btn-radio":"selectWayToDelivery","click .cancel-complain-btn":"cancelComplain"},render:function(){var a=b.waybillPayFreightDeliveryAgain({model:this.subModel});this.$el.html(a),this.steps=this.$(".step1,.step2,.step3")},step1:function(){this.checkStep1()},step2:function(){var b=this,c=$(this.steps.get(1));b.subModel.formDatas.name=c.find("#name").val(),b.subModel.formDatas.phone=c.find("#phone").val(),b.subModel.formDatas.address=c.find("#sender-address").val()+" "+c.find("#send_address_detail").val();var d=b.getAjaxData(b.subModel.formDatas,b.model);a.ajax({type:"POST",dataType:"json",data:d,url:Helper.getRESTfulDomain("complain/send"),error:function(a,b,c){alert(_l("网络异常无法提交，请拨打客服热线95338，顺丰员工将竭诚为您服务"))},success:function(a,c,d){"1000"==a.code?(b.subModel.opTime=b.formateDate(new Date,"yyyy-MM-dd hh:mm:ss"),b.subModel.disable="true",b.steps.hide(),$(b.steps.get(2)).show()):"1"==a.code?alert(_l("你的请求我们已经受理，请等待处理结果！")):alert(_l("网络异常，请拨打客服热线95338，顺丰员工将竭诚为您服务"))}})},step3:function(){this.trigger("alreadyDone")},checkStep1:function(){var b=[],c=this,d=/^\d+$/,e=$(this.steps.get(0)),f=e.find("#phone").val(),g=e.find("#name").val(),h=this.model.get("id");return d.test(f)||b.push("3"),(null==g||void 0==g||""==g)&&b.push("2"),this.showError(e,b)?!1:void a.ajax({type:"POST",dataType:"json",data:{phone:f,carryId:h},url:Helper.getRESTfulDomain("complain/isPhoneMatch?lang="+Helper.getSiteLanguage()+"&region="+Helper.getSiteLocation()),error:function(a,b,c){alert(_l("网络异常无法提交，请拨打客服热线95338，顺丰员工将竭诚为您服务"))},success:function(a,d,h){a?(c.steps.hide(),$(c.steps.get(1)).show(),c.subModel.formDatas.originName=g,c.subModel.formDatas.originPhone=f):(b.push("1"),c.showError(e,b))}})},selectWayToDelivery:function(a){var b=this;$(".btn-radio").not(a.currentTarget).removeClass("checked").next().hide(),$(a.currentTarget).addClass("checked").next().show(),"sender"==$(a.currentTarget).data("way")?b.subModel.formDatas.way="sender":b.subModel.formDatas.way="receiver"},showError:function(a,b){var c=b.length>0;return b.length>0&&(a.find(".error").hide(),$.each(b,function(b,c){a.find("[errCode="+c+"]").show()})),c},isNull:function(a){return null==a||void 0==a||""==a},formateDate:function(a,b){var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b},getAjaxData:function(a,b){var c=new Object;return c.areaCode=b.get("originCode"),c.carryId=b.get("id"),c.linkMan=a.originName,c.linkPhone=a.originPhone,c.customerFeedback="104010400",c.focus="104010000",c.contactLink="104000000",c.content="sender"==a.way?a.originName+"+"+a.originPhone+" 通过官网要求此件改寄方支付费用再派，请跟进。":a.originName+"+"+a.originPhone+" 已通过官网要求此件再次派送，收方同意支付费用，请安排",c},cancelComplain:function(){this.trigger("alreadyDone")}})}),define("views/waybill/detail/complain/waybillDeliveryAgainView",["backbone","templates"],function(a,b){return a.View.extend({initialize:function(){this.tab=$(b.waybillDeliveryAgainTab()),this.$el=$('<div data-auto-detail="waybill-reship" class="waybill-auto-detail" style="display: none;"></div>'),this.subModel=_.find(this.model.get("lstElementHtml"),function(a){return"waybillDeliveryAgain"==a.elementCode}),this.subModel.formDatas=new Object},events:{showTabOper:"render","click #nextBtn":"step1","click #doneBtn":"step3","click .cancel-complain-btn":"cancelComplain"},render:function(){var a=b.waybillDeliveryAgain({model:this.subModel});this.$el.html(a),this.steps=this.$(".step1,.step2,.step3")},step1:function(){this.checkStep1()},step2:function(){var b=this,c=b.getAjaxData(b.subModel.formDatas,b.model);a.ajax({type:"POST",dataType:"json",data:c,url:Helper.getRESTfulDomain("complain/resend?lang="+Helper.getSiteLanguage()+"&region="+Helper.getSiteLocation()),error:function(a,b,c){alert(_l("网络异常无法提交，请拨打客服热线95338，顺丰员工将竭诚为您服务"))},success:function(a,c,d){a?(b.subModel.opTime=b.formateDate(new Date,"yyyy-MM-dd hh:mm:ss"),b.subModel.disable="true",b.steps.hide(),$(b.steps.get(1)).show()):alert(_l("网络异常，请拨打客服热线95338，顺丰员工将竭诚为您服务"))}})},step3:function(){this.trigger("alreadyDone")},checkStep1:function(){var b=[],c=this,d=/^\d+$/,e=$(this.steps.get(0)),f=e.find("#phone").val(),g=e.find("#name").val(),h=this.model.get("id");return d.test(f)||b.push("3"),(null==g||void 0==g||""==g)&&b.push("2"),this.showError(e,b)?!1:void a.ajax({type:"POST",dataType:"json",data:{phone:f,carryId:h},url:Helper.getRESTfulDomain("complain/isPhoneMatch?lang="+Helper.getSiteLanguage()+"&region="+Helper.getSiteLocation()),error:function(a,b,c){alert(_l("网络异常无法提交，请拨打客服热线95338，顺丰员工将竭诚为您服务"))},success:function(a,d,h){a?(c.subModel.formDatas.originName=g,c.subModel.formDatas.originPhone=f,c.step2()):(b.push("1"),c.showError(e,b))}})},showError:function(a,b){var c=b.length>0;return b.length>0&&(a.find(".error").hide(),$.each(b,function(b,c){a.find("[errCode="+c+"]").show()})),c},isNull:function(a){return null==a||void 0==a||""==a},formateDate:function(a,b){var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b},getAjaxData:function(a,b){var c=new Object;return c.areaCode=b.get("originCode"),c.carryId=b.get("id"),c.linkMan=a.originName,c.linkPhone=a.originPhone,c.customerFeedback="104010400",c.focus="104010000",c.contactLink="104000000",c.content="",c},cancelComplain:function(){this.trigger("alreadyDone")}})}),define("views/waybill/detail/complainView",["backbone","helper","views/detailedLocationPicker/picker","templates","views/waybill/detail/complain/waybillSendBacksView","views/waybill/detail/complain/waybillChangeRecipienView","views/waybill/detail/complain/waybillPayFreightDeliveryView","views/waybill/detail/complain/waybillDeliveryAgainView"],function(a,b,c,d,e,f,g,h){return a.View.extend({initialize:function(){this.tab=$(d.waybillComplainTab()),this.$el=$('<li data-detail="waybill-auto" class="auto-action" style="display: list-item;"></li>')},events:{showTabDetail:"render","click .auto-tabs li":"toggleOper"},render:function(){var a=d.waybillComplain({model:this.model.toJSON()});this.$el.html(a);var b=this,c=b.$(".auto-tabs"),e=b.$(".data_auto_wrapper"),f=b.operViews();f.length>4?b.$(".forward-scroll").show():b.$(".backward-scroll,.forward-scroll").hide(),_.each(f,function(a){a.tab.css("width",100/a.length+"%"),c.append(a.tab),e.append(a.$el),b.listenTo(a,"alreadyDone",b.slideUpWrap)})},operViews:function(){var a=[],b=_.pluck(this.model.get("lstElementHtml"),"elementCode");return _.contains(b,"waybillSendBack")&&a.push(new e({model:this.model})),_.contains(b,"waybillChangeRecipientInfo")&&a.push(new f({model:this.model})),_.contains(b,"waybillPayFreightDeliveryAgain")&&a.push(new g({model:this.model})),_.contains(b,"waybillDeliveryAgain")&&a.push(new h({model:this.model})),a},toggleOper:function(a){var b=$(a.currentTarget);if(!b.data("auto-tab"))return!1;if(b.hasClass("active"))return b.removeClass("active"),this.$(".data_auto_wrapper").slideUp(300),!1;this.$(".auto-tabs li").removeClass("active"),b.addClass("active");var c=b.data("auto-tab");return this.$(".data_auto_wrapper>div").hide(),this.$(".data_auto_wrapper>div[data-auto-detail="+c+"]").trigger("showTabOper").show(),this.$(".data_auto_wrapper").slideDown(300),!1},slideUpWrap:function(){this.$(".auto-tabs li").removeClass("active"),this.$(".data_auto_wrapper").slideUp(300)}})}),define("views/waybill/detail/billInfo",["backbone","templates","helper","jquery-placeholder"],function(a,b,c){return a.View.extend({events:{showTabDetail:"render","keyup input":"inputChanged","click .count-down-button":"requestSMSCodefromServer","click .submit-application":"submitApplication"},initialize:function(){this.tab=$(b.waybillDetailInfoTab()),this.$el=$('<li data-detail="waybill-details" class="status-infos"></li>')},inputChanged:function(){if(!this.deny&&!this.codeValidated){var a=this.$("#sender-phone-number-input-billInfo").val(),b=this.model.get("cachePhone")||c.isValidPhoneNumber(a);this.$(".count-down-button").trigger("shouldBeActive",b);var d=this.$("#sender-sms-validation-input-billInfo").val(),e=b&&d&&this.model.get("cachePhone");this.$(".submit-application").toggleClass("disabled",!e),this.$(".error").hide()}},requestSMSCodefromServer:function(a){var b=this;a.preventDefault(),a.stopPropagation(),c.imgVrfCodePC(b,a,b.smsCodefromServer)},smsCodefromServer:function(a,b,c){var d=$(b.currentTarget);$(".error, .message").hide();var e=$("#sender-phone-number-input-billInfo").val();e=_.isEmpty(e)?a.model.get("cachePhone"):e,d.button("loading"),a.model.requestSMSCodefromServer(e,"billInfo",c).success(function(){a.model.set("senderPhone",e),a.model.set("phone",e),a.model.set("cachePhone",e),a.render();var b=a.$(".count-down-button");b.trigger("start")}).error(function(b){d.button("reset"),403===b.status?a.$(".error[data-error=wrong-phone-number]").show():410===b.status?a.$(".error[data-error=limit-send-sms]").show():a.$(".error[data-error=phone-number-network-error]").show()})},submitApplication:function(a){var c=$(a.currentTarget),d=this.$("#sender-sms-validation-input-billInfo").val(),e=this;this.$(".error").hide(),c.button("loading");var f=this.model.get("cachePhone");e.model.set("senderPhone",f),this.model.billInfoURL(d).success(function(a){e.model.set(a),e.model.set("infoFetched",!0),e.model.set("senderPhone",""),e.$el.html(b.waybillDetailInfo({result:e.model.toJSON()}))}).error(function(a){403===a.status?e.$(".error[data-error=wrong-validation-code]").show():e.$(".error[data-error=submit-network-error]").show()})},render:function(){this.model.get("infoFetched")?this.$el.html(b.waybillDetailInfo({result:this.model.toJSON()})):(this.$el.html(b.waybillDetailBillInfoValidationView({result:this.model.toJSON()})),this.$("input").placeholder())}})}),define("views/waybill/detail/billConfirmation",["backbone","templates","helper","imageTrans","jqprint"],function(a,b,c){return a.View.extend({events:{"click .submit-application":"submitApplication","keyup .verification-code input":"inputChanged","click #bill-confirmation-validation-image":"refreshValidationCodeq",showTabDetail:"renderVerificationCode","click #waybill-signed-picture a.layer-close":"closeSignedPicture","click #rotate_pic":"rotate_pic","click #print_pic":"print_pic"},initialize:function(){$("body").css("position","relative"),this.tab=$(b.waybillDetailBillConfirmationTab()),this.$el=$('<li data-detail="waybill-confirmation" class="confirmation-precedence"></li>');var a=c.getResourceURL("images/mask-pic.png");this.$mask=$("<div class='maskLayer'>&nbsp;</div>").css({position:"absolute",top:"0",left:"0","background-color":"#000","background-color":"rgba(0,0,0,.5)",filter:"alpha(opacity=50)","background-image":"url("+a+")","background-repeat":"repeat",opacity:"0.2",filter:"alpha(opacity=20)",width:"100%",height:"100%","z-index":"900"})},submitApplication:function(a){var b=this,c=$(a.currentTarget).parent().siblings(".input-code").find("#sender-sms-validation-input").val();b.fetchBillConfirmation({validationCode:c})},inputChanged:function(a){var b=$(a.currentTarget).val(),c=""!==b&&5===b.length;this.$(".billConfirmationBtn").toggleClass("disabled",!c),a.stopPropagation()},renderVerificationCode:function(a){var c=this;c.$deliveries=$('<div class="deliveries"></div>'),c.$deliveries.append(b.waybillDetailBillConfirmation),c.$el.html(this.$deliveries),c.refreshValidationCodeq(a)},fetchBillConfirmation:function(a){var b=this;b.model.requestBillConfirmation(a.validationCode).success(function(a){b.renderConifrmation(a)}).error(function(a){if(403===a.status){var c=a.responseText;c&&"2"===c?b.$(".error[data-error=wrong-validation-time]").show():c&&"4"===c?b.$(".error[data-error=wrong-validation-ip]").show():b.$(".error[data-error=wrong-validation-code]").show()}else b.$(".error[data-error=wrong-validation-network]").show()})},renderConifrmation:function(a){var c=this;this.model.requestBillImageHead(c.model.billImageURL(a.message)+"&head=true").success(function(d){if(""!=d){c.$el.append(b.waybillDetailBillPicturePop()),$("body").append(c.$mask);var e=$$("picContainer"),f=c.model.billImageURL(a.message);options={onLoad:function(){var a,b;window.ActiveXObject||"ActiveXObject"in window?(a=this._img.naturalHeight/this._clientHeight,b=this._img.naturalWidth/this._clientWidth,(a>1||b>1)&&this._img.naturalHeight>1e3&&this._img.naturalWidth>1e3?(this._img.style.width=(a>b?this._img.naturalWidth/a-30:this._img.naturalWidth/b-30)+"px",this._img.style.height=(a>b?this._img.naturalHeight/a-30:this._img.naturalHeight/b-30)+"px"):(this._img.style.width=this._img.naturalWidth+"px",this._img.style.height=this._img.naturalHeight+"px")):(a=this._img.height/this._clientHeight,b=this._img.width/this._clientWidth,(a>1||b>1)&&(this._img.style.width=(a>b?this._img.width/a-30:this._img.width/b-30)+"px"))}},c.it=new ImageTrans(e,options),c.it.load(f)}else c.$el.append(b.waybillDetailBillPicturePopNoImage()),$("body").append(c.$mask)}).error(function(){c.$el.append(b.waybillDetailBillPicturePopNoImage()),$("body").append(c.$mask)})},refreshValidationCodeq:function(a){var b=this.$("#bill-confirmation-validation-image"),d=c.getRESTfulDomain("captcha/bill?force=true&time="+(new Date).getTime());b[0]&&(b.attr("src",d),a.stopPropagation()),this.$(".verification-code .error").hide()},closeSignedPicture:function(){this.$("#waybill-signed-picture").remove(),$("body").find(".maskLayer").remove()},rotate_pic:function(){this.it.right()},print_pic:function(){var a=$("#picContainer").children("img")[0],b="visible"==$(a).css("visibility"),c=setInterval(function(){if(0!=a.width&&b){var d=a.width,e=a.height,f=$('<canvas width="'+d+'" height="'+e+'"></canvas>');f[0].getContext("2d").drawImage(a,0,0,d,e);var g=new Image;g.src=f[0].toDataURL(),$(g).css("width","90%"),$(g).jqprint(),clearInterval(c)}},200)}})}),function(){function a(a,b){var c;a||(a={});for(c in b)a[c]=b[c];return a}function b(){var a,b,c=arguments,d={},e=function(a,b){var c,d;"object"!=typeof a&&(a={});for(d in b)b.hasOwnProperty(d)&&(c=b[d],a[d]=c&&"object"==typeof c&&"[object Array]"!==Object.prototype.toString.call(c)&&"renderTo"!==d&&"number"!=typeof c.nodeType?e(a[d]||{},c):b[d]);return a};for(c[0]===!0&&(d=c[1],c=Array.prototype.slice.call(c,2)),b=c.length,a=0;b>a;a++)d=e(d,c[a]);return d}function c(a,b){return parseInt(a,b||10)}function d(a){return"string"==typeof a}function e(a){return a&&"object"==typeof a}function f(a){return"[object Array]"===Object.prototype.toString.call(a)}function g(a){return"number"==typeof a}function h(a){return la.log(a)/la.LN10}function i(a){return la.pow(10,a)}function j(a,b){for(var c=a.length;c--;)if(a[c]===b){a.splice(c,1);break}}function k(a){return a!==M&&null!==a}function l(a,b,c){var f,g;if(d(b))k(c)?a.setAttribute(b,c):a&&a.getAttribute&&(g=a.getAttribute(b));else if(k(b)&&e(b))for(f in b)a.setAttribute(f,b[f]);return g}function m(a){return f(a)?a:[a]}function n(){var a,b,c=arguments,d=c.length;for(a=0;d>a;a++)if(b=c[a],b!==M&&null!==b)return b}function o(b,c){ya&&!Ea&&c&&c.opacity!==M&&(c.filter="alpha(opacity="+100*c.opacity+")"),a(b.style,c)}function p(b,c,d,e,f){return b=ja.createElement(b),c&&a(b,c),f&&o(b,{padding:0,border:Na,margin:0}),d&&o(b,d),e&&e.appendChild(b),b}function q(b,c){var d=function(){return M};return d.prototype=new b,a(d.prototype,c),d}function r(a,b,d,e){var f=ia.numberFormat,g=Q.lang,h=+a||0,i=-1===b?(h.toString().split(".")[1]||"").length:isNaN(b=ra(b))?2:b,j=void 0===d?g.decimalPoint:d,g=void 0===e?g.thousandsSep:e,k=0>h?"-":"",l=String(c(h=ra(h).toFixed(i))),m=l.length>3?l.length%3:0;return f!==r?f(a,b,d,e):k+(m?l.substr(0,m)+g:"")+l.substr(m).replace(/(\d{3})(?=\d)/g,"$1"+g)+(i?j+ra(h-l).toFixed(i).slice(2):"")}function s(a,b){return Array((b||2)+1-String(a).length).join(0)+a}function t(a,b,c){var d=a[b];a[b]=function(){var a=Array.prototype.slice.call(arguments);return a.unshift(d),c.apply(this,a)}}function u(a,b){for(var c,d,e,f,g,h="{",i=!1,j=[];-1!==(h=a.indexOf(h));){if(c=a.slice(0,h),i){for(d=c.split(":"),e=d.shift().split("."),g=e.length,c=b,f=0;g>f;f++)c=c[e[f]];d.length&&(d=d.join(":"),e=/\.([0-9])/,f=Q.lang,g=void 0,/f$/.test(d)?(g=(g=d.match(e))?g[1]:-1,null!==c&&(c=r(c,g,f.decimalPoint,d.indexOf(",")>-1?f.thousandsSep:""))):c=R(d,c))}j.push(c),a=a.slice(h+1),h=(i=!i)?"}":"{"}return j.push(a),j.join("")}function v(a){return la.pow(10,na(la.log(a)/la.LN10))}function w(a,b,c,d){var e,c=n(c,1);for(e=a/c,b||(b=[1,2,2.5,5,10],d===!1&&(1===c?b=[1,2,5,10]:.1>=c&&(b=[1/c]))),d=0;d<b.length&&(a=b[d],!(e<=(b[d]+(b[d+1]||b[d]))/2));d++);return a*=c}function x(a,b){var c,d,e=a.length;for(d=0;e>d;d++)a[d].ss_i=d;for(a.sort(function(a,d){return c=b(a,d),0===c?a.ss_i-d.ss_i:c}),d=0;e>d;d++)delete a[d].ss_i}function y(a){for(var b=a.length,c=a[0];b--;)a[b]<c&&(c=a[b]);return c}function z(a){for(var b=a.length,c=a[0];b--;)a[b]>c&&(c=a[b]);return c}function A(a,b){for(var c in a)a[c]&&a[c]!==b&&a[c].destroy&&a[c].destroy(),delete a[c]}function B(a){P||(P=p(Ma)),a&&P.appendChild(a),P.innerHTML=""}function C(a){return parseFloat(a.toPrecision(14))}function D(a,b){S=n(a,b.animation)}function E(){var a=Q.global.useUTC,b=a?"getUTC":"get",c=a?"setUTC":"set";W=Q.global.Date||window.Date,Y=6e4*(a&&Q.global.timezoneOffset||0),X=a?W.UTC:function(a,b,c,d,e,f){return new W(a,b,n(c,1),n(d,0),n(e,0),n(f,0)).getTime()},Z=b+"Minutes",$=b+"Hours",_=b+"Day",aa=b+"Date",ba=b+"Month",ca=b+"FullYear",da=c+"Minutes",ea=c+"Hours",fa=c+"Date",ga=c+"Month",ha=c+"FullYear"}function F(){}function G(a,b,c,d){this.axis=a,this.pos=b,this.type=c||"",this.isNew=!0,!c&&!d&&this.addLabel()}function H(){this.init.apply(this,arguments)}function I(){this.init.apply(this,arguments)}function J(a,b,c,d,e){var f=a.chart.inverted;this.axis=a,this.isNegative=c,this.options=b,this.x=d,this.total=null,this.points={},this.stack=e,this.alignOptions={align:b.align||(f?c?"left":"right":"center"),verticalAlign:b.verticalAlign||(f?"middle":c?"bottom":"top"),y:n(b.y,f?4:c?14:-6),x:n(b.x,f?c?-6:6:0)},this.textAlign=b.textAlign||(f?c?"right":"left":"center")}function K(a){var b=a.options,c=b.navigator,d=c.enabled,b=b.scrollbar,e=b.enabled,f=d?c.height:0,g=e?b.height:0;this.handles=[],this.scrollbarButtons=[],this.elementsToDestroy=[],this.chart=a,this.setBaseSeries(),this.height=f,this.scrollbarHeight=g,this.scrollbarEnabled=e,
this.navigatorEnabled=d,this.navigatorOptions=c,this.scrollbarOptions=b,this.outlineHeight=f+g,this.init()}function L(a){this.init(a)}var M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja=document,ka=window,la=Math,ma=la.round,na=la.floor,oa=la.ceil,pa=la.max,qa=la.min,ra=la.abs,sa=la.cos,ta=la.sin,ua=la.PI,va=2*ua/360,wa=navigator.userAgent,xa=ka.opera,ya=/msie/i.test(wa)&&!xa,za=8===ja.documentMode,Aa=/AppleWebKit/.test(wa),Ba=/Firefox/.test(wa),Ca=/(Mobile|Android|Windows Phone)/.test(wa),Da="http://www.w3.org/2000/svg",Ea=!!ja.createElementNS&&!!ja.createElementNS(Da,"svg").createSVGRect,Fa=Ba&&parseInt(wa.split("Firefox/")[1],10)<4,Ga=!Ea&&!ya&&!!ja.createElement("canvas").getContext,Ha={},Ia=0,Ja=function(){return M},Ka=[],La=0,Ma="div",Na="none",Oa=/^[0-9]+$/,Pa="stroke-width",Qa={};ka.Highcharts?V(16,!0):ia=ka.Highcharts={},R=function(b,c,d){if(!k(c)||isNaN(c))return"Invalid date";var e,b=n(b,"%Y-%m-%d %H:%M:%S"),f=new W(c-Y),g=f[$](),h=f[_](),i=f[aa](),j=f[ba](),l=f[ca](),m=Q.lang,o=m.weekdays,f=a({a:o[h].substr(0,3),A:o[h],d:s(i),e:i,b:m.shortMonths[j],B:m.months[j],m:s(j+1),y:l.toString().substr(2,2),Y:l,H:s(g),I:s(g%12||12),l:g%12||12,M:s(f[Z]()),p:12>g?"AM":"PM",P:12>g?"am":"pm",S:s(f.getSeconds()),L:s(ma(c%1e3),3)},ia.dateFormats);for(e in f)for(;-1!==b.indexOf("%"+e);)b=b.replace("%"+e,"function"==typeof f[e]?f[e](c):f[e]);return d?b.substr(0,1).toUpperCase()+b.substr(1):b},V=function(a,b){var c="Highcharts error #"+a+": www.highcharts.com/errors/"+a;if(b)throw c;ka.console&&void 0},U={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:26784e5,year:31556952e3},T={init:function(a,b,c){var d,e,f,b=b||"",g=a.shift,h=b.indexOf("C")>-1,i=h?7:3,b=b.split(" "),c=[].concat(c),j=function(a){for(d=a.length;d--;)"M"===a[d]&&a.splice(d+1,0,a[d+1],a[d+2],a[d+1],a[d+2])};if(h&&(j(b),j(c)),a.isArea&&(e=b.splice(b.length-6,6),f=c.splice(c.length-6,6)),g<=c.length/i&&b.length===c.length)for(;g--;)c=[].concat(c).splice(0,i).concat(c);if(a.shift=0,b.length)for(a=c.length;b.length<a;)g=[].concat(b).splice(b.length-i,i),h&&(g[i-6]=g[i-2],g[i-5]=g[i-1]),b=b.concat(g);return e&&(b=b.concat(e),c=c.concat(f)),[b,c]},step:function(a,b,c,d){var e=[],f=a.length;if(1===c)e=d;else if(f===b.length&&1>c)for(;f--;)d=parseFloat(a[f]),e[f]=isNaN(d)?a[f]:c*parseFloat(b[f]-d)+d;else e=b;return e}},function(b){ka.HighchartsAdapter=ka.HighchartsAdapter||b&&{init:function(a){var c=b.fx;b.extend(b.easing,{easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}}),b.each(["cur","_default","width","height","opacity"],function(a,d){var e,f=c.step;"cur"===d?f=c.prototype:"_default"===d&&b.Tween&&(f=b.Tween.propHooks[d],d="set"),(e=f[d])&&(f[d]=function(b){var c,b=a?b:this;return"align"!==b.prop?(c=b.elem,c.attr?c.attr(b.prop,"cur"===d?M:b.now):e.apply(this,arguments)):void 0})}),t(b.cssHooks.opacity,"get",function(a,b,c){return b.attr?b.opacity||0:a.call(this,b,c)}),this.addAnimSetter("d",function(b){var c,d=b.elem;b.started||(c=a.init(d,d.d,d.toD),b.start=c[0],b.end=c[1],b.started=!0),d.attr("d",a.step(b.start,b.end,b.pos,d.toD))}),this.each=Array.prototype.forEach?function(a,b){return Array.prototype.forEach.call(a,b)}:function(a,b){var c,d=a.length;for(c=0;d>c;c++)if(b.call(a[c],a[c],c,a)===!1)return c},b.fn.highcharts=function(){var a,b,c="Chart",e=arguments;return this[0]&&(d(e[0])&&(c=e[0],e=Array.prototype.slice.call(e,1)),a=e[0],a!==M&&(a.chart=a.chart||{},a.chart.renderTo=this[0],new ia[c](a,e[1]),b=this),a===M&&(b=Ka[l(this[0],"data-highcharts-chart")])),b}},addAnimSetter:function(a,c){b.Tween?b.Tween.propHooks[a]={set:c}:b.fx.step[a]=c},getScript:b.getScript,inArray:b.inArray,adapterRun:function(a,c){return b(a)[c]()},grep:b.grep,map:function(a,b){for(var c=[],d=0,e=a.length;e>d;d++)c[d]=b.call(a[d],a[d],d,a);return c},offset:function(a){return b(a).offset()},addEvent:function(a,c,d){b(a).bind(c,d)},removeEvent:function(a,c,d){var e=ja.removeEventListener?"removeEventListener":"detachEvent";ja[e]&&a&&!a[e]&&(a[e]=function(){}),b(a).unbind(c,d)},fireEvent:function(c,d,e,f){var g,h=b.Event(d),i="detached"+d;!ya&&e&&(delete e.layerX,delete e.layerY,delete e.returnValue),a(h,e),c[d]&&(c[i]=c[d],c[d]=null),b.each(["preventDefault","stopPropagation"],function(a,b){var c=h[b];h[b]=function(){try{c.call(h)}catch(a){"preventDefault"===b&&(g=!0)}}}),b(c).trigger(h),c[i]&&(c[d]=c[i],c[i]=null),f&&!h.isDefaultPrevented()&&!g&&f(h)},washMouseEvent:function(a){var b=a.originalEvent||a;return b.pageX===M&&(b.pageX=a.pageX,b.pageY=a.pageY),b},animate:function(a,c,d){var e=b(a);a.style||(a.style={}),c.d&&(a.toD=c.d,c.d=1),e.stop(),c.opacity!==M&&a.attr&&(c.opacity+="px"),a.hasAnim=1,e.animate(c,d)},stop:function(a){a.hasAnim&&b(a).stop()}}}(ka.jQuery);var Ra=ka.HighchartsAdapter,Sa=Ra||{};Ra&&Ra.init.call(Ra,T);var Ta=Sa.adapterRun,Ua=Sa.getScript,Va=Sa.inArray,Wa=Sa.each,Xa=Sa.grep,Ya=Sa.offset,Za=Sa.map,$a=Sa.addEvent,_a=Sa.removeEvent,ab=Sa.fireEvent,bb=Sa.washMouseEvent,cb=Sa.animate,db=Sa.stop,Sa={enabled:!0,x:0,y:15,style:{color:"#606060",cursor:"default",fontSize:"11px"}};Q={colors:"#7cb5ec,#434348,#90ed7d,#f7a35c,#8085e9,#f15c80,#e4d354,#8085e8,#8d4653,#91e8e1".split(","),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),decimalPoint:".",numericSymbols:"k,M,G,T,P,E".split(","),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/stock/2.0.4/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/stock/2.0.4/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:b(Sa,{align:"center",enabled:!1,formatter:function(){return null===this.y?"":r(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:Ea,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:Ca?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var eb=Q.plotOptions,Ra=eb.line;E();var fb=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,gb=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,hb=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,ib=function(a){var d,e,f=[];return function(a){a&&a.stops?e=Za(a.stops,function(a){return ib(a[1])}):(d=fb.exec(a))?f=[c(d[1]),c(d[2]),c(d[3]),parseFloat(d[4],10)]:(d=gb.exec(a))?f=[c(d[1],16),c(d[2],16),c(d[3],16),1]:(d=hb.exec(a))&&(f=[c(d[1]),c(d[2]),c(d[3]),1])}(a),{get:function(c){var d;return e?(d=b(a),d.stops=[].concat(d.stops),Wa(e,function(a,b){d.stops[b]=[d.stops[b][0],a.get(c)]})):d=f&&!isNaN(f[0])?"rgb"===c?"rgb("+f[0]+","+f[1]+","+f[2]+")":"a"===c?f[3]:"rgba("+f.join(",")+")":a,d},brighten:function(a){if(e)Wa(e,function(b){b.brighten(a)});else if(g(a)&&0!==a){var b;for(b=0;3>b;b++)f[b]+=c(255*a),f[b]<0&&(f[b]=0),f[b]>255&&(f[b]=255)}return this},rgba:f,setOpacity:function(a){return f[3]=a,this}}};F.prototype={opacity:1,textProps:"fontSize,fontWeight,fontFamily,color,lineHeight,width,textDecoration,textShadow,HcTextStroke".split(","),init:function(a,b){this.element="span"===b?p(b):ja.createElementNS(Da,b),this.renderer=a},animate:function(a,c,d){return c=n(c,S,!0),db(this),c?(c=b(c,{}),d&&(c.complete=d),cb(this,a,c)):(this.attr(a),d&&d()),this},colorGradient:function(a,c,d){var e,g,h,i,j,l,m,n,o,p,q=this.renderer,r=[];if(a.linearGradient?g="linearGradient":a.radialGradient&&(g="radialGradient"),g){h=a[g],i=q.gradients,l=a.stops,o=d.radialReference,f(h)&&(a[g]=h={x1:h[0],y1:h[1],x2:h[2],y2:h[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===g&&o&&!k(h.gradientUnits)&&(h=b(h,{cx:o[0]-o[2]/2+h.cx*o[2],cy:o[1]-o[2]/2+h.cy*o[2],r:h.r*o[2],gradientUnits:"userSpaceOnUse"}));for(p in h)"id"!==p&&r.push(p,h[p]);for(p in l)r.push(l[p]);r=r.join(","),i[r]?a=i[r].attr("id"):(h.id=a="highcharts-"+Ia++,i[r]=j=q.createElement(g).attr(h).add(q.defs),j.stops=[],Wa(l,function(a){0===a[1].indexOf("rgba")?(e=ib(a[1]),m=e.get("rgb"),n=e.get("a")):(m=a[1],n=1),a=q.createElement("stop").attr({offset:a[0],"stop-color":m,"stop-opacity":n}).add(j),j.stops.push(a)})),d.setAttribute(c,"url("+q.url+"#"+a+")")}},attr:function(a,b){var c,d,e,f,g=this.element,h=this;if("string"==typeof a&&b!==M&&(c=a,a={},a[c]=b),"string"==typeof a)h=(this[a+"Getter"]||this._defaultGetter).call(this,a,g);else{for(c in a)d=a[c],f=!1,this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(c)&&(e||(this.symbolAttr(a),e=!0),f=!0),!this.rotation||"x"!==c&&"y"!==c||(this.doTransform=!0),f||(this[c+"Setter"]||this._defaultSetter).call(this,d,c,g),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(c)&&this.updateShadows(c,d);this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return h},updateShadows:function(a,b){for(var c=this.shadows,d=c.length;d--;)c[d].setAttribute(a,"height"===a?pa(b-(c[d].cutHeight||0),0):"d"===a?this.d:b)},addClass:function(a){var b=this.element,c=l(b,"class")||"";return-1===c.indexOf(a)&&l(b,"class",c+" "+a),this},symbolAttr:function(a){var b=this;Wa("x,y,r,start,end,width,height,innerR,anchorX,anchorY".split(","),function(c){b[c]=n(a[c],b[c])}),b.attr({d:b.renderer.symbols[b.symbolName](b.x,b.y,b.width,b.height,b)})},clip:function(a){return this.attr("clip-path",a?"url("+this.renderer.url+"#"+a.id+")":Na)},crisp:function(a){var b,c,d={},e=a.strokeWidth||this.strokeWidth||0;c=ma(e)%2/2,a.x=na(a.x||this.x||0)+c,a.y=na(a.y||this.y||0)+c,a.width=na((a.width||this.width||0)-2*c),a.height=na((a.height||this.height||0)-2*c),a.strokeWidth=e;for(b in a)this[b]!==a[b]&&(this[b]=d[b]=a[b]);return d},css:function(b){var d,e,f=this.styles,g={},h=this.element,i="";if(d=!f,b&&b.color&&(b.fill=b.color),f)for(e in b)b[e]!==f[e]&&(g[e]=b[e],d=!0);if(d){if(d=this.textWidth=b&&b.width&&"text"===h.nodeName.toLowerCase()&&c(b.width),f&&(b=a(f,g)),this.styles=b,d&&(Ga||!Ea&&this.renderer.forExport)&&delete b.width,ya&&!Ea)o(this.element,b);else{f=function(a,b){return"-"+b.toLowerCase()};for(e in b)i+=e.replace(/([A-Z])/g,f)+":"+b[e]+";";l(h,"style",i)}d&&this.added&&this.renderer.buildText(this)}return this},on:function(a,b){var c=this,d=c.element;return O&&"click"===a?(d.ontouchstart=function(a){c.touchEventFired=W.now(),a.preventDefault(),b.call(d,a)},d.onclick=function(a){(-1===wa.indexOf("Android")||W.now()-(c.touchEventFired||0)>1100)&&b.call(d,a)}):d["on"+a]=b,this},setRadialReference:function(a){return this.element.radialReference=a,this},translate:function(a,b){return this.attr({translateX:a,translateY:b})},invert:function(){return this.inverted=!0,this.updateTransform(),this},updateTransform:function(){var a=this.translateX||0,b=this.translateY||0,c=this.scaleX,d=this.scaleY,e=this.inverted,f=this.rotation,g=this.element;e&&(a+=this.attr("width"),b+=this.attr("height")),a=["translate("+a+","+b+")"],e?a.push("rotate(90) scale(-1,1)"):f&&a.push("rotate("+f+" "+(g.getAttribute("x")||0)+" "+(g.getAttribute("y")||0)+")"),(k(c)||k(d))&&a.push("scale("+n(c,1)+" "+n(d,1)+")"),a.length&&g.setAttribute("transform",a.join(" "))},toFront:function(){var a=this.element;return a.parentNode.appendChild(a),this},align:function(a,b,c){var e,f,g,h,i={};return f=this.renderer,g=f.alignedObjects,a?(this.alignOptions=a,this.alignByTranslate=b,(!c||d(c))&&(this.alignTo=e=c||"renderer",j(g,this),g.push(this),c=null)):(a=this.alignOptions,b=this.alignByTranslate,e=this.alignTo),c=n(c,f[e],f),e=a.align,f=a.verticalAlign,g=(c.x||0)+(a.x||0),h=(c.y||0)+(a.y||0),("right"===e||"center"===e)&&(g+=(c.width-(a.width||0))/{right:1,center:2}[e]),i[b?"translateX":"x"]=ma(g),("bottom"===f||"middle"===f)&&(h+=(c.height-(a.height||0))/({bottom:1,middle:2}[f]||1)),i[b?"translateY":"y"]=ma(h),this[this.placed?"animate":"attr"](i),this.placed=!0,this.alignAttr=i,this},getBBox:function(){var b,c,d=this.bBox,e=this.renderer,f=this.rotation;b=this.element;var g=this.styles,h=f*va;c=this.textStr;var i;if((""===c||Oa.test(c))&&(i="num."+c.toString().length+(g?"|"+g.fontSize+"|"+g.fontFamily:"")),i&&(d=e.cache[i]),!d){if(b.namespaceURI===Da||e.forExport){try{d=b.getBBox?a({},b.getBBox()):{width:b.offsetWidth,height:b.offsetHeight}}catch(j){}(!d||d.width<0)&&(d={width:0,height:0})}else d=this.htmlGetBBox();e.isSVG&&(b=d.width,c=d.height,ya&&g&&"11px"===g.fontSize&&"16.9"===c.toPrecision(3)&&(d.height=c=14),f&&(d.width=ra(c*ta(h))+ra(b*sa(h)),d.height=ra(c*sa(h))+ra(b*ta(h)))),this.bBox=d,i&&(e.cache[i]=d)}return d},show:function(a){return a&&this.element.namespaceURI===Da?this.element.removeAttribute("visibility"):this.attr({visibility:a?"inherit":"visible"}),this},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(a){var b=this;b.animate({opacity:0},{duration:a||150,complete:function(){b.attr({y:-9999})}})},add:function(a){var b,d,e=this.renderer,f=a||e,g=f.element||e.box,h=this.element,i=this.zIndex;if(a&&(this.parentGroup=a),this.parentInverted=a&&a.inverted,void 0!==this.textStr&&e.buildText(this),i&&(f.handleZ=!0,i=c(i)),f.handleZ)for(a=g.childNodes,b=0;b<a.length;b++)if(e=a[b],f=l(e,"zIndex"),e!==h&&(c(f)>i||!k(i)&&k(f))){g.insertBefore(h,e),d=!0;break}return d||g.appendChild(h),this.added=!0,this.onAdd&&this.onAdd(),this},safeRemoveChild:function(a){var b=a.parentNode;b&&b.removeChild(a)},destroy:function(){var a,b,c=this,d=c.element||{},e=c.shadows,f=c.renderer.isSVG&&"SPAN"===d.nodeName&&c.parentGroup;if(d.onclick=d.onmouseout=d.onmouseover=d.onmousemove=d.point=null,db(c),c.clipPath&&(c.clipPath=c.clipPath.destroy()),c.stops){for(b=0;b<c.stops.length;b++)c.stops[b]=c.stops[b].destroy();c.stops=null}for(c.safeRemoveChild(d),e&&Wa(e,function(a){c.safeRemoveChild(a)});f&&f.div&&0===f.div.childNodes.length;)d=f.parentGroup,c.safeRemoveChild(f.div),delete f.div,f=d;c.alignTo&&j(c.renderer.alignedObjects,c);for(a in c)delete c[a];return null},shadow:function(a,b,c){var d,e,f,g,h,i,j=[],k=this.element;if(a){for(g=n(a.width,3),h=(a.opacity||.15)/g,i=this.parentInverted?"(-1,-1)":"("+n(a.offsetX,1)+", "+n(a.offsetY,1)+")",d=1;g>=d;d++)e=k.cloneNode(0),f=2*g+1-2*d,l(e,{isShadow:"true",stroke:a.color||"black","stroke-opacity":h*d,"stroke-width":f,transform:"translate"+i,fill:Na}),c&&(l(e,"height",pa(l(e,"height")-f,0)),e.cutHeight=f),b?b.element.appendChild(e):k.parentNode.insertBefore(e,k),j.push(e);this.shadows=j}return this},xGetter:function(a){return"circle"===this.element.nodeName&&(a={x:"cx",y:"cy"}[a]||a),this._defaultGetter(a)},_defaultGetter:function(a){return a=n(this[a],this.element?this.element.getAttribute(a):null,0),/^[\-0-9\.]+$/.test(a)&&(a=parseFloat(a)),a},dSetter:function(a,b,c){a&&a.join&&(a=a.join(" ")),/(NaN| {2}|^$)/.test(a)&&(a="M 0 0"),c.setAttribute(b,a),this[b]=a},dashstyleSetter:function(a){var b;if(a=a&&a.toLowerCase()){for(a=a.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),b=a.length;b--;)a[b]=c(a[b])*this["stroke-width"];a=a.join(",").replace("NaN","none"),this.element.setAttribute("stroke-dasharray",a)}},alignSetter:function(a){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[a])},opacitySetter:function(a,b,c){this[b]=a,c.setAttribute(b,a)},titleSetter:function(a){var b=this.element.getElementsByTagName("title")[0];b||(b=ja.createElementNS(Da,"title"),this.element.appendChild(b)),b.textContent=n(a,"").replace(/<[^>]*>/g,"")},textSetter:function(a){a!==this.textStr&&(delete this.bBox,this.textStr=a,this.added&&this.renderer.buildText(this))},fillSetter:function(a,b,c){"string"==typeof a?c.setAttribute(b,a):a&&this.colorGradient(a,b,c)},zIndexSetter:function(a,b,c){c.setAttribute(b,a),this[b]=a},_defaultSetter:function(a,b,c){c.setAttribute(b,a)}},F.prototype.yGetter=F.prototype.xGetter,F.prototype.translateXSetter=F.prototype.translateYSetter=F.prototype.rotationSetter=F.prototype.verticalAlignSetter=F.prototype.scaleXSetter=F.prototype.scaleYSetter=function(a,b){this[b]=a,this.doTransform=!0},F.prototype["stroke-widthSetter"]=F.prototype.strokeSetter=function(a,b,c){this[b]=a,this.stroke&&this["stroke-width"]?(this.strokeWidth=this["stroke-width"],F.prototype.fillSetter.call(this,this.stroke,"stroke",c),c.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===b&&0===a&&this.hasStroke&&(c.removeAttribute("stroke"),this.hasStroke=!1)};var jb=function(){this.init.apply(this,arguments)};jb.prototype={Element:F,init:function(a,b,c,d,e){var f,g=location,d=this.createElement("svg").attr({version:"1.1"}).css(this.getStyle(d));f=d.element,a.appendChild(f),-1===a.innerHTML.indexOf("xmlns")&&l(f,"xmlns",Da),this.isSVG=!0,this.box=f,this.boxWrapper=d,this.alignedObjects=[],this.url=(Ba||Aa)&&ja.getElementsByTagName("base").length?g.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(ja.createTextNode("Created with Highstock 2.0.4")),this.defs=this.createElement("defs").add(),this.forExport=e,this.gradients={},this.cache={},this.setSize(b,c,!1);var h;Ba&&a.getBoundingClientRect&&(this.subPixelFix=b=function(){o(a,{left:0,top:0}),h=a.getBoundingClientRect(),o(a,{left:oa(h.left)-h.left+"px",top:oa(h.top)-h.top+"px"})},b(),$a(ka,"resize",b))},getStyle:function(b){return this.style=a({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},b)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var a=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),A(this.gradients||{}),this.gradients=null,a&&(this.defs=a.destroy()),this.subPixelFix&&_a(ka,"resize",this.subPixelFix),this.alignedObjects=null},createElement:function(a){var b=new this.Element;return b.init(this,a),b},draw:function(){},buildText:function(a){for(var b,d,e=a.element,f=this,g=f.forExport,h=n(a.textStr,"").toString(),i=-1!==h.indexOf("<"),j=e.childNodes,k=l(e,"x"),m=a.styles,p=a.textWidth,q=m&&m.lineHeight,r=m&&m.HcTextStroke,s=j.length,t=function(a){return q?c(q):f.fontMetrics(/(px|em)$/.test(a&&a.style.fontSize)?a.style.fontSize:m&&m.fontSize||f.style.fontSize||12,a).h};s--;)e.removeChild(j[s]);i||r||-1!==h.indexOf(" ")?(b=/<.*style="([^"]+)".*>/,d=/<.*href="(http[^"]+)".*>/,p&&!a.added&&this.box.appendChild(e),h=i?h.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[h],""===h[h.length-1]&&h.pop(),Wa(h,function(c,h){var i,j=0,c=c.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");i=c.split("|||"),Wa(i,function(c){if(""!==c||1===i.length){var n,q={},r=ja.createElementNS(Da,"tspan");if(b.test(c)&&(n=c.match(b)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),l(r,"style",n)),d.test(c)&&!g&&(l(r,"onclick",'location.href="'+c.match(d)[1]+'"'),o(r,{cursor:"pointer"})),c=(c.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">")," "!==c){if(r.appendChild(ja.createTextNode(c)),j?q.dx=0:h&&null!==k&&(q.x=k),l(r,q),e.appendChild(r),!j&&h&&(!Ea&&g&&o(r,{display:"block"}),l(r,"dy",t(r))),p)for(var s,u,c=c.replace(/([^\^])-/g,"$1- ").split(" "),q=i.length>1||c.length>1&&"nowrap"!==m.whiteSpace,v=m.HcHeight,w=[],x=t(r),y=1;q&&(c.length||w.length);)delete a.bBox,s=a.getBBox(),u=s.width,!Ea&&f.forExport&&(u=f.measureSpanWidth(r.firstChild.data,a.styles)),s=u>p,s&&1!==c.length?(r.removeChild(r.firstChild),w.unshift(c.pop())):(c=w,w=[],c.length&&(y++,v&&y*x>v?(c=["..."],a.attr("title",a.textStr)):(r=ja.createElementNS(Da,"tspan"),l(r,{dy:x,x:k}),n&&l(r,"style",n),e.appendChild(r))),u>p&&(p=u)),c.length&&r.appendChild(ja.createTextNode(c.join(" ").replace(/- /g,"-")));j++}}})})):e.appendChild(ja.createTextNode(h))},button:function(c,d,e,f,g,h,i,j,k){var l,m,n,o,p,q,r=this.label(c,d,e,k,null,null,null,null,"button"),s=0,c={x1:0,y1:0,x2:0,y2:1},g=b({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:c,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},g);return n=g.style,delete g.style,h=b(g,{stroke:"#68A",fill:{linearGradient:c,stops:[[0,"#FFF"],[1,"#ACF"]]}},h),o=h.style,delete h.style,i=b(g,{stroke:"#68A",fill:{linearGradient:c,stops:[[0,"#9BD"],[1,"#CDF"]]}},i),p=i.style,delete i.style,j=b(g,{style:{color:"#CCC"}},j),q=j.style,delete j.style,$a(r.element,ya?"mouseover":"mouseenter",function(){3!==s&&r.attr(h).css(o)}),$a(r.element,ya?"mouseout":"mouseleave",function(){3!==s&&(l=[g,h,i][s],m=[n,o,p][s],r.attr(l).css(m))}),r.setState=function(a){(r.state=s=a)?2===a?r.attr(i).css(p):3===a&&r.attr(j).css(q):r.attr(g).css(n)},r.on("click",function(){3!==s&&f.call(r)}).attr(g).css(a({cursor:"default"},n))},crispLine:function(a,b){return a[1]===a[4]&&(a[1]=a[4]=ma(a[1])-b%2/2),a[2]===a[5]&&(a[2]=a[5]=ma(a[2])+b%2/2),a},path:function(b){var c={fill:Na};return f(b)?c.d=b:e(b)&&a(c,b),this.createElement("path").attr(c)},circle:function(a,b,c){return a=e(a)?a:{x:a,y:b,r:c},b=this.createElement("circle"),b.xSetter=function(a){this.element.setAttribute("cx",a)},b.ySetter=function(a){this.element.setAttribute("cy",a)},b.attr(a)},arc:function(a,b,c,d,f,g){return e(a)&&(b=a.y,c=a.r,d=a.innerR,f=a.start,g=a.end,a=a.x),a=this.symbol("arc",a||0,b||0,c||0,c||0,{innerR:d||0,start:f||0,end:g||0}),a.r=c,a},rect:function(a,b,c,d,f,g){var f=e(a)?a.r:f,h=this.createElement("rect"),a=e(a)?a:a===M?{}:{x:a,y:b,width:pa(c,0),height:pa(d,0)};return g!==M&&(a.strokeWidth=g,a=h.crisp(a)),f&&(a.r=f),h.rSetter=function(a){l(this.element,{rx:a,ry:a})},h.attr(a)},setSize:function(a,b,c){var d=this.alignedObjects,e=d.length;for(this.width=a,this.height=b,this.boxWrapper[n(c,!0)?"animate":"attr"]({width:a,height:b});e--;)d[e].align()},g:function(a){var b=this.createElement("g");return k(a)?b.attr({"class":"highcharts-"+a}):b},image:function(b,c,d,e,f){var g={preserveAspectRatio:Na};return arguments.length>1&&a(g,{x:c,y:d,width:e,height:f}),g=this.createElement("image").attr(g),g.element.setAttributeNS?g.element.setAttributeNS("http://www.w3.org/1999/xlink","href",b):g.element.setAttribute("hc-svg-href",b),g},symbol:function(b,c,d,e,f,g){var h,i,j,k=this.symbols[b],k=k&&k(ma(c),ma(d),e,f,g),l=/^url\((.*?)\)$/;return k?(h=this.path(k),a(h,{symbolName:b,x:c,y:d,width:e,height:f}),g&&a(h,g)):l.test(b)&&(j=function(a,b){a.element&&(a.attr({width:b[0],height:b[1]}),a.alignByTranslate||a.translate(ma((e-b[0])/2),ma((f-b[1])/2)))},i=b.match(l)[1],b=Ha[i]||g&&g.width&&g.height&&[g.width,g.height],h=this.image(i).attr({x:c,y:d}),h.isImg=!0,b?j(h,b):(h.attr({width:0,height:0}),p("img",{onload:function(){j(h,Ha[i]=[this.width,this.height])},src:i}))),h},symbols:{circle:function(a,b,c,d){var e=.166*c;return["M",a+c/2,b,"C",a+c+e,b,a+c+e,b+d,a+c/2,b+d,"C",a-e,b+d,a-e,b,a+c/2,b,"Z"]},square:function(a,b,c,d){return["M",a,b,"L",a+c,b,a+c,b+d,a,b+d,"Z"]},triangle:function(a,b,c,d){return["M",a+c/2,b,"L",a+c,b+d,a,b+d,"Z"]},"triangle-down":function(a,b,c,d){return["M",a,b,"L",a+c,b,a+c/2,b+d,"Z"]},diamond:function(a,b,c,d){return["M",a+c/2,b,"L",a+c,b+d/2,a+c/2,b+d,a,b+d/2,"Z"]},arc:function(a,b,c,d,e){var f=e.start,c=e.r||c||d,g=e.end-.001,d=e.innerR,h=e.open,i=sa(f),j=ta(f),k=sa(g),g=ta(g),e=e.end-f<ua?0:1;return["M",a+c*i,b+c*j,"A",c,c,0,e,1,a+c*k,b+c*g,h?"M":"L",a+d*k,b+d*g,"A",d,d,0,e,0,a+d*i,b+d*j,h?"":"Z"]},callout:function(a,b,c,d,e){var f=qa(e&&e.r||0,c,d),g=f+6,h=e&&e.anchorX,i=e&&e.anchorY,e=ma(e.strokeWidth||0)%2/2;return a+=e,b+=e,e=["M",a+f,b,"L",a+c-f,b,"C",a+c,b,a+c,b,a+c,b+f,"L",a+c,b+d-f,"C",a+c,b+d,a+c,b+d,a+c-f,b+d,"L",a+f,b+d,"C",a,b+d,a,b+d,a,b+d-f,"L",a,b+f,"C",a,b,a,b,a+f,b],h&&h>c&&i>b+g&&b+d-g>i?e.splice(13,3,"L",a+c,i-6,a+c+6,i,a+c,i+6,a+c,b+d-f):h&&0>h&&i>b+g&&b+d-g>i?e.splice(33,3,"L",a,i+6,a-6,i,a,i-6,a,b+f):i&&i>d&&h>a+g&&a+c-g>h?e.splice(23,3,"L",h+6,b+d,h,b+d+6,h-6,b+d,a+f,b+d):i&&0>i&&h>a+g&&a+c-g>h&&e.splice(3,3,"L",h-6,b,h,b-6,h+6,b,c-f,b),e}},clipRect:function(a,b,c,d){var e="highcharts-"+Ia++,f=this.createElement("clipPath").attr({id:e}).add(this.defs),a=this.rect(a,b,c,d,0).add(f);return a.id=e,a.clipPath=f,a},text:function(a,b,c,d){var e=Ga||!Ea&&this.forExport,f={};return d&&!this.forExport?this.html(a,b,c):(f.x=Math.round(b||0),c&&(f.y=Math.round(c)),(a||0===a)&&(f.text=a),a=this.createElement("text").attr(f),e&&a.css({position:"absolute"}),d||(a.xSetter=function(a,b,c){var d,e,f=c.getElementsByTagName("tspan"),g=c.getAttribute(b);for(e=0;e<f.length;e++)d=f[e],d.getAttribute(b)===g&&d.setAttribute(b,a);c.setAttribute(b,a)}),a)},fontMetrics:function(a,b){a=a||this.style.fontSize,b&&ka.getComputedStyle&&(b=b.element||b,a=ka.getComputedStyle(b,"").fontSize);var a=/px/.test(a)?c(a):/em/.test(a)?12*parseFloat(a):12,d=24>a?a+4:ma(1.2*a),e=ma(.8*d);return{h:d,b:e,f:a}},label:function(c,d,e,f,g,h,i,j,l){function m(){var b,c;b=z.element.style,q=(void 0===r||void 0===s||y.styles.textAlign)&&z.textStr&&z.getBBox(),y.width=(r||q.width||0)+2*B+C,y.height=(s||q.height||0)+2*B,v=B+x.fontMetrics(b&&b.fontSize,z).b,w&&(p||(b=ma(-A*B),c=j?-v:0,y.box=p=f?x.symbol(f,b,c,y.width,y.height,E):x.rect(b,c,y.width,y.height,0,E[Pa]),p.attr("fill",Na).add(y)),p.isImg||p.attr(a({width:ma(y.width),height:ma(y.height)},E)),E=null)}function n(){var a,b=y.styles,b=b&&b.textAlign,c=C+B*(1-A);a=j?0:v,k(r)&&q&&("center"===b||"right"===b)&&(c+={center:.5,right:1}[b]*(r-q.width)),(c!==z.x||a!==z.y)&&(z.attr("x",c),a!==M&&z.attr("y",a)),z.x=c,z.y=a}function o(a,b){p?p.attr(a,b):E[a]=b}var p,q,r,s,t,u,v,w,x=this,y=x.g(l),z=x.text("",0,0,i).attr({zIndex:1}),A=0,B=3,C=0,D=0,E={};y.onAdd=function(){z.add(y),y.attr({text:c||0===c?c:"",x:d,y:e}),p&&k(g)&&y.attr({anchorX:g,anchorY:h})},y.widthSetter=function(a){r=a},y.heightSetter=function(a){s=a},y.paddingSetter=function(a){k(a)&&a!==B&&(B=a,n())},y.paddingLeftSetter=function(a){k(a)&&a!==C&&(C=a,n())},y.alignSetter=function(a){A={left:0,center:.5,right:1}[a]},y.textSetter=function(a){a!==M&&z.textSetter(a),m(),n()},y["stroke-widthSetter"]=function(a,b){a&&(w=!0),D=a%2/2,o(b,a)},y.strokeSetter=y.fillSetter=y.rSetter=function(a,b){"fill"===b&&a&&(w=!0),o(b,a)},y.anchorXSetter=function(a,b){g=a,o(b,a+D-t)},y.anchorYSetter=function(a,b){h=a,o(b,a-u)},y.xSetter=function(a){y.x=a,A&&(a-=A*((r||q.width)+B)),t=ma(a),y.attr("translateX",t)},y.ySetter=function(a){u=y.y=ma(a),y.attr("translateY",u)};var G=y.css;return a(y,{css:function(a){if(a){var c={},a=b(a);Wa(y.textProps,function(b){a[b]!==M&&(c[b]=a[b],delete a[b])}),z.css(c)}return G.call(y,a)},getBBox:function(){return{width:q.width+2*B,height:q.height+2*B,x:q.x-B,y:q.y-B}},shadow:function(a){return p&&p.shadow(a),y},destroy:function(){_a(y.element,"mouseenter"),_a(y.element,"mouseleave"),z&&(z=z.destroy()),p&&(p=p.destroy()),F.prototype.destroy.call(y),y=x=m=n=o=null}})}},N=jb,a(F.prototype,{htmlCss:function(b){var c=this.element;return(c=b&&"SPAN"===c.tagName&&b.width)&&(delete b.width,this.textWidth=c,this.updateTransform()),this.styles=a(this.styles,b),o(this.element,b),this},htmlGetBBox:function(){var a=this.element,b=this.bBox;return b||("text"===a.nodeName&&(a.style.position="absolute"),b=this.bBox={x:a.offsetLeft,y:a.offsetTop,width:a.offsetWidth,height:a.offsetHeight}),b},htmlUpdateTransform:function(){if(this.added){var a=this.renderer,b=this.element,d=this.translateX||0,e=this.translateY||0,f=this.x||0,g=this.y||0,h=this.textAlign||"left",i={left:0,center:.5,right:1}[h],j=this.shadows;if(o(b,{marginLeft:d,marginTop:e}),j&&Wa(j,function(a){o(a,{marginLeft:d+1,marginTop:e+1})}),this.inverted&&Wa(b.childNodes,function(c){a.invertChild(c,b)}),"SPAN"===b.tagName){var l,m=this.rotation,p=c(this.textWidth),q=[m,h,b.innerHTML,this.textWidth].join(",");q!==this.cTT&&(l=a.fontMetrics(b.style.fontSize).b,k(m)&&this.setSpanRotation(m,i,l),j=n(this.elemWidth,b.offsetWidth),j>p&&/[ \-]/.test(b.textContent||b.innerText)&&(o(b,{width:p+"px",display:"block",whiteSpace:"normal"}),j=p),this.getSpanCorrection(j,l,i,m,h)),o(b,{left:f+(this.xCorr||0)+"px",top:g+(this.yCorr||0)+"px"}),Aa&&(l=b.offsetHeight),this.cTT=q}}else this.alignOnAdd=!0},setSpanRotation:function(a,b,c){var d={},e=ya?"-ms-transform":Aa?"-webkit-transform":Ba?"MozTransform":xa?"-o-transform":"";d[e]=d.transform="rotate("+a+"deg)",d[e+(Ba?"Origin":"-origin")]=d.transformOrigin=100*b+"% "+c+"px",o(this.element,d)},getSpanCorrection:function(a,b,c){this.xCorr=-a*c,this.yCorr=-b}}),a(jb.prototype,{html:function(b,c,d){var e=this.createElement("span"),f=e.element,g=e.renderer;return e.textSetter=function(a){a!==f.innerHTML&&delete this.bBox,f.innerHTML=this.textStr=a},e.xSetter=e.ySetter=e.alignSetter=e.rotationSetter=function(a,b){"align"===b&&(b="textAlign"),e[b]=a,e.htmlUpdateTransform()},e.attr({text:b,x:ma(c),y:ma(d)}).css({position:"absolute",whiteSpace:"nowrap",fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),e.css=e.htmlCss,g.isSVG&&(e.add=function(b){var c,d=g.box.parentNode,h=[];if(this.parentGroup=b){if(c=b.div,!c){for(;b;)h.push(b),b=b.parentGroup;Wa(h.reverse(),function(b){var e;c=b.div=b.div||p(Ma,{className:l(b.element,"class")},{position:"absolute",left:(b.translateX||0)+"px",top:(b.translateY||0)+"px"},c||d),e=c.style,a(b,{translateXSetter:function(a,c){e.left=a+"px",b[c]=a,b.doTransform=!0},translateYSetter:function(a,c){e.top=a+"px",b[c]=a,b.doTransform=!0},visibilitySetter:function(a,b){e[b]=a}})})}}else c=d;return c.appendChild(f),e.added=!0,e.alignOnAdd&&e.htmlUpdateTransform(),e}),e}});var kb,lb;Ea||Ga||(lb={init:function(a,b){var c=["<",b,' filled="f" stroked="f"'],d=["position: ","absolute",";"],e=b===Ma;("shape"===b||e)&&d.push("left:0;top:0;width:1px;height:1px;"),d.push("visibility: ",e?"hidden":"visible"),
c.push(' style="',d.join(""),'"/>'),b&&(c=e||"span"===b||"img"===b?c.join(""):a.prepVML(c),this.element=p(c)),this.renderer=a},add:function(a){var b=this.renderer,c=this.element,d=b.box,d=a?a.element||a:d;return a&&a.inverted&&b.invertChild(c,d),d.appendChild(c),this.added=!0,this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform(),this.onAdd&&this.onAdd(),this},updateTransform:F.prototype.htmlUpdateTransform,setSpanRotation:function(){var a=this.rotation,b=sa(a*va),c=ta(a*va);o(this.element,{filter:a?["progid:DXImageTransform.Microsoft.Matrix(M11=",b,", M12=",-c,", M21=",c,", M22=",b,", sizingMethod='auto expand')"].join(""):Na})},getSpanCorrection:function(a,b,c,d,e){var f,g=d?sa(d*va):1,h=d?ta(d*va):0,i=n(this.elemHeight,this.element.offsetHeight);this.xCorr=0>g&&-a,this.yCorr=0>h&&-i,f=0>g*h,this.xCorr+=h*b*(f?1-c:c),this.yCorr-=g*b*(d?f?c:1-c:1),e&&"left"!==e&&(this.xCorr-=a*c*(0>g?-1:1),d&&(this.yCorr-=i*c*(0>h?-1:1)),o(this.element,{textAlign:e}))},pathToVML:function(a){for(var b=a.length,c=[];b--;)g(a[b])?c[b]=ma(10*a[b])-5:"Z"===a[b]?c[b]="x":(c[b]=a[b],!a.isArc||"wa"!==a[b]&&"at"!==a[b]||(c[b+5]===c[b+7]&&(c[b+7]+=a[b+7]>a[b+5]?1:-1),c[b+6]===c[b+8]&&(c[b+8]+=a[b+8]>a[b+6]?1:-1)));return c.join(" ")||"x"},clip:function(a){var b,c=this;return a?(b=a.members,j(b,c),b.push(c),c.destroyClip=function(){j(b,c)},a=a.getCSS(c)):(c.destroyClip&&c.destroyClip(),a={clip:za?"inherit":"rect(auto)"}),c.css(a)},css:F.prototype.htmlCss,safeRemoveChild:function(a){a.parentNode&&B(a)},destroy:function(){return this.destroyClip&&this.destroyClip(),F.prototype.destroy.apply(this)},on:function(a,b){return this.element["on"+a]=function(){var a=ka.event;a.target=a.srcElement,b(a)},this},cutOffPath:function(a,b){var d,a=a.split(/[ ,]/);return d=a.length,(9===d||11===d)&&(a[d-4]=a[d-2]=c(a[d-2])-10*b),a.join(" ")},shadow:function(a,b,d){var e,f,g,h,i,j,k,l=[],m=this.element,o=this.renderer,q=m.style,r=m.path;if(r&&"string"!=typeof r.value&&(r="x"),i=r,a){for(j=n(a.width,3),k=(a.opacity||.15)/j,e=1;3>=e;e++)h=2*j+1-2*e,d&&(i=this.cutOffPath(r.value,h+.5)),g=['<shape isShadow="true" strokeweight="',h,'" filled="false" path="',i,'" coordsize="10 10" style="',m.style.cssText,'" />'],f=p(o.prepVML(g),null,{left:c(q.left)+n(a.offsetX,1),top:c(q.top)+n(a.offsetY,1)}),d&&(f.cutOff=h+1),g=['<stroke color="',a.color||"black",'" opacity="',k*e,'"/>'],p(o.prepVML(g),null,null,f),b?b.element.appendChild(f):m.parentNode.insertBefore(f,m),l.push(f);this.shadows=l}return this},updateShadows:Ja,setAttr:function(a,b){za?this.element[a]=b:this.element.setAttribute(a,b)},classSetter:function(a){this.element.className=a},dashstyleSetter:function(a,b,c){(c.getElementsByTagName("stroke")[0]||p(this.renderer.prepVML(["<stroke/>"]),null,null,c))[b]=a||"solid",this[b]=a},dSetter:function(a,b,c){var d=this.shadows,a=a||[];if(this.d=a.join&&a.join(" "),c.path=a=this.pathToVML(a),d)for(c=d.length;c--;)d[c].path=d[c].cutOff?this.cutOffPath(a,d[c].cutOff):a;this.setAttr(b,a)},fillSetter:function(a,b,c){var d=c.nodeName;"SPAN"===d?c.style.color=a:"IMG"!==d&&(c.filled=a!==Na,this.setAttr("fillcolor",this.renderer.color(a,c,b,this)))},opacitySetter:Ja,rotationSetter:function(a,b,c){c=c.style,this[b]=c[b]=a,c.left=-ma(ta(a*va)+1)+"px",c.top=ma(sa(a*va))+"px"},strokeSetter:function(a,b,c){this.setAttr("strokecolor",this.renderer.color(a,c,b))},"stroke-widthSetter":function(a,b,c){c.stroked=!!a,this[b]=a,g(a)&&(a+="px"),this.setAttr("strokeweight",a)},titleSetter:function(a,b){this.setAttr(b,a)},visibilitySetter:function(a,b,c){"inherit"===a&&(a="visible"),this.shadows&&Wa(this.shadows,function(c){c.style[b]=a}),"DIV"===c.nodeName&&(a="hidden"===a?"-999em":0,za||(c.style[b]=a?"visible":"hidden"),b="top"),c.style[b]=a},xSetter:function(a,b,c){this[b]=a,"x"===b?b="left":"y"===b&&(b="top"),this.updateClipping?(this[b]=a,this.updateClipping()):c.style[b]=a},zIndexSetter:function(a,b,c){c.style[b]=a}},ia.VMLElement=lb=q(F,lb),lb.prototype.ySetter=lb.prototype.widthSetter=lb.prototype.heightSetter=lb.prototype.xSetter,lb={Element:lb,isIE8:wa.indexOf("MSIE 8.0")>-1,init:function(b,c,d,e){var f;if(this.alignedObjects=[],e=this.createElement(Ma).css(a(this.getStyle(e),{position:"relative"})),f=e.element,b.appendChild(e.element),this.isVML=!0,this.box=f,this.boxWrapper=e,this.cache={},this.setSize(c,d,!1),!ja.namespaces.hcv){ja.namespaces.add("hcv","urn:schemas-microsoft-com:vml");try{ja.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}catch(g){ja.styleSheets[0].cssText+="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(b,c,d,f){var g=this.createElement(),h=e(b);return a(g,{members:[],left:(h?b.x:b)+1,top:(h?b.y:c)+1,width:(h?b.width:d)-1,height:(h?b.height:f)-1,getCSS:function(b){var c=b.element,d=c.nodeName,b=b.inverted,e=this.top-("shape"===d?c.offsetTop:0),f=this.left,c=f+this.width,g=e+this.height,e={clip:"rect("+ma(b?f:e)+"px,"+ma(b?g:c)+"px,"+ma(b?c:g)+"px,"+ma(b?e:f)+"px)"};return!b&&za&&"DIV"===d&&a(e,{width:c+"px",height:g+"px"}),e},updateClipping:function(){Wa(g.members,function(a){a.element&&a.css(g.getCSS(a))})}})},color:function(a,b,c,d){var e,f,g,h=this,i=/^rgba/,j=Na;if(a&&a.linearGradient?g="gradient":a&&a.radialGradient&&(g="pattern"),g){var k,l,m,n,o,q,r,s,t=a.linearGradient||a.radialGradient,u="",a=a.stops,v=[],w=function(){f=['<fill colors="'+v.join(",")+'" opacity="',o,'" o:opacity2="',n,'" type="',g,'" ',u,'focus="100%" method="any" />'],p(h.prepVML(f),null,null,b)};if(m=a[0],s=a[a.length-1],m[0]>0&&a.unshift([0,m[1]]),s[0]<1&&a.push([1,s[1]]),Wa(a,function(a,b){i.test(a[1])?(e=ib(a[1]),k=e.get("rgb"),l=e.get("a")):(k=a[1],l=1),v.push(100*a[0]+"% "+k),b?(o=l,q=k):(n=l,r=k)}),"fill"===c)if("gradient"===g)c=t.x1||t[0]||0,a=t.y1||t[1]||0,m=t.x2||t[2]||0,t=t.y2||t[3]||0,u='angle="'+(90-180*la.atan((t-a)/(m-c))/ua)+'"',w();else{var x,j=t.r,y=2*j,z=2*j,A=t.cx,B=t.cy,C=b.radialReference,j=function(){C&&(x=d.getBBox(),A+=(C[0]-x.x)/x.width-.5,B+=(C[1]-x.y)/x.height-.5,y*=C[2]/x.width,z*=C[2]/x.height),u='src="'+Q.global.VMLRadialGradientURL+'" size="'+y+","+z+'" origin="0.5,0.5" position="'+A+","+B+'" color2="'+r+'" ',w()};d.added?j():d.onAdd=j,j=q}else j=k}else i.test(a)&&"IMG"!==b.tagName?(e=ib(a),f=["<",c,' opacity="',e.get("a"),'"/>'],p(this.prepVML(f),null,null,b),j=e.get("rgb")):(j=b.getElementsByTagName(c),j.length&&(j[0].opacity=1,j[0].type="solid"),j=a);return j},prepVML:function(a){var b=this.isIE8,a=a.join("");return b?(a=a.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),a=-1===a.indexOf('style="')?a.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):a.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):a=a.replace("<","<hcv:"),a},text:jb.prototype.html,path:function(b){var c={coordsize:"10 10"};return f(b)?c.d=b:e(b)&&a(c,b),this.createElement("shape").attr(c)},circle:function(a,b,c){var d=this.symbol("circle");return e(a)&&(c=a.r,b=a.y,a=a.x),d.isCircle=!0,d.r=c,d.attr({x:a,y:b})},g:function(a){var b;return a&&(b={className:"highcharts-"+a,"class":"highcharts-"+a}),this.createElement(Ma).attr(b)},image:function(a,b,c,d,e){var f=this.createElement("img").attr({src:a});return arguments.length>1&&f.attr({x:b,y:c,width:d,height:e}),f},createElement:function(a){return"rect"===a?this.symbol(a):jb.prototype.createElement.call(this,a)},invertChild:function(a,b){var d=this,e=b.style,f="IMG"===a.tagName&&a.style;o(a,{flip:"x",left:c(e.width)-(f?c(f.top):1),top:c(e.height)-(f?c(f.left):1),rotation:-90}),Wa(a.childNodes,function(b){d.invertChild(b,a)})},symbols:{arc:function(a,b,c,d,e){var f=e.start,g=e.end,h=e.r||c||d,c=e.innerR,d=sa(f),i=ta(f),j=sa(g),k=ta(g);return g-f===0?["x"]:(f=["wa",a-h,b-h,a+h,b+h,a+h*d,b+h*i,a+h*j,b+h*k],e.open&&!c&&f.push("e","M",a,b),f.push("at",a-c,b-c,a+c,b+c,a+c*j,b+c*k,a+c*d,b+c*i,"x","e"),f.isArc=!0,f)},circle:function(a,b,c,d,e){return e&&(c=d=2*e.r),e&&e.isCircle&&(a-=c/2,b-=d/2),["wa",a,b,a+c,b+d,a+c,b+d/2,a+c,b+d/2,"e"]},rect:function(a,b,c,d,e){return jb.prototype.symbols[k(e)&&e.r?"callout":"square"].call(0,a,b,c,d,e)}}},ia.VMLRenderer=kb=function(){this.init.apply(this,arguments)},kb.prototype=b(jb.prototype,lb),N=kb),jb.prototype.measureSpanWidth=function(a,b){var c,d=ja.createElement("span");return c=ja.createTextNode(a),d.appendChild(c),o(d,b),this.box.appendChild(d),c=d.offsetWidth,B(d),c};var mb;Ga&&(ia.CanVGRenderer=lb=function(){Da="http://www.w3.org/1999/xhtml"},lb.prototype.symbols={},mb=function(){function a(){var a,c=b.length;for(a=0;c>a;a++)b[a]();b=[]}var b=[];return{push:function(c,d){0===b.length&&Ua(d,a),b.push(c)}}}(),N=lb),G.prototype={addLabel:function(){var b,c=this.axis,d=c.options,e=c.chart,f=c.horiz,h=c.categories,j=c.names,l=this.pos,m=d.labels,o=m.rotation,p=c.tickPositions,f=f&&h&&!m.step&&!m.staggerLines&&!m.rotation&&e.plotWidth/p.length||!f&&(e.margin[3]||.33*e.chartWidth),q=l===p[0],r=l===p[p.length-1],j=h?n(h[l],j[l],l):l,h=this.label,s=p.info;c.isDatetimeAxis&&s&&(b=d.dateTimeLabelFormats[s.higherRanks[l]||s.unitName]),this.isFirst=q,this.isLast=r,d=c.labelFormatter.call({axis:c,chart:e,isFirst:q,isLast:r,dateTimeLabelFormat:b,value:c.isLog?C(i(j)):j}),l=f&&{width:pa(1,ma(f-2*(m.padding||10)))+"px"},k(h)?h&&h.attr({text:d}).css(l):(b={align:c.labelAlign},g(o)&&(b.rotation=o),f&&m.ellipsis&&(l.HcHeight=c.len/p.length),this.label=h=k(d)&&m.enabled?e.renderer.text(d,0,0,m.useHTML).attr(b).css(a(l,m.style)).add(c.labelGroup):null,c.tickBaseline=e.renderer.fontMetrics(m.style.fontSize,h).b,o&&2===c.side&&(c.tickBaseline*=sa(o*va))),this.yOffset=h?n(m.y,c.tickBaseline+(2===c.side?8:-(h.getBBox().height/2))):0},getLabelSize:function(){var a=this.label,b=this.axis;return a?a.getBBox()[b.horiz?"height":"width"]:0},getLabelSides:function(){var a=this.label.getBBox(),b=this.axis,c=b.horiz,d=b.options.labels,a=c?a.width:a.height,b=c?d.x-a*{left:0,center:.5,right:1}[b.labelAlign]:0;return[b,c?a+b:a]},handleOverflow:function(a,b){var c,d,e,f=!0,g=this.axis,h=this.isFirst,i=this.isLast,j=g.horiz?b.x:b.y,k=g.reversed,l=g.tickPositions,m=this.getLabelSides(),n=m[0],m=m[1],o=this.label.line;if(c=o||0,d=g.labelEdge,e=g.justifyLabels&&(h||i),d[c]===M||j+n>d[c]?d[c]=j+m:e||(f=!1),e){c=(d=g.justifyToPlot)?g.pos:0,d=d?c+g.len:g.chart.chartWidth;do a+=h?1:-1,e=g.ticks[l[a]];while(l[a]&&(!e||!e.label||e.label.line!==o));g=e&&e.label.xy&&e.label.xy.x+e.getLabelSides()[h?0:1],h&&!k||i&&k?c>j+n&&(j=c-n,e&&j+m>g&&(f=!1)):j+m>d&&(j=d-m,e&&g>j+n&&(f=!1)),b.x=j}return f},getPosition:function(a,b,c,d){var e=this.axis,f=e.chart,g=d&&f.oldChartHeight||f.chartHeight;return{x:a?e.translate(b+c,null,null,d)+e.transB:e.left+e.offset+(e.opposite?(d&&f.oldChartWidth||f.chartWidth)-e.right-e.left:0),y:a?g-e.bottom+e.offset-(e.opposite?e.height:0):g-e.translate(b+c,null,null,d)-e.transB}},getLabelPosition:function(a,b,c,d,e,f,g,h){var i=this.axis,j=i.transA,k=i.reversed,l=i.staggerLines,a=a+e.x-(f&&d?f*j*(k?-1:1):0),b=b+this.yOffset-(f&&!d?f*j*(k?1:-1):0);return l&&(c.line=g/(h||1)%l,b+=c.line*(i.labelOffset/l)),{x:a,y:b}},getMarkPath:function(a,b,c,d,e,f){return f.crispLine(["M",a,b,"L",a+(e?0:-c),b+(e?c:0)],d)},render:function(a,b,c){var d=this.axis,e=d.options,f=d.chart.renderer,g=d.horiz,h=this.type,i=this.label,j=this.pos,k=e.labels,l=this.gridLine,m=h?h+"Grid":"grid",o=h?h+"Tick":"tick",p=e[m+"LineWidth"],q=e[m+"LineColor"],r=e[m+"LineDashStyle"],s=e[o+"Length"],m=e[o+"Width"]||0,t=e[o+"Color"],u=e[o+"Position"],o=this.mark,v=k.step,w=!0,x=d.tickmarkOffset,y=this.getPosition(g,j,x,b),z=y.x,y=y.y,A=g&&z===d.pos+d.len||!g&&y===d.pos?-1:1,c=n(c,1);this.isActive=!0,p&&(j=d.getPlotLinePath(j+x,p*A,b,!0),l===M&&(l={stroke:q,"stroke-width":p},r&&(l.dashstyle=r),h||(l.zIndex=1),b&&(l.opacity=0),this.gridLine=l=p?f.path(j).attr(l).add(d.gridGroup):null),!b&&l&&j&&l[this.isNew?"attr":"animate"]({d:j,opacity:c})),m&&s&&("inside"===u&&(s=-s),d.opposite&&(s=-s),h=this.getMarkPath(z,y,s,m*A,g,f),o?o.animate({d:h,opacity:c}):this.mark=f.path(h).attr({stroke:t,"stroke-width":m,opacity:c}).add(d.axisGroup)),i&&!isNaN(z)&&(i.xy=y=this.getLabelPosition(z,y,i,g,k,x,a,v),this.isFirst&&!this.isLast&&!n(e.showFirstLabel,1)||this.isLast&&!this.isFirst&&!n(e.showLastLabel,1)?w=!1:!d.isRadial&&!k.step&&!k.rotation&&!b&&0!==c&&(w=this.handleOverflow(a,y)),v&&a%v&&(w=!1),w&&!isNaN(y.y)?(y.opacity=c,i[this.isNew?"attr":"animate"](y),this.isNew=!1):i.attr("y",-9999))},destroy:function(){A(this,this.axis)}},ia.PlotLineOrBand=function(a,b){this.axis=a,b&&(this.options=b,this.id=b.id)},ia.PlotLineOrBand.prototype={render:function(){var a,c=this,d=c.axis,e=d.horiz,f=(d.pointRange||0)/2,g=c.options,i=g.label,j=c.label,l=g.width,m=g.to,n=g.from,o=k(n)&&k(m),p=g.value,q=g.dashStyle,r=c.svgElem,s=[],t=g.color,u=g.zIndex,v=g.events,w={},x=d.chart.renderer;if(d.isLog&&(n=h(n),m=h(m),p=h(p)),l)s=d.getPlotLinePath(p,l),w={stroke:t,"stroke-width":l},q&&(w.dashstyle=q);else{if(!o)return;n=pa(n,d.min-f),m=qa(m,d.max+f),s=d.getPlotBandPath(n,m,g),t&&(w.fill=t),g.borderWidth&&(w.stroke=g.borderColor,w["stroke-width"]=g.borderWidth)}if(k(u)&&(w.zIndex=u),r)s?r.animate({d:s},null,r.onGetPath):(r.hide(),r.onGetPath=function(){r.show()},j&&(c.label=j=j.destroy()));else if(s&&s.length&&(c.svgElem=r=x.path(s).attr(w).add(),v))for(a in f=function(a){r.on(a,function(b){v[a].apply(c,[b])})},v)f(a);return i&&k(i.text)&&s&&s.length&&d.width>0&&d.height>0?(i=b({align:e&&o&&"center",x:e?!o&&4:10,verticalAlign:!e&&o&&"middle",y:e?o?16:10:o?6:-4,rotation:e&&!o&&90},i),j||(w={align:i.textAlign||i.align,rotation:i.rotation},k(u)&&(w.zIndex=u),c.label=j=x.text(i.text,0,0,i.useHTML).attr(w).css(i.style).add()),d=[s[1],s[4],o?s[6]:s[1]],o=[s[2],s[5],o?s[7]:s[2]],s=y(d),e=y(o),j.align(i,!1,{x:s,y:e,width:z(d)-s,height:z(o)-e}),j.show()):j&&j.hide(),c},destroy:function(){j(this.axis.plotLinesAndBands,this),delete this.axis,A(this)}},H.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:Sa,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return r(this.total,-1)},style:Sa.style}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-15},title:{rotation:0}},init:function(a,b){var c=b.isX;this.horiz=a.inverted?!c:c,this.coll=(this.isXAxis=c)?"xAxis":"yAxis",this.opposite=b.opposite,this.side=b.side||(this.horiz?this.opposite?0:2:this.opposite?1:3),this.setOptions(b);var d=this.options,e=d.type;this.labelFormatter=d.labels.formatter||this.defaultLabelFormatter,this.userOptions=b,this.minPixelPadding=0,this.chart=a,this.reversed=d.reversed,this.zoomEnabled=d.zoomEnabled!==!1,this.categories=d.categories||"category"===e,this.names=[],this.isLog="logarithmic"===e,this.isDatetimeAxis="datetime"===e,this.isLinked=k(d.linkedTo),this.tickmarkOffset=this.categories&&"between"===d.tickmarkPlacement&&1===n(d.tickInterval,1)?.5:0,this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=d.minRange||d.maxZoom,this.range=d.range,this.offset=d.offset||0,this.stacks={},this.oldStacks={},this.min=this.max=null,this.crosshair=n(d.crosshair,m(a.options.tooltip.crosshairs)[c?0:1],!1);var f,d=this.options.events;-1===Va(this,a.axes)&&(c&&!this.isColorAxis?a.axes.splice(a.xAxis.length,0,this):a.axes.push(this),a[this.coll].push(this)),this.series=this.series||[],a.inverted&&c&&this.reversed===M&&(this.reversed=!0),this.removePlotLine=this.removePlotBand=this.removePlotBandOrLine;for(f in d)$a(this,f,d[f]);this.isLog&&(this.val2lin=h,this.lin2val=i)},setOptions:function(a){this.options=b(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],b(Q[this.coll],a))},defaultLabelFormatter:function(){var a,b=this.axis,c=this.value,d=b.categories,e=this.dateTimeLabelFormat,f=Q.lang.numericSymbols,g=f&&f.length,h=b.options.labels.format,b=b.isLog?c:b.tickInterval;if(h)a=u(h,this);else if(d)a=c;else if(e)a=R(e,c);else if(g&&b>=1e3)for(;g--&&a===M;)d=Math.pow(1e3,g+1),b>=d&&null!==f[g]&&(a=r(c/d,-1)+f[g]);return a===M&&(a=ra(c)>=1e4?r(c,0):r(c,-1,M,"")),a},getSeriesExtremes:function(){var a=this,b=a.chart;a.hasVisibleSeries=!1,a.dataMin=a.dataMax=a.ignoreMinPadding=a.ignoreMaxPadding=null,a.buildStacks&&a.buildStacks(),Wa(a.series,function(c){if(c.visible||!b.options.chart.ignoreHiddenSeries){var d;d=c.options.threshold;var e;a.hasVisibleSeries=!0,a.isLog&&0>=d&&(d=null),a.isXAxis?(d=c.xData,d.length&&(a.dataMin=qa(n(a.dataMin,d[0]),y(d)),a.dataMax=pa(n(a.dataMax,d[0]),z(d)))):(c.getExtremes(),e=c.dataMax,c=c.dataMin,k(c)&&k(e)&&(a.dataMin=qa(n(a.dataMin,c),c),a.dataMax=pa(n(a.dataMax,e),e)),k(d)&&(a.dataMin>=d?(a.dataMin=d,a.ignoreMinPadding=!0):a.dataMax<d&&(a.dataMax=d,a.ignoreMaxPadding=!0)))}})},translate:function(a,b,c,d,e,f){var h=1,i=0,j=d?this.oldTransA:this.transA,d=d?this.oldMin:this.min,k=this.minPixelPadding,e=(this.options.ordinal||this.isLog&&e)&&this.lin2val;return j||(j=this.transA),c&&(h*=-1,i=this.len),this.reversed&&(h*=-1,i-=h*(this.sector||this.len)),b?(a=a*h+i,a-=k,a=a/j+d,e&&(a=this.lin2val(a))):(e&&(a=this.val2lin(a)),"between"===f&&(f=.5),a=h*(a-d)*j+i+h*k+(g(f)?j*f*this.pointRange:0)),a},toPixels:function(a,b){return this.translate(a,!1,!this.horiz,null,!0)+(b?0:this.pos)},toValue:function(a,b){return this.translate(a-(b?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(a,b,c,d,e){var f,g,h,i=this.chart,j=this.left,k=this.top,l=c&&i.oldChartHeight||i.chartHeight,m=c&&i.oldChartWidth||i.chartWidth;return f=this.transB,e=n(e,this.translate(a,null,null,c)),a=c=ma(e+f),f=g=ma(l-e-f),isNaN(e)?h=!0:this.horiz?(f=k,g=l-this.bottom,(j>a||a>j+this.width)&&(h=!0)):(a=j,c=m-this.right,(k>f||f>k+this.height)&&(h=!0)),h&&!d?null:i.renderer.crispLine(["M",a,f,"L",c,g],b||1)},getLinearTickPositions:function(a,b,c){var d,e=C(na(b/a)*a),f=C(oa(c/a)*a),h=[];if(b===c&&g(b))return[b];for(b=e;f>=b&&(h.push(b),b=C(b+a),b!==d);)d=b;return h},getMinorTickPositions:function(){var a,b=this.options,c=this.tickPositions,d=this.minorTickInterval,e=[];if(this.isLog)for(a=c.length,b=1;a>b;b++)e=e.concat(this.getLogTickPositions(d,c[b-1],c[b],!0));else if(this.isDatetimeAxis&&"auto"===b.minorTickInterval)e=e.concat(this.getTimeTicks(this.normalizeTimeTickInterval(d),this.min,this.max,b.startOfWeek)),e[0]<this.min&&e.shift();else for(c=this.min+(c[0]-this.min)%d;c<=this.max;c+=d)e.push(c);return e},adjustForMinRange:function(){var a,b,c,d,e,f,g=this.options,h=this.min,i=this.max,j=this.dataMax-this.dataMin>=this.minRange;if(this.isXAxis&&this.minRange===M&&!this.isLog&&(k(g.min)||k(g.max)?this.minRange=null:(Wa(this.series,function(a){for(e=a.xData,c=f=a.xIncrement?1:e.length-1;c>0;c--)d=e[c]-e[c-1],(b===M||b>d)&&(b=d)}),this.minRange=qa(5*b,this.dataMax-this.dataMin))),i-h<this.minRange){var l=this.minRange;a=(l-i+h)/2,a=[h-a,n(g.min,h-a)],j&&(a[2]=this.dataMin),h=z(a),i=[h+l,n(g.max,h+l)],j&&(i[2]=this.dataMax),i=y(i),l>i-h&&(a[0]=i-l,a[1]=n(g.min,i-l),h=z(a))}this.min=h,this.max=i},setAxisTranslation:function(a){var b,c=this,e=c.max-c.min,f=c.axisPointRange||0,g=0,h=0,i=c.linkedParent,j=!!c.categories,l=c.transA;(c.isXAxis||j||f)&&(i?(g=i.minPointOffset,h=i.pointRangePadding):Wa(c.series,function(a){var i=j?1:c.isXAxis?a.pointRange:c.axisPointRange||0,l=a.options.pointPlacement,m=a.closestPointRange;i>e&&(i=0),f=pa(f,i),g=pa(g,d(l)?0:i/2),h=pa(h,"on"===l?0:i),!a.noSharedTooltip&&k(m)&&(b=k(b)?qa(b,m):m)}),i=c.ordinalSlope&&b?c.ordinalSlope/b:1,c.minPointOffset=g*=i,c.pointRangePadding=h*=i,c.pointRange=qa(f,e),c.closestPointRange=b),a&&(c.oldTransA=l),c.translationSlope=c.transA=l=c.len/(e+h||1),c.transB=c.horiz?c.left:c.bottom,c.minPixelPadding=l*g},setTickPositions:function(a){var b,c=this,d=c.chart,e=c.options,f=e.startOnTick,i=e.endOnTick,j=c.isLog,l=c.isDatetimeAxis,m=c.isXAxis,o=c.isLinked,p=c.options.tickPositioner,q=e.maxPadding,r=e.minPadding,s=e.tickInterval,t=e.minTickInterval,u=e.tickPixelInterval,x=c.categories;o?(c.linkedParent=d[c.coll][e.linkedTo],d=c.linkedParent.getExtremes(),c.min=n(d.min,d.dataMin),c.max=n(d.max,d.dataMax),e.type!==c.linkedParent.options.type&&V(11,1)):(c.min=n(c.userMin,e.min,c.dataMin),c.max=n(c.userMax,e.max,c.dataMax)),j&&(!a&&qa(c.min,n(c.dataMin,c.min))<=0&&V(10,1),c.min=C(h(c.min)),c.max=C(h(c.max))),c.range&&k(c.max)&&(c.userMin=c.min=pa(c.min,c.max-c.range),c.userMax=c.max,c.range=null),c.beforePadding&&c.beforePadding(),c.adjustForMinRange(),x||c.axisPointRange||c.usePercentage||o||!k(c.min)||!k(c.max)||!(d=c.max-c.min)||(k(e.min)||k(c.userMin)||!r||!(c.dataMin<0)&&c.ignoreMinPadding||(c.min-=d*r),k(e.max)||k(c.userMax)||!q||!(c.dataMax>0)&&c.ignoreMaxPadding||(c.max+=d*q)),g(e.floor)&&(c.min=pa(c.min,e.floor)),g(e.ceiling)&&(c.max=qa(c.max,e.ceiling)),c.min===c.max||void 0===c.min||void 0===c.max?c.tickInterval=1:o&&!s&&u===c.linkedParent.options.tickPixelInterval?c.tickInterval=c.linkedParent.tickInterval:(c.tickInterval=n(s,x?1:(c.max-c.min)*u/pa(c.len,u)),!k(s)&&c.len<u&&!this.isRadial&&!this.isLog&&!x&&f&&i&&(b=!0,c.tickInterval/=4)),m&&!a&&Wa(c.series,function(a){a.processData(c.min!==c.oldMin||c.max!==c.oldMax)}),c.setAxisTranslation(!0),c.beforeSetTickPositions&&c.beforeSetTickPositions(),c.postProcessTickInterval&&(c.tickInterval=c.postProcessTickInterval(c.tickInterval)),c.pointRange&&(c.tickInterval=pa(c.pointRange,c.tickInterval)),!s&&c.tickInterval<t&&(c.tickInterval=t),l||j||s||(c.tickInterval=w(c.tickInterval,null,v(c.tickInterval),n(e.allowDecimals,!(c.tickInterval>1&&c.tickInterval<5&&c.max>1e3&&c.max<9999)))),c.minorTickInterval="auto"===e.minorTickInterval&&c.tickInterval?c.tickInterval/5:e.minorTickInterval,c.tickPositions=a=e.tickPositions?[].concat(e.tickPositions):p&&p.apply(c,[c.min,c.max]),a||(!c.ordinalPositions&&(c.max-c.min)/c.tickInterval>pa(2*c.len,200)&&V(19,!0),a=l?c.getTimeTicks(c.normalizeTimeTickInterval(c.tickInterval,e.units),c.min,c.max,e.startOfWeek,c.ordinalPositions,c.closestPointRange,!0):j?c.getLogTickPositions(c.tickInterval,c.min,c.max):c.getLinearTickPositions(c.tickInterval,c.min,c.max),b&&a.splice(1,a.length-2),c.tickPositions=a),o||(e=a[0],j=a[a.length-1],l=c.minPointOffset||0,f?c.min=e:c.min-l>e&&a.shift(),i?c.max=j:c.max+l<j&&a.pop(),0===a.length&&k(e)&&a.push((j+e)/2),1===a.length&&(f=ra(c.max)>1e13?1:.001,c.min-=f,c.max+=f))},setMaxTicks:function(){var a=this.chart,b=a.maxTicks||{},c=this.tickPositions,d=this._maxTicksKey=[this.coll,this.pos,this.len].join("-");!this.isLinked&&!this.isDatetimeAxis&&c&&c.length>(b[d]||0)&&this.options.alignTicks!==!1&&(b[d]=c.length),a.maxTicks=b},adjustTickAmount:function(){var a=this._maxTicksKey,b=this.tickPositions,c=this.chart.maxTicks;if(c&&c[a]&&!this.isDatetimeAxis&&!this.categories&&!this.isLinked&&this.options.alignTicks!==!1&&this.min!==M){var d=this.tickAmount,e=b.length;if(this.tickAmount=a=c[a],a>e){for(;b.length<a;)b.push(C(b[b.length-1]+this.tickInterval));this.transA*=(e-1)/(a-1),this.max=b[b.length-1]}k(d)&&a!==d&&(this.isDirty=!0)}},setScale:function(){var a,b,c,d,e=this.stacks;if(this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),d=this.len!==this.oldAxisLength,Wa(this.series,function(a){(a.isDirtyData||a.isDirty||a.xAxis.isDirty)&&(c=!0)}),d||c||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax){if(!this.isXAxis)for(a in e)for(b in e[a])e[a][b].total=null,e[a][b].cum=0;this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickPositions(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty||(this.isDirty=d||this.min!==this.oldMin||this.max!==this.oldMax)}else if(!this.isXAxis){this.oldStacks&&(e=this.stacks=this.oldStacks);for(a in e)for(b in e[a])e[a][b].cum=e[a][b].total}this.setMaxTicks()},setExtremes:function(b,c,d,e,f){var g=this,h=g.chart,d=n(d,!0),f=a(f,{min:b,max:c});ab(g,"setExtremes",f,function(){g.userMin=b,g.userMax=c,g.eventArgs=f,g.isDirtyExtremes=!0,d&&h.redraw(e)})},zoom:function(a,b){var c=this.dataMin,d=this.dataMax,e=this.options;return this.allowZoomOutside||(k(c)&&a<=qa(c,n(e.min,c))&&(a=M),k(d)&&b>=pa(d,n(e.max,d))&&(b=M)),this.displayBtn=a!==M||b!==M,this.setExtremes(a,b,!1,M,{trigger:"zoom"}),!0},setAxisSize:function(){var a=this.chart,b=this.options,c=b.offsetLeft||0,d=this.horiz,e=n(b.width,a.plotWidth-c+(b.offsetRight||0)),f=n(b.height,a.plotHeight),g=n(b.top,a.plotTop),b=n(b.left,a.plotLeft+c),c=/%$/;c.test(f)&&(f=parseInt(f,10)/100*a.plotHeight),c.test(g)&&(g=parseInt(g,10)/100*a.plotHeight+a.plotTop),this.left=b,this.top=g,this.width=e,this.height=f,this.bottom=a.chartHeight-f-g,this.right=a.chartWidth-e-b,this.len=pa(d?e:f,0),this.pos=d?b:g},getExtremes:function(){var a=this.isLog;return{min:a?C(i(this.min)):this.min,max:a?C(i(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(a){var b=this.isLog,c=b?i(this.min):this.min,b=b?i(this.max):this.max;return c>a||null===a?a=c:a>b&&(a=b),this.translate(a,0,1,0,1)},autoLabelAlign:function(a){return a=(n(a,0)-90*this.side+720)%360,a>15&&165>a?"right":a>195&&345>a?"left":"center"},getOffset:function(){var a,b,c,d,e,f,g,h,i,j=this,l=j.chart,m=l.renderer,o=j.options,p=j.tickPositions,q=j.ticks,r=j.horiz,s=j.side,t=l.inverted?[1,0,3,2][s]:s,u=0,v=0,w=o.title,x=o.labels,y=0,z=l.axisOffset,l=l.clipOffset,A=[-1,1,1,-1][s],B=1,C=n(x.maxStaggerLines,5);if(j.hasData=a=j.hasVisibleSeries||k(j.min)&&k(j.max)&&!!p,j.showAxis=b=a||n(o.showEmpty,!0),j.staggerLines=j.horiz&&x.staggerLines,j.axisGroup||(j.gridGroup=m.g("grid").attr({zIndex:o.gridZIndex||1}).add(),j.axisGroup=m.g("axis").attr({zIndex:o.zIndex||2}).add(),j.labelGroup=m.g("axis-labels").attr({zIndex:x.zIndex||7}).addClass("highcharts-"+j.coll.toLowerCase()+"-labels").add()),a||j.isLinked){if(j.labelAlign=n(x.align||j.autoLabelAlign(x.rotation)),Wa(p,function(a){q[a]?q[a].addLabel():q[a]=new G(j,a)}),j.horiz&&!j.staggerLines&&C&&!x.rotation){for(a=j.reversed?[].concat(p).reverse():p;C>B;){for(e=[],f=!1,d=0;d<a.length;d++)g=a[d],h=(h=q[g].label&&q[g].label.getBBox())?h.width:0,i=d%B,h&&(g=j.translate(g),e[i]!==M&&g<e[i]&&(f=!0),e[i]=g+h);if(!f)break;B++}B>1&&(j.staggerLines=B)}Wa(p,function(a){(0===s||2===s||{1:"left",3:"right"}[s]===j.labelAlign)&&(y=pa(q[a].getLabelSize(),y))}),j.staggerLines&&(y*=j.staggerLines,j.labelOffset=y)}else for(d in q)q[d].destroy(),delete q[d];w&&w.text&&w.enabled!==!1&&(j.axisTitle||(j.axisTitle=m.text(w.text,0,0,w.useHTML).attr({zIndex:7,rotation:w.rotation||0,align:w.textAlign||{low:"left",middle:"center",high:"right"}[w.align]}).addClass("highcharts-"+this.coll.toLowerCase()+"-title").css(w.style).add(j.axisGroup),j.axisTitle.isNew=!0),b&&(u=j.axisTitle.getBBox()[r?"height":"width"],c=w.offset,v=k(c)?0:n(w.margin,r?5:10)),j.axisTitle[b?"show":"hide"]()),j.offset=A*n(o.offset,z[s]),m=2===s?j.tickBaseline:0,r=y+v+(y&&A*(r?n(x.y,j.tickBaseline+8):x.x)-m),j.axisTitleMargin=n(c,r),z[s]=pa(z[s],j.axisTitleMargin+u+A*j.offset,r),l[t]=pa(l[t],2*na(o.lineWidth/2))},getLinePath:function(a){var b=this.chart,c=this.opposite,d=this.offset,e=this.horiz,f=this.left+(c?this.width:0)+d,d=b.chartHeight-this.bottom-(c?this.height:0)+d;return c&&(a*=-1),b.renderer.crispLine(["M",e?this.left:f,e?d:this.top,"L",e?b.chartWidth-this.right:f,e?d:b.chartHeight-this.bottom],a)},getTitlePosition:function(){var a=this.horiz,b=this.left,d=this.top,e=this.len,f=this.options.title,g=a?b:d,h=this.opposite,i=this.offset,j=c(f.style.fontSize||12),e={low:g+(a?0:e),middle:g+e/2,high:g+(a?e:0)}[f.align],b=(a?d+this.height:b)+(a?1:-1)*(h?-1:1)*this.axisTitleMargin+(2===this.side?j:0);return{x:a?e:b+(h?this.width:0)+i+(f.x||0),y:a?b-(h?this.height:0)+i:e+(f.y||0)}},render:function(){var a,b,c,d=this,e=d.horiz,f=d.reversed,g=d.chart,h=g.renderer,j=d.options,l=d.isLog,m=d.isLinked,n=d.tickPositions,o=d.axisTitle,p=d.ticks,q=d.minorTicks,r=d.alternateBands,s=j.stackLabels,t=j.alternateGridColor,u=d.tickmarkOffset,v=j.lineWidth,w=g.hasRendered&&k(d.oldMin)&&!isNaN(d.oldMin),x=d.hasData,y=d.showAxis,z=j.labels.overflow,A=d.justifyLabels=e&&z!==!1;d.labelEdge.length=0,d.justifyToPlot="justify"===z,Wa([p,q,r],function(a){for(var b in a)a[b].isActive=!1}),(x||m)&&(d.minorTickInterval&&!d.categories&&Wa(d.getMinorTickPositions(),function(a){q[a]||(q[a]=new G(d,a,"minor")),w&&q[a].isNew&&q[a].render(null,!0),q[a].render(null,!1,1)}),n.length&&(a=n.slice(),(e&&f||!e&&!f)&&a.reverse(),A&&(a=a.slice(1).concat([a[0]])),Wa(a,function(b,c){A&&(c=c===a.length-1?0:c+1),(!m||b>=d.min&&b<=d.max)&&(p[b]||(p[b]=new G(d,b)),w&&p[b].isNew&&p[b].render(c,!0,.1),p[b].render(c))}),u&&0===d.min&&(p[-1]||(p[-1]=new G(d,-1,null,!0)),p[-1].render(-1))),t&&Wa(n,function(a,e){e%2===0&&a<d.max&&(r[a]||(r[a]=new ia.PlotLineOrBand(d)),b=a+u,c=n[e+1]!==M?n[e+1]+u:d.max,r[a].options={from:l?i(b):b,to:l?i(c):c,color:t},r[a].render(),r[a].isActive=!0)}),d._addedPlotLB||(Wa((j.plotLines||[]).concat(j.plotBands||[]),function(a){d.addPlotBandOrLine(a)}),d._addedPlotLB=!0)),Wa([p,q,r],function(a){var b,c,d=[],e=S?S.duration||500:0,f=function(){for(c=d.length;c--;)a[d[c]]&&!a[d[c]].isActive&&(a[d[c]].destroy(),delete a[d[c]])};for(b in a)a[b].isActive||(a[b].render(b,!1,0),a[b].isActive=!1,d.push(b));a!==r&&g.hasRendered&&e?e&&setTimeout(f,e):f()}),v&&(e=d.getLinePath(v),d.axisLine?d.axisLine.animate({d:e}):d.axisLine=h.path(e).attr({stroke:j.lineColor,"stroke-width":v,zIndex:7}).add(d.axisGroup),d.axisLine[y?"show":"hide"]()),o&&y&&(o[o.isNew?"attr":"animate"](d.getTitlePosition()),o.isNew=!1),s&&s.enabled&&d.renderStackTotals(),d.isDirty=!1},redraw:function(){this.render(),Wa(this.plotLinesAndBands,function(a){a.render()}),Wa(this.series,function(a){a.isDirty=!0})},destroy:function(a){var b,c=this,d=c.stacks,e=c.plotLinesAndBands;a||_a(c);for(b in d)A(d[b]),d[b]=null;for(Wa([c.ticks,c.minorTicks,c.alternateBands],function(a){A(a)}),a=e.length;a--;)e[a].destroy();Wa("stackTotalGroup,axisLine,axisTitle,axisGroup,cross,gridGroup,labelGroup".split(","),function(a){c[a]&&(c[a]=c[a].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(a,b){if(this.crosshair)if((k(b)||!n(this.crosshair.snap,!0))===!1)this.hideCrosshair();else{var c,d=this.crosshair,e=d.animation;n(d.snap,!0)?k(b)&&(c=this.chart.inverted!=this.horiz?b.plotX:this.len-b.plotY):c=this.horiz?a.chartX-this.pos:this.len-a.chartY+this.pos,c=this.isRadial?this.getPlotLinePath(this.isXAxis?b.x:n(b.stackY,b.y)):this.getPlotLinePath(null,null,null,null,c),null===c?this.hideCrosshair():this.cross?this.cross.attr({visibility:"visible"})[e?"animate":"attr"]({d:c},e):(e={"stroke-width":d.width||1,stroke:d.color||"#C0C0C0",zIndex:d.zIndex||2},d.dashStyle&&(e.dashstyle=d.dashStyle),this.cross=this.chart.renderer.path(c).attr(e).add())}},hideCrosshair:function(){this.cross&&this.cross.hide()}},a(H.prototype,{getPlotBandPath:function(a,b){var c=this.getPlotLinePath(b),d=this.getPlotLinePath(a);return d&&c?d.push(c[4],c[5],c[1],c[2]):d=null,
d},addPlotBand:function(a){return this.addPlotBandOrLine(a,"plotBands")},addPlotLine:function(a){return this.addPlotBandOrLine(a,"plotLines")},addPlotBandOrLine:function(a,b){var c=new ia.PlotLineOrBand(this,a).render(),d=this.userOptions;return c&&(b&&(d[b]=d[b]||[],d[b].push(a)),this.plotLinesAndBands.push(c)),c},removePlotBandOrLine:function(a){for(var b=this.plotLinesAndBands,c=this.options,d=this.userOptions,e=b.length;e--;)b[e].id===a&&b[e].destroy();Wa([c.plotLines||[],d.plotLines||[],c.plotBands||[],d.plotBands||[]],function(b){for(e=b.length;e--;)b[e].id===a&&j(b,b[e])})}}),H.prototype.getTimeTicks=function(b,c,d,e){var f,g=[],h={},i=Q.global.useUTC,j=new W(c-Y),l=b.unitRange,m=b.count;if(k(c)){l>=U.second&&(j.setMilliseconds(0),j.setSeconds(l>=U.minute?0:m*na(j.getSeconds()/m))),l>=U.minute&&j[da](l>=U.hour?0:m*na(j[Z]()/m)),l>=U.hour&&j[ea](l>=U.day?0:m*na(j[$]()/m)),l>=U.day&&j[fa](l>=U.month?1:m*na(j[aa]()/m)),l>=U.month&&(j[ga](l>=U.year?0:m*na(j[ba]()/m)),f=j[ca]()),l>=U.year&&(f-=f%m,j[ha](f)),l===U.week&&j[fa](j[aa]()-j[_]()+n(e,1)),c=1,Y&&(j=new W(j.getTime()+Y)),f=j[ca]();for(var e=j.getTime(),o=j[ba](),p=j[aa](),q=(U.day+(i?Y:6e4*j.getTimezoneOffset()))%U.day;d>e;)g.push(e),l===U.year?e=X(f+c*m,0):l===U.month?e=X(f,o+c*m):i||l!==U.day&&l!==U.week?e+=l*m:e=X(f,o,p+c*m*(l===U.day?1:7)),c++;g.push(e),Wa(Xa(g,function(a){return l<=U.hour&&a%U.day===q}),function(a){h[a]="day"})}return g.info=a(b,{higherRanks:h,totalRange:l*m}),g},H.prototype.normalizeTimeTickInterval=function(a,b){var c,d=b||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],e=d[d.length-1],f=U[e[0]],g=e[1];for(c=0;c<d.length&&(e=d[c],f=U[e[0]],g=e[1],!(d[c+1]&&a<=(f*g[g.length-1]+U[d[c+1][0]])/2));c++);return f===U.year&&5*f>a&&(g=[1,2,5]),d=w(a/f,g,"year"===e[0]?pa(v(a/f),1):1),{unitRange:f,count:d,unitName:e[0]}},H.prototype.getLogTickPositions=function(a,b,c,d){var e=this.options,f=this.len,g=[];if(d||(this._minorAutoInterval=null),a>=.5)a=ma(a),g=this.getLinearTickPositions(a,b,c);else if(a>=.08)for(var j,k,l,m,o,f=na(b),e=a>.3?[1,2,4]:a>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];c+1>f&&!o;f++)for(k=e.length,j=0;k>j&&!o;j++)l=h(i(f)*e[j]),l>b&&(!d||c>=m)&&m!==M&&g.push(m),m>c&&(o=!0),m=l;else b=i(b),c=i(c),a=e[d?"minorTickInterval":"tickInterval"],a=n("auto"===a?null:a,this._minorAutoInterval,(c-b)*(e.tickPixelInterval/(d?5:1))/((d?f/this.tickPositions.length:f)||1)),a=w(a,null,v(a)),g=Za(this.getLinearTickPositions(a,b,c),h),d||(this._minorAutoInterval=a/5);return d||(this.tickInterval=a),g};var nb=ia.Tooltip=function(){this.init.apply(this,arguments)};nb.prototype={init:function(a,b){var d=b.borderWidth,e=b.style,f=c(e.padding);this.chart=a,this.options=b,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=a.renderer.label("",0,0,b.shape||"callout",null,null,b.useHTML,null,"tooltip").attr({padding:f,fill:b.backgroundColor,"stroke-width":d,r:b.borderRadius,zIndex:8}).css(e).css({padding:0}).add().attr({y:-9999}),Ga||this.label.shadow(b.shadow),this.shared=b.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(b,c,d,e){var f=this,g=f.now,h=f.options.animation!==!1&&!f.isHidden&&(ra(b-g.x)>1||ra(c-g.y)>1),i=f.followPointer||f.len>1;a(g,{x:h?(2*g.x+b)/3:b,y:h?(g.y+c)/2:c,anchorX:i?M:h?(2*g.anchorX+d)/3:d,anchorY:i?M:h?(g.anchorY+e)/2:e}),f.label.attr(g),h&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){f&&f.move(b,c,d,e)},32))},hide:function(a){var b,c=this;clearTimeout(this.hideTimer),this.isHidden||(b=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){c.label.fadeOut(),c.isHidden=!0},n(a,this.options.hideDelay,500)),b&&Wa(b,function(a){a.setState()}),this.chart.hoverPoints=null)},getAnchor:function(a,b){var c,d,e=this.chart,f=e.inverted,g=e.plotTop,h=0,i=0,a=m(a);return c=a[0].tooltipPos,this.followPointer&&b&&(b.chartX===M&&(b=e.pointer.normalize(b)),c=[b.chartX-e.plotLeft,b.chartY-g]),c||(Wa(a,function(a){d=a.series.yAxis,h+=a.plotX,i+=(a.plotLow?(a.plotLow+a.plotHigh)/2:a.plotY)+(!f&&d?d.top-g:0)}),h/=a.length,i/=a.length,c=[f?e.plotWidth-i:h,this.shared&&!f&&a.length>1&&b?b.chartY-g:f?e.plotHeight-h:i]),Za(c,ma)},getPosition:function(a,b,c){var d,e=this.chart,f=this.distance,g={},h=["y",e.chartHeight,b,c.plotY+e.plotTop],i=["x",e.chartWidth,a,c.plotX+e.plotLeft],j=c.ttBelow||e.inverted&&!c.negative||!e.inverted&&c.negative,k=function(a,b,c,d){var e=d-f>c,b=b>d+f+c,c=d-f-c;if(d+=f,j&&b)g[a]=d;else if(!j&&e)g[a]=c;else if(e)g[a]=c;else{if(!b)return!1;g[a]=d}},l=function(a,b,c,d){return f>d||d>b-f?!1:void(g[a]=c/2>d?1:d>b-c/2?b-c-2:d-c/2)},m=function(a){var b=h;h=i,i=b,d=a},n=function(){k.apply(0,h)!==!1?l.apply(0,i)===!1&&!d&&(m(!0),n()):d?g.x=g.y=0:(m(!0),n())};return(e.inverted||this.len>1)&&m(),n(),g},defaultFormatter:function(a){var b,c=this.points||m(this),d=c[0].series;return b=[a.tooltipHeaderFormatter(c[0])],Wa(c,function(a){d=a.series,b.push(d.tooltipFormatter&&d.tooltipFormatter(a)||a.point.tooltipFormatter(d.tooltipOptions.pointFormat))}),b.push(a.options.footerFormat||""),b.join("")},refresh:function(a,b){var c,d,e,f=this.chart,g=this.label,h=this.options,i={},j=[];e=h.formatter||this.defaultFormatter;var k,i=f.hoverPoints,l=this.shared;clearTimeout(this.hideTimer),this.followPointer=m(a)[0].series.tooltipOptions.followPointer,d=this.getAnchor(a,b),c=d[0],d=d[1],!l||a.series&&a.series.noSharedTooltip?i=a.getLabelConfig():(f.hoverPoints=a,i&&Wa(i,function(a){a.setState()}),Wa(a,function(a){a.setState("hover"),j.push(a.getLabelConfig())}),i={x:a[0].category,y:a[0].y},i.points=j,this.len=j.length,a=a[0]),e=e.call(i,this),i=a.series,this.distance=n(i.tooltipOptions.distance,16),e===!1?this.hide():(this.isHidden&&(db(g),g.attr("opacity",1).show()),g.attr({text:e}),k=h.borderColor||a.color||i.color||"#606060",g.attr({stroke:k}),this.updatePosition({plotX:c,plotY:d,negative:a.negative,ttBelow:a.ttBelow}),this.isHidden=!1),ab(f,"tooltipRefresh",{text:e,x:c+f.plotLeft,y:d+f.plotTop,borderColor:k})},updatePosition:function(a){var b=this.chart,c=this.label,c=(this.options.positioner||this.getPosition).call(this,c.width,c.height,a);this.move(ma(c.x),ma(c.y),a.plotX+b.plotLeft,a.plotY+b.plotTop)},tooltipHeaderFormatter:function(a){var b,c=a.series,d=c.tooltipOptions,e=d.dateTimeLabelFormats,f=d.xDateFormat,h=c.xAxis,i=h&&"datetime"===h.options.type&&g(a.key),d=d.headerFormat,h=h&&h.closestPointRange;if(i&&!f){if(h){for(b in U)if(U[b]>=h||U[b]<=U.day&&a.key%U[b]>0){f=e[b];break}}else f=e.day;f=f||e.year}return i&&f&&(d=d.replace("{point.key}","{point.key:"+f+"}")),u(d,{point:a,series:c})}};var ob;O=ja.documentElement.ontouchstart!==M;var pb=ia.Pointer=function(a,b){this.init(a,b)};if(pb.prototype={init:function(a,b){var c,d=b.chart,e=d.events,f=Ga?"":d.zoomType,d=a.inverted;this.options=b,this.chart=a,this.zoomX=c=/x/.test(f),this.zoomY=f=/y/.test(f),this.zoomHor=c&&!d||f&&d,this.zoomVert=f&&!d||c&&d,this.hasZoom=c||f,this.runChartClick=e&&!!e.click,this.pinchDown=[],this.lastValidTouch={},ia.Tooltip&&b.tooltip.enabled&&(a.tooltip=new nb(a,b.tooltip),this.followTouchMove=b.tooltip.followTouchMove),this.setDOMEvents()},normalize:function(b,c){var d,e,b=b||window.event,b=bb(b);return b.target||(b.target=b.srcElement),e=b.touches?b.touches.length?b.touches.item(0):b.changedTouches[0]:b,c||(this.chartPosition=c=Ya(this.chart.container)),e.pageX===M?(d=pa(b.x,b.clientX-c.left),e=b.y):(d=e.pageX-c.left,e=e.pageY-c.top),a(b,{chartX:ma(d),chartY:ma(e)})},getCoordinates:function(a){var b={xAxis:[],yAxis:[]};return Wa(this.chart.axes,function(c){b[c.isXAxis?"xAxis":"yAxis"].push({axis:c,value:c.toValue(a[c.horiz?"chartX":"chartY"])})}),b},getIndex:function(a){var b=this.chart;return b.inverted?b.plotHeight+b.plotTop-a.chartY:a.chartX-b.plotLeft},runPointActions:function(a){var b,c,d,e,f=this.chart,g=f.series,h=f.tooltip,i=f.hoverPoint,j=f.hoverSeries,k=f.chartWidth,l=this.getIndex(a);if(h&&this.options.tooltip.shared&&(!j||!j.noSharedTooltip)){for(c=[],d=g.length,e=0;d>e;e++)g[e].visible&&g[e].options.enableMouseTracking!==!1&&!g[e].noSharedTooltip&&g[e].singularTooltips!==!0&&g[e].tooltipPoints.length&&(b=g[e].tooltipPoints[l])&&b.series&&(b._dist=ra(l-b.clientX),k=qa(k,b._dist),c.push(b));for(d=c.length;d--;)c[d]._dist>k&&c.splice(d,1);c.length&&c[0].clientX!==this.hoverX&&(h.refresh(c,a),this.hoverX=c[0].clientX)}g=j&&j.tooltipOptions.followPointer,j&&j.tracker&&!g?(b=j.tooltipPoints[l])&&b!==i&&b.onMouseOver(a):h&&g&&!h.isHidden&&(j=h.getAnchor([{}],a),h.updatePosition({plotX:j[0],plotY:j[1]})),h&&!this._onDocumentMouseMove&&(this._onDocumentMouseMove=function(a){Ka[ob]&&Ka[ob].pointer.onDocumentMouseMove(a)},$a(ja,"mousemove",this._onDocumentMouseMove)),Wa(f.axes,function(c){c.drawCrosshair(a,n(b,i))})},reset:function(a,b){var c=this.chart,d=c.hoverSeries,e=c.hoverPoint,f=c.tooltip,g=f&&f.shared?c.hoverPoints:e;(a=a&&f&&g)&&m(g)[0].plotX===M&&(a=!1),a?(f.refresh(g),e&&e.setState(e.state,!0)):(e&&e.onMouseOut(),d&&d.onMouseOut(),f&&f.hide(b),this._onDocumentMouseMove&&(_a(ja,"mousemove",this._onDocumentMouseMove),this._onDocumentMouseMove=null),Wa(c.axes,function(a){a.hideCrosshair()}),this.hoverX=null)},scaleGroups:function(a,b){var c,d=this.chart;Wa(d.series,function(e){c=a||e.getPlotBox(),e.xAxis&&e.xAxis.zoomEnabled&&(e.group.attr(c),e.markerGroup&&(e.markerGroup.attr(c),e.markerGroup.clip(b?d.clipRect:null)),e.dataLabelsGroup&&e.dataLabelsGroup.attr(c))}),d.clipRect.attr(b||d.clipBox)},dragStart:function(a){var b=this.chart;b.mouseIsDown=a.type,b.cancelClick=!1,b.mouseDownX=this.mouseDownX=a.chartX,b.mouseDownY=this.mouseDownY=a.chartY},drag:function(a){var b,c=this.chart,d=c.options.chart,e=a.chartX,f=a.chartY,g=this.zoomHor,h=this.zoomVert,i=c.plotLeft,j=c.plotTop,k=c.plotWidth,l=c.plotHeight,m=this.mouseDownX,n=this.mouseDownY,o=d.panKey&&a[d.panKey+"Key"];i>e?e=i:e>i+k&&(e=i+k),j>f?f=j:f>j+l&&(f=j+l),this.hasDragged=Math.sqrt(Math.pow(m-e,2)+Math.pow(n-f,2)),this.hasDragged>10&&(b=c.isInsidePlot(m-i,n-j),c.hasCartesianSeries&&(this.zoomX||this.zoomY)&&b&&!o&&!this.selectionMarker&&(this.selectionMarker=c.renderer.rect(i,j,g?1:k,h?1:l,0).attr({fill:d.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()),this.selectionMarker&&g&&(e-=m,this.selectionMarker.attr({width:ra(e),x:(e>0?0:e)+m})),this.selectionMarker&&h&&(e=f-n,this.selectionMarker.attr({height:ra(e),y:(e>0?0:e)+n})),b&&!this.selectionMarker&&d.panning&&c.pan(a,d.panning))},drop:function(b){var c=this.chart,d=this.hasPinched;if(this.selectionMarker){var e,f={xAxis:[],yAxis:[],originalEvent:b.originalEvent||b},g=this.selectionMarker,h=g.attr?g.attr("x"):g.x,i=g.attr?g.attr("y"):g.y,j=g.attr?g.attr("width"):g.width,k=g.attr?g.attr("height"):g.height;(this.hasDragged||d)&&(Wa(c.axes,function(a){if(a.zoomEnabled){var c=a.horiz,d="touchend"===b.type?a.minPixelPadding:0,g=a.toValue((c?h:i)+d),c=a.toValue((c?h+j:i+k)-d);!isNaN(g)&&!isNaN(c)&&(f[a.coll].push({axis:a,min:qa(g,c),max:pa(g,c)}),e=!0)}}),e&&ab(c,"selection",f,function(b){c.zoom(a(b,d?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),d&&this.scaleGroups()}c&&(o(c.container,{cursor:c._cursor}),c.cancelClick=this.hasDragged>10,c.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(a){a=this.normalize(a),a.preventDefault&&a.preventDefault(),this.dragStart(a)},onDocumentMouseUp:function(a){Ka[ob]&&Ka[ob].pointer.drop(a)},onDocumentMouseMove:function(a){var b=this.chart,c=this.chartPosition,d=b.hoverSeries,a=this.normalize(a,c);c&&d&&!this.inClass(a.target,"highcharts-tracker")&&!b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop)&&this.reset()},onContainerMouseLeave:function(){var a=Ka[ob];a&&(a.pointer.reset(),a.pointer.chartPosition=null)},onContainerMouseMove:function(a){var b=this.chart;ob=b.index,a=this.normalize(a),a.returnValue=!1,"mousedown"===b.mouseIsDown&&this.drag(a),(this.inClass(a.target,"highcharts-tracker")||b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop))&&!b.openMenu&&this.runPointActions(a)},inClass:function(a,b){for(var c;a;){if(c=l(a,"class")){if(-1!==c.indexOf(b))return!0;if(-1!==c.indexOf("highcharts-container"))return!1}a=a.parentNode}},onTrackerMouseOut:function(a){var b=this.chart.hoverSeries,c=(a=a.relatedTarget||a.toElement)&&a.point&&a.point.series;!b||b.options.stickyTracking||this.inClass(a,"highcharts-tooltip")||c===b||b.onMouseOut()},onContainerClick:function(b){var c=this.chart,d=c.hoverPoint,e=c.plotLeft,f=c.plotTop,b=this.normalize(b);b.cancelBubble=!0,c.cancelClick||(d&&this.inClass(b.target,"highcharts-tracker")?(ab(d.series,"click",a(b,{point:d})),c.hoverPoint&&d.firePointEvent("click",b)):(a(b,this.getCoordinates(b)),c.isInsidePlot(b.chartX-e,b.chartY-f)&&ab(c,"click",b)))},setDOMEvents:function(){var a=this,b=a.chart.container;b.onmousedown=function(b){a.onContainerMouseDown(b)},b.onmousemove=function(b){a.onContainerMouseMove(b)},b.onclick=function(b){a.onContainerClick(b)},$a(b,"mouseleave",a.onContainerMouseLeave),1===La&&$a(ja,"mouseup",a.onDocumentMouseUp),O&&(b.ontouchstart=function(b){a.onContainerTouchStart(b)},b.ontouchmove=function(b){a.onContainerTouchMove(b)},1===La&&$a(ja,"touchend",a.onDocumentTouchEnd))},destroy:function(){var a;_a(this.chart.container,"mouseleave",this.onContainerMouseLeave),La||(_a(ja,"mouseup",this.onDocumentMouseUp),_a(ja,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout);for(a in this)this[a]=null}},a(ia.Pointer.prototype,{pinchTranslate:function(a,b,c,d,e,f){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,a,b,c,d,e,f),(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,a,b,c,d,e,f)},pinchTranslateDirection:function(a,b,c,d,e,f,g,h){var i,j,k,l=this.chart,m=a?"x":"y",n=a?"X":"Y",o="chart"+n,p=a?"width":"height",q=l["plot"+(a?"Left":"Top")],r=h||1,s=l.inverted,t=l.bounds[a?"h":"v"],u=1===b.length,v=b[0][o],w=c[0][o],x=!u&&b[1][o],y=!u&&c[1][o],c=function(){!u&&ra(v-x)>20&&(r=h||ra(w-y)/ra(v-x)),j=(q-w)/r+v,i=l["plot"+(a?"Width":"Height")]/r};c(),b=j,b<t.min?(b=t.min,k=!0):b+i>t.max&&(b=t.max-i,k=!0),k?(w-=.8*(w-g[m][0]),u||(y-=.8*(y-g[m][1])),c()):g[m]=[w,y],s||(f[m]=j-q,f[p]=i),f=s?1/r:r,e[p]=i,e[m]=b,d[s?a?"scaleY":"scaleX":"scale"+n]=r,d["translate"+n]=f*q+(w-f*v)},pinch:function(b){var c=this,d=c.chart,e=c.pinchDown,f=c.followTouchMove,g=b.touches,h=g.length,i=c.lastValidTouch,j=c.hasZoom,k=c.selectionMarker,l={},m=1===h&&(c.inClass(b.target,"highcharts-tracker")&&d.runTrackerClick||c.runChartClick),o={};(j||f)&&!m&&b.preventDefault(),Za(g,function(a){return c.normalize(a)}),"touchstart"===b.type?(Wa(g,function(a,b){e[b]={chartX:a.chartX,chartY:a.chartY}}),i.x=[e[0].chartX,e[1]&&e[1].chartX],i.y=[e[0].chartY,e[1]&&e[1].chartY],Wa(d.axes,function(a){if(a.zoomEnabled){var b=d.bounds[a.horiz?"h":"v"],c=a.minPixelPadding,e=a.toPixels(n(a.options.min,a.dataMin)),f=a.toPixels(n(a.options.max,a.dataMax)),g=qa(e,f),e=pa(e,f);b.min=qa(a.pos,g-c),b.max=pa(a.pos+a.len,e+c)}}),c.res=!0):e.length&&(k||(c.selectionMarker=k=a({destroy:Ja},d.plotBox)),c.pinchTranslate(e,g,l,k,o,i),c.hasPinched=j,c.scaleGroups(l,o),!j&&f&&1===h?this.runPointActions(c.normalize(b)):c.res&&(c.res=!1,this.reset(!1,0)))},onContainerTouchStart:function(a){var b=this.chart;ob=b.index,1===a.touches.length?(a=this.normalize(a),b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop)?(this.runPointActions(a),this.pinch(a)):this.reset()):2===a.touches.length&&this.pinch(a)},onContainerTouchMove:function(a){(1===a.touches.length||2===a.touches.length)&&this.pinch(a)},onDocumentTouchEnd:function(a){Ka[ob]&&Ka[ob].pointer.drop(a)}}),ka.PointerEvent||ka.MSPointerEvent){var qb={},rb=!!ka.PointerEvent,sb=function(){var a,b=[];b.item=function(a){return this[a]};for(a in qb)qb.hasOwnProperty(a)&&b.push({pageX:qb[a].pageX,pageY:qb[a].pageY,target:qb[a].target});return b},tb=function(a,b,c,d){a=a.originalEvent||a,"touch"!==a.pointerType&&a.pointerType!==a.MSPOINTER_TYPE_TOUCH||!Ka[ob]||(d(a),d=Ka[ob].pointer,d[b]({type:c,target:a.currentTarget,preventDefault:Ja,touches:sb()}))};a(pb.prototype,{onContainerPointerDown:function(a){tb(a,"onContainerTouchStart","touchstart",function(a){qb[a.pointerId]={pageX:a.pageX,pageY:a.pageY,target:a.currentTarget}})},onContainerPointerMove:function(a){tb(a,"onContainerTouchMove","touchmove",function(a){qb[a.pointerId]={pageX:a.pageX,pageY:a.pageY},qb[a.pointerId].target||(qb[a.pointerId].target=a.currentTarget)})},onDocumentPointerUp:function(a){tb(a,"onContainerTouchEnd","touchend",function(a){delete qb[a.pointerId]})},batchMSEvents:function(a){a(this.chart.container,rb?"pointerdown":"MSPointerDown",this.onContainerPointerDown),a(this.chart.container,rb?"pointermove":"MSPointerMove",this.onContainerPointerMove),a(ja,rb?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),t(pb.prototype,"init",function(a,b,c){a.call(this,b,c),(this.hasZoom||this.followTouchMove)&&o(b.container,{"-ms-touch-action":Na,"touch-action":Na})}),t(pb.prototype,"setDOMEvents",function(a){a.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents($a)}),t(pb.prototype,"destroy",function(a){this.batchMSEvents(_a),a.call(this)})}var ub=ia.Legend=function(a,b){this.init(a,b)};ub.prototype={init:function(a,c){var d=this,e=c.itemStyle,f=n(c.padding,8),g=c.itemMarginTop||0;this.options=c,c.enabled&&(d.itemStyle=e,d.itemHiddenStyle=b(e,c.itemHiddenStyle),d.itemMarginTop=g,d.padding=f,d.initialItemX=f,d.initialItemY=f-5,d.maxItemWidth=0,d.chart=a,d.itemHeight=0,d.lastLineHeight=0,d.symbolWidth=n(c.symbolWidth,16),d.pages=[],d.render(),$a(d.chart,"endResize",function(){d.positionCheckboxes()}))},colorizeItem:function(a,b){var c,d=this.options,e=a.legendItem,f=a.legendLine,g=a.legendSymbol,h=this.itemHiddenStyle.color,d=b?d.itemStyle.color:h,i=b?a.legendColor||a.color||"#CCC":h,h=a.options&&a.options.marker,j={fill:i};if(e&&e.css({fill:d,color:d}),f&&f.attr({stroke:i}),g){if(h&&g.isMarker)for(c in j.stroke=i,h=a.convertAttribs(h))e=h[c],e!==M&&(j[c]=e);g.attr(j)}},positionItem:function(a){var b=this.options,c=b.symbolPadding,b=!b.rtl,d=a._legendItemPos,e=d[0],d=d[1],f=a.checkbox;a.legendGroup&&a.legendGroup.translate(b?e:this.legendWidth-e-2*c-4,d),f&&(f.x=e,f.y=d)},destroyItem:function(a){var b=a.checkbox;Wa(["legendItem","legendLine","legendSymbol","legendGroup"],function(b){a[b]&&(a[b]=a[b].destroy())}),b&&B(a.checkbox)},destroy:function(){var a=this.group,b=this.box;b&&(this.box=b.destroy()),a&&(this.group=a.destroy())},positionCheckboxes:function(a){var b,c=this.group.alignAttr,d=this.clipHeight||this.legendHeight;c&&(b=c.translateY,Wa(this.allItems,function(e){var f,g=e.checkbox;g&&(f=b+g.y+(a||0)+3,o(g,{left:c.translateX+e.checkboxOffset+g.x-20+"px",top:f+"px",display:f>b-6&&b+d-6>f?"":Na}))}))},renderTitle:function(){var a=this.padding,b=this.options.title,c=0;b.text&&(this.title||(this.title=this.chart.renderer.label(b.text,a-3,a-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(b.style).add(this.group)),a=this.title.getBBox(),c=a.height,this.offsetWidth=a.width,this.contentGroup.attr({translateY:c})),this.titleHeight=c},renderItem:function(a){var c=this.chart,d=c.renderer,e=this.options,f="horizontal"===e.layout,g=this.symbolWidth,h=e.symbolPadding,i=this.itemStyle,j=this.itemHiddenStyle,k=this.padding,l=f?n(e.itemDistance,20):0,m=!e.rtl,o=e.width,p=e.itemMarginBottom||0,q=this.itemMarginTop,r=this.initialItemX,s=a.legendItem,t=a.series&&a.series.drawLegendSymbol?a.series:a,v=t.options,v=this.createCheckboxForItem&&v&&v.showCheckbox,w=e.useHTML;s||(a.legendGroup=d.g("legend-item").attr({zIndex:1}).add(this.scrollGroup),a.legendItem=s=d.text(e.labelFormat?u(e.labelFormat,a):e.labelFormatter.call(a),m?g+h:-h,this.baseline||0,w).css(b(a.visible?i:j)).attr({align:m?"left":"right",zIndex:2}).add(a.legendGroup),this.baseline||(this.baseline=d.fontMetrics(i.fontSize,s).f+3+q,s.attr("y",this.baseline)),t.drawLegendSymbol(this,a),this.setItemEvents&&this.setItemEvents(a,s,w,i,j),this.colorizeItem(a,a.visible),v&&this.createCheckboxForItem(a)),d=s.getBBox(),g=a.checkboxOffset=e.itemWidth||a.legendItemWidth||g+h+d.width+l+(v?20:0),this.itemHeight=h=ma(a.legendItemHeight||d.height),f&&this.itemX-r+g>(o||c.chartWidth-2*k-r-e.x)&&(this.itemX=r,this.itemY+=q+this.lastLineHeight+p,this.lastLineHeight=0),this.maxItemWidth=pa(this.maxItemWidth,g),this.lastItemY=q+this.itemY+p,this.lastLineHeight=pa(h,this.lastLineHeight),a._legendItemPos=[this.itemX,this.itemY],f?this.itemX+=g:(this.itemY+=q+h+p,this.lastLineHeight=h),this.offsetWidth=o||pa((f?this.itemX-r-l:g)+k,this.offsetWidth)},getAllItems:function(){var a=[];return Wa(this.chart.series,function(b){var c=b.options;n(c.showInLegend,k(c.linkedTo)?!1:M,!0)&&(a=a.concat(b.legendItems||("point"===c.legendType?b.data:b)))}),a},render:function(){var b,c,d,e,f=this,g=f.chart,h=g.renderer,i=f.group,j=f.box,k=f.options,l=f.padding,m=k.borderWidth,n=k.backgroundColor;f.itemX=f.initialItemX,f.itemY=f.initialItemY,f.offsetWidth=0,f.lastItemY=0,i||(f.group=i=h.g("legend").attr({zIndex:7}).add(),f.contentGroup=h.g().attr({zIndex:1}).add(i),f.scrollGroup=h.g().add(f.contentGroup)),f.renderTitle(),b=f.getAllItems(),x(b,function(a,b){return(a.options&&a.options.legendIndex||0)-(b.options&&b.options.legendIndex||0)}),k.reversed&&b.reverse(),f.allItems=b,f.display=c=!!b.length,Wa(b,function(a){f.renderItem(a)}),d=k.width||f.offsetWidth,e=f.lastItemY+f.lastLineHeight+f.titleHeight,e=f.handleOverflow(e),(m||n)&&(d+=l,e+=l,j?d>0&&e>0&&(j[j.isNew?"attr":"animate"](j.crisp({width:d,height:e})),j.isNew=!1):(f.box=j=h.rect(0,0,d,e,k.borderRadius,m||0).attr({stroke:k.borderColor,"stroke-width":m||0,fill:n||Na}).add(i).shadow(k.shadow),j.isNew=!0),j[c?"show":"hide"]()),f.legendWidth=d,f.legendHeight=e,Wa(b,function(a){f.positionItem(a)}),c&&i.align(a({width:d,height:e},k),!0,"spacingBox"),g.isResizing||this.positionCheckboxes()},handleOverflow:function(a){var b,c,d=this,e=this.chart,f=e.renderer,g=this.options,h=g.y,h=e.spacingBox.height+("top"===g.verticalAlign?-h:h)-this.padding,i=g.maxHeight,j=this.clipRect,k=g.navigation,l=n(k.animation,!0),m=k.arrowSize||12,o=this.nav,p=this.pages,q=this.allItems;return"horizontal"===g.layout&&(h/=2),i&&(h=qa(h,i)),p.length=0,a>h&&!g.useHTML?(this.clipHeight=b=pa(h-20-this.titleHeight-this.padding,0),this.currentPage=n(this.currentPage,1),this.fullHeight=a,Wa(q,function(a,d){var e=a._legendItemPos[1],f=ma(a.legendItem.getBBox().height),g=p.length;(!g||e-p[g-1]>b&&(c||e)!==p[g-1])&&(p.push(c||e),g++),d===q.length-1&&e+f-p[g-1]>b&&p.push(e),e!==c&&(c=e)}),j||(j=d.clipRect=f.clipRect(0,this.padding,9999,0),d.contentGroup.clip(j)),j.attr({height:b}),o||(this.nav=o=f.g().attr({zIndex:1}).add(this.group),this.up=f.symbol("triangle",0,0,m,m).on("click",function(){d.scroll(-1,l)}).add(o),this.pager=f.text("",15,10).css(k.style).add(o),this.down=f.symbol("triangle-down",0,0,m,m).on("click",function(){d.scroll(1,l)}).add(o)),d.scroll(0),a=h):o&&(j.attr({height:e.chartHeight}),o.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),a},scroll:function(a,b){var c=this.pages,d=c.length,e=this.currentPage+a,f=this.clipHeight,g=this.options.navigation,h=g.activeColor,g=g.inactiveColor,i=this.pager,j=this.padding;e>d&&(e=d),e>0&&(b!==M&&D(b,this.chart),this.nav.attr({translateX:j,translateY:f+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({fill:1===e?g:h}).css({cursor:1===e?"default":"pointer"}),i.attr({text:e+"/"+d}),this.down.attr({x:18+this.pager.getBBox().width,fill:e===d?g:h}).css({cursor:e===d?"default":"pointer"}),c=-c[e-1]+this.initialItemY,this.scrollGroup.animate({translateY:c}),this.currentPage=e,this.positionCheckboxes(c))}},Sa=ia.LegendSymbolMixin={drawRectangle:function(a,b){var c=a.options.symbolHeight||12;b.legendSymbol=this.chart.renderer.rect(0,a.baseline-5-c/2,a.symbolWidth,c,a.options.symbolRadius||0).attr({zIndex:3}).add(b.legendGroup)},drawLineMarker:function(a){var b,c=this.options,d=c.marker;b=a.symbolWidth;var e,f=this.chart.renderer,g=this.legendGroup,a=a.baseline-ma(.3*f.fontMetrics(a.options.itemStyle.fontSize,this.legendItem).b);c.lineWidth&&(e={"stroke-width":c.lineWidth},c.dashStyle&&(e.dashstyle=c.dashStyle),this.legendLine=f.path(["M",0,a,"L",b,a]).attr(e).add(g)),d&&d.enabled!==!1&&(c=d.radius,this.legendSymbol=b=f.symbol(this.symbol,b/2-c,a-c,2*c,2*c).add(g),b.isMarker=!0)}},(/Trident\/7\.0/.test(wa)||Ba)&&t(ub.prototype,"positionItem",function(a,b){var c=this,d=function(){b._legendItemPos&&a.call(c,b)};d(),setTimeout(d)}),I.prototype={init:function(a,c){var d,e=a.series;a.series=null,d=b(Q,a),d.series=a.series=e,this.userOptions=a,e=d.chart,this.margin=this.splashArray("margin",e),this.spacing=this.splashArray("spacing",e);var f=e.events;this.bounds={h:{},v:{}},this.callback=c,this.isResizing=0,this.options=d,this.axes=[],this.series=[],this.hasCartesianSeries=e.showAxes;var g,h=this;if(h.index=Ka.length,Ka.push(h),La++,e.reflow!==!1&&$a(h,"load",function(){h.initReflow()}),f)for(g in f)$a(h,g,f[g]);h.xAxis=[],h.yAxis=[],h.animation=Ga?!1:n(e.animation,!0),h.pointCount=h.colorCounter=h.symbolCounter=0,h.firstRender()},initSeries:function(a){var b=this.options.chart;return(b=Qa[a.type||b.type||b.defaultSeriesType])||V(17,!0),b=new b,b.init(this,a),b},isInsidePlot:function(a,b,c){var d=c?b:a,a=c?a:b;return d>=0&&d<=this.plotWidth&&a>=0&&a<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&Wa(this.axes,function(a){a.adjustTickAmount()}),this.maxTicks=null},redraw:function(b){var c,d,e=this.axes,f=this.series,g=this.pointer,h=this.legend,i=this.isDirtyLegend,j=this.hasCartesianSeries,k=this.isDirtyBox,l=f.length,m=l,n=this.renderer,o=n.isHidden(),p=[];for(D(b,this),o&&this.cloneRenderTo(),this.layOutTitles();m--;)if(b=f[m],b.options.stacking&&(c=!0,b.isDirty)){d=!0;break}if(d)for(m=l;m--;)b=f[m],b.options.stacking&&(b.isDirty=!0);Wa(f,function(a){a.isDirty&&"point"===a.options.legendType&&(i=!0)}),i&&h.options.enabled&&(h.render(),this.isDirtyLegend=!1),c&&this.getStacks(),j&&(this.isResizing||(this.maxTicks=null,Wa(e,function(a){a.setScale()})),this.adjustTickAmounts()),this.getMargins(),j&&(Wa(e,function(a){a.isDirty&&(k=!0)}),Wa(e,function(b){b.isDirtyExtremes&&(b.isDirtyExtremes=!1,p.push(function(){ab(b,"afterSetExtremes",a(b.eventArgs,b.getExtremes())),delete b.eventArgs})),(k||c)&&b.redraw()})),k&&this.drawChartBox(),Wa(f,function(a){a.isDirty&&a.visible&&(!a.isCartesian||a.xAxis)&&a.redraw()}),g&&g.reset(!0),n.draw(),ab(this,"redraw"),o&&this.cloneRenderTo(!0),Wa(p,function(a){a.call()})},get:function(a){var b,c,d=this.axes,e=this.series;for(b=0;b<d.length;b++)if(d[b].options.id===a)return d[b];for(b=0;b<e.length;b++)if(e[b].options.id===a)return e[b];for(b=0;b<e.length;b++)for(c=e[b].points||[],d=0;d<c.length;d++)if(c[d].id===a)return c[d];return null},getAxes:function(){var a=this,b=this.options,c=b.xAxis=m(b.xAxis||{}),b=b.yAxis=m(b.yAxis||{});Wa(c,function(a,b){a.index=b,a.isX=!0}),Wa(b,function(a,b){a.index=b}),c=c.concat(b),Wa(c,function(b){new H(a,b)}),a.adjustTickAmounts()},getSelectedPoints:function(){var a=[];return Wa(this.series,function(b){a=a.concat(Xa(b.points||[],function(a){return a.selected}))}),a},getSelectedSeries:function(){return Xa(this.series,function(a){return a.selected})},getStacks:function(){var a=this;Wa(a.yAxis,function(a){a.stacks&&a.hasVisibleSeries&&(a.oldStacks=a.stacks)}),Wa(a.series,function(b){!b.options.stacking||b.visible!==!0&&a.options.chart.ignoreHiddenSeries!==!1||(b.stackKey=b.type+n(b.options.stack,""))})},setTitle:function(a,c,d){var e,f,g=this,h=g.options;f=h.title=b(h.title,a),e=h.subtitle=b(h.subtitle,c),h=e,Wa([["title",a,f],["subtitle",c,h]],function(a){var b=a[0],c=g[b],d=a[1],a=a[2];c&&d&&(g[b]=c=c.destroy()),a&&a.text&&!c&&(g[b]=g.renderer.text(a.text,0,0,a.useHTML).attr({align:a.align,"class":"highcharts-"+b,zIndex:a.zIndex||4}).css(a.style).add())}),g.layOutTitles(d)},layOutTitles:function(b){var c=0,d=this.title,e=this.subtitle,f=this.options,g=f.title,f=f.subtitle,h=this.renderer,i=this.spacingBox.width-44;!d||(d.css({width:(g.width||i)+"px"}).align(a({y:h.fontMetrics(g.style.fontSize,d).b-3},g),!1,"spacingBox"),g.floating||g.verticalAlign)||(c=d.getBBox().height),e&&(e.css({width:(f.width||i)+"px"}).align(a({y:c+(g.margin-13)+h.fontMetrics(g.style.fontSize,e).b},f),!1,"spacingBox"),!f.floating&&!f.verticalAlign&&(c=oa(c+e.getBBox().height))),d=this.titleOffset!==c,this.titleOffset=c,!this.isDirtyBox&&d&&(this.isDirtyBox=d,this.hasRendered&&n(b,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var a=this.options.chart,b=a.width,a=a.height,c=this.renderToClone||this.renderTo;k(b)||(this.containerWidth=Ta(c,"width")),k(a)||(this.containerHeight=Ta(c,"height")),this.chartWidth=pa(0,b||this.containerWidth||600),this.chartHeight=pa(0,n(a,this.containerHeight>19?this.containerHeight:400))},cloneRenderTo:function(a){var b=this.renderToClone,c=this.container;a?b&&(this.renderTo.appendChild(c),B(b),delete this.renderToClone):(c&&c.parentNode===this.renderTo&&this.renderTo.removeChild(c),this.renderToClone=b=this.renderTo.cloneNode(0),o(b,{position:"absolute",top:"-9999px",display:"block"}),b.style.setProperty&&b.style.setProperty("display","block","important"),ja.body.appendChild(b),c&&b.appendChild(c))},getContainer:function(){var b,e,f,g,h=this.options.chart;this.renderTo=b=h.renderTo,g="highcharts-"+Ia++,d(b)&&(this.renderTo=b=ja.getElementById(b)),b||V(13,!0),e=c(l(b,"data-highcharts-chart")),!isNaN(e)&&Ka[e]&&Ka[e].hasRendered&&Ka[e].destroy(),l(b,"data-highcharts-chart",this.index),b.innerHTML="",!h.skipClone&&!b.offsetWidth&&this.cloneRenderTo(),this.getChartSize(),e=this.chartWidth,f=this.chartHeight,this.container=b=p(Ma,{className:"highcharts-container"+(h.className?" "+h.className:""),id:g},a({position:"relative",overflow:"hidden",width:e+"px",height:f+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},h.style),this.renderToClone||b),this._cursor=b.style.cursor,this.renderer=h.forExport?new jb(b,e,f,h.style,!0):new N(b,e,f,h.style),Ga&&this.renderer.create(this,b,e,f)},getMargins:function(){var a,b=this.spacing,c=this.legend,d=this.margin,e=this.options.legend,f=n(e.margin,20),g=e.x,h=e.y,i=e.align,j=e.verticalAlign,l=this.titleOffset;this.resetMargins(),a=this.axisOffset,l&&!k(d[0])&&(this.plotTop=pa(this.plotTop,l+this.options.title.margin+b[0])),c.display&&!e.floating&&("right"===i?k(d[1])||(this.marginRight=pa(this.marginRight,c.legendWidth-g+f+b[1])):"left"===i?k(d[3])||(this.plotLeft=pa(this.plotLeft,c.legendWidth+g+f+b[3])):"top"===j?k(d[0])||(this.plotTop=pa(this.plotTop,c.legendHeight+h+f+b[0])):"bottom"!==j||k(d[2])||(this.marginBottom=pa(this.marginBottom,c.legendHeight-h+f+b[2]))),this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin),this.extraTopMargin&&(this.plotTop+=this.extraTopMargin),this.hasCartesianSeries&&Wa(this.axes,function(a){a.getOffset()}),k(d[3])||(this.plotLeft+=a[3]),k(d[0])||(this.plotTop+=a[0]),k(d[2])||(this.marginBottom+=a[2]),k(d[1])||(this.marginRight+=a[1]),this.setChartSize()},reflow:function(a){var b=this,c=b.options.chart,d=b.renderTo,e=c.width||Ta(d,"width"),f=c.height||Ta(d,"height"),c=a?a.target:ka,d=function(){b.container&&(b.setSize(e,f,!1),b.hasUserSize=null)};b.hasUserSize||!e||!f||c!==ka&&c!==ja||((e!==b.containerWidth||f!==b.containerHeight)&&(clearTimeout(b.reflowTimeout),a?b.reflowTimeout=setTimeout(d,100):d()),b.containerWidth=e,b.containerHeight=f)},initReflow:function(){var a=this,b=function(b){a.reflow(b)};$a(ka,"resize",b),$a(a,"destroy",function(){_a(ka,"resize",b)})},setSize:function(a,b,c){var d,e,f,g=this;g.isResizing+=1,f=function(){g&&ab(g,"endResize",null,function(){g.isResizing-=1})},D(c,g),g.oldChartHeight=g.chartHeight,g.oldChartWidth=g.chartWidth,k(a)&&(g.chartWidth=d=pa(0,ma(a)),
g.hasUserSize=!!d),k(b)&&(g.chartHeight=e=pa(0,ma(b))),(S?cb:o)(g.container,{width:d+"px",height:e+"px"},S),g.setChartSize(!0),g.renderer.setSize(d,e,c),g.maxTicks=null,Wa(g.axes,function(a){a.isDirty=!0,a.setScale()}),Wa(g.series,function(a){a.isDirty=!0}),g.isDirtyLegend=!0,g.isDirtyBox=!0,g.layOutTitles(),g.getMargins(),g.redraw(c),g.oldChartHeight=null,ab(g,"resize"),S===!1?f():setTimeout(f,S&&S.duration||500)},setChartSize:function(a){var b,c,d,e,f=this.inverted,g=this.renderer,h=this.chartWidth,i=this.chartHeight,j=this.options.chart,k=this.spacing,l=this.clipOffset;this.plotLeft=b=ma(this.plotLeft),this.plotTop=c=ma(this.plotTop),this.plotWidth=d=pa(0,ma(h-b-this.marginRight)),this.plotHeight=e=pa(0,ma(i-c-this.marginBottom)),this.plotSizeX=f?e:d,this.plotSizeY=f?d:e,this.plotBorderWidth=j.plotBorderWidth||0,this.spacingBox=g.spacingBox={x:k[3],y:k[0],width:h-k[3]-k[1],height:i-k[0]-k[2]},this.plotBox=g.plotBox={x:b,y:c,width:d,height:e},h=2*na(this.plotBorderWidth/2),f=oa(pa(h,l[3])/2),g=oa(pa(h,l[0])/2),this.clipBox={x:f,y:g,width:na(this.plotSizeX-pa(h,l[1])/2-f),height:pa(0,na(this.plotSizeY-pa(h,l[2])/2-g))},a||Wa(this.axes,function(a){a.setAxisSize(),a.setAxisTranslation()})},resetMargins:function(){var a=this.spacing,b=this.margin;this.plotTop=n(b[0],a[0]),this.marginRight=n(b[1],a[1]),this.marginBottom=n(b[2],a[2]),this.plotLeft=n(b[3],a[3]),this.axisOffset=[0,0,0,0],this.clipOffset=[0,0,0,0]},drawChartBox:function(){var a,b=this.options.chart,c=this.renderer,d=this.chartWidth,e=this.chartHeight,f=this.chartBackground,g=this.plotBackground,h=this.plotBorder,i=this.plotBGImage,j=b.borderWidth||0,k=b.backgroundColor,l=b.plotBackgroundColor,m=b.plotBackgroundImage,n=b.plotBorderWidth||0,o=this.plotLeft,p=this.plotTop,q=this.plotWidth,r=this.plotHeight,s=this.plotBox,t=this.clipRect,u=this.clipBox;a=j+(b.shadow?8:0),(j||k)&&(f?f.animate(f.crisp({width:d-a,height:e-a})):(f={fill:k||Na},j&&(f.stroke=b.borderColor,f["stroke-width"]=j),this.chartBackground=c.rect(a/2,a/2,d-a,e-a,b.borderRadius,j).attr(f).addClass("highcharts-background").add().shadow(b.shadow))),l&&(g?g.animate(s):this.plotBackground=c.rect(o,p,q,r,0).attr({fill:l}).add().shadow(b.plotShadow)),m&&(i?i.animate(s):this.plotBGImage=c.image(m,o,p,q,r).add()),t?t.animate({width:u.width,height:u.height}):this.clipRect=c.clipRect(u),n&&(h?h.animate(h.crisp({x:o,y:p,width:q,height:r,strokeWidth:-n})):this.plotBorder=c.rect(o,p,q,r,0,-n).attr({stroke:b.plotBorderColor,"stroke-width":n,fill:Na,zIndex:1}).add()),this.isDirtyBox=!1},propFromSeries:function(){var a,b,c,d=this,e=d.options.chart,f=d.options.series;Wa(["inverted","angular","polar"],function(g){for(a=Qa[e.type||e.defaultSeriesType],c=d[g]||e[g]||a&&a.prototype[g],b=f&&f.length;!c&&b--;)(a=Qa[f[b].type])&&a.prototype[g]&&(c=!0);d[g]=c})},linkSeries:function(){var a=this,b=a.series;Wa(b,function(a){a.linkedSeries.length=0}),Wa(b,function(b){var c=b.options.linkedTo;d(c)&&(c=":previous"===c?a.series[b.index-1]:a.get(c))&&(c.linkedSeries.push(b),b.linkedParent=c)})},renderSeries:function(){Wa(this.series,function(a){a.translate(),a.setTooltipPoints&&a.setTooltipPoints(),a.render()})},renderLabels:function(){var b=this,d=b.options.labels;d.items&&Wa(d.items,function(e){var f=a(d.style,e.style),g=c(f.left)+b.plotLeft,h=c(f.top)+b.plotTop+12;delete f.left,delete f.top,b.renderer.text(e.html,g,h).attr({zIndex:2}).css(f).add()})},render:function(){var a=this.axes,b=this.renderer,c=this.options;this.setTitle(),this.legend=new ub(this,c.legend),this.getStacks(),Wa(a,function(a){a.setScale()}),this.getMargins(),this.maxTicks=null,Wa(a,function(a){a.setTickPositions(!0),a.setMaxTicks()}),this.adjustTickAmounts(),this.getMargins(),this.drawChartBox(),this.hasCartesianSeries&&Wa(a,function(a){a.render()}),this.seriesGroup||(this.seriesGroup=b.g("series-group").attr({zIndex:3}).add()),this.renderSeries(),this.renderLabels(),this.showCredits(c.credits),this.hasRendered=!0},showCredits:function(a){a.enabled&&!this.credits&&(this.credits=this.renderer.text(a.text,0,0).on("click",function(){a.href&&(location.href=a.href)}).attr({align:a.position.align,zIndex:8}).css(a.style).add().align(a.position))},destroy:function(){var a,b=this,c=b.axes,d=b.series,e=b.container,f=e&&e.parentNode;for(ab(b,"destroy"),Ka[b.index]=M,La--,b.renderTo.removeAttribute("data-highcharts-chart"),_a(b),a=c.length;a--;)c[a]=c[a].destroy();for(a=d.length;a--;)d[a]=d[a].destroy();Wa("title,subtitle,chartBackground,plotBackground,plotBGImage,plotBorder,seriesGroup,clipRect,credits,pointer,scroller,rangeSelector,legend,resetZoomButton,tooltip,renderer".split(","),function(a){var c=b[a];c&&c.destroy&&(b[a]=c.destroy())}),e&&(e.innerHTML="",_a(e),f&&B(e));for(a in b)delete b[a]},isReadyToRender:function(){var a=this;return!Ea&&ka==ka.top&&"complete"!==ja.readyState||Ga&&!ka.canvg?(Ga?mb.push(function(){a.firstRender()},a.options.global.canvasToolsURL):ja.attachEvent("onreadystatechange",function(){ja.detachEvent("onreadystatechange",a.firstRender),"complete"===ja.readyState&&a.firstRender()}),!1):!0},firstRender:function(){var a=this,b=a.options,c=a.callback;a.isReadyToRender()&&(a.getContainer(),ab(a,"init"),a.resetMargins(),a.setChartSize(),a.propFromSeries(),a.getAxes(),Wa(b.series||[],function(b){a.initSeries(b)}),a.linkSeries(),ab(a,"beforeRender"),ia.Pointer&&(a.pointer=new pb(a,b)),a.render(),a.renderer.draw(),c&&c.apply(a,[a]),Wa(a.callbacks,function(b){b.apply(a,[a])}),a.cloneRenderTo(!0),ab(a,"load"))},splashArray:function(a,b){var c=b[a],c=e(c)?c:[c,c,c,c];return[n(b[a+"Top"],c[0]),n(b[a+"Right"],c[1]),n(b[a+"Bottom"],c[2]),n(b[a+"Left"],c[3])]}},I.prototype.callbacks=[],lb=ia.CenteredSeriesMixin={getCenter:function(){var a,b,d=this.options,e=this.chart,f=2*(d.slicedOffset||0),g=e.plotWidth-2*f,h=e.plotHeight-2*f,e=d.center,d=[n(e[0],"50%"),n(e[1],"50%"),d.size||"100%",d.innerSize||0],i=qa(g,h);return Za(d,function(d,e){return b=/%$/.test(d),a=2>e||2===e&&b,(b?[g,h,i,i][e]*c(d)/100:d)+(a?f:0)})}};var vb=function(){};vb.prototype={init:function(a,b,c){return this.series=a,this.applyOptions(b,c),this.pointAttr={},a.options.colorByPoint&&(b=a.options.colors||a.chart.options.colors,this.color=this.color||b[a.colorCounter++],a.colorCounter===b.length)&&(a.colorCounter=0),a.chart.pointCount++,this},applyOptions:function(b,c){var d=this.series,e=d.options.pointValKey||d.pointValKey,b=vb.prototype.optionsToObject.call(this,b);return a(this,b),this.options=this.options?a(this.options,b):b,e&&(this.y=this[e]),this.x===M&&d&&(this.x=c===M?d.autoIncrement():c),this},optionsToObject:function(a){var b={},c=this.series,d=c.pointArrayMap||["y"],e=d.length,g=0,h=0;if("number"==typeof a||null===a)b[d[0]]=a;else if(f(a))for(a.length>e&&(c=typeof a[0],"string"===c?b.name=a[0]:"number"===c&&(b.x=a[0]),g++);e>h;)b[d[h++]]=a[g++];else"object"==typeof a&&(b=a,a.dataLabels&&(c._hasPointLabels=!0),a.marker&&(c._hasPointMarkers=!0));return b},destroy:function(){var a,b=this.series.chart,c=b.hoverPoints;b.pointCount--,c&&(this.setState(),j(c,this),!c.length)&&(b.hoverPoints=null),this===b.hoverPoint&&this.onMouseOut(),(this.graphic||this.dataLabel)&&(_a(this),this.destroyElements()),this.legendItem&&b.legend.destroyItem(this);for(a in this)this[a]=null},destroyElements:function(){for(var a,b="graphic,dataLabel,dataLabelUpper,group,connector,shadowGroup".split(","),c=6;c--;)a=b[c],this[a]&&(this[a]=this[a].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(a){var b=this.series,c=b.tooltipOptions,d=n(c.valueDecimals,""),e=c.valuePrefix||"",f=c.valueSuffix||"";return Wa(b.pointArrayMap||["y"],function(b){b="{point."+b,(e||f)&&(a=a.replace(b+"}",e+b+"}"+f)),a=a.replace(b+"}",b+":,."+d+"f}")}),u(a,{point:this,series:this.series})},firePointEvent:function(a,b,c){var d=this,e=this.series.options;(e.point.events[a]||d.options&&d.options.events&&d.options.events[a])&&this.importEvents(),"click"===a&&e.allowPointSelect&&(c=function(a){d.select(null,a.ctrlKey||a.metaKey||a.shiftKey)}),ab(this,a,b,c)}};var wb=function(){};wb.prototype={isCartesian:!0,type:"line",pointClass:vb,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(b,c){var d,e,f=this,g=b.series,h=function(a,b){return n(a.options.index,a._i)-n(b.options.index,b._i)};f.chart=b,f.options=c=f.setOptions(c),f.linkedSeries=[],f.bindAxes(),a(f,{name:c.name,state:"",pointAttr:{},visible:c.visible!==!1,selected:c.selected===!0}),Ga&&(c.animation=!1),e=c.events;for(d in e)$a(f,d,e[d]);(e&&e.click||c.point&&c.point.events&&c.point.events.click||c.allowPointSelect)&&(b.runTrackerClick=!0),f.getColor(),f.getSymbol(),Wa(f.parallelArrays,function(a){f[a+"Data"]=[]}),f.setData(c.data,!1),f.isCartesian&&(b.hasCartesianSeries=!0),g.push(f),f._i=g.length-1,x(g,h),this.yAxis&&x(this.yAxis.series,h),Wa(g,function(a,b){a.index=b,a.name=a.name||"Series "+(b+1)})},bindAxes:function(){var a,b=this,c=b.options,d=b.chart;Wa(b.axisTypes||[],function(e){Wa(d[e],function(d){a=d.options,(c[e]===a.index||c[e]!==M&&c[e]===a.id||c[e]===M&&0===a.index)&&(d.series.push(b),b[e]=d,d.isDirty=!0)}),!b[e]&&b.optionalAxis!==e&&V(18,!0)})},updateParallelArrays:function(a,b){var c=a.series,d=arguments;Wa(c.parallelArrays,"number"==typeof b?function(d){var e="y"===d&&c.toYData?c.toYData(a):a[d];c[d+"Data"][b]=e}:function(a){Array.prototype[b].apply(c[a+"Data"],Array.prototype.slice.call(d,2))})},autoIncrement:function(){var a=this.options,b=this.xIncrement,b=n(b,a.pointStart,0);return this.pointInterval=n(this.pointInterval,a.pointInterval,1),this.xIncrement=b+this.pointInterval,b},getSegments:function(){var a,b=-1,c=[],d=this.points,e=d.length;if(e)if(this.options.connectNulls){for(a=e;a--;)null===d[a].y&&d.splice(a,1);d.length&&(c=[d])}else Wa(d,function(a,f){null===a.y?(f>b+1&&c.push(d.slice(b+1,f)),b=f):f===e-1&&c.push(d.slice(b+1,f+1))});this.segments=c},setOptions:function(a){var c=this.chart,d=c.options.plotOptions,c=c.userOptions||{},e=c.plotOptions||{},f=d[this.type];return this.userOptions=a,d=b(f,d.series,a),this.tooltipOptions=b(Q.tooltip,Q.plotOptions[this.type].tooltip,c.tooltip,e.series&&e.series.tooltip,e[this.type]&&e[this.type].tooltip,a.tooltip),null===f.marker&&delete d.marker,d},getCyclic:function(a,b,c){var d=this.userOptions,e="_"+a+"Index",f=a+"Counter";b||(k(d[e])?b=d[e]:(d[e]=b=this.chart[f]%c.length,this.chart[f]+=1),b=c[b]),this[a]=b},getColor:function(){this.options.colorByPoint||this.getCyclic("color",this.options.color||eb[this.type].color,this.chart.options.colors)},getSymbol:function(){var a=this.options.marker;this.getCyclic("symbol",a.symbol,this.chart.options.symbols),/^url/.test(this.symbol)&&(a.radius=0)},drawLegendSymbol:Sa.drawLineMarker,setData:function(a,b,c,e){var h,i=this,j=i.points,k=j&&j.length||0,l=i.options,m=i.chart,o=null,p=i.xAxis,q=p&&!!p.categories,r=i.tooltipPoints,s=l.turboThreshold,t=this.xData,u=this.yData,v=(h=i.pointArrayMap)&&h.length,a=a||[];if(h=a.length,b=n(b,!0),e===!1||!h||k!==h||i.cropped||i.hasGroupedData){if(i.xIncrement=null,i.pointRange=q?1:l.pointRange,i.colorCounter=0,Wa(this.parallelArrays,function(a){i[a+"Data"].length=0}),s&&h>s){for(c=0;null===o&&h>c;)o=a[c],c++;if(g(o)){for(q=n(l.pointStart,0),l=n(l.pointInterval,1),c=0;h>c;c++)t[c]=q,u[c]=a[c],q+=l;i.xIncrement=q}else if(f(o))if(v)for(c=0;h>c;c++)l=a[c],t[c]=l[0],u[c]=l.slice(1,v+1);else for(c=0;h>c;c++)l=a[c],t[c]=l[0],u[c]=l[1];else V(12)}else for(c=0;h>c;c++)a[c]!==M&&(l={series:i},i.pointClass.prototype.applyOptions.apply(l,[a[c]]),i.updateParallelArrays(l,c),q&&l.name)&&(p.names[l.x]=l.name);for(d(u[0])&&V(14,!0),i.data=[],i.options.data=a,c=k;c--;)j[c]&&j[c].destroy&&j[c].destroy();r&&(r.length=0),p&&(p.minRange=p.userMinRange),i.isDirty=i.isDirtyData=m.isDirtyBox=!0,c=!1}else Wa(a,function(a,b){j[b].update(a,!1,null,!1)});b&&m.redraw(c)},processData:function(a){var b,c=this.xData,d=this.yData,e=c.length;b=0;var f,g,h,i=this.xAxis,j=this.options;h=j.cropThreshold;var k,l,m=0,n=this.isCartesian;if(n&&!this.isDirty&&!i.isDirty&&!this.yAxis.isDirty&&!a)return!1;for(i&&(k=i.getExtremes(),l=k.min,k=k.max),n&&this.sorted&&(!h||e>h||this.forceCrop)&&(c[e-1]<l||c[0]>k?(c=[],d=[]):(c[0]<l||c[e-1]>k)&&(b=this.cropData(this.xData,this.yData,l,k),c=b.xData,d=b.yData,b=b.start,f=!0,m=c.length)),h=c.length-1;h>=0;h--)e=c[h]-c[h-1],!f&&c[h]>l&&c[h]<k&&m++,e>0&&(g===M||g>e)?g=e:0>e&&this.requireSorting&&V(15);this.cropped=f,this.cropStart=b,this.processedXData=c,this.processedYData=d,this.activePointCount=m,null===j.pointRange&&(this.pointRange=g||1),this.closestPointRange=g},cropData:function(a,b,c,d){var e,f=a.length,g=0,h=f,i=n(this.cropShoulder,1);for(e=0;f>e;e++)if(a[e]>=c){g=pa(0,e-i);break}for(;f>e;e++)if(a[e]>d){h=e+i;break}return{xData:a.slice(g,h),yData:b.slice(g,h),start:g,end:h}},generatePoints:function(){var a,b,c,d,e=this.options.data,f=this.data,g=this.processedXData,h=this.processedYData,i=this.pointClass,j=g.length,k=this.cropStart||0,l=this.hasGroupedData,n=[];for(f||l||(f=[],f.length=e.length,f=this.data=f),d=0;j>d;d++)b=k+d,l?n[d]=(new i).init(this,[g[d]].concat(m(h[d]))):(f[b]?c=f[b]:e[b]!==M&&(f[b]=c=(new i).init(this,e[b],g[d])),n[d]=c),n[d].index=b;if(f&&(j!==(a=f.length)||l))for(d=0;a>d;d++)d===k&&!l&&(d+=j),f[d]&&(f[d].destroyElements(),f[d].plotX=M);this.data=f,this.points=n},getExtremes:function(a){var b,c=this.yAxis,d=this.processedXData,e=[],f=0;b=this.xAxis.getExtremes();var g,h,i,j,k=b.min,l=b.max,a=a||this.stackedYData||this.processedYData;for(b=a.length,j=0;b>j;j++)if(h=d[j],i=a[j],g=null!==i&&i!==M&&(!c.isLog||i.length||i>0),h=this.getExtremesFromAll||this.cropped||(d[j+1]||h)>=k&&(d[j-1]||h)<=l,g&&h)if(g=i.length)for(;g--;)null!==i[g]&&(e[f++]=i[g]);else e[f++]=i;this.dataMin=n(void 0,y(e)),this.dataMax=n(void 0,z(e))},translate:function(){this.processedXData||this.processData(),this.generatePoints();for(var a=this.options,b=a.stacking,c=this.xAxis,d=c.categories,e=this.yAxis,f=this.points,h=f.length,i=!!this.modifyValue,j=a.pointPlacement,l="between"===j||g(j),m=a.threshold,a=0;h>a;a++){var o=f[a],p=o.x,q=o.y,r=o.low,s=b&&e.stacks[(this.negStacks&&m>q?"-":"")+this.stackKey];e.isLog&&0>=q&&(o.y=q=null,V(10)),o.plotX=c.translate(p,0,0,0,1,j,"flags"===this.type),b&&this.visible&&s&&s[p]&&(s=s[p],q=s.points[this.index+","+a],r=q[0],q=q[1],0===r&&(r=n(m,e.min)),e.isLog&&0>=r&&(r=null),o.total=o.stackTotal=s.total,o.percentage=s.total&&o.y/s.total*100,o.stackY=q,s.setOffset(this.pointXOffset||0,this.barW||0)),o.yBottom=k(r)?e.translate(r,0,1,0,1):null,i&&(q=this.modifyValue(q,o)),o.plotY="number"==typeof q&&q!==1/0?e.translate(q,0,1,0,1):M,o.clientX=l?c.translate(p,0,0,0,1):o.plotX,o.negative=o.y<(m||0),o.category=d&&d[o.x]!==M?d[o.x]:o.x}this.getSegments()},animate:function(b){var c,d=this.chart,f=d.renderer;c=this.options.animation;var g,h=this.clipBox||d.clipBox,i=d.inverted;c&&!e(c)&&(c=eb[this.type].animation),g=["_sharedClip",c.duration,c.easing,h.height].join(","),b?(b=d[g],c=d[g+"m"],b||(d[g]=b=f.clipRect(a(h,{width:0})),d[g+"m"]=c=f.clipRect(-99,i?-d.plotLeft:-d.plotTop,99,i?d.chartWidth:d.chartHeight)),this.group.clip(b),this.markerGroup.clip(c),this.sharedClipKey=g):((b=d[g])&&b.animate({width:d.plotSizeX},c),d[g+"m"]&&d[g+"m"].animate({width:d.plotSizeX+99},c),this.animate=null)},afterAnimate:function(){var a=this.chart,b=this.sharedClipKey,c=this.group,d=this.clipBox;c&&this.options.clip!==!1&&(b&&d||c.clip(d?a.renderer.clipRect(d):a.clipRect),this.markerGroup.clip()),ab(this,"afterAnimate"),setTimeout(function(){b&&a[b]&&(d||(a[b]=a[b].destroy()),a[b+"m"]&&(a[b+"m"]=a[b+"m"].destroy()))},100)},drawPoints:function(){var b,c,d,e,f,g,h,i,j,k,l,m,o=this.points,p=this.chart,q=this.options.marker,r=this.pointAttr[""],s=this.markerGroup,t=n(q.enabled,!this.requireSorting||this.activePointCount<.5*this.xAxis.len/q.radius);if(q.enabled!==!1||this._hasPointMarkers)for(e=o.length;e--;)f=o[e],c=na(f.plotX),d=f.plotY,j=f.graphic,k=f.marker||{},l=!!f.marker,b=t&&k.enabled===M||k.enabled,m=p.isInsidePlot(ma(c),d,p.inverted),b&&d!==M&&!isNaN(d)&&null!==f.y?(b=f.pointAttr[f.selected?"select":""]||r,g=b.r,h=n(k.symbol,this.symbol),i=0===h.indexOf("url"),j?j[m?"show":"hide"](!0).animate(a({x:c-g,y:d-g},j.symbolName?{width:2*g,height:2*g}:{})):m&&(g>0||i)&&(f.graphic=p.renderer.symbol(h,c-g,d-g,2*g,2*g,l?k:q).attr(b).add(s))):j&&(f.graphic=j.destroy())},convertAttribs:function(a,b,c,d){var e,f,g=this.pointAttrToOptions,h={},a=a||{},b=b||{},c=c||{},d=d||{};for(e in g)f=g[e],h[e]=n(a[f],b[e],c[e],d[e]);return h},getAttribs:function(){var b,c=this,d=c.options,e=eb[c.type].marker?d.marker:d,f=e.states,g=f.hover,h=c.color;b={stroke:h,fill:h};var i,j,l=c.points||[],m=[],n=c.pointAttrToOptions;j=c.hasPointSpecificOptions;var o=d.negativeColor,p=e.lineColor,q=e.fillColor;i=d.turboThreshold;var r;if(d.marker?(g.radius=g.radius||e.radius+g.radiusPlus,g.lineWidth=g.lineWidth||e.lineWidth+g.lineWidthPlus):g.color=g.color||ib(g.color||h).brighten(g.brightness).get(),m[""]=c.convertAttribs(e,b),Wa(["hover","select"],function(a){m[a]=c.convertAttribs(f[a],m[""])}),c.pointAttr=m,h=l.length,!i||i>h||j)for(;h--;){if(i=l[h],(e=i.options&&i.options.marker||i.options)&&e.enabled===!1&&(e.radius=0),i.negative&&o&&(i.color=i.fillColor=o),j=d.colorByPoint||i.color,i.options)for(r in n)k(e[n[r]])&&(j=!0);j?(e=e||{},j=[],f=e.states||{},b=f.hover=f.hover||{},d.marker||(b.color=b.color||!i.options.color&&g.color||ib(i.color).brighten(b.brightness||g.brightness).get()),b={color:i.color},q||(b.fillColor=i.color),p||(b.lineColor=i.color),j[""]=c.convertAttribs(a(b,e),m[""]),j.hover=c.convertAttribs(f.hover,m.hover,j[""]),j.select=c.convertAttribs(f.select,m.select,j[""])):j=m,i.pointAttr=j}},destroy:function(){var a,b,c,d,e,f=this,g=f.chart,h=/AppleWebKit\/533/.test(wa),i=f.data||[];for(ab(f,"destroy"),_a(f),Wa(f.axisTypes||[],function(a){(e=f[a])&&(j(e.series,f),e.isDirty=e.forceRedraw=!0)}),f.legendItem&&f.chart.legend.destroyItem(f),b=i.length;b--;)(c=i[b])&&c.destroy&&c.destroy();f.points=null,clearTimeout(f.animationTimeout),Wa("area,graph,dataLabelsGroup,group,markerGroup,tracker,graphNeg,areaNeg,posClip,negClip".split(","),function(b){f[b]&&(a=h&&"group"===b?"hide":"destroy",f[b][a]())}),g.hoverSeries===f&&(g.hoverSeries=null),j(g.series,f);for(d in f)delete f[d]},getSegmentPath:function(a){var b=this,c=[],d=b.options.step;return Wa(a,function(e,f){var g,h=e.plotX,i=e.plotY;b.getPointSpline?c.push.apply(c,b.getPointSpline(a,e,f)):(c.push(f?"L":"M"),d&&f&&(g=a[f-1],"right"===d?c.push(g.plotX,i):"center"===d?c.push((g.plotX+h)/2,g.plotY,(g.plotX+h)/2,i):c.push(h,g.plotY)),c.push(e.plotX,e.plotY))}),c},getGraphPath:function(){var a,b=this,c=[],d=[];return Wa(b.segments,function(e){a=b.getSegmentPath(e),e.length>1?c=c.concat(a):d.push(e[0])}),b.singlePoints=d,b.graphPath=c},drawGraph:function(){var a=this,b=this.options,c=[["graph",b.lineColor||this.color]],d=b.lineWidth,e=b.dashStyle,f="square"!==b.linecap,g=this.getGraphPath(),h=b.negativeColor;h&&c.push(["graphNeg",h]),Wa(c,function(c,h){var i=c[0],j=a[i];j?(db(j),j.animate({d:g})):d&&g.length&&(j={stroke:c[1],"stroke-width":d,fill:Na,zIndex:1},e?j.dashstyle=e:f&&(j["stroke-linecap"]=j["stroke-linejoin"]="round"),a[i]=a.chart.renderer.path(g).attr(j).add(a.group).shadow(!h&&b.shadow))})},clipNeg:function(){var a,b=this.options,c=this.chart,d=c.renderer,e=b.negativeColor||b.negativeFillColor,f=this.graph,g=this.area,h=this.posClip,i=this.negClip;a=c.chartWidth;var j=c.chartHeight,k=pa(a,j),l=this.yAxis;e&&(f||g)&&(e=ma(l.toPixels(b.threshold||0,!0)),0>e&&(k-=e),b={x:0,y:0,width:k,height:e},k={x:0,y:e,width:k,height:k},c.inverted&&(b.height=k.y=c.plotWidth-e,d.isVML&&(b={x:c.plotWidth-e-c.plotLeft,y:0,width:a,height:j},k={x:e+c.plotLeft-a,y:0,width:c.plotLeft+e,height:a})),l.reversed?(c=k,a=b):(c=b,a=k),h?(h.animate(c),i.animate(a)):(this.posClip=h=d.clipRect(c),this.negClip=i=d.clipRect(a),f&&this.graphNeg&&(f.clip(h),this.graphNeg.clip(i)),g&&(g.clip(h),this.areaNeg.clip(i))))},invertGroups:function(){function a(){var a={width:b.yAxis.len,height:b.xAxis.len};Wa(["group","markerGroup"],function(c){b[c]&&b[c].attr(a).invert()})}var b=this,c=b.chart;b.xAxis&&($a(c,"resize",a),$a(b,"destroy",function(){_a(c,"resize",a)}),a(),b.invertGroups=a)},plotGroup:function(a,b,c,d,e){var f=this[a],g=!f;return g&&(this[a]=f=this.chart.renderer.g(b).attr({visibility:c,zIndex:d||.1}).add(e)),f[g?"attr":"animate"](this.getPlotBox()),f},getPlotBox:function(){var a=this.chart,b=this.xAxis,c=this.yAxis;return a.inverted&&(b=c,c=this.xAxis),{translateX:b?b.left:a.plotLeft,translateY:c?c.top:a.plotTop,scaleX:1,scaleY:1}},render:function(){var a,b=this,c=b.chart,d=b.options,e=(a=d.animation)&&!!b.animate&&c.renderer.isSVG&&n(a.duration,500)||0,f=b.visible?"visible":"hidden",g=d.zIndex,h=b.hasRendered,i=c.seriesGroup;a=b.plotGroup("group","series",f,g,i),b.markerGroup=b.plotGroup("markerGroup","markers",f,g,i),e&&b.animate(!0),b.getAttribs(),a.inverted=b.isCartesian?c.inverted:!1,b.drawGraph&&(b.drawGraph(),b.clipNeg()),Wa(b.points,function(a){a.redraw&&a.redraw()}),b.drawDataLabels&&b.drawDataLabels(),b.visible&&b.drawPoints(),b.drawTracker&&b.options.enableMouseTracking!==!1&&b.drawTracker(),c.inverted&&b.invertGroups(),d.clip!==!1&&!b.sharedClipKey&&!h&&a.clip(c.clipRect),e&&b.animate(),h||(e?b.animationTimeout=setTimeout(function(){b.afterAnimate()},e):b.afterAnimate()),b.isDirty=b.isDirtyData=!1,b.hasRendered=!0},redraw:function(){var a=this.chart,b=this.isDirtyData,c=this.group,d=this.xAxis,e=this.yAxis;c&&(a.inverted&&c.attr({width:a.plotWidth,height:a.plotHeight}),c.animate({translateX:n(d&&d.left,a.plotLeft),translateY:n(e&&e.top,a.plotTop)})),this.translate(),this.setTooltipPoints&&this.setTooltipPoints(!0),this.render(),b&&ab(this,"updatedData")}},J.prototype={destroy:function(){A(this,this.axis)},render:function(a){var b=this.options,c=b.format,c=c?u(c,this):b.formatter.call(this);this.label?this.label.attr({text:c,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(c,null,null,b.useHTML).css(b.style).attr({align:this.textAlign,rotation:b.rotation,visibility:"hidden"}).add(a)},setOffset:function(a,b){var c=this.axis,d=c.chart,e=d.inverted,f=this.isNegative,g=c.translate(c.usePercentage?100:this.total,0,0,0,1),c=c.translate(0),c=ra(g-c),h=d.xAxis[0].translate(this.x)+a,i=d.plotHeight,f={x:e?f?g:g-c:h,y:e?i-h-b:f?i-g-c:i-g,width:e?c:b,height:e?b:c};(e=this.label)&&(e.align(this.alignOptions,null,f),f=e.alignAttr,e[this.options.crop===!1||d.isInsidePlot(f.x,f.y)?"show":"hide"](!0))}},H.prototype.buildStacks=function(){var a=this.series,b=n(this.options.reversedStacks,!0),c=a.length;if(!this.isXAxis){for(this.usePercentage=!1;c--;)a[b?c:a.length-c-1].setStackedPoints();if(this.usePercentage)for(c=0;c<a.length;c++)a[c].setPercentStacks()}},H.prototype.renderStackTotals=function(){var a,b,c=this.chart,d=c.renderer,e=this.stacks,f=this.stackTotalGroup;f||(this.stackTotalGroup=f=d.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()),f.translate(c.plotLeft,c.plotTop);for(a in e)for(b in c=e[a])c[b].render(f)},wb.prototype.setStackedPoints=function(){if(this.options.stacking&&(this.visible===!0||this.chart.options.chart.ignoreHiddenSeries===!1)){var a,b,c,d,e,f,g=this.processedXData,h=this.processedYData,i=[],j=h.length,k=this.options,l=k.threshold,m=k.stack,k=k.stacking,n=this.stackKey,o="-"+n,p=this.negStacks,q=this.yAxis,r=q.stacks,s=q.oldStacks;for(d=0;j>d;d++)e=g[d],f=h[d],c=this.index+","+d,b=(a=p&&l>f)?o:n,r[b]||(r[b]={}),r[b][e]||(s[b]&&s[b][e]?(r[b][e]=s[b][e],r[b][e].total=null):r[b][e]=new J(q,q.options.stackLabels,a,e,m)),b=r[b][e],b.points[c]=[b.cum||0],"percent"===k?(a=a?n:o,p&&r[a]&&r[a][e]?(a=r[a][e],b.total=a.total=pa(a.total,b.total)+ra(f)||0):b.total=C(b.total+(ra(f)||0))):b.total=C(b.total+(f||0)),b.cum=(b.cum||0)+(f||0),b.points[c].push(b.cum),i[d]=b.cum;"percent"===k&&(q.usePercentage=!0),this.stackedYData=i,q.oldStacks={}}},wb.prototype.setPercentStacks=function(){var a=this,b=a.stackKey,c=a.yAxis.stacks,d=a.processedXData;Wa([b,"-"+b],function(b){for(var e,f,g,h=d.length;h--;)f=d[h],e=(g=c[b]&&c[b][f])&&g.points[a.index+","+h],(f=e)&&(g=g.total?100/g.total:0,f[0]=C(f[0]*g),f[1]=C(f[1]*g),a.stackedYData[h]=f[1])})},a(I.prototype,{addSeries:function(a,b,c){var d,e=this;return a&&(b=n(b,!0),ab(e,"addSeries",{options:a},function(){d=e.initSeries(a),e.isDirtyLegend=!0,e.linkSeries(),b&&e.redraw(c)})),d},addAxis:function(a,c,d,e){var f=c?"xAxis":"yAxis",g=this.options;new H(this,b(a,{index:this[f].length,isX:c})),g[f]=m(g[f]||{}),g[f].push(a),n(d,!0)&&this.redraw(e)},showLoading:function(b){var c=this,d=c.options,e=c.loadingDiv,f=d.loading,g=function(){e&&o(e,{left:c.plotLeft+"px",top:c.plotTop+"px",width:c.plotWidth+"px",height:c.plotHeight+"px"})};e||(c.loadingDiv=e=p(Ma,{className:"highcharts-loading"},a(f.style,{zIndex:10,display:Na}),c.container),c.loadingSpan=p("span",null,f.labelStyle,e),$a(c,"redraw",g)),c.loadingSpan.innerHTML=b||d.lang.loading,c.loadingShown||(o(e,{opacity:0,display:""}),cb(e,{opacity:f.style.opacity},{duration:f.showDuration||0}),c.loadingShown=!0),g()},hideLoading:function(){var a=this.options,b=this.loadingDiv;b&&cb(b,{opacity:0},{duration:a.loading.hideDuration||100,complete:function(){o(b,{display:Na})}}),this.loadingShown=!1}}),a(vb.prototype,{update:function(a,b,c,d){function g(){i.applyOptions(a),e(a)&&!f(a)&&(i.redraw=function(){k&&(a&&a.marker&&a.marker.symbol?i.graphic=k.destroy():k.attr(i.pointAttr[i.state||""])),a&&a.dataLabels&&i.dataLabel&&(i.dataLabel=i.dataLabel.destroy()),i.redraw=null}),h=i.index,j.updateParallelArrays(i,h),m.data[h]=i.options,j.isDirty=j.isDirtyData=!0,!j.fixedBox&&j.hasCartesianSeries&&(l.isDirtyBox=!0),"point"===m.legendType&&l.legend.destroyItem(i),b&&l.redraw(c)}var h,i=this,j=i.series,k=i.graphic,l=j.chart,m=j.options,b=n(b,!0);d===!1?g():i.firePointEvent("update",{options:a},g)},remove:function(a,b){var c,d=this,e=d.series,f=e.points,g=e.chart,h=e.data;D(b,g),a=n(a,!0),d.firePointEvent("remove",null,function(){c=Va(d,h),h.length===f.length&&f.splice(c,1),h.splice(c,1),e.options.data.splice(c,1),e.updateParallelArrays(d,"splice",c,1),d.destroy(),e.isDirty=!0,e.isDirtyData=!0,a&&g.redraw()})}}),a(wb.prototype,{addPoint:function(a,b,c,d){var e,f=this.options,g=this.data,h=this.graph,i=this.area,j=this.chart,k=this.xAxis&&this.xAxis.names,l=h&&h.shift||0,m=f.data,o=this.xData;if(D(d,j),c&&Wa([h,i,this.graphNeg,this.areaNeg],function(a){a&&(a.shift=l+1)}),i&&(i.isArea=!0),b=n(b,!0),d={series:this},this.pointClass.prototype.applyOptions.apply(d,[a]),h=d.x,i=o.length,this.requireSorting&&h<o[i-1])for(e=!0;i&&o[i-1]>h;)i--;this.updateParallelArrays(d,"splice",i,0,0),this.updateParallelArrays(d,i),k&&d.name&&(k[h]=d.name),m.splice(i,0,a),e&&(this.data.splice(i,0,null),this.processData()),"point"===f.legendType&&this.generatePoints(),c&&(g[0]&&g[0].remove?g[0].remove(!1):(g.shift(),this.updateParallelArrays(d,"shift"),m.shift())),this.isDirtyData=this.isDirty=!0,b&&(this.getAttribs(),j.redraw())},remove:function(a,b){var c=this,d=c.chart,a=n(a,!0);c.isRemoving||(c.isRemoving=!0,ab(c,"remove",null,function(){c.destroy(),d.isDirtyLegend=d.isDirtyBox=!0,d.linkSeries(),a&&d.redraw(b)})),c.isRemoving=!1},update:function(c,d){var e,f=this,g=this.chart,h=this.userOptions,i=this.type,j=Qa[i].prototype,k=["group","markerGroup","dataLabelsGroup"];Wa(k,function(a){k[a]=f[a],delete f[a]}),c=b(h,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},c),this.remove(!1);for(e in j)j.hasOwnProperty(e)&&(this[e]=M);a(this,Qa[c.type||i].prototype),Wa(k,function(a){f[a]=k[a]}),this.init(g,c),g.linkSeries(),n(d,!0)&&g.redraw(!1)}}),a(H.prototype,{update:function(c,d){var e=this.chart,c=e.options[this.coll][this.options.index]=b(this.userOptions,c);this.destroy(!0),this._addedPlotLB=M,this.init(e,a(c,{events:M})),e.isDirtyBox=!0,n(d,!0)&&e.redraw()},remove:function(a){for(var b=this.chart,c=this.coll,d=this.series,e=d.length;e--;)d[e]&&d[e].remove(!1);j(b.axes,this),j(b[c],this),b.options[c].splice(this.options.index,1),Wa(b[c],function(a,b){a.options.index=b}),this.destroy(),b.isDirtyBox=!0,n(a,!0)&&b.redraw()},setTitle:function(a,b){this.update({title:a},b)},setCategories:function(a,b){this.update({categories:a},b)}});var xb=q(wb);Qa.line=xb,eb.area=b(Ra,{threshold:0});var yb=q(wb,{type:"area",getSegments:function(){var a,b,c,d,e=this,f=[],g=[],h=[],i=this.xAxis,j=this.yAxis,k=j.stacks[this.stackKey],l={},m=this.points,n=this.options.connectNulls;if(this.options.stacking&&!this.cropped){for(c=0;c<m.length;c++)l[m[c].x]=m[c];for(d in k)null!==k[d].total&&h.push(+d);h.sort(function(a,b){return a-b}),Wa(h,function(d){var f,h=0;if(!n||l[d]&&null!==l[d].y)if(l[d])g.push(l[d]);else{for(c=e.index;c<=j.series.length;c++)if(f=k[d].points[c+","+d]){h=f[1];break}a=i.translate(d),b=j.toPixels(h,!0),g.push({y:null,plotX:a,clientX:a,plotY:b,yBottom:b,onMouseOver:Ja})}}),g.length&&f.push(g)}else wb.prototype.getSegments.call(this),f=this.segments;this.segments=f},getSegmentPath:function(a){var b,c=wb.prototype.getSegmentPath.call(this,a),d=[].concat(c),e=this.options;b=c.length;var f,g=this.yAxis.getThreshold(e.threshold);if(3===b&&d.push("L",c[1],c[2]),e.stacking&&!this.closedStacks)for(b=a.length-1;b>=0;b--)f=n(a[b].yBottom,g),b<a.length-1&&e.step&&d.push(a[b+1].plotX,f),d.push(a[b].plotX,f);else this.closeSegment(d,a,g);return this.areaPath=this.areaPath.concat(d),c},closeSegment:function(a,b,c){a.push("L",b[b.length-1].plotX,c,"L",b[0].plotX,c)},drawGraph:function(){this.areaPath=[],wb.prototype.drawGraph.apply(this);var a=this,b=this.areaPath,c=this.options,d=c.negativeColor,e=c.negativeFillColor,f=[["area",this.color,c.fillColor]];(d||e)&&f.push(["areaNeg",d,e]),Wa(f,function(d){var e=d[0],f=a[e];f?f.animate({d:b}):a[e]=a.chart.renderer.path(b).attr({fill:n(d[2],ib(d[1]).setOpacity(n(c.fillOpacity,.75)).get()),zIndex:0}).add(a.group)})},drawLegendSymbol:Sa.drawRectangle});Qa.area=yb,eb.spline=b(Ra),xb=q(wb,{type:"spline",getPointSpline:function(a,b,c){var d,e,f,g,h=b.plotX,i=b.plotY,j=a[c-1],k=a[c+1];if(j&&k){a=j.plotY,f=k.plotX;var l,k=k.plotY;d=(1.5*h+j.plotX)/2.5,e=(1.5*i+a)/2.5,f=(1.5*h+f)/2.5,g=(1.5*i+k)/2.5,l=(g-e)*(f-h)/(f-d)+i-g,e+=l,g+=l,e>a&&e>i?(e=pa(a,i),g=2*i-e):a>e&&i>e&&(e=qa(a,i),g=2*i-e),g>k&&g>i?(g=pa(k,i),e=2*i-g):k>g&&i>g&&(g=qa(k,i),e=2*i-g),b.rightContX=f,b.rightContY=g}return c?(b=["C",j.rightContX||j.plotX,j.rightContY||j.plotY,d||h,e||i,h,i],j.rightContX=j.rightContY=null):b=["M",h,i],b}}),Qa.spline=xb,eb.areaspline=b(eb.area),yb=yb.prototype,xb=q(xb,{type:"areaspline",closedStacks:!0,getSegmentPath:yb.getSegmentPath,closeSegment:yb.closeSegment,drawGraph:yb.drawGraph,drawLegendSymbol:Sa.drawRectangle}),Qa.areaspline=xb,eb.column=b(Ra,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,tooltip:{distance:6},threshold:0}),xb=q(wb,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){wb.prototype.init.apply(this,arguments);var a=this,b=a.chart;b.hasRendered&&Wa(b.series,function(b){b.type===a.type&&(b.isDirty=!0)})},getColumnMetrics:function(){var a,b,c=this,d=c.options,e=c.xAxis,f=c.yAxis,g=e.reversed,h={},i=0;d.grouping===!1?i=1:Wa(c.chart.series,function(d){var e=d.options,g=d.yAxis;d.type===c.type&&d.visible&&f.len===g.len&&f.pos===g.pos&&(e.stacking?(a=d.stackKey,h[a]===M&&(h[a]=i++),b=h[a]):e.grouping!==!1&&(b=i++),d.columnIndex=b)});var e=qa(ra(e.transA)*(e.ordinalSlope||d.pointRange||e.closestPointRange||e.tickInterval||1),e.len),j=e*d.groupPadding,l=(e-2*j)/i,m=d.pointWidth,d=k(m)?(l-m)/2:l*d.pointPadding,m=n(m,l-2*d);
return c.columnMetrics={width:m,offset:d+(j+((g?i-(c.columnIndex||0):c.columnIndex)||0)*l-e/2)*(g?-1:1)}},translate:function(){var a=this,b=a.chart,c=a.options,d=a.borderWidth=n(c.borderWidth,a.activePointCount>.5*a.xAxis.len?0:1),e=a.yAxis,f=a.translatedThreshold=e.getThreshold(c.threshold),g=n(c.minPointLength,5),h=a.getColumnMetrics(),i=h.width,j=a.barW=pa(i,1+2*d),k=a.pointXOffset=h.offset,l=-(d%2?.5:0),m=d%2?.5:1;b.renderer.isVML&&b.inverted&&(m+=1),c.pointPadding&&(j=oa(j)),wb.prototype.translate.apply(a),Wa(a.points,function(c){var d,h=n(c.yBottom,f),o=qa(pa(-999-h,c.plotY),e.len+999+h),p=c.plotX+k,q=j,r=qa(o,h);d=pa(o,h)-r,ra(d)<g&&g&&(d=g,r=ma(ra(r-f)>g?h-g:f-(e.translate(c.y,0,1,0,1)<=f?g:0))),c.barX=p,c.pointWidth=i,c.tooltipPos=b.inverted?[e.len-o,a.xAxis.len-p-q/2]:[p+q/2,o+e.pos-b.plotTop],q=ma(p+q)+l,p=ma(p)+l,q-=p,h=ra(r)<.5,d=ma(r+d)+m,r=ma(r)+m,d-=r,h&&(r-=1,d+=1),c.shapeType="rect",c.shapeArgs={x:p,y:r,width:q,height:d}})},getSymbol:Ja,drawLegendSymbol:Sa.drawRectangle,drawGraph:Ja,drawPoints:function(){var a,c,d=this,e=this.chart,f=d.options,g=e.renderer,h=f.animationLimit||250;Wa(d.points,function(i){var j=i.plotY,l=i.graphic;j===M||isNaN(j)||null===i.y?l&&(i.graphic=l.destroy()):(a=i.shapeArgs,j=k(d.borderWidth)?{"stroke-width":d.borderWidth}:{},c=i.pointAttr[i.selected?"select":""]||d.pointAttr[""],l?(db(l),l.attr(j)[e.pointCount<h?"animate":"attr"](b(a))):i.graphic=g[i.shapeType](a).attr(c).attr(j).add(d.group).shadow(f.shadow,null,f.stacking&&!f.borderRadius))})},animate:function(a){var b=this.yAxis,c=this.options,d=this.chart.inverted,e={};Ea&&(a?(e.scaleY=.001,a=qa(b.pos+b.len,pa(b.pos,b.toPixels(c.threshold))),d?e.translateX=a-b.len:e.translateY=a,this.group.attr(e)):(e.scaleY=1,e[d?"translateX":"translateY"]=b.pos,this.group.animate(e,this.options.animation),this.animate=null))},remove:function(){var a=this,b=a.chart;b.hasRendered&&Wa(b.series,function(b){b.type===a.type&&(b.isDirty=!0)}),wb.prototype.remove.apply(a,arguments)}}),Qa.column=xb,eb.bar=b(eb.column),yb=q(xb,{type:"bar",inverted:!0}),Qa.bar=yb,eb.scatter=b(Ra,{lineWidth:0,tooltip:{headerFormat:'<span style="color:{series.color}">●</span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"},stickyTracking:!1}),yb=q(wb,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,singularTooltips:!0,drawGraph:function(){this.options.lineWidth&&wb.prototype.drawGraph.call(this)}}),Qa.scatter=yb,eb.pie=b(Ra,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}}),Ra={type:"pie",isCartesian:!1,pointClass:q(vb,{init:function(){vb.prototype.init.apply(this,arguments);var b,c=this;return c.y<0&&(c.y=null),a(c,{visible:c.visible!==!1,name:n(c.name,"Slice")}),b=function(a){c.slice("select"===a.type)},$a(c,"select",b),$a(c,"unselect",b),c},setVisible:function(a){var b=this,c=b.series,d=c.chart;b.visible=b.options.visible=a=a===M?!b.visible:a,c.options.data[Va(b,c.data)]=b.options,Wa(["graphic","dataLabel","connector","shadowGroup"],function(c){b[c]&&b[c][a?"show":"hide"](!0)}),b.legendItem&&d.legend.colorizeItem(b,a),!c.isDirty&&c.options.ignoreHiddenPoint&&(c.isDirty=!0,d.redraw())},slice:function(a,b,c){var d=this.series;D(c,d.chart),n(b,!0),this.sliced=this.options.sliced=a=k(a)?a:!this.sliced,d.options.data[Va(this,d.data)]=this.options,a=a?this.slicedTranslation:{translateX:0,translateY:0},this.graphic.animate(a),this.shadowGroup&&this.shadowGroup.animate(a)},haloPath:function(a){var b=this.shapeArgs,c=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(c.plotLeft+b.x,c.plotTop+b.y,b.r+a,b.r+a,{innerR:this.shapeArgs.r,start:b.start,end:b.end})}}),requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},singularTooltips:!0,getColor:Ja,animate:function(a){var b=this,c=b.points,d=b.startAngleRad;a||(Wa(c,function(a){var c=a.graphic,a=a.shapeArgs;c&&(c.attr({r:b.center[3]/2,start:d,end:d}),c.animate({r:a.r,start:a.start,end:a.end},b.options.animation))}),b.animate=null)},setData:function(a,b,c,d){wb.prototype.setData.call(this,a,!1,c,d),this.processData(),this.generatePoints(),n(b,!0)&&this.chart.redraw(c)},generatePoints:function(){var a,b,c,d,e=0,f=this.options.ignoreHiddenPoint;for(wb.prototype.generatePoints.call(this),b=this.points,c=b.length,a=0;c>a;a++)d=b[a],e+=f&&!d.visible?0:d.y;for(this.total=e,a=0;c>a;a++)d=b[a],d.percentage=e>0?d.y/e*100:0,d.total=e},translate:function(a){this.generatePoints();var b,c,d,e,f,g=0,h=this.options,i=h.slicedOffset,j=i+h.borderWidth,k=h.startAngle||0,l=this.startAngleRad=ua/180*(k-90),k=(this.endAngleRad=ua/180*(n(h.endAngle,k+360)-90))-l,m=this.points,o=h.dataLabels.distance,h=h.ignoreHiddenPoint,p=m.length;for(a||(this.center=a=this.getCenter()),this.getX=function(b,c){return d=la.asin(qa((b-a[1])/(a[2]/2+o),1)),a[0]+(c?-1:1)*sa(d)*(a[2]/2+o)},e=0;p>e;e++)f=m[e],b=l+g*k,(!h||f.visible)&&(g+=f.percentage/100),c=l+g*k,f.shapeType="arc",f.shapeArgs={x:a[0],y:a[1],r:a[2]/2,innerR:a[3]/2,start:ma(1e3*b)/1e3,end:ma(1e3*c)/1e3},d=(c+b)/2,d>1.5*ua?d-=2*ua:-ua/2>d&&(d+=2*ua),f.slicedTranslation={translateX:ma(sa(d)*i),translateY:ma(ta(d)*i)},b=sa(d)*a[2]/2,c=ta(d)*a[2]/2,f.tooltipPos=[a[0]+.7*b,a[1]+.7*c],f.half=-ua/2>d||d>ua/2?1:0,f.angle=d,j=qa(j,o/2),f.labelPos=[a[0]+b+sa(d)*o,a[1]+c+ta(d)*o,a[0]+b+sa(d)*j,a[1]+c+ta(d)*j,a[0]+b,a[1]+c,0>o?"center":f.half?"right":"left",d]},drawGraph:null,drawPoints:function(){var b,c,d,e,f=this,g=f.chart.renderer,h=f.options.shadow;h&&!f.shadowGroup&&(f.shadowGroup=g.g("shadow").add(f.group)),Wa(f.points,function(i){c=i.graphic,e=i.shapeArgs,d=i.shadowGroup,h&&!d&&(d=i.shadowGroup=g.g("shadow").add(f.shadowGroup)),b=i.sliced?i.slicedTranslation:{translateX:0,translateY:0},d&&d.attr(b),c?c.animate(a(e,b)):i.graphic=c=g[i.shapeType](e).setRadialReference(f.center).attr(i.pointAttr[i.selected?"select":""]).attr({"stroke-linejoin":"round"}).attr(b).add(f.group).shadow(h,d),void 0!==i.visible&&i.setVisible(i.visible)})},sortByAngle:function(a,b){a.sort(function(a,c){return void 0!==a.angle&&(c.angle-a.angle)*b})},drawLegendSymbol:Sa.drawRectangle,getCenter:lb.getCenter,getSymbol:Ja},Ra=q(wb,Ra),Qa.pie=Ra,wb.prototype.drawDataLabels=function(){var c,d,e,f,g=this,h=g.options,i=h.cursor,j=h.dataLabels,l=g.points,m=g.hasRendered||0;(j.enabled||g._hasPointLabels)&&(g.dlProcessOptions&&g.dlProcessOptions(j),f=g.plotGroup("dataLabelsGroup","data-labels",j.defer?"hidden":"visible",j.zIndex||6),n(j.defer,!0)&&(f.attr({opacity:+m}),m||$a(g,"afterAnimate",function(){g.visible&&f.show(),f[h.animation?"animate":"attr"]({opacity:1},{duration:200})})),d=j,Wa(l,function(h){var l,m,o,p=h.dataLabel,q=h.connector,r=!0;if(c=h.options&&h.options.dataLabels,l=n(c&&c.enabled,d.enabled),p&&!l)h.dataLabel=p.destroy();else if(l){if(j=b(d,c),l=j.rotation,m=h.getLabelConfig(),e=j.format?u(j.format,m):j.formatter.call(m,j),j.style.color=n(j.color,j.style.color,g.color,"black"),p)k(e)?(p.attr({text:e}),r=!1):(h.dataLabel=p=p.destroy(),q&&(h.connector=q.destroy()));else if(k(e)){p={fill:j.backgroundColor,stroke:j.borderColor,"stroke-width":j.borderWidth,r:j.borderRadius||0,rotation:l,padding:j.padding,zIndex:1};for(o in p)p[o]===M&&delete p[o];p=h.dataLabel=g.chart.renderer[l?"text":"label"](e,0,-999,null,null,null,j.useHTML).attr(p).css(a(j.style,i&&{cursor:i})).add(f).shadow(j.shadow)}p&&g.alignDataLabel(h,p,j,null,r)}}))},wb.prototype.alignDataLabel=function(b,c,d,e,f){var g=this.chart,h=g.inverted,i=n(b.plotX,-999),j=n(b.plotY,-999),k=c.getBBox();(b=this.visible&&(b.series.forceDL||g.isInsidePlot(i,ma(j),h)||e&&g.isInsidePlot(i,h?e.x+1:e.y+e.height-1,h)))&&(e=a({x:h?g.plotWidth-j:i,y:ma(h?g.plotHeight-i:j),width:0,height:0},e),a(d,{width:k.width,height:k.height}),d.rotation?c[f?"attr":"animate"]({x:e.x+d.x+e.width/2,y:e.y+d.y+e.height/2}).attr({align:d.align}):(c.align(d,null,e),h=c.alignAttr,"justify"===n(d.overflow,"justify")?this.justifyDataLabel(c,d,h,k,e,f):n(d.crop,!0)&&(b=g.isInsidePlot(h.x,h.y)&&g.isInsidePlot(h.x+k.width,h.y+k.height)))),b||(c.attr({y:-999}),c.placed=!1)},wb.prototype.justifyDataLabel=function(a,b,c,d,e,f){var g,h,i=this.chart,j=b.align,k=b.verticalAlign;g=c.x,0>g&&("right"===j?b.align="left":b.x=-g,h=!0),g=c.x+d.width,g>i.plotWidth&&("left"===j?b.align="right":b.x=i.plotWidth-g,h=!0),g=c.y,0>g&&("bottom"===k?b.verticalAlign="top":b.y=-g,h=!0),g=c.y+d.height,g>i.plotHeight&&("top"===k?b.verticalAlign="bottom":b.y=i.plotHeight-g,h=!0),h&&(a.placed=!f,a.align(b,null,e))},Qa.pie&&(Qa.pie.prototype.drawDataLabels=function(){var a,b,c,d,e,f,g,h,i,j,k,l=this,m=l.data,o=l.chart,p=l.options.dataLabels,q=n(p.connectorPadding,10),r=n(p.connectorWidth,1),s=o.plotWidth,t=o.plotHeight,u=n(p.softConnector,!0),v=p.distance,w=l.center,x=w[2]/2,y=w[1],A=v>0,B=[[],[]],C=[0,0,0,0],D=function(a,b){return b.y-a.y};if(l.visible&&(p.enabled||l._hasPointLabels)){for(wb.prototype.drawDataLabels.apply(l),Wa(m,function(a){a.dataLabel&&a.visible&&B[a.half].push(a)}),j=2;j--;){var E,F=[],G=[],H=B[j],I=H.length;if(I){for(l.sortByAngle(H,j-.5),k=m=0;!m&&H[k];)m=H[k]&&H[k].dataLabel&&(H[k].dataLabel.getBBox().height||21),k++;if(v>0){for(e=qa(y+x+v,o.plotHeight),k=pa(0,y-x-v);e>=k;k+=m)F.push(k);if(e=F.length,I>e){for(a=[].concat(H),a.sort(D),k=I;k--;)a[k].rank=k;for(k=I;k--;)H[k].rank>=e&&H.splice(k,1);I=H.length}for(k=0;I>k;k++){a=H[k],f=a.labelPos,a=9999;var J,K;for(K=0;e>K;K++)J=ra(F[K]-f[1]),a>J&&(a=J,E=K);if(k>E&&null!==F[k])E=k;else for(I-k+E>e&&null!==F[k]&&(E=e-I+k);null===F[E];)E++;G.push({i:E,y:F[E]}),F[E]=null}G.sort(D)}for(k=0;I>k;k++)a=H[k],f=a.labelPos,d=a.dataLabel,i=a.visible===!1?"hidden":"visible",a=f[1],v>0?(e=G.pop(),E=e.i,h=e.y,(a>h&&null!==F[E+1]||h>a&&null!==F[E-1])&&(h=qa(pa(0,a),o.plotHeight))):h=a,g=p.justify?w[0]+(j?-1:1)*(x+v):l.getX(h===y-x-v||h===y+x+v?a:h,j),d._attr={visibility:i,align:f[6]},d._pos={x:g+p.x+({left:q,right:-q}[f[6]]||0),y:h+p.y-10},d.connX=g,d.connY=h,null===this.options.size&&(e=d.width,q>g-e?C[3]=pa(ma(e-g+q),C[3]):g+e>s-q&&(C[1]=pa(ma(g+e-s+q),C[1])),0>h-m/2?C[0]=pa(ma(-h+m/2),C[0]):h+m/2>t&&(C[2]=pa(ma(h+m/2-t),C[2])))}}(0===z(C)||this.verifyDataLabelOverflow(C))&&(this.placeDataLabels(),A&&r&&Wa(this.points,function(a){b=a.connector,f=a.labelPos,(d=a.dataLabel)&&d._pos?(i=d._attr.visibility,g=d.connX,h=d.connY,c=u?["M",g+("left"===f[6]?5:-5),h,"C",g,h,2*f[2]-f[4],2*f[3]-f[5],f[2],f[3],"L",f[4],f[5]]:["M",g+("left"===f[6]?5:-5),h,"L",f[2],f[3],"L",f[4],f[5]],b?(b.animate({d:c}),b.attr("visibility",i)):a.connector=b=l.chart.renderer.path(c).attr({"stroke-width":r,stroke:p.connectorColor||a.color||"#606060",visibility:i}).add(l.dataLabelsGroup)):b&&(a.connector=b.destroy())}))}},Qa.pie.prototype.placeDataLabels=function(){Wa(this.points,function(a){var b,a=a.dataLabel;a&&((b=a._pos)?(a.attr(a._attr),a[a.moved?"animate":"attr"](b),a.moved=!0):a&&a.attr({y:-999}))})},Qa.pie.prototype.alignDataLabel=Ja,Qa.pie.prototype.verifyDataLabelOverflow=function(a){var b,c=this.center,d=this.options,e=d.center,f=d=d.minSize||80;return null!==e[0]?f=pa(c[2]-pa(a[1],a[3]),d):(f=pa(c[2]-a[1]-a[3],d),c[0]+=(a[3]-a[1])/2),null!==e[1]?f=pa(qa(f,c[2]-pa(a[0],a[2])),d):(f=pa(qa(f,c[2]-a[0]-a[2]),d),c[1]+=(a[0]-a[2])/2),f<c[2]?(c[2]=f,this.translate(c),Wa(this.points,function(a){a.dataLabel&&(a.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):b=!0,b}),Qa.column&&(Qa.column.prototype.alignDataLabel=function(a,c,d,e,f){var g=this.chart,h=g.inverted,i=a.dlBox||a.shapeArgs,j=a.below||a.plotY>n(this.translatedThreshold,g.plotSizeY),k=n(d.inside,!!this.options.stacking);i&&(e=b(i),h&&(e={x:g.plotWidth-e.y-e.height,y:g.plotHeight-e.x-e.width,width:e.height,height:e.width}),!k)&&(h?(e.x+=j?0:e.width,e.width=0):(e.y+=j?e.height:0,e.height=0)),d.align=n(d.align,!h||k?"center":j?"right":"left"),d.verticalAlign=n(d.verticalAlign,h||k?"middle":j?"top":"bottom"),wb.prototype.alignDataLabel.call(this,a,c,d,e,f)});var zb=ia.TrackerMixin={drawTrackerPoint:function(){var a=this,b=a.chart,c=b.pointer,d=a.options.cursor,e=d&&{cursor:d},f=function(c){var d,e=c.target;for(b.hoverSeries!==a&&a.onMouseOver();e&&!d;)d=e.point,e=e.parentNode;d!==M&&d!==b.hoverPoint&&d.onMouseOver(c)};Wa(a.points,function(a){a.graphic&&(a.graphic.element.point=a),a.dataLabel&&(a.dataLabel.element.point=a)}),a._hasTracking||(Wa(a.trackerGroups,function(b){a[b]&&(a[b].addClass("highcharts-tracker").on("mouseover",f).on("mouseout",function(a){c.onTrackerMouseOut(a)}).css(e),O)&&a[b].on("touchstart",f)}),a._hasTracking=!0)},drawTrackerGraph:function(){var a,b=this,c=b.options,d=c.trackByArea,e=[].concat(d?b.areaPath:b.graphPath),f=e.length,g=b.chart,h=g.pointer,i=g.renderer,j=g.options.tooltip.snap,k=b.tracker,l=c.cursor,m=l&&{cursor:l},l=b.singlePoints,n=function(){g.hoverSeries!==b&&b.onMouseOver()},o="rgba(192,192,192,"+(Ea?1e-4:.002)+")";if(f&&!d)for(a=f+1;a--;)"M"===e[a]&&e.splice(a+1,0,e[a+1]-j,e[a+2],"L"),(a&&"M"===e[a]||a===f)&&e.splice(a,0,"L",e[a-2]+j,e[a-1]);for(a=0;a<l.length;a++)f=l[a],e.push("M",f.plotX-j,f.plotY,"L",f.plotX+j,f.plotY);k?k.attr({d:e}):(b.tracker=i.path(e).attr({"stroke-linejoin":"round",visibility:b.visible?"visible":"hidden",stroke:o,fill:d?o:Na,"stroke-width":c.lineWidth+(d?0:2*j),zIndex:2}).add(b.group),Wa([b.tracker,b.markerGroup],function(a){a.addClass("highcharts-tracker").on("mouseover",n).on("mouseout",function(a){h.onTrackerMouseOut(a)}).css(m),O&&a.on("touchstart",n)}))}};Qa.column&&(xb.prototype.drawTracker=zb.drawTrackerPoint),Qa.pie&&(Qa.pie.prototype.drawTracker=zb.drawTrackerPoint),Qa.scatter&&(yb.prototype.drawTracker=zb.drawTrackerPoint),a(ub.prototype,{setItemEvents:function(a,b,c,d,e){var f=this;(c?b:a.legendGroup).on("mouseover",function(){a.setState("hover"),b.css(f.options.itemHoverStyle)}).on("mouseout",function(){b.css(a.visible?d:e),a.setState()}).on("click",function(b){var c=function(){a.setVisible()},b={browserEvent:b};a.firePointEvent?a.firePointEvent("legendItemClick",b,c):ab(a,"legendItemClick",b,c)})},createCheckboxForItem:function(a){a.checkbox=p("input",{type:"checkbox",checked:a.selected,defaultChecked:a.selected},this.options.itemCheckboxStyle,this.chart.container),$a(a.checkbox,"click",function(b){ab(a,"checkboxClick",{checked:b.target.checked},function(){a.select()})})}}),Q.legend.itemStyle.cursor="pointer",a(I.prototype,{showResetZoom:function(){var a=this,b=Q.lang,c=a.options.chart.resetZoomButton,d=c.theme,e=d.states,f="chart"===c.relativeTo?null:"plotBox";this.resetZoomButton=a.renderer.button(b.resetZoom,null,null,function(){a.zoomOut()},d,e&&e.hover).attr({align:c.position.align,title:b.resetZoomTitle}).add().align(c.position,!1,f)},zoomOut:function(){var a=this;ab(a,"selection",{resetSelection:!0},function(){a.zoom()})},zoom:function(a){var b,c,d=this.pointer,f=!1;!a||a.resetSelection?Wa(this.axes,function(a){b=a.zoom()}):Wa(a.xAxis.concat(a.yAxis),function(a){var c=a.axis,e=c.isXAxis;(d[e?"zoomX":"zoomY"]||d[e?"pinchX":"pinchY"])&&(b=c.zoom(a.min,a.max),c.displayBtn&&(f=!0))}),c=this.resetZoomButton,f&&!c?this.showResetZoom():!f&&e(c)&&(this.resetZoomButton=c.destroy()),b&&this.redraw(n(this.options.chart.animation,a&&a.animation,this.pointCount<100))},pan:function(a,b){var c,d=this,e=d.hoverPoints;e&&Wa(e,function(a){a.setState()}),Wa("xy"===b?[1,0]:[1],function(b){var e=a[b?"chartX":"chartY"],f=d[b?"xAxis":"yAxis"][0],g=d[b?"mouseDownX":"mouseDownY"],h=(f.pointRange||0)/2,i=f.getExtremes(),j=f.toValue(g-e,!0)+h,g=f.toValue(g+d[b?"plotWidth":"plotHeight"]-e,!0)-h;f.series.length&&j>qa(i.dataMin,i.min)&&g<pa(i.dataMax,i.max)&&(f.setExtremes(j,g,!1,!1,{trigger:"pan"}),c=!0),d[b?"mouseDownX":"mouseDownY"]=e}),c&&d.redraw(!1),o(d.container,{cursor:"move"})}}),a(vb.prototype,{select:function(a,b){var c=this,d=c.series,e=d.chart,a=n(a,!c.selected);c.firePointEvent(a?"select":"unselect",{accumulate:b},function(){c.selected=c.options.selected=a,d.options.data[Va(c,d.data)]=c.options,c.setState(a&&"select"),b||Wa(e.getSelectedPoints(),function(a){a.selected&&a!==c&&(a.selected=a.options.selected=!1,d.options.data[Va(a,d.data)]=a.options,a.setState(""),a.firePointEvent("unselect"))})})},onMouseOver:function(a){var b=this.series,c=b.chart,d=c.tooltip,e=c.hoverPoint;e&&e!==this&&e.onMouseOut(),this.firePointEvent("mouseOver"),d&&(!d.shared||b.noSharedTooltip)&&d.refresh(this,a),this.setState("hover"),c.hoverPoint=this},onMouseOut:function(){var a=this.series.chart,b=a.hoverPoints;this.firePointEvent("mouseOut"),b&&-1!==Va(this,b)||(this.setState(),a.hoverPoint=null)},importEvents:function(){if(!this.hasImportedEvents){var a,c=b(this.series.options.point,this.options).events;this.events=c;for(a in c)$a(this,a,c[a]);this.hasImportedEvents=!0}},setState:function(c,d){var e,f=this.plotX,g=this.plotY,h=this.series,i=h.options.states,j=eb[h.type].marker&&h.options.marker,k=j&&!j.enabled,l=j&&j.states[c],m=l&&l.enabled===!1,n=h.stateMarkerGraphic,o=this.marker||{},p=h.chart,q=h.halo,c=c||"";e=this.pointAttr[c]||h.pointAttr[c],c===this.state&&!d||this.selected&&"select"!==c||i[c]&&i[c].enabled===!1||c&&(m||k&&l.enabled===!1)||c&&o.states&&o.states[c]&&o.states[c].enabled===!1||(this.graphic?(j=j&&this.graphic.symbolName&&e.r,this.graphic.attr(b(e,j?{x:f-j,y:g-j,width:2*j,height:2*j}:{})),n&&n.hide()):(c&&l&&(j=l.radius,o=o.symbol||h.symbol,n&&n.currentSymbol!==o&&(n=n.destroy()),n?n[d?"animate":"attr"]({x:f-j,y:g-j}):o&&(h.stateMarkerGraphic=n=p.renderer.symbol(o,f-j,g-j,2*j,2*j).attr(e).add(h.markerGroup),n.currentSymbol=o)),n&&n[c&&p.isInsidePlot(f,g,p.inverted)?"show":"hide"]()),(f=i[c]&&i[c].halo)&&f.size?(q||(h.halo=q=p.renderer.path().add(h.seriesGroup)),q.attr(a({fill:ib(this.color||h.color).setOpacity(f.opacity).get()},f.attributes))[d?"animate":"attr"]({d:this.haloPath(f.size)})):q&&q.attr({d:[]}),this.state=c)},haloPath:function(a){var b=this.series,c=b.chart,d=b.getPlotBox(),e=c.inverted;return c.renderer.symbols.circle(d.translateX+(e?b.yAxis.len-this.plotY:this.plotX)-a,d.translateY+(e?b.xAxis.len-this.plotX:this.plotY)-a,2*a,2*a)}}),a(wb.prototype,{onMouseOver:function(){var a=this.chart,b=a.hoverSeries;b&&b!==this&&b.onMouseOut(),this.options.events.mouseOver&&ab(this,"mouseOver"),this.setState("hover"),a.hoverSeries=this},onMouseOut:function(){var a=this.options,b=this.chart,c=b.tooltip,d=b.hoverPoint;d&&d.onMouseOut(),this&&a.events.mouseOut&&ab(this,"mouseOut"),c&&!a.stickyTracking&&(!c.shared||this.noSharedTooltip)&&c.hide(),this.setState(),b.hoverSeries=null},setState:function(a){var b=this.options,c=this.graph,d=this.graphNeg,e=b.states,b=b.lineWidth,a=a||"";this.state!==a&&(this.state=a,e[a]&&e[a].enabled===!1||(a&&(b=e[a].lineWidth||b+(e[a].lineWidthPlus||0)),c&&!c.dashstyle&&(a={"stroke-width":b},c.attr(a),d&&d.attr(a))))},setVisible:function(a,b){var c,d=this,e=d.chart,f=d.legendItem,g=e.options.chart.ignoreHiddenSeries,h=d.visible;c=(d.visible=a=d.userOptions.visible=a===M?!h:a)?"show":"hide",Wa(["group","dataLabelsGroup","markerGroup","tracker"],function(a){d[a]&&d[a][c]()}),e.hoverSeries===d&&d.onMouseOut(),f&&e.legend.colorizeItem(d,a),d.isDirty=!0,d.options.stacking&&Wa(e.series,function(a){a.options.stacking&&a.visible&&(a.isDirty=!0)}),Wa(d.linkedSeries,function(b){b.setVisible(a,!1)}),g&&(e.isDirtyBox=!0),b!==!1&&e.redraw(),ab(d,c)},setTooltipPoints:function(a){var b,c,d,e,f=[],g=this.xAxis,h=g&&g.getExtremes(),i=g?g.tooltipLen||g.len:this.chart.plotSizeX,j=[];if(this.options.enableMouseTracking!==!1&&!this.singularTooltips){for(a&&(this.tooltipPoints=null),Wa(this.segments||this.points,function(a){f=f.concat(a)}),g&&g.reversed&&(f=f.reverse()),this.orderTooltipPoints&&this.orderTooltipPoints(f),a=f.length,e=0;a>e;e++)if(g=f[e],b=g.x,b>=h.min&&b<=h.max)for(d=f[e+1],b=c===M?0:c+1,c=f[e+1]?qa(pa(0,na((g.clientX+(d?d.wrappedClientX||d.clientX:i))/2)),i):i;b>=0&&c>=b;)j[b++]=g;this.tooltipPoints=j}},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(a){this.selected=a=a===M?!this.selected:a,this.checkbox&&(this.checkbox.checked=a),ab(this,a?"select":"unselect")},drawTracker:zb.drawTrackerGraph}),t(wb.prototype,"init",function(a){var b;a.apply(this,Array.prototype.slice.call(arguments,1)),(b=this.xAxis)&&b.options.ordinal&&$a(this,"updatedData",function(){delete b.ordinalIndex})}),t(H.prototype,"getTimeTicks",function(a,b,c,d,e,f,g,h){var i,j,l,m,n=0,o=0,p={},q=[],r=-Number.MAX_VALUE,s=this.options.tickPixelInterval;if(!this.options.ordinal||!f||f.length<3||c===M)return a.call(this,b,c,d,e);for(l=f.length;l>o;o++){if(m=o&&f[o-1]>d,f[o]<c&&(n=o),o===l-1||f[o+1]-f[o]>5*g||m){if(f[o]>r){for(i=a.call(this,b,f[n],f[o],e);i.length&&i[0]<=r;)i.shift();i.length&&(r=i[i.length-1]),q=q.concat(i)}n=o+1}if(m)break}if(a=i.info,h&&a.unitRange<=U.hour){for(o=q.length-1,n=1;o>n;n++)new W(q[n]-Y)[aa]()!==new W(q[n-1]-Y)[aa]()&&(p[q[n]]="day",j=!0);j&&(p[q[0]]="day"),a.higherRanks=p}if(q.info=a,h&&k(s)){var t,h=a=q.length,o=[];for(j=[];h--;)n=this.translate(q[h]),t&&(j[h]=t-n),o[h]=t=n;for(j.sort(),j=j[na(j.length/2)],.6*s>j&&(j=null),h=q[a-1]>d?a-1:a,t=void 0;h--;)n=o[h],d=t-n,t&&.8*s>d&&(null===j||.8*j>d)?(p[q[h]]&&!p[q[h+1]]?(d=h+1,t=n):d=h,q.splice(d,1)):t=n}return q}),a(H.prototype,{beforeSetTickPositions:function(){var a,b,c,d=[],e=!1,f=this.getExtremes(),g=f.min,f=f.max;if(this.options.ordinal){if(Wa(this.series,function(b,c){if(b.visible!==!1&&b.takeOrdinalPosition!==!1&&(d=d.concat(b.processedXData),a=d.length,d.sort(function(a,b){return a-b}),a))for(c=a-1;c--;)d[c]===d[c+1]&&d.splice(c,1)}),a=d.length,a>2){for(b=d[1]-d[0],c=a-1;c--&&!e;)d[c+1]-d[c]!==b&&(e=!0);!this.options.keepOrdinalPadding&&(d[0]-g>b||f-d[d.length-1]>b)&&(e=!0)}e?(this.ordinalPositions=d,e=this.val2lin(pa(g,d[0]),!0),b=pa(this.val2lin(qa(f,d[d.length-1]),!0),1),this.ordinalSlope=f=(f-g)/(b-e),this.ordinalOffset=g-e*f):this.ordinalPositions=this.ordinalSlope=this.ordinalOffset=M}this.groupIntervalFactor=null},val2lin:function(a,b){var c=this.ordinalPositions;if(c){var d,e,f=c.length;for(d=f;d--;)if(c[d]===a){e=d;break}for(d=f-1;d--;)if(a>c[d]||0===d){c=(a-c[d])/(c[d+1]-c[d]),e=d+c;break}return b?e:this.ordinalSlope*(e||0)+this.ordinalOffset}return a},lin2val:function(a,b){var c=this.ordinalPositions;if(c){var d,e,f=this.ordinalSlope,g=this.ordinalOffset,h=c.length-1;if(b)0>a?a=c[0]:a>h?a=c[h]:(h=na(a),e=a-h);else for(;h--;)if(d=f*h+g,a>=d){f=f*(h+1)+g,e=(a-d)/(f-d);break}return e!==M&&c[h]!==M?c[h]+(e?e*(c[h+1]-c[h]):0):a}return a},getExtendedPositions:function(){var a,b,c=this.chart,d=this.series[0].currentDataGrouping,e=this.ordinalIndex,f=d?d.count+d.unitName:"raw",g=this.getExtremes();return e||(e=this.ordinalIndex={}),e[f]||(a={series:[],getExtremes:function(){return{min:g.dataMin,max:g.dataMax}},options:{ordinal:!0},val2lin:H.prototype.val2lin},Wa(this.series,function(e){b={xAxis:a,xData:e.xData,chart:c,destroyGroupedData:Ja},b.options={dataGrouping:d?{enabled:!0,forced:!0,approximation:"open",units:[[d.unitName,[d.count]]]}:{enabled:!1}},e.processData.apply(b),a.series.push(b)}),this.beforeSetTickPositions.apply(a),e[f]=a.ordinalPositions),e[f]},getGroupIntervalFactor:function(a,b,c){var d=0,c=c.processedXData,e=c.length,f=[],g=this.groupIntervalFactor;if(!g){for(;e-1>d;d++)f[d]=c[d+1]-c[d];f.sort(function(a,b){return a-b}),d=f[na(e/2)],a=pa(a,c[0]),b=qa(b,c[e-1]),this.groupIntervalFactor=g=e*d/(b-a)}return g},postProcessTickInterval:function(a){var b=this.ordinalSlope;return b?a/(b/this.closestPointRange):a}}),t(I.prototype,"pan",function(a,b){var c=this.xAxis[0],d=b.chartX,e=!1;if(c.options.ordinal&&c.series.length){var f,g=this.mouseDownX,h=c.getExtremes(),i=h.dataMax,j=h.min,k=h.max,l=this.hoverPoints,m=c.closestPointRange,g=(g-d)/(c.translationSlope*(c.ordinalSlope||m)),n={ordinalPositions:c.getExtendedPositions()},m=c.lin2val,p=c.val2lin;n.ordinalPositions?ra(g)>1&&(l&&Wa(l,function(a){a.setState()}),0>g?(l=n,f=c.ordinalPositions?c:n):(l=c.ordinalPositions?c:n,f=n),n=f.ordinalPositions,i>n[n.length-1]&&n.push(i),this.fixedRange=k-j,g=c.toFixedRange(null,null,m.apply(l,[p.apply(l,[j,!0])+g,!0]),m.apply(f,[p.apply(f,[k,!0])+g,!0])),g.min>=qa(h.dataMin,j)&&g.max<=pa(i,k)&&c.setExtremes(g.min,g.max,!0,!1,{trigger:"pan"}),this.mouseDownX=d,o(this.container,{cursor:"move"})):e=!0}else e=!0;e&&a.apply(this,Array.prototype.slice.call(arguments,1))}),t(wb.prototype,"getSegments",function(a){var b,c=this.options.gapSize,d=this.xAxis;a.apply(this,Array.prototype.slice.call(arguments,1)),c&&(b=this.segments,Wa(b,function(a,e){for(var f=a.length-1;f--;)a[f+1].x-a[f].x>d.closestPointRange*c&&b.splice(e+1,0,a.splice(f+1,a.length-f))}))});var Ab=wb.prototype,Ra=nb.prototype,Bb=Ab.processData,Cb=Ab.generatePoints,Db=Ab.destroy,Eb=Ra.tooltipHeaderFormatter,Fb={approximation:"average",groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],minute:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],hour:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],day:["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],week:["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},Gb={line:{},spline:{},area:{},areaspline:{},column:{approximation:"sum",groupPixelWidth:10},arearange:{approximation:"range"},areasplinerange:{approximation:"range"},columnrange:{approximation:"range",groupPixelWidth:10},candlestick:{approximation:"ohlc",groupPixelWidth:10},ohlc:{approximation:"ohlc",groupPixelWidth:5}},Hb=[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]],Ib={sum:function(a){var b,c=a.length;if(!c&&a.hasNulls)b=null;else if(c)for(b=0;c--;)b+=a[c];return b},average:function(a){var b=a.length,a=Ib.sum(a);return"number"==typeof a&&b&&(a/=b),a},open:function(a){return a.length?a[0]:a.hasNulls?null:M},high:function(a){return a.length?z(a):a.hasNulls?null:M},low:function(a){return a.length?y(a):a.hasNulls?null:M},close:function(a){return a.length?a[a.length-1]:a.hasNulls?null:M},ohlc:function(a,b,c,d){return a=Ib.open(a),b=Ib.high(b),c=Ib.low(c),d=Ib.close(d),"number"==typeof a||"number"==typeof b||"number"==typeof c||"number"==typeof d?[a,b,c,d]:void 0},range:function(a,b){return a=Ib.low(a),b=Ib.high(b),"number"==typeof a||"number"==typeof b?[a,b]:void 0}};Ab.groupData=function(a,b,c,d){var e,f,g,h=this.data,i=this.options.data,j=[],k=[],l=a.length,m=!!b,n=[[],[],[],[]],d="function"==typeof d?d:Ib[d],o=this.pointArrayMap,p=o&&o.length;for(g=0;l>=g&&!(a[g]>=c[0]);g++);for(;l>=g;g++){for(;(c[1]!==M&&a[g]>=c[1]||g===l)&&(e=c.shift(),f=d.apply(0,n),f!==M&&(j.push(e),k.push(f)),n[0]=[],n[1]=[],n[2]=[],n[3]=[],g!==l););if(g===l)break;if(o){e=this.cropStart+g,e=h&&h[e]||this.pointClass.prototype.applyOptions.apply({series:this},[i[e]]);var q;for(f=0;p>f;f++)q=e[o[f]],"number"==typeof q?n[f].push(q):null===q&&(n[f].hasNulls=!0)}else e=m?b[g]:null,"number"==typeof e?n[0].push(e):null===e&&(n[0].hasNulls=!0)}return[j,k]},Ab.processData=function(){var a,b=this.chart,c=this.options,d=c.dataGrouping,e=this.allowDG!==!1&&d&&n(d.enabled,b.options._stock);if(this.forceCrop=e,this.groupPixelWidth=null,this.hasProcessed=!0,Bb.apply(this,arguments)!==!1&&e){this.destroyGroupedData();var f=this.processedXData,g=this.processedYData,h=b.plotSizeX,b=this.xAxis,i=b.options.ordinal,j=this.groupPixelWidth=b.getGroupPixelWidth&&b.getGroupPixelWidth(),e=this.pointRange;if(j){a=!0,this.points=null;var l=b.getExtremes(),e=l.min,l=l.max,i=i&&b.getGroupIntervalFactor(e,l,this)||1,h=j*(l-e)/h*i,j=b.getTimeTicks(b.normalizeTimeTickInterval(h,d.units||Hb),e,l,b.options.startOfWeek,f,this.closestPointRange),g=Ab.groupData.apply(this,[f,g,j,d.approximation]),f=g[0],g=g[1];if(d.smoothed){for(d=f.length-1,f[d]=l;d--&&d>0;)f[d]+=h/2;f[0]=e}this.currentDataGrouping=j.info,null===c.pointRange&&(this.pointRange=j.info.totalRange),this.closestPointRange=j.info.totalRange,k(f[0])&&f[0]<b.dataMin&&(b.dataMin=f[0]),this.processedXData=f,this.processedYData=g}else this.currentDataGrouping=null,this.pointRange=e;this.hasGroupedData=a}},Ab.destroyGroupedData=function(){var a=this.groupedData;Wa(a||[],function(b,c){b&&(a[c]=b.destroy?b.destroy():null)}),this.groupedData=null},Ab.generatePoints=function(){Cb.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null},Ra.tooltipHeaderFormatter=function(a){var b,c,d=a.series,e=d.tooltipOptions,f=d.options.dataGrouping,h=e.xDateFormat,i=d.xAxis;if(i&&"datetime"===i.options.type&&f&&g(a.key)){if(d=d.currentDataGrouping,f=f.dateTimeLabelFormats,d)i=f[d.unitName],1===d.count?h=i[0]:(h=i[1],b=i[2]);else if(!h&&f)for(c in U)if(U[c]>=i.closestPointRange||U[c]<=U.day&&a.key%U[c]>0){h=f[c][0];break}h=R(h,a.key),b&&(h+=R(b,a.key+d.totalRange-1)),a=e.headerFormat.replace("{point.key}",h)}else a=Eb.call(this,a);return a},Ab.destroy=function(){for(var a=this.groupedData||[],b=a.length;b--;)a[b]&&a[b].destroy();Db.apply(this)},t(Ab,"setOptions",function(a,c){var d=a.call(this,c),e=this.type,f=this.chart.options.plotOptions,g=eb[e].dataGrouping;return Gb[e]&&(g||(g=b(Fb,Gb[e])),d.dataGrouping=b(g,f.series&&f.series.dataGrouping,f[e].dataGrouping,c.dataGrouping)),this.chart.options._stock&&(this.requireSorting=!0),d}),t(H.prototype,"setScale",function(a){a.call(this),Wa(this.series,function(a){a.hasProcessed=!1})}),H.prototype.getGroupPixelWidth=function(){var a,b,c=this.series,d=c.length,e=0,f=!1;for(a=d;a--;)(b=c[a].options.dataGrouping)&&(e=pa(e,b.groupPixelWidth));for(a=d;a--;)(b=c[a].options.dataGrouping)&&c[a].hasProcessed&&(d=(c[a].processedXData||c[a].data).length,(c[a].groupPixelWidth||d>this.chart.plotSizeX/e||d&&b.forced)&&(f=!0));return f?e:0},eb.ohlc=b(eb.column,{lineWidth:1,tooltip:{pointFormat:'<span style="color:{series.color}">●</span> <b> {series.name}</b><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},states:{hover:{lineWidth:3}},threshold:null}),Ra=q(Qa.column,{type:"ohlc",pointArrayMap:["open","high","low","close"],toYData:function(a){return[a.open,a.high,a.low,a.close]},pointValKey:"high",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},upColorProp:"stroke",getAttribs:function(){Qa.column.prototype.getAttribs.apply(this,arguments);var a=this.options,c=a.states,a=a.upColor||this.color,d=b(this.pointAttr),e=this.upColorProp;d[""][e]=a,d.hover[e]=c.hover.upColor||a,d.select[e]=c.select.upColor||a,Wa(this.points,function(a){a.open<a.close&&(a.pointAttr=d)})},translate:function(){var a=this.yAxis;Qa.column.prototype.translate.apply(this),Wa(this.points,function(b){null!==b.open&&(b.plotOpen=a.translate(b.open,0,1,0,1)),null!==b.close&&(b.plotClose=a.translate(b.close,0,1,0,1))})},drawPoints:function(){var a,b,c,d,e,f,g,h,i=this,j=i.chart;Wa(i.points,function(k){k.plotY!==M&&(g=k.graphic,a=k.pointAttr[k.selected?"selected":""]||i.pointAttr[""],d=a["stroke-width"]%2/2,h=ma(k.plotX)-d,e=ma(k.shapeArgs.width/2),f=["M",h,ma(k.yBottom),"L",h,ma(k.plotY)],null!==k.open&&(b=ma(k.plotOpen)+d,f.push("M",h,b,"L",h-e,b)),null!==k.close&&(c=ma(k.plotClose)+d,f.push("M",h,c,"L",h+e,c)),g?g.animate({d:f}):k.graphic=j.renderer.path(f).attr(a).add(i.group))})},animate:null}),Qa.ohlc=Ra,eb.candlestick=b(eb.column,{lineColor:"black",lineWidth:1,states:{hover:{lineWidth:2}},tooltip:eb.ohlc.tooltip,threshold:null,upColor:"white"}),Ra=q(Ra,{type:"candlestick",pointAttrToOptions:{fill:"color",stroke:"lineColor","stroke-width":"lineWidth"},upColorProp:"fill",getAttribs:function(){
Qa.ohlc.prototype.getAttribs.apply(this,arguments);var a=this.options,b=a.states,c=a.upLineColor||a.lineColor,d=b.hover.upLineColor||c,e=b.select.upLineColor||c;Wa(this.points,function(a){a.open<a.close&&(a.pointAttr[""].stroke=c,a.pointAttr.hover.stroke=d,a.pointAttr.select.stroke=e)})},drawPoints:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m=this,n=m.chart,o=m.pointAttr[""];Wa(m.points,function(p){j=p.graphic,p.plotY!==M&&(a=p.pointAttr[p.selected?"selected":""]||o,h=a["stroke-width"]%2/2,i=ma(p.plotX)-h,b=p.plotOpen,c=p.plotClose,d=la.min(b,c),e=la.max(b,c),l=ma(p.shapeArgs.width/2),f=ma(d)!==ma(p.plotY),g=e!==p.yBottom,d=ma(d)+h,e=ma(e)+h,k=["M",i-l,e,"L",i-l,d,"L",i+l,d,"L",i+l,e,"Z","M",i,d,"L",i,f?ma(p.plotY):d,"M",i,e,"L",i,g?ma(p.yBottom):e],j?j.animate({d:k}):p.graphic=n.renderer.path(k).attr(a).add(m.group).shadow(m.options.shadow))})}}),Qa.candlestick=Ra;var Jb=jb.prototype.symbols;eb.flags=b(eb.column,{fillColor:"white",lineWidth:1,pointRange:0,shape:"flag",stackDistance:12,states:{hover:{lineColor:"black",fillColor:"#FCFFC5"}},style:{fontSize:"11px",fontWeight:"bold",textAlign:"center"},tooltip:{pointFormat:"{point.text}<br/>"},threshold:null,y:-30}),Qa.flags=q(Qa.column,{type:"flags",sorted:!1,noSharedTooltip:!0,allowDG:!1,takeOrdinalPosition:!1,trackerGroups:["markerGroup"],forceCrop:!0,init:wb.prototype.init,pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth",r:"radius"},translate:function(){Qa.column.prototype.translate.apply(this);var a,b,c,d,e,f=this.chart,g=this.points,h=g.length-1,i=this.options.onSeries,i=(a=i&&f.get(i))&&a.options.step,j=a&&a.points,k=j&&j.length,l=this.xAxis,m=l.getExtremes();if(a&&a.visible&&k)for(a=a.currentDataGrouping,d=j[k-1].x+(a?a.totalRange:0),g.sort(function(a,b){return a.x-b.x});k--&&g[h]&&(a=g[h],c=j[k],!(c.x<=a.x&&c.plotY!==M&&(a.x<=d&&(a.plotY=c.plotY,c.x<a.x&&!i&&(e=j[k+1])&&e.plotY!==M&&(a.plotY+=(a.x-c.x)/(e.x-c.x)*(e.plotY-c.plotY))),h--,k++,0>h))););Wa(g,function(a,c){a.plotY===M&&(a.x>=m.min&&a.x<=m.max?a.plotY=f.chartHeight-l.bottom-(l.opposite?l.height:0)+l.offset-f.plotTop:a.shapeArgs={}),(b=g[c-1])&&b.plotX===a.plotX&&(b.stackIndex===M&&(b.stackIndex=0),a.stackIndex=b.stackIndex+1)})},drawPoints:function(){var a,c,d,e,f,g,h,i,j,k=this.pointAttr[""],l=this.points,m=this.chart.renderer,n=this.options,o=n.y,p=n.lineWidth%2/2;for(f=l.length;f--;)g=l[f],a=g.plotX>this.xAxis.len,c=g.plotX+(a?p:-p),h=g.stackIndex,e=g.options.shape||n.shape,d=g.plotY,d!==M&&(d=g.plotY+o+p-(h!==M&&h*n.stackDistance)),i=h?M:g.plotX+p,j=h?M:g.plotY,h=g.graphic,d!==M&&c>=0&&!a?(a=g.pointAttr[g.selected?"select":""]||k,h?h.attr({x:c,y:d,r:a.r,anchorX:i,anchorY:j}):g.graphic=m.label(g.options.title||n.title||"A",c,d,e,i,j,n.useHTML).css(b(n.style,g.style)).attr(a).attr({align:"flag"===e?"left":"center",width:n.width,height:n.height}).add(this.markerGroup).shadow(n.shadow),g.tooltipPos=[c,d]):h&&(g.graphic=h.destroy())},drawTracker:function(){var a=this.points;zb.drawTrackerPoint.apply(this),Wa(a,function(b){var c=b.graphic;c&&$a(c.element,"mouseover",function(){b.stackIndex>0&&!b.raised&&(b._y=c.y,c.attr({y:b._y-8}),b.raised=!0),Wa(a,function(a){a!==b&&a.raised&&a.graphic&&(a.graphic.attr({y:a._y}),a.raised=!1)})})})},animate:Ja}),Jb.flag=function(a,b,c,d,e){var f=e&&e.anchorX||a,e=e&&e.anchorY||b;return["M",f,e,"L",a,b+d,a,b,a+c,b,a+c,b+d,a,b+d,"M",f,e,"Z"]},Wa(["circle","square"],function(a){Jb[a+"pin"]=function(b,c,d,e,f){var g=f&&f.anchorX,f=f&&f.anchorY,b=Jb[a](b,c,d,e);return g&&f&&b.push("M",g,c>f?c:c+e,"L",g,f),b}}),N===ia.VMLRenderer&&Wa(["flag","circlepin","squarepin"],function(a){kb.prototype.symbols[a]=Jb[a]});var Ra=[].concat(Hb),Kb=function(a){return Math[a].apply(0,Xa(arguments,function(a){return"number"==typeof a}))};Ra[4]=["day",[1,2,3,4]],Ra[5]=["week",[1,2,3]],a(Q,{navigator:{handles:{backgroundColor:"#ebe7e8",borderColor:"#b2b1b6"},height:40,margin:25,maskFill:"rgba(128,179,236,0.3)",maskInside:!0,outlineColor:"#b2b1b6",outlineWidth:1,series:{type:Qa.areaspline===M?"line":"areaspline",color:"#4572A7",compare:null,fillOpacity:.05,dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,smoothed:!0,units:Ra},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",lineColor:"#4572A7",lineWidth:1,marker:{enabled:!1},pointRange:0,shadow:!1,threshold:null},xAxis:{tickWidth:0,lineWidth:0,gridLineColor:"#EEE",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#888"},x:3,y:-4},crosshair:!1},yAxis:{gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickWidth:0}},scrollbar:{height:Ca?20:14,barBackgroundColor:"#bfc8d1",barBorderRadius:0,barBorderWidth:1,barBorderColor:"#bfc8d1",buttonArrowColor:"#666",buttonBackgroundColor:"#ebe7e8",buttonBorderColor:"#bbb",buttonBorderRadius:0,buttonBorderWidth:1,minWidth:6,rifleColor:"#666",trackBackgroundColor:"#eeeeee",trackBorderColor:"#eeeeee",trackBorderWidth:1,liveRedraw:Ea&&!Ca}}),K.prototype={drawHandle:function(a,b){var c,d=this.chart,e=d.renderer,f=this.elementsToDestroy,g=this.handles,h=this.navigatorOptions.handles,h={fill:h.backgroundColor,stroke:h.borderColor,"stroke-width":1};this.rendered||(g[b]=e.g("navigator-handle-"+["left","right"][b]).css({cursor:"e-resize"}).attr({zIndex:4-b}).add(),c=e.rect(-4.5,0,9,16,0,1).attr(h).add(g[b]),f.push(c),c=e.path(["M",-1.5,4,"L",-1.5,12,"M",.5,4,"L",.5,12]).attr(h).add(g[b]),f.push(c)),g[b][d.isResizing?"animate":"attr"]({translateX:this.scrollerLeft+this.scrollbarHeight+parseInt(a,10),translateY:this.top+this.height/2-8})},drawScrollbarButton:function(a){var b,c=this.chart.renderer,d=this.elementsToDestroy,e=this.scrollbarButtons,f=this.scrollbarHeight,g=this.scrollbarOptions;this.rendered||(e[a]=c.g().add(this.scrollbarGroup),b=c.rect(-.5,-.5,f+1,f+1,g.buttonBorderRadius,g.buttonBorderWidth).attr({stroke:g.buttonBorderColor,"stroke-width":g.buttonBorderWidth,fill:g.buttonBackgroundColor}).add(e[a]),d.push(b),b=c.path(["M",f/2+(a?-1:1),f/2-3,"L",f/2+(a?-1:1),f/2+3,f/2+(a?2:-2),f/2]).attr({fill:g.buttonArrowColor}).add(e[a]),d.push(b)),a&&e[a].attr({translateX:this.scrollerWidth-f})},render:function(a,b,c,d){var e,f,g,h,i,j=this.chart,k=j.renderer,l=this.scrollbarGroup,m=this.navigatorGroup,o=this.scrollbar,m=this.xAxis,p=this.scrollbarTrack,q=this.scrollbarHeight,r=this.scrollbarEnabled,s=this.navigatorOptions,t=this.scrollbarOptions,u=t.minWidth,v=this.height,w=this.top,x=this.navigatorEnabled,y=s.outlineWidth,z=y/2,A=0,B=this.outlineHeight,C=t.barBorderRadius,D=t.barBorderWidth,E=w+z;isNaN(a)||(this.navigatorLeft=e=n(m.left,j.plotLeft+q),this.navigatorWidth=f=n(m.len,j.plotWidth-2*q),this.scrollerLeft=g=e-q,this.scrollerWidth=h=h=f+2*q,m.getExtremes&&(i=this.getUnionExtremes(!0))&&(i.dataMin!==m.min||i.dataMax!==m.max)&&m.setExtremes(i.dataMin,i.dataMax,!0,!1),c=n(c,m.translate(a)),d=n(d,m.translate(b)),(isNaN(c)||ra(c)===1/0)&&(c=0,d=h),m.translate(d,!0)-m.translate(c,!0)<j.xAxis[0].minRange||(this.zoomedMax=qa(pa(c,d),f),this.zoomedMin=pa(this.fixedWidth?this.zoomedMax-this.fixedWidth:qa(c,d),0),this.range=this.zoomedMax-this.zoomedMin,c=ma(this.zoomedMax),b=ma(this.zoomedMin),a=c-b,this.rendered||(x&&(this.navigatorGroup=m=k.g("navigator").attr({zIndex:3}).add(),this.leftShade=k.rect().attr({fill:s.maskFill}).add(m),s.maskInside||(this.rightShade=k.rect().attr({fill:s.maskFill}).add(m)),this.outline=k.path().attr({"stroke-width":y,stroke:s.outlineColor}).add(m)),r&&(this.scrollbarGroup=l=k.g("scrollbar").add(),o=t.trackBorderWidth,this.scrollbarTrack=p=k.rect().attr({x:0,y:-o%2/2,fill:t.trackBackgroundColor,stroke:t.trackBorderColor,"stroke-width":o,r:t.trackBorderRadius||0,height:q}).add(l),this.scrollbar=o=k.rect().attr({y:-D%2/2,height:q,fill:t.barBackgroundColor,stroke:t.barBorderColor,"stroke-width":D,r:C}).add(l),this.scrollbarRifles=k.path().attr({stroke:t.rifleColor,"stroke-width":1}).add(l))),j=j.isResizing?"animate":"attr",x&&(this.leftShade[j](s.maskInside?{x:e+b,y:w,width:c-b,height:v}:{x:e,y:w,width:b,height:v}),this.rightShade&&this.rightShade[j]({x:e+c,y:w,width:f-c,height:v}),this.outline[j]({d:["M",g,E,"L",e+b+z,E,e+b+z,E+B,"L",e+c-z,E+B,"L",e+c-z,E,g+h,E].concat(s.maskInside?["M",e+b+z,E,"L",e+c-z,E]:[])}),this.drawHandle(b+z,0),this.drawHandle(c+z,1)),r&&l&&(this.drawScrollbarButton(0),this.drawScrollbarButton(1),l[j]({translateX:g,translateY:ma(E+v)}),p[j]({width:h}),e=q+b,f=a-D,u>f&&(A=(u-f)/2,f=u,e-=A),this.scrollbarPad=A,o[j]({x:na(e)+D%2/2,width:f}),u=q+b+a/2-.5,this.scrollbarRifles.attr({visibility:a>12?"visible":"hidden"})[j]({d:["M",u-3,q/4,"L",u-3,2*q/3,"M",u,q/4,"L",u,2*q/3,"M",u+3,q/4,"L",u+3,2*q/3]})),this.scrollbarPad=A,this.rendered=!0))},addEvents:function(){var a,b=this.chart.container,c=this.mouseDownHandler,d=this.mouseMoveHandler,e=this.mouseUpHandler;a=[[b,"mousedown",c],[b,"mousemove",d],[document,"mouseup",e]],O&&a.push([b,"touchstart",c],[b,"touchmove",d],[document,"touchend",e]),Wa(a,function(a){$a.apply(null,a)}),this._events=a},removeEvents:function(){Wa(this._events,function(a){_a.apply(null,a)}),this._events=M,this.navigatorEnabled&&this.baseSeries&&_a(this.baseSeries,"updatedData",this.updatedDataHandler)},init:function(){var a,c,d,e,f,g=this,h=g.chart,i=g.scrollbarHeight,j=g.navigatorOptions,k=g.height,l=g.top,m=document.body.style,o=g.baseSeries;g.mouseDownHandler=function(b){var c,b=h.pointer.normalize(b),e=g.zoomedMin,i=g.zoomedMax,j=g.top,l=g.scrollbarHeight,n=g.scrollerLeft,o=g.scrollerWidth,p=g.navigatorLeft,q=g.navigatorWidth,r=g.scrollbarPad,s=g.range,t=b.chartX,u=b.chartY,b=h.xAxis[0],v=Ca?10:7;u>j&&j+k+l>u&&((j=!g.scrollbarEnabled||j+k>u)&&la.abs(t-e-p)<v?(g.grabbedLeft=!0,g.otherHandlePos=i,g.fixedExtreme=b.max,h.fixedRange=null):j&&la.abs(t-i-p)<v?(g.grabbedRight=!0,g.otherHandlePos=e,g.fixedExtreme=b.min,h.fixedRange=null):t>p+e-r&&p+i+r>t?(g.grabbedCenter=t,g.fixedWidth=s,h.renderer.isSVG&&(f=m.cursor,m.cursor="ew-resize"),d=t-e):t>n&&n+o>t&&(i=j?t-p-s/2:p>t?e-.2*s:t>n+o-l?e+.2*s:p+e>t?e-s:i,0>i?i=0:i+s>=q&&(i=q-s,c=a.dataMax),i!==e&&(g.fixedWidth=s,e=a.toFixedRange(i,i+s,null,c),b.setExtremes(e.min,e.max,!0,!1,{trigger:"navigator"}))))},g.mouseMoveHandler=function(a){var b,c=g.scrollbarHeight,f=g.navigatorLeft,i=g.navigatorWidth,j=g.scrollerLeft,k=g.scrollerWidth,l=g.range;0!==a.pageX&&(a=h.pointer.normalize(a),b=a.chartX,f>b?b=f:b>j+k-c&&(b=j+k-c),g.grabbedLeft?(e=!0,g.render(0,0,b-f,g.otherHandlePos)):g.grabbedRight?(e=!0,g.render(0,0,g.otherHandlePos,b-f)):g.grabbedCenter&&(e=!0,d>b?b=d:b>i+d-l&&(b=i+d-l),g.render(0,0,b-d,b-d+l)),e&&g.scrollbarOptions.liveRedraw&&setTimeout(function(){g.mouseUpHandler(a)},0))},g.mouseUpHandler=function(b){var c,i;e&&(g.zoomedMin===g.otherHandlePos?c=g.fixedExtreme:g.zoomedMax===g.otherHandlePos&&(i=g.fixedExtreme),c=a.toFixedRange(g.zoomedMin,g.zoomedMax,c,i),h.xAxis[0].setExtremes(c.min,c.max,!0,!1,{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:b})),"mousemove"!==b.type&&(g.grabbedLeft=g.grabbedRight=g.grabbedCenter=g.fixedWidth=g.fixedExtreme=g.otherHandlePos=e=d=null,m.cursor=f||"")};var p=h.xAxis.length,q=h.yAxis.length;h.extraBottomMargin=g.outlineHeight+j.margin,g.navigatorEnabled?(g.xAxis=a=new H(h,b({ordinal:o&&o.xAxis.options.ordinal},j.xAxis,{id:"navigator-x-axis",isX:!0,type:"datetime",index:p,height:k,offset:0,offsetLeft:i,offsetRight:-i,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1})),g.yAxis=c=new H(h,b(j.yAxis,{id:"navigator-y-axis",alignTicks:!1,height:k,offset:0,index:q,zoomEnabled:!1})),o||j.series.data?g.addBaseSeries():0===h.series.length&&t(h,"redraw",function(a,b){h.series.length>0&&!g.series&&(g.setBaseSeries(),h.redraw=a),a.call(h,b)})):g.xAxis=a={translate:function(a,b){var c=h.xAxis[0],d=c.getExtremes(),e=h.plotWidth-2*i,f=Kb("min",c.options.min,d.dataMin),c=Kb("max",c.options.max,d.dataMax)-f;return b?a*c/e+f:e*(a-f)/c},toFixedRange:H.prototype.toFixedRange},t(h,"getMargins",function(b){var d=this.legend,e=d.options;b.call(this),g.top=l=g.navigatorOptions.top||this.chartHeight-g.height-g.scrollbarHeight-this.spacing[2]-("bottom"===e.verticalAlign&&e.enabled&&!e.floating?d.legendHeight+n(e.margin,10):0),a&&c&&(a.options.top=c.options.top=l,a.setAxisSize(),c.setAxisSize())}),g.addEvents()},getUnionExtremes:function(a){var b=this.chart.xAxis[0],c=this.xAxis,d=c.options,e=b.options;return a&&null===b.dataMin?void 0:{dataMin:Kb("min",d&&d.min,e.min,b.dataMin,c.dataMin),dataMax:Kb("max",d&&d.max,e.max,b.dataMax,c.dataMax)}},setBaseSeries:function(a){var b=this.chart,a=a||b.options.navigator.baseSeries;this.series&&this.series.remove(),this.baseSeries=b.series[a]||"string"==typeof a&&b.get(a)||b.series[0],this.xAxis&&this.addBaseSeries()},addBaseSeries:function(){var c,d=this.baseSeries,e=d?d.options:{},f=e.data,g=this.navigatorOptions.series;c=g.data,this.hasNavigatorData=!!c,e=b(e,g,{enableMouseTracking:!1,group:"nav",padXAxis:!1,xAxis:"navigator-x-axis",yAxis:"navigator-y-axis",name:"Navigator",showInLegend:!1,isInternal:!0,visible:!0}),e.data=c||f,this.series=this.chart.initSeries(e),d&&this.navigatorOptions.adaptToUpdatedData!==!1&&($a(d,"updatedData",this.updatedDataHandler),d.userOptions.events=a(d.userOptions.event,{updatedData:this.updatedDataHandler}))},updatedDataHandler:function(){var a,b,c,d,e,f=this.chart.scroller,g=f.baseSeries,h=g.xAxis,i=h.getExtremes(),j=i.min,k=i.max,l=i.dataMin,i=i.dataMax,m=k-j,n=f.series;a=n.xData;var o=!!h.setExtremes;b=k>=a[a.length-1]-(this.closestPointRange||0),a=l>=j,f.hasNavigatorData||(n.options.pointStart=g.xData[0],n.setData(g.options.data,!1),e=!0),a&&(d=l,c=d+m),b&&(c=i,a||(d=pa(c-m,n.xData[0]))),o&&(a||b)?isNaN(d)||h.setExtremes(d,c,!0,!1,{trigger:"updatedData"}):(e&&this.chart.redraw(!1),f.render(pa(j,l),qa(k,i)))},destroy:function(){this.removeEvents(),Wa([this.xAxis,this.yAxis,this.leftShade,this.rightShade,this.outline,this.scrollbarTrack,this.scrollbarRifles,this.scrollbarGroup,this.scrollbar],function(a){a&&a.destroy&&a.destroy()}),this.xAxis=this.yAxis=this.leftShade=this.rightShade=this.outline=this.scrollbarTrack=this.scrollbarRifles=this.scrollbarGroup=this.scrollbar=null,Wa([this.scrollbarButtons,this.handles,this.elementsToDestroy],function(a){A(a)})}},ia.Scroller=K,t(H.prototype,"zoom",function(a,b,c){var d,e=this.chart,f=e.options,g=f.chart.zoomType,h=f.navigator,f=f.rangeSelector;return this.isXAxis&&(h&&h.enabled||f&&f.enabled)&&("x"===g?e.resetZoomButton="blocked":"y"===g?d=!1:"xy"===g&&(e=this.previousZoom,k(b)?this.previousZoom=[this.min,this.max]:e&&(b=e[0],c=e[1],delete this.previousZoom))),d!==M?d:a.call(this,b,c)}),t(I.prototype,"init",function(a,b,c){$a(this,"beforeRender",function(){var a=this.options;(a.navigator.enabled||a.scrollbar.enabled)&&(this.scroller=new K(this))}),a.call(this,b,c)}),t(wb.prototype,"addPoint",function(a,b,c,d,g){var h=this.options.turboThreshold;h&&this.xData.length>h&&e(b)&&!f(b)&&this.chart.scroller&&V(20,!0),a.call(this,b,c,d,g)}),a(Q,{rangeSelector:{buttonTheme:{width:28,height:18,fill:"#f7f7f7",padding:2,r:0,"stroke-width":0,style:{color:"#444",cursor:"pointer",fontWeight:"normal"},zIndex:7,states:{hover:{fill:"#e7e7e7"},select:{fill:"#e7f0f9",style:{color:"black",fontWeight:"bold"}}}},inputPosition:{align:"right"},labelStyle:{color:"#666"}}}),Q.lang=b(Q.lang,{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"From",rangeSelectorTo:"To"}),L.prototype={clickButton:function(a,c){var d,e,f=this,g=f.selected,h=f.chart,i=f.buttons,j=f.buttonOptions[a],k=h.xAxis[0],l=h.scroller&&h.scroller.getUnionExtremes()||k||{},m=l.dataMin,o=l.dataMax,p=k&&ma(qa(k.max,n(o,k.max))),q=new W(p),r=j.type,s=j.count,l=j._range;if(null!==m&&null!==o&&a!==f.selected){if("month"===r||"year"===r)d={month:"Month",year:"FullYear"}[r],q["set"+d](q["get"+d]()-s),d=q.getTime(),m=n(m,Number.MIN_VALUE),isNaN(d)||m>d?(d=m,p=qa(d+l,o)):l=p-d;else if(l)d=pa(p-l,m),p=qa(d+l,o);else if("ytd"===r){if(!k)return void $a(h,"beforeRender",function(){f.clickButton(a)});o===M&&(m=Number.MAX_VALUE,o=Number.MIN_VALUE,Wa(h.series,function(a){a=a.xData,m=qa(a[0],m),o=pa(a[a.length-1],o)}),c=!1),p=new W(o),e=p.getFullYear(),d=e=pa(m||0,W.UTC(e,0,1)),p=p.getTime(),p=qa(o||p,p)}else"all"===r&&k&&(d=m,p=o);i[g]&&i[g].setState(0),i[a]&&i[a].setState(2),h.fixedRange=l,k?k.setExtremes(d,p,n(c,1),0,{trigger:"rangeSelectorButton",rangeSelectorButton:j}):(g=h.options.xAxis,g[0]=b(g[0],{range:l,min:e})),f.setSelected(a)}},setSelected:function(a){this.selected=this.options.selected=a},defaultButtons:[{type:"month",count:1,text:"1m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"ytd",text:"YTD"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}],init:function(a){var b=this,c=a.options.rangeSelector,d=c.buttons||[].concat(b.defaultButtons),e=c.selected,f=b.blurInputs=function(){var a=b.minInput,c=b.maxInput;a&&a.blur&&ab(a,"blur"),c&&c.blur&&ab(c,"blur")};b.chart=a,b.options=c,b.buttons=[],a.extraTopMargin=35,b.buttonOptions=d,$a(a.container,"mousedown",f),$a(a,"resize",f),Wa(d,b.computeButtonRange),e!==M&&d[e]&&this.clickButton(e,!1),$a(a,"load",function(){$a(a.xAxis[0],"afterSetExtremes",function(){b.updateButtonStates(!0)})})},updateButtonStates:function(a){var b=this,c=this.chart,d=c.xAxis[0],e=c.scroller&&c.scroller.getUnionExtremes()||d,f=e.dataMin,g=e.dataMax,h=b.selected,i=b.options.allButtonsEnabled,j=b.buttons;a&&c.fixedRange!==ma(d.max-d.min)&&(j[h]&&j[h].setState(0),b.setSelected(null)),Wa(b.buttonOptions,function(a,c){var e=a._range,k=e>g-f,l=e<d.minRange,m="all"===a.type&&d.max-d.min>=g-f&&2!==j[c].state,n="ytd"===a.type&&R("%Y",f)===R("%Y",g);e===ma(d.max-d.min)&&c!==h?(b.setSelected(c),j[c].setState(2)):!i&&(k||l||m||n)?j[c].setState(3):3===j[c].state&&j[c].setState(0)})},computeButtonRange:function(a){var b=a.type,c=a.count||1,d={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};d[b]?a._range=d[b]*c:("month"===b||"year"===b)&&(a._range=864e5*{month:30,year:365}[b]*c)},setInputValue:function(a,b){var c=this.chart.options.rangeSelector;k(b)&&(this[a+"Input"].HCTime=b),this[a+"Input"].value=R(c.inputEditDateFormat||"%Y-%m-%d",this[a+"Input"].HCTime),this[a+"DateBox"].attr({text:R(c.inputDateFormat||"%b %e, %Y",this[a+"Input"].HCTime)})},drawInput:function(d){var e,f,g,h=this,i=h.chart,j=i.renderer.style,k=i.renderer,l=i.options.rangeSelector,m=h.div,n="min"===d,q=this.inputGroup;this[d+"Label"]=f=k.label(Q.lang[n?"rangeSelectorFrom":"rangeSelectorTo"],this.inputGroup.offset).attr({padding:2}).css(b(j,l.labelStyle)).add(q),q.offset+=f.width+5,this[d+"DateBox"]=g=k.label("",q.offset).attr({padding:2,width:l.inputBoxWidth||90,height:l.inputBoxHeight||17,stroke:l.inputBoxBorderColor||"silver","stroke-width":1}).css(b({textAlign:"center",color:"#444"},j,l.inputStyle)).on("click",function(){h[d+"Input"].focus()}).add(q),q.offset+=g.width+(n?10:0),this[d+"Input"]=e=p("input",{name:d,className:"highcharts-range-selector",type:"text"},a({position:"absolute",border:0,width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:j.fontSize,fontFamily:j.fontFamily,top:i.plotTop+"px"},l.inputStyle),m),e.onfocus=function(){o(this,{left:q.translateX+g.x+"px",top:q.translateY+"px",width:g.width-2+"px",height:g.height-2+"px",border:"2px solid silver"})},e.onblur=function(){o(this,{border:0,width:"1px",height:"1px"}),h.setInputValue(d)},e.onchange=function(){var a=e.value,b=(l.inputDateParser||W.parse)(a),d=i.xAxis[0],f=d.dataMin,g=d.dataMax;isNaN(b)&&(b=a.split("-"),b=W.UTC(c(b[0]),c(b[1])-1,c(b[2]))),isNaN(b)||(Q.global.useUTC||(b+=6e4*(new W).getTimezoneOffset()),n?b>h.maxInput.HCTime?b=M:f>b&&(b=f):b<h.minInput.HCTime?b=M:b>g&&(b=g),b!==M&&i.xAxis[0].setExtremes(n?b:d.min,n?d.max:b,M,M,{trigger:"rangeSelectorInput"}))}},render:function(b,c){var d,e=this,f=e.chart,g=f.renderer,h=f.container,i=f.options,j=i.exporting&&i.navigation&&i.navigation.buttonOptions,k=i.rangeSelector,l=e.buttons,i=Q.lang,m=e.div,m=e.inputGroup,o=k.buttonTheme,q=k.inputEnabled!==!1,r=o&&o.states,s=f.plotLeft;!e.rendered&&(e.zoomText=g.text(i.rangeSelectorZoom,s,f.plotTop-20).css(k.labelStyle).add(),d=s+e.zoomText.getBBox().width+5,Wa(e.buttonOptions,function(a,b){l[b]=g.button(a.text,d,f.plotTop-35,function(){e.clickButton(b),e.isActive=!0},o,r&&r.hover,r&&r.select).css({textAlign:"center"}).add(),d+=l[b].width+n(k.buttonSpacing,5),e.selected===b&&l[b].setState(2)}),e.updateButtonStates(),q)&&(e.div=m=p("div",null,{position:"relative",height:0,zIndex:1}),h.parentNode.insertBefore(m,h),e.inputGroup=m=g.g("input-group").add(),m.offset=0,e.drawInput("min"),e.drawInput("max")),q&&(h=f.plotTop-45,m.align(a({y:h,width:m.offset,x:j&&h<(j.y||0)+j.height-f.spacing[0]?-40:0},k.inputPosition),!0,f.spacingBox),e.setInputValue("min",b),e.setInputValue("max",c)),e.rendered=!0},destroy:function(){var a,b=this.minInput,c=this.maxInput,d=this.chart,e=this.blurInputs;_a(d.container,"mousedown",e),_a(d,"resize",e),A(this.buttons),b&&(b.onfocus=b.onblur=b.onchange=null),c&&(c.onfocus=c.onblur=c.onchange=null);for(a in this)this[a]&&"chart"!==a&&(this[a].destroy?this[a].destroy():this[a].nodeType&&B(this[a])),this[a]=null}},H.prototype.toFixedRange=function(a,b,c,d){var e=this.chart&&this.chart.fixedRange,a=n(c,this.translate(a,!0)),b=n(d,this.translate(b,!0)),c=e&&(b-a)/e;return c>.7&&1.3>c&&(d?a=b-e:b=a+e),{min:a,max:b}},t(I.prototype,"init",function(a,b,c){$a(this,"init",function(){this.options.rangeSelector.enabled&&(this.rangeSelector=new L(this))}),a.call(this,b,c)}),ia.RangeSelector=L,I.prototype.callbacks.push(function(a){function b(){f=a.xAxis[0].getExtremes(),g.render(f.min,f.max)}function c(){f=a.xAxis[0].getExtremes(),isNaN(f.min)||h.render(f.min,f.max)}function d(a){"navigator-drag"!==a.triggerOp&&g.render(a.min,a.max)}function e(a){h.render(a.min,a.max)}var f,g=a.scroller,h=a.rangeSelector;g&&($a(a.xAxis[0],"afterSetExtremes",d),t(a,"drawChartBox",function(a){var c=this.isDirtyBox;a.call(this),c&&b()}),b()),h&&($a(a.xAxis[0],"afterSetExtremes",e),$a(a,"resize",c),c()),$a(a,"destroy",function(){g&&_a(a.xAxis[0],"afterSetExtremes",d),h&&(_a(a,"resize",c),_a(a.xAxis[0],"afterSetExtremes",e))})}),ia.StockChart=function(a,c){var d,e=a.series,f=n(a.navigator&&a.navigator.enabled,!0)?{startOnTick:!1,endOnTick:!1}:null,g={marker:{enabled:!1,radius:2},states:{hover:{lineWidth:2}}},h={shadow:!1,borderWidth:0};return a.xAxis=Za(m(a.xAxis||{}),function(a){return b({minPadding:0,maxPadding:0,ordinal:!0,title:{text:null},labels:{overflow:"justify"},showLastLabel:!0},a,{type:"datetime",categories:null},f)}),a.yAxis=Za(m(a.yAxis||{}),function(a){return d=n(a.opposite,!0),b({labels:{y:-2},opposite:d,showLastLabel:!1,title:{text:null}},a)}),a.series=null,a=b({chart:{panning:!0,pinchType:"x"},navigator:{enabled:!0},scrollbar:{enabled:!0},rangeSelector:{enabled:!0},title:{text:null,style:{fontSize:"16px"}},tooltip:{shared:!0,crosshairs:!0},legend:{enabled:!1},plotOptions:{line:g,spline:g,area:g,areaspline:g,arearange:g,areasplinerange:g,column:h,columnrange:h,candlestick:h,ohlc:h}},a,{_stock:!0,chart:{inverted:!1}}),a.series=e,new I(a,c)},t(pb.prototype,"init",function(a,b,c){var d=c.chart.pinchType||"";a.call(this,b,c),this.pinchX=this.pinchHor=-1!==d.indexOf("x"),this.pinchY=this.pinchVert=-1!==d.indexOf("y"),this.hasZoom=this.hasZoom||this.pinchHor||this.pinchVert}),t(H.prototype,"autoLabelAlign",function(a){var b=this.chart,c=this.options,b=b._labelPanes=b._labelPanes||{},d=this.options.labels;return this.chart.options._stock&&"yAxis"===this.coll&&(c=c.top+","+c.height,!b[c]&&d.enabled)?(15===d.x&&(d.x=0),void 0===d.align&&(d.align="right"),b[c]=1,"right"):a.call(this,[].slice.call(arguments,1))}),H.prototype.getPlotLinePath=function(a,b,c,d,e){var f,g,h,i,j,l,m=this,o=this.isLinked&&!this.series?this.linkedParent.series:this.series,p=m.chart,q=p.renderer,r=m.left,s=m.top,t=[];return("xAxis"===m.coll||"yAxis"===m.coll)&&(j=m.isXAxis?k(m.options.yAxis)?[p.yAxis[m.options.yAxis]]:Za(o,function(a){return a.yAxis}):k(m.options.xAxis)?[p.xAxis[m.options.xAxis]]:Za(o,function(a){return a.xAxis})),Wa(m.isXAxis?p.yAxis:p.xAxis,function(a){if(k(a.options.id)?-1===a.options.id.indexOf("navigator"):1){var b=a.isXAxis?"yAxis":"xAxis",b=k(a.options[b])?p[b][a.options[b]]:p[b][0];m===b&&j.push(a)}}),l=j.length?[]:[m],Wa(j,function(a){-1===Va(a,l)&&l.push(a)}),e=n(e,m.translate(a,null,null,c)),isNaN(e)||(m.horiz?Wa(l,function(a){g=a.top,i=g+a.len,f=h=ma(e+m.transB),(f>=r&&f<=r+m.width||d)&&t.push("M",f,g,"L",h,i)}):Wa(l,function(a){f=a.left,h=f+a.width,g=i=ma(s+m.height-e),(g>=s&&g<=s+m.height||d)&&t.push("M",f,g,"L",h,i)})),t.length>0?q.crispPolyLine(t,b||1):void 0},H.prototype.getPlotBandPath=function(a,b){var c,d=this.getPlotLinePath(b),e=this.getPlotLinePath(a),f=[];if(e&&d)for(c=0;c<e.length;c+=6)f.push("M",e[c+1],e[c+2],"L",e[c+4],e[c+5],d[c+4],d[c+5],d[c+1],d[c+2]);else f=null;return f},jb.prototype.crispPolyLine=function(a,b){var c;for(c=0;c<a.length;c+=6)a[c+1]===a[c+4]&&(a[c+1]=a[c+4]=ma(a[c+1])-b%2/2),a[c+2]===a[c+5]&&(a[c+2]=a[c+5]=ma(a[c+2])+b%2/2);return a},N===ia.VMLRenderer&&(kb.prototype.crispPolyLine=jb.prototype.crispPolyLine),t(H.prototype,"hideCrosshair",function(a,b){a.call(this,b),k(this.crossLabelArray)&&(k(b)?this.crossLabelArray[b]&&this.crossLabelArray[b].hide():Wa(this.crossLabelArray,function(a){a.hide()}))}),t(H.prototype,"drawCrosshair",function(b,c,d){var e,f;if(b.call(this,c,d),k(this.crosshair.label)&&this.crosshair.label.enabled&&k(d)){var g,h,b=this.chart,i=this.options.crosshair.label,j=this.isXAxis?"x":"y",c=this.horiz,l=this.opposite,m=this.left,o=this.top,p=this.crossLabel,q=i.format,r="";p||(p=this.crossLabel=b.renderer.label().attr({align:i.align||(c?"center":l?"right"===this.labelAlign?"right":"left":"left"===this.labelAlign?"left":"center"),zIndex:12,height:c?16:M,fill:i.backgroundColor||this.series[0]&&this.series[0].color||"gray",padding:n(i.padding,2),stroke:i.borderColor||null,"stroke-width":i.borderWidth||0}).css(a({color:"white",fontWeight:"normal",fontSize:"11px",textAlign:"center"},i.style)).add()),c?(g=d.plotX+m,h=o+(l?0:this.height)):(g=l?this.width+m:0,h=d.plotY+o),o>h||h>o+this.height?this.hideCrosshair():(!q&&!i.formatter&&(this.isDatetimeAxis&&(r="%b %d, %Y"),q="{value"+(r?":"+r:"")+"}"),p.attr({text:q?u(q,{value:d[j]}):i.formatter.call(this,d[j]),x:g,y:h,visibility:"visible"}),d=p.getBBox(),c?("inside"===this.options.tickPosition&&!l||"inside"!==this.options.tickPosition&&l)&&(h=p.y-d.height):h=p.y-d.height/2,c?(e=m-d.x,f=m+this.width-d.x):(e="left"===this.labelAlign?m:0,f="right"===this.labelAlign?m+this.width:b.chartWidth),p.translateX<e&&(g+=e-p.translateX),p.translateX+d.width>=f&&(g-=p.translateX+d.width-f),p.attr({x:g,y:h,visibility:"visible"}))}});var Lb=Ab.init,Mb=Ab.processData,Nb=vb.prototype.tooltipFormatter;Ab.init=function(){Lb.apply(this,arguments),this.setCompare(this.options.compare)},Ab.setCompare=function(a){this.modifyValue="value"===a||"percent"===a?function(b,c){var d=this.compareValue;return b!==M&&(b="value"===a?b-d:b=100*(b/d)-100,c)&&(c.change=b),b}:null,this.chart.hasRendered&&(this.isDirty=!0)},Ab.processData=function(){var a,b,c,d=0;if(Mb.apply(this,arguments),this.xAxis&&this.processedYData)for(a=this.processedXData,b=this.processedYData,c=b.length;c>d;d++)if("number"==typeof b[d]&&a[d]>=this.xAxis.min){this.compareValue=b[d];break}},t(Ab,"getExtremes",function(a){a.apply(this,[].slice.call(arguments,1)),this.modifyValue&&(this.dataMax=this.modifyValue(this.dataMax),this.dataMin=this.modifyValue(this.dataMin))}),H.prototype.setCompare=function(a,b){this.isXAxis||(Wa(this.series,function(b){b.setCompare(a)}),n(b,!0)&&this.chart.redraw())},vb.prototype.tooltipFormatter=function(a){return a=a.replace("{point.change}",(this.change>0?"+":"")+r(this.change,n(this.series.tooltipOptions.changeDecimals,2))),Nb.apply(this,[a])},t(wb.prototype,"render",function(a){this.chart.options._stock&&(!this.clipBox&&this.animate&&-1!==this.animate.toString().indexOf("sharedClip")?(this.clipBox=b(this.chart.clipBox),this.clipBox.width=this.xAxis.len,this.clipBox.height=this.yAxis.len):this.chart[this.sharedClipKey]&&this.chart[this.sharedClipKey].attr({width:this.xAxis.len,height:this.yAxis.len})),a.call(this)}),a(ia,{Axis:H,Chart:I,Color:ib,Point:vb,Tick:G,Renderer:N,Series:wb,SVGElement:F,SVGRenderer:jb,arrayMin:y,arrayMax:z,charts:Ka,dateFormat:R,format:u,pathAnim:T,getOptions:function(){return Q},hasBidiBug:Fa,isTouchDevice:Ca,numberFormat:r,seriesTypes:Qa,setOptions:function(a){return Q=b(!0,Q,a),E(),Q},addEvent:$a,removeEvent:_a,createElement:p,discardElement:B,css:o,each:Wa,extend:a,map:Za,merge:b,pick:n,splat:m,extendClass:q,pInt:c,wrap:t,svg:Ea,canvas:Ga,vml:!Ea&&!Ga,product:"Highstock",version:"2.0.4"})}(),define("highstock",["jquery"],function(){}),function(a){var b,c=a.Chart,d=a.addEvent,e=a.removeEvent,f=a.createElement,g=a.discardElement,h=a.css,i=a.merge,j=a.each,k=a.extend,l=Math.max,m=document,n=window,o=a.isTouchDevice,p=a.Renderer.prototype.symbols,q=a.getOptions();k(q.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"}),q.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:"none",color:"#303030",fontSize:o?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}},q.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{menuClassName:"highcharts-contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}},a.post=function(a,b,c){var d,a=f("form",i({method:"post",action:a,enctype:"multipart/form-data"},c),{display:"none"},m.body);for(d in b)f("input",{type:"hidden",name:d,value:b[d]},null,a);a.submit(),g(a)},k(c.prototype,{getSVG:function(b){var c,d,e,h,l=this,n=i(l.options,b);return m.createElementNS||(m.createElementNS=function(a,b){return m.createElement(b)}),b=f("div",null,{position:"absolute",top:"-9999em",width:l.chartWidth+"px",height:l.chartHeight+"px"},m.body),d=l.renderTo.style.width,h=l.renderTo.style.height,d=n.exporting.sourceWidth||n.chart.width||/px$/.test(d)&&parseInt(d,10)||600,h=n.exporting.sourceHeight||n.chart.height||/px$/.test(h)&&parseInt(h,10)||400,k(n.chart,{animation:!1,renderTo:b,forExport:!0,width:d,height:h}),n.exporting.enabled=!1,n.series=[],j(l.series,function(a){e=i(a.options,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:a.visible}),e.isInternal||n.series.push(e)}),c=new a.Chart(n,l.callback),j(["xAxis","yAxis"],function(a){j(l[a],function(b,d){var e=c[a][d],f=b.getExtremes(),g=f.userMin,f=f.userMax;e&&(void 0!==g||void 0!==f)&&e.setExtremes(g,f,!0,!1)})}),d=c.container.innerHTML,n=null,c.destroy(),g(b),d=d.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g," ").replace(/&shy;/g,"­").replace(/<IMG /g,"<image ").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(a){
return a.toLowerCase()}),d=d.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'")},exportChart:function(b,c){var b=b||{},d=this.options.exporting,d=this.getSVG(i({chart:{borderRadius:0}},d.chartOptions,c,{exporting:{sourceWidth:b.sourceWidth||d.sourceWidth,sourceHeight:b.sourceHeight||d.sourceHeight}})),b=i(this.options.exporting,b);a.post(b.url,{filename:b.filename||"chart",type:b.type,width:b.width||0,scale:b.scale||2,svg:d},b.formAttributes)},print:function(){var a=this,b=a.container,c=[],d=b.parentNode,e=m.body,f=e.childNodes;a.isPrinting||(a.isPrinting=!0,j(f,function(a,b){1===a.nodeType&&(c[b]=a.style.display,a.style.display="none")}),e.appendChild(b),n.focus(),n.print(),setTimeout(function(){d.appendChild(b),j(f,function(a,b){1===a.nodeType&&(a.style.display=c[b])}),a.isPrinting=!1},1e3))},contextMenu:function(a,b,c,g,i,m,n){var o,p,q,r=this,s=r.options.navigation,t=s.menuItemStyle,u=r.chartWidth,v=r.chartHeight,w="cache-"+a,x=r[w],y=l(i,m),z=function(b){r.pointer.inClass(b.target,a)||p()};x||(r[w]=x=f("div",{className:a},{position:"absolute",zIndex:1e3,padding:y+"px"},r.container),o=f("div",null,k({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},s.menuStyle),x),p=function(){h(x,{display:"none"}),n&&n.setState(0),r.openMenu=!1},d(x,"mouseleave",function(){q=setTimeout(p,500)}),d(x,"mouseenter",function(){clearTimeout(q)}),d(document,"mouseup",z),d(r,"destroy",function(){e(document,"mouseup",z)}),j(b,function(a){if(a){var b=a.separator?f("hr",null,null,o):f("div",{onmouseover:function(){h(this,s.menuItemHoverStyle)},onmouseout:function(){h(this,t)},onclick:function(){p(),a.onclick.apply(r,arguments)},innerHTML:a.text||r.options.lang[a.textKey]},k({cursor:"pointer"},t),o);r.exportDivElements.push(b)}}),r.exportDivElements.push(o,x),r.exportMenuWidth=x.offsetWidth,r.exportMenuHeight=x.offsetHeight),b={display:"block"},c+r.exportMenuWidth>u?b.right=u-c-i-y+"px":b.left=c-y+"px",g+m+r.exportMenuHeight>v&&"top"!==n.alignOptions.verticalAlign?b.bottom=v-g-y+"px":b.top=g+m-y+"px",h(x,b),r.openMenu=!0},addButton:function(c){var d,e,f=this,g=f.renderer,h=i(f.options.navigation.buttonOptions,c),j=h.onclick,l=h.menuItems,m={stroke:h.symbolStroke,fill:h.symbolFill},n=h.symbolSize||12;if(f.btnCount||(f.btnCount=0),f.exportDivElements||(f.exportDivElements=[],f.exportSVGElements=[]),h.enabled!==!1){var o,p=h.theme,q=p.states,r=q&&q.hover,q=q&&q.select;delete p.states,j?o=function(){j.apply(f,arguments)}:l&&(o=function(){f.contextMenu(e.menuClassName,l,e.translateX,e.translateY,e.width,e.height,e),e.setState(2)}),h.text&&h.symbol?p.paddingLeft=a.pick(p.paddingLeft,25):h.text||k(p,{width:h.width,height:h.height,padding:0}),e=g.button(h.text,0,0,o,p,r,q).attr({title:f.options.lang[h._titleKey],"stroke-linecap":"round"}),e.menuClassName=c.menuClassName||"highcharts-menu-"+f.btnCount++,h.symbol&&(d=g.symbol(h.symbol,h.symbolX-n/2,h.symbolY-n/2,n,n).attr(k(m,{"stroke-width":h.symbolStrokeWidth||1,zIndex:1})).add(e)),e.add().align(k(h,{width:e.width,x:a.pick(h.x,b)}),!0,"spacingBox"),b+=(e.width+h.buttonSpacing)*("right"===h.align?-1:1),f.exportSVGElements.push(e,d)}},destroyExport:function(a){var b,c,a=a.target;for(b=0;b<a.exportSVGElements.length;b++)(c=a.exportSVGElements[b])&&(c.onclick=c.ontouchstart=null,a.exportSVGElements[b]=c.destroy());for(b=0;b<a.exportDivElements.length;b++)c=a.exportDivElements[b],e(c,"mouseleave"),a.exportDivElements[b]=c.onmouseout=c.onmouseover=c.ontouchstart=c.onclick=null,g(c)}}),p.menu=function(a,b,c,d){return["M",a,b+2.5,"L",a+c,b+2.5,"M",a,b+d/2+.5,"L",a+c,b+d/2+.5,"M",a,b+d-1.5,"L",a+c,b+d-1.5]},c.prototype.callbacks.push(function(a){var c,e=a.options.exporting,f=e.buttons;if(b=0,e.enabled!==!1){for(c in f)a.addButton(f[c]);d(a,"destroy",a.destroyExport)}})}(Highcharts),define("highstockexport",["highstock"],function(){}),define("views/waybill/detail/billTemperature",["backbone","jquery","templates","highstock","moment","highstockexport"],function(a,b,c,d,e,f){return a.View.extend({events:{showTabDetail:"render"},initialize:function(){this.tab=b(c.waybillDetailBillTemperatureTab()),this.$el=b('<li data-detail="waybill-temperature" class="status-precedence"></li>')},render:function(){this.$el.html(c.waybillDetailBillTemperature()),that=this,this.$(".page_tem").append(c.loading),a.ajax({type:"GET",url:Helper.getRESTfulDomain("bills/"+this.model.id+"/temperature"),success:function(a){that.$(".page_tem").empty();var d=Helper.getRESTfulDomain("bills/"+that.model.id+"/temperature.pdf?&lang="+Helper.getSiteLanguage()+"&region="+Helper.getSiteLocation());if(a.length>0){var f=[];_.each(a,function(b){var c=(_.max(a,function(a){return a.temperature}),[]),d=Date.UTC(e(b.recordDate).format("YYYY"),e(b.recordDate).format("MM")-1,e(b.recordDate).format("DD"),e(b.recordDate).format("HH"),e(b.recordDate).format("mm"));c.push(d),c.push(b.temperature),f.push(c)});var g=[],h=_.max(a,function(a){return a.temperature}),i={name:Date.UTC(e(h.recordDate).format("YYYY"),e(h.recordDate).format("MM")-1,e(h.recordDate).format("DD"),e(h.recordDate).format("HH"),e(h.recordDate).format("mm")),color:"#FF0000",y:h.temperature,x:Date.UTC(e(h.recordDate).format("YYYY"),e(h.recordDate).format("MM")-1,e(h.recordDate).format("DD"),e(h.recordDate).format("HH"),e(h.recordDate).format("mm")),dataLabels:{format:_l("最高温度")+"{y}°C",enabled:!0,verticalAlign:"bottom",overflow:!0,crop:!1}};g.push(i);var j=[],k=_.min(a,function(a){return a.temperature}),l={name:Date.UTC(e(k.recordDate).format("YYYY"),e(k.recordDate).format("MM")-1,e(k.recordDate).format("DD"),e(k.recordDate).format("HH"),e(k.recordDate).format("mm")),color:"#FF0000",y:k.temperature,x:Date.UTC(e(k.recordDate).format("YYYY"),e(k.recordDate).format("MM")-1,e(k.recordDate).format("DD"),e(k.recordDate).format("HH"),e(k.recordDate).format("mm")),dataLabels:{format:_l("最低温度")+"{y}°C",enabled:!0,verticalAlign:"top",overflow:!0,crop:!1}};j.push(l);var m=new Date(e(a[0].recordDate).format("YYYY"),e(a[0].recordDate).format("MM")-1,e(a[0].recordDate).format("DD"),e(a[0].recordDate).format("HH"),e(a[0].recordDate).format("mm")),n=new Date(m.getTime()+864e5);that.$("#container").highcharts({scrollbar:{enabled:!0},chart:{type:"line",animation:!1},rangeSelector:{enabled:!1},credits:{enabled:!0},title:{text:"",x:-20},xAxis:{type:"datetime",dateTimeLabelFormats:{hour:"%H:%M",day:"%Y-%m-%d"},max:Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours())},yAxis:{title:{text:""},labels:{format:"{value} °C"},tickInterval:5},tooltip:{pointFormat:"{series.name}: <b>{point.y}</b><br/>",valueSuffix:"°C",dateTimeLabelFormats:{hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},xDateFormat:"%Y-%m-%d,%H:%M"},legend:{layout:"horizontal",align:"center",verticalAlign:"top",borderWidth:0},series:[{name:_l("温度"),color:"#268F99",data:f,lineWidth:1,pointStart:Date.UTC(m.getFullYear(),m.getMonth(),m.getDate(),m.getHours(),m.getMinutes())},{name:_l("最高温度"),color:"#FF0000",data:g,lineWidth:1,pointStart:Date.UTC(m.getFullYear(),m.getMonth(),m.getDate(),m.getHours(),m.getMinutes())},{name:_l("最低温度"),color:"#FF0000",data:j,lineWidth:1,pointStart:Date.UTC(m.getFullYear(),m.getMonth(),m.getDate(),m.getHours(),m.getMinutes())}],exporting:{buttons:{contextButton:{menuItems:[{text:_l("导出图片"),onclick:function(){this.exportChart()}},{text:_l("导出数据"),onclick:function(){b.fileDownload(d).fail(function(){alert(_l("文件下载失败!"))}),window.setTimeout(function(){},1e3)},separator:!1}]}},type:"application/pdf"}},function(a){})}else that.$(".page_tem").append(c.loadNoData)}})}})}),define("views/waybill/childItem",["templates","moment","helper","views/waybill/detail/routes","views/waybill/detail/info","views/waybill/detail/billInfo","views/waybill/detail/billConfirmation","views/waybill/detail/qrcode","views/waybill/detail/refund","views/waybill/detail/precedence","views/waybill/detail/satisfaction","views/waybill/detail/billPicture","views/waybill/detail/changeRecipientInfo","views/waybill/detail/deliveryAgain","views/waybill/detail/payFreightDeliveryAgain","views/waybill/detail/sendback","views/waybill/detail/GPS","views/waybill/detail/childRoute","collections/waybills","views/waybill/detail/complainView","views/waybill/detail/billTemperature","jquery-placeholder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){return Backbone.View.extend({events:{"click .subscribed":"toggleSubscription","click .tabs li":"tabsToggle","click .backward-scroll":"backwardClicked","click .forward-scroll":"forwardClicked"},initialize:function(){this.listenTo(this.model,"change:isChecked",this.render),this.childRouteNO=""},detailViews:function(){var a=[];return a.push(new d({model:this.model})),"hk"===c.getSiteLocation()||"tw"===c.getSiteLocation()||"cn"===c.getSiteLocation()?this.model.get("signed")&&a.push(new l({model:this.model})):a.push(new g({model:this.model})),this.model.get("mainlandToMainland")?a.push(new f({model:this.model})):a.push(new e({model:this.model})),"cn"===c.getSiteLocation()&&void 0!=this.model.get("lstElementHtml")&&this.model.get("lstElementHtml").length>0&&a.push(new t({model:this.model})),this.model.get("prioritized")&&a.push(new j({model:this.model})),a},backwardClicked:function(){var a=this.$(".tabs"),b=this;a.animate({scrollLeft:a.scrollLeft()-540},300,function(){b.updateBackwarkFarwordButtonStatus()})},forwardClicked:function(){var a=this.$(".tabs"),b=this;a.animate({scrollLeft:a.scrollLeft()+540},300,function(){b.updateBackwarkFarwordButtonStatus()})},updateBackwarkFarwordButtonStatus:function(){var a=this.$(".tabs"),b=a.prop("scrollWidth")-a.width(),c=a.scrollLeft();this.$(".backward-scroll").css("display",20>c?"none":"block"),this.$(".forward-scroll").css("display",c>b-20?"none":"block")},render:function(){this.$el.html(a.waybillResult({result:this.model.toJSON(),expressState:this.getExpressState(this.model),certifiedShippingImgUrl:null,T13_virtualAddressCodeList:c.getT13_virtualAddressCodeList(),T14_virtualAddressCodeList:c.getT14_virtualAddressCodeList()}));var b=this.$(".delivery-detail .tabs"),d=this.$(".delivery-detail .tab-details"),e=this.detailViews();e.length>4?this.$(".forward-scroll").show():this.$(".backward-scroll,.forward-scroll").hide(),_.each(e,function(a){a.tab.css("width",100/e.length+"%"),b.append(a.tab),d.append(a.$el)}),this.$("input").placeholder(),this.showRoutes()},showRoutes:function(){this.$(".tabs-wrapper").addClass("focus"),this.$(".tabs-wrapper .tabs>li[data-tab=waybill-status]").addClass("active"),this.$(".tab-details>li[data-detail=waybill-status]").trigger("showTabDetail").show(),this.$(".tab-details").slideDown(300)},tabsToggle:function(a){var b=$(a.currentTarget);if(!b.data("tab"))return!1;if(b.hasClass("active"))return b.removeClass("active"),this.$(".tab-details").slideUp(300),this.$(".tabs-wrapper").removeClass("focus"),!1;this.$(".tabs li").removeClass("active"),b.addClass("active");var c=b.data("tab");return this.$(".tab-details>li").hide(),this.$(".tab-details>li[data-detail="+c+"]").trigger("showTabDetail").show(),this.$(".tab-details").slideDown(300),this.$(".tabs-wrapper").addClass("focus"),!1},toggleSubscription:function(a){a.stopPropagation();var b=this.model.get("isChecked");this.model.set("isChecked",!b)},getExpressState:function(a){var b=[{state:"2",className:"sfi-cancelled",txt:"已作废"},{state:"3",className:"sfi-turnto",txt:"已转寄"},{state:"4",className:"sfi-sendBack",txt:"已退回"},{state:"5",className:"sfi-fastener",txt:"已扣件"},{state:"6",className:"sfi-lost",txt:"已遗失"}],c=_.findWhere(b,{state:a.get("expressState")});return c}})}),define("tencentCaptcha",["helper"],function(a){return{initCap:function(){var b=this;$.get(a.getRESTfulDomain("captcha/getJsUrl"),function(a){b.getAjax(a)})},getAjax:function(a){var b=$.ajax({type:"GET",url:a,timeout:1e4,dataType:"script",complete:function(a,c){"timeout"==c&&(b.abort(),alert("timeout"))}})},show:function(b){var c="sc"==a.getSiteLanguage()?2052:"tc"==a.getSiteLanguage()?1028:1033,d={callback:b,showHeader:!0,lang:c,pos:"fixed",themeColor:"000000",type:"popup",end:function(){$("#modal_captcha").hide()}};$("#modal_captcha").show(),capInit(document.getElementById("TCaptcha"),d)},refresh:function(a){capDestroy(),this.show(a)}}}),define("views/waybill/detail/childRoute",["backbone","helper","views/detailedLocationPicker/picker","templates","views/waybill/childItem","collections/waybills","tencentCaptcha","parsleyjs"],function(a,b,c,d,e,f,g){return a.View.extend({collection:new f,initialize:function(){this.tab=$(d.waybillChildRouteTab()),this.$el=$('<li data-detail="waybill-childRoute" class="childRoute-update"></li>'),this.firstRenderQuery=0,this.childBillNumbers=this.model.get("childSet"),this.billNumberSubView=null,this.phoneNumberSubView=null},events:{"click .primary-button.child-waybill":"toggleQuery","keyup .verification-code input":"inputChanged","click .verification-code .refresh":"refreshValidationCode","click .verification-code img":"refreshValidationCode",showTabDetail:"renderChildRoutes"},fetchChildRoutes:function(a){if(!a)return void this.$el.slideUp();var c=this;c.billNumbers=this.childBillNumbers,c.collection.url=b.getRESTfulDomain("bills/"+this.billNumbers.join(",")+"/routes?app=bill"),a.validationCode?c.collection.url=this.collection.url+"&answer="+a.validationCode:this.collection.url=this.collection.url+"&ticket="+a.ticket,c.collection.fetch({reset:!0,success:function(){c.render(a.validationCode),a.validationCode&&c.refreshValidationCode()},error:function(b,d){a.validationCode?404===d.status?(c.collection.models=[],c.render(a.validationCode)):403==d.status?(c.needValidationCode(),c.$el.slideDown()):c.showNetworkError():403===d.status&&alert("滑块验证后台错误！")}})},render:function(a){var b=this;this.$el.slideDown(),b.renderBasic(),_.each(this.billNumbers,function(c){var d=b.collection.findWaybillById(c);d?b.renderItem(d):b.renderNotFoundItem(c,a)})},renderBasic:function(){this.$deliveries=$('<div class="deliveries"></div>'),this.$el.html(this.$deliveries)},renderItem:function(a){var b=this.$deliveries,c=$('<div class="main-content-row delivery"></div>');b.append(c);var d=new e({el:c,model:a});d.render()},renderNotFoundItem:function(a,b){var c=this,e=c.$(".deliveries");e.append(d.waybillNotFound({billNumber:a})),b&&c.refreshValidationCode()},showValidationCodeError:function(){this.$(".validation-code-error").show()},showNetworkError:function(){this.$(".error[data-error=server-network]").show()},refreshValidationCode:function(){var a=$("#validation-image"),c=this.$("#validation-image-child"),d=b.getRESTfulDomain("captcha/bill?force=true&time="+(new Date).getTime());a[0]&&a.attr("src",d),c.attr("src",d),this.$(".verification-code input").val(""),this.$(".validation-code-error").hide()},toggleQuery:function(){var a=this;a.fetchChildRoutes({validationCode:a.$(".verification-code input").val()}),a.firstRenderQuery=a.firstRenderQuery+1},inputChanged:function(){var a=this,b=a.$(".verification-code input").val(),c=""!==b&&5===b.length;a.$(".primary-button").toggleClass("disabled",!c)},renderChildRoutes:function(){var a=this;return a.$(".deliveries").length>0?!1:void(1==window.isGrayscaleUser?g.refresh(function(b){0==b.ret&&a.fetchChildRoutes({ticket:b.ticket})}):a.fetchChildRoutes())},needValidationCode:function(){var a=this;return a.$(".deliveries").length>0?!1:(a.$deliveries=$('<div class="deliveries"></div>'),a.$deliveries.append(d.waybillChildQuery()),a.$el.html(this.$deliveries),void(0!==a.firstRenderQuery?a.showValidationCodeError():a.refreshValidationCode()))}})}),define("views/waybill/item",["templates","moment","helper","views/waybill/detail/routes","views/waybill/detail/info","views/waybill/detail/qrcode","views/waybill/detail/refund","views/waybill/detail/precedence","views/waybill/detail/satisfaction","views/waybill/detail/billPicture","views/waybill/detail/changeRecipientInfo","views/waybill/detail/deliveryAgain","views/waybill/detail/payFreightDeliveryAgain","views/waybill/detail/sendback","views/waybill/detail/GPS","views/waybill/detail/complainView","views/waybill/detail/childRoute","views/waybill/detail/billTemperature","views/waybill/detail/billInfo","views/waybill/detail/billConfirmation","jquery-placeholder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return Backbone.View.extend({events:{"click .subscribed":"toggleSubscription","click .tabs li":"tabsToggle","click .backward-scroll":"backwardClicked","click .forward-scroll":"forwardClicked","click  .product-name a":"openProductTypeLink","click  .search-price-and-time":"openPriceAndTimeLink"},initialize:function(){this.listenTo(this.model,"change:isChecked",this.render),this.childRouteNO=""},detailViews:function(){var a=[];if(a.push(new d({model:this.model})),this.model.get("showThermometer")&&a.push(new r({model:this.model})),"hk"===c.getSiteLocation()||"tw"===c.getSiteLocation()||"cn"===c.getSiteLocation()?this.model.get("signed")&&a.push(new j({model:this.model})):a.push(new t({model:this.model})),this.model.get("mainlandToMainland")?a.push(new s({model:this.model})):a.push(new e({model:this.model})),this.model.get("childSet")&&this.model.get("childSet").length>0){var b=this.model.get("childSet");this.childRouteNO=b.join(","),a.push(new q({model:this.model}))}return this.model.get("prioritized")&&a.push(new h({model:this.model})),"cn"===c.getSiteLocation()&&this.model.get("lstElementHtml")&&this.model.get("lstElementHtml").length>0&&a.push(new p({model:this.model})),a},backwardClicked:function(){var a=this.$(".tabs"),b=this;a.animate({scrollLeft:a.scrollLeft()-540},300,function(){b.updateBackwarkFarwordButtonStatus()})},forwardClicked:function(){var a=this.$(".tabs"),b=this;a.animate({scrollLeft:a.scrollLeft()+540},300,function(){b.updateBackwarkFarwordButtonStatus()})},updateBackwarkFarwordButtonStatus:function(){var a=this.$(".tabs"),b=a.prop("scrollWidth")-a.width(),c=a.scrollLeft();this.$(".backward-scroll").css("display",20>c?"none":"block"),this.$(".forward-scroll").css("display",c>b-20?"none":"block")},render:function(){this.$el.html(a.waybillResult({result:this.model.toJSON(),expressState:this.getExpressState(this.model),certifiedShippingImgUrl:this.getCertifiedShippingImgUrl(this.model),T13_virtualAddressCodeList:c.getT13_virtualAddressCodeList(),T14_virtualAddressCodeList:c.getT14_virtualAddressCodeList()}));var b=c.getArrayFromCookie("billNOs");b=_.without(b,this.model.toJSON().id),b.unshift(this.model.toJSON().id),c.setArrayToCookie("billNOs",b,6);var d=this.$(".delivery-detail .tabs"),e=this.$(".delivery-detail .tab-details"),f=this.detailViews();f.length>4?this.$(".forward-scroll").show():this.$(".backward-scroll,.forward-scroll").hide(),_.each(f,function(a){a.tab.css("width",100/f.length+"%"),d.append(a.tab),e.append(a.$el)}),this.$("input").placeholder(),this.showRoutes()},showRoutes:function(){this.$(".tabs-wrapper").addClass("focus"),this.$(".tabs-wrapper .tabs>li[data-tab=waybill-status]").addClass("active"),this.$(".tab-details>li[data-detail=waybill-status]").trigger("showTabDetail").show(),this.$(".tab-details").slideDown(300)},tabsToggle:function(a){var b=$(a.currentTarget);if(!b.data("tab"))return!1;if(b.hasClass("active"))return b.removeClass("active"),this.$(".tab-details").slideUp(300),this.$(".tabs-wrapper").removeClass("focus"),!1;this.$(".tabs li").removeClass("active"),b.addClass("active");var c=b.data("tab");return this.$(".tab-details>li").hide(),this.$(".tab-details>li[data-detail="+c+"]").trigger("showTabDetail").show(),this.$(".tab-details").slideDown(300),this.$(".tabs-wrapper").addClass("focus"),!1},toggleSubscription:function(a){a.stopPropagation();var b=this.model.get("isChecked");this.model.set("isChecked",!b)},openProductTypeLink:function(a){var b=$(a.currentTarget),c=b.attr("title"),d=_l(c);window.open(d)},openPriceAndTimeLink:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.target),d=c.getDynamicURLWithContext("/price/?originName="+b.data("origin")+"&destName="+b.data("dest")+"&time="+encodeURIComponent(b.data("time"))+"&weight="+b.data("weight")+"&queryType=2&flag="+!0+"&from=waybill&lang="+c.getSiteLanguage());window.open(d)},getExpressState:function(a){var b=[{state:"2",className:"sfi-cancelled",txt:"已作废"},{state:"3",className:"sfi-turnto",txt:"已转寄"},{state:"4",className:"sfi-sendBack",txt:"已退回"},{state:"5",className:"sfi-fastener",txt:"已扣件"},{state:"6",className:"sfi-lost",txt:"已遗失"}],c=_.findWhere(b,{state:a.get("expressState")});return c},getCertifiedShippingImgUrl:function(a){var b=(a.toJSON(),a.get("internationalExpressFlag"));if(b){var d=c.getResourceURL("images/certified_shipping/"+b+".png");return d}return null}})}),function(a){"function"==typeof define&&define.amd?define("tokenfield",["jquery"],a):"object"==typeof exports?module.exports=global.window&&global.window.$?a(global.window.$):function(b){if(!b.$&&!b.fn)throw new Error("Tokenfield requires a window object with jQuery or a jQuery instance");return a(b.$||b)}:a(jQuery)}(function(a,b){"use strict";var c=function(c,d){var e=this;this.$element=a(c),this.textDirection=this.$element.css("direction"),this.options=a.extend(!0,{},a.fn.tokenfield.defaults,{tokens:this.$element.val()},this.$element.data(),d),this._delimiters="string"==typeof this.options.delimiter?[this.options.delimiter]:this.options.delimiter,this._triggerKeys=a.map(this._delimiters,function(a){return a.charCodeAt(0)}),this._firstDelimiter=this._delimiters[0];var f=a.inArray(" ",this._delimiters),g=a.inArray("-",this._delimiters);f>=0&&(this._delimiters[f]="\\s"),g>=0&&(delete this._delimiters[g],this._delimiters.unshift("-"));var h=["\\","$","[","{","^",".","|","?","*","+","(",")"];a.each(this._delimiters,function(b,c){var d=a.inArray(c,h);d>=0&&(e._delimiters[b]="\\"+c)});var i,j=b&&"function"==typeof b.getMatchedCSSRules?b.getMatchedCSSRules(c):null,k=c.style.width,l=this.$element.width();j&&a.each(j,function(a,b){b.style.width&&(i=b.style.width)});var m="rtl"===a("body").css("direction")?"right":"left",n={position:this.$element.css("position")};n[m]=this.$element.css(m),this.$element.data("original-styles",n).data("original-tabindex",this.$element.prop("tabindex")).css("position","absolute").css(m,"-10000px").prop("tabindex",-1),this.$wrapper=a('<div class="tokenfield form-control" />'),this.$element.hasClass("input-lg")&&this.$wrapper.addClass("input-lg"),this.$element.hasClass("input-sm")&&this.$wrapper.addClass("input-sm"),"rtl"===this.textDirection&&this.$wrapper.addClass("rtl");var o=this.$element.prop("id")||(new Date).getTime()+""+Math.floor(100*(1+Math.random()));this.$input=a('<input type="text" class="token-input" autocomplete="off" />').appendTo(this.$wrapper).prop("placeholder",this.$element.prop("placeholder")).prop("id",o+"-tokenfield").prop("tabindex",this.$element.data("original-tabindex"));var p=a('label[for="'+this.$element.prop("id")+'"]');if(p.length&&p.prop("for",this.$input.prop("id")),this.$copyHelper=a('<input type="text" />').css("position","absolute").css(m,"-10000px").prop("tabindex",-1).prependTo(this.$wrapper),k?this.$wrapper.css("width",k):i?this.$wrapper.css("width",i):this.$element.parents(".form-inline").length&&this.$wrapper.width(l),(this.$element.prop("disabled")||this.$element.parents("fieldset[disabled]").length)&&this.disable(),this.$mirror=a('<span style="position:absolute; top:-999px; left:0; white-space:pre;"/>'),this.$input.css("min-width",this.options.minWidth+"px"),a.each(["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],function(a,b){e.$mirror[0].style[b]=e.$input.css(b)}),this.$mirror.appendTo("body"),this.$wrapper.insertBefore(this.$element),this.$element.prependTo(this.$wrapper),this.update(),this.setTokens(this.options.tokens,!1,!1),this.listen(),!a.isEmptyObject(this.options.autocomplete)){var q="rtl"===this.textDirection?"right":"left",r=a.extend({minLength:this.options.showAutocompleteOnFocus?0:null,position:{my:q+" top",at:q+" bottom",of:this.$wrapper}},this.options.autocomplete);this.$input.autocomplete(r)}if(!a.isEmptyObject(this.options.typeahead)){var s=a.extend({minLength:this.options.showAutocompleteOnFocus?0:null},this.options.typeahead);this.$input.typeahead(null,s),this.typeahead=!0}this.$element.trigger("tokenfield:initialize")};c.prototype={constructor:c,createToken:function(b,c){"string"==typeof b&&(b={value:b,label:b}),"undefined"==typeof c&&(c=!0);var d=this,e=a.trim(b.value),f=b.label&&b.label.length?a.trim(b.label):e;if(e.length&&f.length&&!(e.length<this.options.minLength)){if(this.options.limit&&this.getTokens().length>=this.options.limit)return void(this.options.leakCallback&&this.options.leakCallback());var g=a.Event("tokenfield:preparetoken");if(g.token={value:e,label:f},this.$element.trigger(g),g.token){if(e=g.token.value,f=g.token.label,!this.options.allowDuplicates&&a.grep(this.getTokens(),function(a){return a.value===e}).length){var h=a.Event("tokenfield:preventduplicate");h.token={value:e,label:f},this.$element.trigger(h);var i=this.$wrapper.find('.token[data-value="'+e+'"]').addClass("duplicate");return setTimeout(function(){i.removeClass("duplicate")},250),!1}var j=a('<div class="token" />').attr("data-value",e).append('<span class="token-label" />').append('<a href="#" class="close" tabindex="-1">&times;</a>');this.$input.hasClass("tt-input")?this.$input.parent().before(j):this.$input.before(j),this.$input.css("width",this.options.minWidth+"px");var k=j.find(".token-label"),l=j.find(".close");this.maxTokenWidth||(this.maxTokenWidth=this.$wrapper.width()-l.outerWidth()-parseInt(l.css("margin-left"),10)-parseInt(l.css("margin-right"),10)-parseInt(j.css("border-left-width"),10)-parseInt(j.css("border-right-width"),10)-parseInt(j.css("padding-left"),10)-parseInt(j.css("padding-right"),10),parseInt(k.css("border-left-width"),10)-parseInt(k.css("border-right-width"),10)-parseInt(k.css("padding-left"),10)-parseInt(k.css("padding-right"),10),parseInt(k.css("margin-left"),10)-parseInt(k.css("margin-right"),10)),k.text(f).css("max-width",this.maxTokenWidth-5),j.on("mousedown",function(a){return d.disabled?!1:void(d.preventDeactivation=!0)}).on("click",function(a){return d.disabled?!1:(d.preventDeactivation=!1,a.ctrlKey||a.metaKey?(a.preventDefault(),d.toggle(j)):void d.activate(j,a.shiftKey,a.shiftKey))}).on("dblclick",function(a){return d.disabled||!d.options.allowEditing?!1:void d.edit(j)}),l.on("click",a.proxy(this.remove,this));var m=a.Event("tokenfield:createtoken");m.token=g.token,m.relatedTarget=j.get(0),this.$element.trigger(m);var n=a.Event("change");return n.initiator="tokenfield",c&&this.$element.val(this.getTokensList()).trigger(n),this.update(),this.$input.get(0)}}},setTokens:function(b,c,d){if(b){c||this.$wrapper.find(".token").remove(),"undefined"==typeof d&&(d=!0),"string"==typeof b&&(b=this._delimiters.length?b.split(new RegExp("["+this._delimiters.join("")+"]")):[b]);var e=this;return a.each(b,function(a,b){e.createToken(b,d)}),this.$element.get(0)}},getTokenData:function(b){var c=b.map(function(){var b=a(this);return{value:b.attr("data-value"),label:b.find(".token-label").text()}}).get();return 1==c.length&&(c=c[0]),c},getTokens:function(b){var c=this,d=[],e=b?".active":"";return this.$wrapper.find(".token"+e).each(function(){d.push(c.getTokenData(a(this)))}),d},getTokensList:function(b,c,d){b=b||this._firstDelimiter,c="undefined"!=typeof c&&null!==c?c:this.options.beautify;var e=b+(c&&" "!==b?" ":"");return a.map(this.getTokens(d),function(a){return a.value}).join(e)},getInput:function(){return this.$input.val()},listen:function(){var c=this;this.$element.on("change",a.proxy(this.change,this)),this.$wrapper.on("mousedown",a.proxy(this.focusInput,this)),this.$input.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("paste",a.proxy(this.paste,this)).on("keydown",a.proxy(this.keydown,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.$copyHelper.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keydown",a.proxy(this.keydown,this)).on("keyup",a.proxy(this.keyup,this)),this.$input.on("keypress",a.proxy(this.update,this)).on("keyup",a.proxy(this.update,this)),this.$input.on("autocompletecreate",function(){var b=a(this).data("ui-autocomplete").menu.element,d=c.$wrapper.outerWidth()-parseInt(b.css("border-left-width"),10)-parseInt(b.css("border-right-width"),10);b.css("min-width",d+"px")}).on("autocompleteselect",function(a,b){return c.createToken(b.item)&&(c.$input.val(""),c.$input.data("edit")&&c.unedit(!0)),!1}).on("typeahead:selected",function(a,b,d){c.createToken(b)&&(c.$input.typeahead("val",""),c.$input.data("edit")&&c.unedit(!0))}).on("typeahead:autocompleted",function(a,b,d){c.createToken(c.$input.val()),c.$input.typeahead("val",""),c.$input.data("edit")&&c.unedit(!0)}),a(b).on("resize",a.proxy(this.update,this))},keydown:function(b){function c(a){if(e.$input.is(document.activeElement)){if(e.$input.val().length>0)return;a+="All";var c=e.$input.hasClass("tt-input")?e.$input.parent()[a](".token:first"):e.$input[a](".token:first");if(!c.length)return;e.preventInputFocus=!0,e.preventDeactivation=!0,e.activate(c),b.preventDefault()}else e[a](b.shiftKey),b.preventDefault()}function d(c){if(b.shiftKey){if(e.$input.is(document.activeElement)){if(e.$input.val().length>0)return;var d=e.$input.hasClass("tt-input")?e.$input.parent()[c+"All"](".token:first"):e.$input[c+"All"](".token:first");if(!d.length)return;e.activate(d)}var f="prev"===c?"next":"prev",g="prev"===c?"first":"last";e.firstActiveToken[f+"All"](".token").each(function(){e.deactivate(a(this))}),e.activate(e.$wrapper.find(".token:"+g),!0,!0),b.preventDefault()}}if(this.focused){var e=this;switch(b.keyCode){case 8:if(!this.$input.is(document.activeElement))break;this.lastInputValue=this.$input.val();break;case 37:c("rtl"===this.textDirection?"next":"prev");break;case 38:d("prev");break;case 39:c("rtl"===this.textDirection?"prev":"next");break;case 40:d("next");break;case 65:if(this.$input.val().length>0||!b.ctrlKey&&!b.metaKey)break;this.activateAll(),b.preventDefault();break;case 9:case 13:if(this.$input.data("ui-autocomplete")&&this.$input.data("ui-autocomplete").menu.element.find("li:has(a.ui-state-focus)").length)break;if(this.$input.hasClass("tt-input")&&this.$wrapper.find(".tt-cursor").length)break;if(this.$input.hasClass("tt-input")&&this.$wrapper.find(".tt-hint").val().length)break;if(this.$input.is(document.activeElement)&&this.$input.val().length||this.$input.data("edit"))return this.createTokensFromInput(b,this.$input.data("edit"));if(13===b.keyCode){if(!this.$copyHelper.is(document.activeElement)||1!==this.$wrapper.find(".token.active").length)break;if(!e.options.allowEditing)break;this.edit(this.$wrapper.find(".token.active"))}}this.lastKeyDown=b.keyCode}},keypress:function(b){return this.lastKeyPressCode=b.keyCode,this.lastKeyPressCharCode=b.charCode,-1!==a.inArray(b.charCode,this._triggerKeys)&&this.$input.is(document.activeElement)?(this.$input.val()&&this.createTokensFromInput(b),!1):void 0},keyup:function(a){if(this.preventInputFocus=!1,this.focused){switch(a.keyCode){case 8:if(this.$input.is(document.activeElement)){if(this.$input.val().length||this.lastInputValue.length&&8===this.lastKeyDown)break;this.preventDeactivation=!0;var b=this.$input.hasClass("tt-input")?this.$input.parent().prevAll(".token:first"):this.$input.prevAll(".token:first");if(!b.length)break;this.activate(b)}else this.remove(a);break;case 46:this.remove(a,"next")}this.lastKeyUp=a.keyCode}},focus:function(a){this.focused=!0,this.$wrapper.addClass("focus"),this.$input.is(document.activeElement)&&(this.$wrapper.find(".active").removeClass("active"),this.firstActiveToken=null,this.options.showAutocompleteOnFocus&&this.search())},blur:function(a){this.focused=!1,this.$wrapper.removeClass("focus"),this.preventDeactivation||this.$element.is(document.activeElement)||(this.$wrapper.find(".active").removeClass("active"),this.firstActiveToken=null),!this.preventCreateTokens&&(this.$input.data("edit")&&!this.$input.is(document.activeElement)||this.options.createTokensOnBlur)&&this.createTokensFromInput(a),
this.preventDeactivation=!1,this.preventCreateTokens=!1},paste:function(a){var b=this;try{if(clipboardData){var c=clipboardData.getData("Text");/^\d/.test(c)&&(a.clipData=c.replace(/^\s+|\s+$/g,"").replace(/(\r\n|\n|\r)/gm," "))}}catch(d){}setTimeout(function(){b.createTokensFromInput(a)},1)},change:function(a){"tokenfield"!==a.initiator&&this.setTokens(this.$element.val())},createTokensFromInput:function(a,b){if(a.clipData&&this.$input.val(a.clipData),!(this.$input.val().length<this.options.minLength)){var c=this.getTokensList();return this.setTokens(this.$input.val(),!0),c==this.getTokensList()&&this.$input.val().length?!1:(this.$input.hasClass("tt-input")?this.$input.typeahead("val",""):this.$input.val(""),this.$input.data("edit")&&this.unedit(b),!1)}},next:function(a){if(a){var b=this.$wrapper.find(".active:first"),c=b&&this.firstActiveToken?b.index()<this.firstActiveToken.index():!1;if(c)return this.deactivate(b)}var d=this.$wrapper.find(".active:last"),e=d.nextAll(".token:first");return e.length?void this.activate(e,a):void this.$input.focus()},prev:function(a){if(a){var b=this.$wrapper.find(".active:last"),c=b&&this.firstActiveToken?b.index()>this.firstActiveToken.index():!1;if(c)return this.deactivate(b)}var d=this.$wrapper.find(".active:first"),e=d.prevAll(".token:first");return e.length||(e=this.$wrapper.find(".token:first")),e.length||a?void this.activate(e,a):void this.$input.focus()},activate:function(b,c,d,e){if(b){if("undefined"==typeof e)var e=!0;if(d)var c=!0;if(this.$copyHelper.focus(),c||(this.$wrapper.find(".active").removeClass("active"),e?this.firstActiveToken=b:delete this.firstActiveToken),d&&this.firstActiveToken){var f=this.firstActiveToken.index()-2,g=b.index()-2,h=this;this.$wrapper.find(".token").slice(Math.min(f,g)+1,Math.max(f,g)).each(function(){h.activate(a(this),!0)})}b.addClass("active"),this.$copyHelper.val(this.getTokensList(null,null,!0)).select()}},activateAll:function(){var b=this;this.$wrapper.find(".token").each(function(c){b.activate(a(this),0!==c,!1,!1)})},deactivate:function(a){a&&(a.removeClass("active"),this.$copyHelper.val(this.getTokensList(null,null,!0)).select())},toggle:function(a){a&&(a.toggleClass("active"),this.$copyHelper.val(this.getTokensList(null,null,!0)).select())},edit:function(b){if(b){var c=b.data("value"),d=b.find(".token-label").text(),e=a.Event("tokenfield:edittoken");if(e.token={value:c,label:d},e.relatedTarget=b.get(0),this.$element.trigger(e),e.token){c=e.token.value,d=e.token.label,b.find(".token-label").text(c);var f=b.outerWidth(),g=this.$input.hasClass("tt-input")?this.$input.parent():this.$input;b.replaceWith(g),this.preventCreateTokens=!0,this.$input.val(c).select().data("edit",!0).width(f),this.update()}}},unedit:function(a){var b=this.$input.hasClass("tt-input")?this.$input.parent():this.$input;if(b.appendTo(this.$wrapper),this.$input.data("edit",!1),this.$mirror.text(""),this.update(),a){var c=this;setTimeout(function(){c.$input.focus()},1)}},remove:function(b,c){if(!this.$input.is(document.activeElement)&&!this.disabled){var d="click"===b.type?a(b.target).closest(".token"):this.$wrapper.find(".token.active");if("click"!==b.type){if(!c)var c="prev";if(this[c](),"prev"===c)var e=0===d.first().prevAll(".token:first").length}var f=a.Event("tokenfield:removetoken");f.token=this.getTokenData(d);var g=a.Event("change");g.initiator="tokenfield",d.remove(),this.$element.val(this.getTokensList()).trigger(f).trigger(g),(!this.$wrapper.find(".token").length||"click"===b.type||e)&&this.$input.focus(),this.$input.css("width",this.options.minWidth+"px"),this.update(),b.preventDefault(),b.stopPropagation()}},update:function(a){var b=this.$input.val(),c=parseInt(this.$input.css("padding-left"),10),d=parseInt(this.$input.css("padding-right"),10),e=c+d;if(this.$input.data("edit")){if(b||(b=this.$input.prop("placeholder")),b===this.$mirror.text())return;this.$mirror.text(b);var f=this.$mirror.width()+10;if(f>this.$wrapper.width())return this.$input.width(this.$wrapper.width());this.$input.width(f)}else{if(this.$input.css("width",this.options.minWidth+"px"),"rtl"===this.textDirection)return this.$input.width(this.$input.offset().left+this.$input.outerWidth()-this.$wrapper.offset().left-parseInt(this.$wrapper.css("padding-left"),10)-e-1);this.$input.width(this.$wrapper.offset().left+this.$wrapper.width()+parseInt(this.$wrapper.css("padding-left"),10)-this.$input.offset().left-e-2)}},focusInput:function(b){if(!a(b.target).closest(".token").length&&!a(b.target).closest(".token-input").length){var c=this;setTimeout(function(){c.$input.focus()},0)}},search:function(){this.$input.data("ui-autocomplete")&&this.$input.autocomplete("search")},disable:function(){this.disabled=!0,this.$input.prop("disabled",!0),this.$element.prop("disabled",!0),this.$wrapper.addClass("disabled")},enable:function(){this.disabled=!1,this.$input.prop("disabled",!1),this.$element.prop("disabled",!1),this.$wrapper.removeClass("disabled")},destroy:function(){this.$element.val(this.getTokensList()),this.$element.css(this.$element.data("original-styles")),this.$element.prop("tabindex",this.$element.data("original-tabindex"));var b=a('label[for="'+this.$input.prop("id")+'"]');b.length&&b.prop("for",this.$element.prop("id")),this.$element.insertBefore(this.$wrapper),this.$element.removeData("original-styles"),this.$element.removeData("original-tabindex"),this.$element.removeData("bs.tokenfield"),this.$wrapper.remove();var c=this.$element;return delete this,c}};var d=a.fn.tokenfield;return a.fn.tokenfield=function(b,d){var e,f=[];Array.prototype.push.apply(f,arguments);var g=this.each(function(){var g=a(this),h=g.data("bs.tokenfield"),i="object"==typeof b&&b;"string"==typeof b&&h&&h[b]?(f.shift(),e=h[b].apply(h,f)):h||"string"==typeof b||d||g.data("bs.tokenfield",h=new c(this,i))});return"undefined"!=typeof e?e:g},a.fn.tokenfield.defaults={minWidth:60,minLength:0,allowDuplicates:!1,allowEditing:!0,limit:0,autocomplete:{},typeahead:{},showAutocompleteOnFocus:!1,createTokensOnBlur:!1,delimiter:",",beautify:!0},a.fn.tokenfield.Constructor=c,a.fn.tokenfield.noConflict=function(){return a.fn.tokenfield=d,this},c}),define("views/waybill/subscriptions/mail",["backbone","tokenfield"],function(a){return a.View.extend({events:{"click button":"submitEmails"},initialize:function(){var a=this;this.$el.addClass("inithack"),this.$tokenfield=this.$("input");var b=this.$tokenfield.attr("placeholder");this.$tokenfield.on("tokenfield:removetoken",function(){a.$tokenfield.tokenfield("getTokensList")||a.$(".token-input").attr("placeholder",b),a.$(".error[data-error=limit-reached]").hide(),a.updateSubscribeUIStatus()}).on("tokenfield:createtoken",function(b){a.$(".token-input").attr("placeholder",""),a.validateEmail(b.token.value)||($(b.relatedTarget).addClass("invalid"),a.$(".error[data-error=format]").show()),a.updateSubscribeUIStatus()}).tokenfield({createTokensOnBlur:!0,delimiter:[",","\n","	"," ","，"],limit:3,minWidth:100,leakCallback:function(){a.$(".error[data-error=limit-reached]").show()}}),this.$(".token-input").attr("placeholder",b).placeholder(),this.$el.removeClass("inithack")},validateEmail:function(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)},validateAllEmails:function(){var a=this.inputedEmails(),b=this,c=_.some(_.map(a,function(a){return!b.validateEmail(a)}));return a.length&&!c},updateSubscribeUIStatus:function(){this.$(".success").hide();var a=this.validateAllEmails();this.$("button").toggleClass("disabled",!a),a?this.$(".error[data-error=format]").hide():this.$(".error[data-error=format]").show(),this.inputedEmails().length||this.$(".error").hide()},inputedEmails:function(){var a=this.$tokenfield.tokenfield("getTokensList").split(",");return a=_.map(a,function(a){return a.trim()}),_.compact(a)},submitEmails:function(a){if(this.inputedEmails().length){this.$(".error").hide(),this.$(".success").hide();var b=$(a.currentTarget),c=this;b.button("loading"),this.collection.subscribeSelectedWaybillsWithEmails(this.inputedEmails()).success(function(){c.$(".success").show(),b.html(b.data("resetText"))}).error(function(a){if(403===a.status){var d,e=JSON.parse(a.responseText);if(_.isEmpty(e.emails))_.isEmpty(e.ids)||(d=e.ids>1?_p(_l("运单 %s 已经达到可订阅的上限，请取消勾选后重试。"),e.ids.join(", ")):_p(_l("运单 %s 已经达到可订阅的上限。"),e.ids.join(", ")));else{var f=e.emails.join(", ");d=_p(_l("邮箱地址 %s 已经订阅过选中的运单，请更换后重试。"),f)}c.$(".error[data-error=total-limit-exceeded]").html(d).show()}else a.status<500?c.$(".error[data-error=failed]").show():c.$(".error[data-error=server-network]").show();b.button("reset")})}}})}),define("views/waybill/subscriptions/subscription",["backbone","views/waybill/subscriptions/mail","templates","collections/waybills","helper"],function(a,b,c,d,e){return a.View.extend({events:{"click .checkbox-label":"selectAllBills","click .mail button":"mailClicked","click .qcode button":"qcodeClicked","click .toggle-plugins":"stopPropagation"},initialize:function(){},selectAllBills:function(){this.collection.updateSubscribedStatus($("#delivery-checkbox-all").prop("checked"))},mailClicked:function(a){a.stopPropagation(),$(".toggle-plugins").hide(),this.$mailSubscription.$el.show()},qcodeClicked:function(a){a.stopPropagation(),$(".toggle-plugins").hide();var b=$(a.currentTarget);b.button("loading");var c=this;c.$(".error[data-error=network]").hide(),this.collection.fetchWeiXinQRCodeForSelectedBills().success(function(a){b.button("reset"),c.$(".qcode-subscription img").attr("src",e.getWeiXinQRCodeURL(a.ticket)),c.$(".qcode-subscription").show()}).error(function(){c.$(".error[data-error=network]").show(),b.button("reset")})},stopPropagation:function(a){a.stopPropagation()},render:function(){this.$el.html(c.waybillSubscription({waybills:this.collection,hasSelected:this.collection.getSubscribedWaybills().length>0})),this.$("input").placeholder()}})}),define("views/waybill/itemsManager",["collections/waybills","templates","views/waybill/item","views/waybill/subscriptions/subscription"],function(a,b,c,d){return Backbone.View.extend({el:$(".delivery-wrapper"),initialize:function(){this.listenTo(this.collection,"change:isChecked",this.renderSubscription)},renderBasic:function(){this.$deliveries=$('<div class="deliveries"></div>'),this.$el.html(this.$deliveries),this.$subscription=$('<div class="subscription-wrapper"></div>'),this.$el.append(this.$subscription)},renderSubscription:function(){this.collection.subsribableWaybills().length>0?new d({el:this.$subscription,collection:this.collection}):this.$subscription.hide()},renderItem:function(a){var b=this.$deliveries,d=$('<div class="main-content-row delivery"></div>');b.append(d);var e=new c({el:d,model:a});e.render()},renderNotFoundItem:function(a){var c=this,d=c.$(".deliveries");d.append(b.waybillNotFound({billNumber:a}))}})}),define("views/waybill/billNumber/resultsManager",["views/waybill/itemsManager","helper"],function(a,b){return a.extend({initialize:function(){a.prototype.initialize.apply(this,arguments),this.listenTo(this.collection,"fetchItemsWithBillNumbers",this.fetch),this.listenTo(this.collection,"resetItemsWithEmptyInput",this.resetItemsWithEmptyInput)},resetItemsWithEmptyInput:function(){this.collection.reset(),this.billNumbers=[],this.render()},fetch:function(a){this.$el.slideUp();var c=this;this.billNumbers=a.billNumbers,this.collection.url=b.getRESTfulDomain("bills/"+this.billNumbers.join(",")+"/routes?app=bill"),a.validationCode?this.collection.url=this.collection.url+"&answer="+a.validationCode:this.collection.url=this.collection.url+"&ticket="+a.ticket,this.collection.fetch({reset:!0,success:function(){c.render()},error:function(b,d){404===d.status?(c.collection.models=[],c.render()):403!==d.status&&a.showNetworkError()},complete:function(b){a.searchComplete(),a.validationCode&&c.handleRespond(b,a)}})},handleRespond:function(a,b){var c=b.validationCode,d=403===a.status,e=a.getResponseHeader("captcha-bill-verification-required");c?d?b.showValidationCodeError():b.showValidationCode():e&&(d?b.showValidationCode():b.showValidationCodeAtFocus())},render:function(){var a=this;this.$el.slideDown(),this.renderBasic(),_.each(this.billNumbers,function(b){var c=a.collection.findWaybillById(b);c?a.renderItem(c):a.renderNotFoundItem(b)})}})}),define("views/quicktools/waybill",["backbone","tokenfield","helper","models/waybill","jquery-placeholder"],function(a,b,c,d){return a.View.extend({events:{"click .submit.primary-button":"queryBillNumbersandPhone","click .form-wrap .icon a":"setInputToken","click .phone .icon a":"queryBillNumbersByPhone","click .nearlyWaybillNO":"fillBillNOAndQuery","mouseout .tokenfield.form-control":"stopPropagation","focusin input.token-input":"setInputToken","focusout input.token-input":"setInputToken","input .phone input":"validatePhoneNumInput"},initialize:function(){this.$el.addClass("inithack");var a=this.$(".bill-numbers-input").attr("placeholder");this.setupTokenField(this.$(".bill-numbers-input"),a),this.$el.find(".tokenfield").find(".token")[0]&&this.$el.find(".tokenfield").find(".token").remove(),this.$el.removeClass("inithack")},setInputToken:function(a){var b=this;"focusin"===a.type||"click"===a.type?(this.$(a.target).data("input-status",!0),this.$el.find(".bill-number").removeClass("folded"),c.getArrayFromCookie("billNOs").length>0&&this.$el.find(".nearlyWaybill").find(".nearlyWaybillNO").data("bill",c.getArrayFromCookie("billNOs")[0]).html(c.getArrayFromCookie("billNOs")[0]).end().show()):(this.$(a.target).data("input-status",!1),this.$el.find(".token").length||this.$el.find(".token-input").val()||setTimeout(function(){b.$el.find(".tokenfield.form-control").hasClass("focus")||(b.$el.find(".bill-number").addClass("folded"),b.$el.find(".nearlyWaybill").hide())},200))},fillBillNOAndQuery:function(a){window.location.href=c.getDynamicURLWithContext("/waybill/#search/bill-number/"+$(a.target).data("bill"))},stopPropagation:function(a){a.stopPropagation()},placeHolderToggle:function(){if(0===this.inputedBillNumbers().length){var a=this.$(".tokenfield.form-control"),b=this.$(".token-input"),c=a.offset().left+a.width()+parseInt(a.css("padding-left"),10)-b.offset().left-1;b.attr("placeholder",this.placeholder).width(c).placeholder()}else this.$(".token-input").attr("placeholder","").removeClass("placeholder")},setupTokenField:function(a,b){this.placeholder=b;var c=this;this.$tokenfield=a;var e=20,f=function(){window.setTimeout(function(){c.validateBillNumbersInput(),c.validatePhoneNumInput()},0)};c.$tokenfield.attr("placeholder",b).on("tokenfield:removetoken",function(){c.$(".error[data-error=limit-exceeded]").hide(),c.placeHolderToggle(),c.inputValidate()&&c.$(".error[data-error=bill-number-format]").hide(),c.validateBillNumbersInput()}).on("tokenfield:createtoken",function(a){d.validateBillNumber(a.token.value)||$(a.relatedTarget).addClass("invalid"),c.placeHolderToggle(),f()}).on("tokenfield:preventduplicate",function(){window.setTimeout(function(){c.$(".error[data-error=bill-number-format]").show()},200)}).on("tokenfield:edittoken",function(){c.$(".token-input").on("blur",function(){f()}).on("keyup",function(a){a.currentTarget.value.length||(c.placeHolderToggle(),f())})}).tokenfield({createTokensOnBlur:!0,delimiter:[",","\n","	"," ","，"],limit:e,minWidth:90,leakCallback:function(){c.$(".token-input").val(""),c.$(".error[data-error=limit-exceeded]").show()}}),c.$(".token-input").attr("placeholder",b).placeholder()},inputedBillNumbers:function(){var a;try{a=this.$tokenfield.tokenfield("getTokensList").split(",")}catch(b){a=this.$tokenfield.tokenfield("getTokensList").val().split(",")}return a=_.map(a,function(a){return a.trim()}),_.compact(a)},hasInputs:function(){var a=!1;return _.each(this.inputedBillNumbers(),function(b){b.length&&(a=!0)}),a},hasPhoneNumInputs:function(){var a=!1,b=$(".quick-tool .phone input").val();return""!=b&&(a=!0),a},inputValidate:function(){return d.validateBillNumbers(this.inputedBillNumbers())},inputPhoneValidate:function(){var a=$(".quick-tool .phone input").val();return""!=a?c.isValidPhoneNumber(a):!0},validatePhoneNumInput:function(){this.inputPhoneValidate()?this.$(".error[data-error=phone-number-format]").hide():this.$(".error[data-error=phone-number-format]").show(),this.updateQueryButtonStatus()},validateBillNumbersInput:function(){this.inputValidate()?this.$(".error[data-error=bill-number-format]").hide():this.$(".error[data-error=bill-number-format]").show(),this.updateQueryButtonStatus()},updateQueryButtonStatus:function(){var a=$(".quick-tool .phone input").val();void 0!=a?!this.inputValidate()&&!this.hasPhoneNumInputs()||!this.inputValidate()&&!this.inputPhoneValidate()||!this.hasInputs()&&!this.inputPhoneValidate()?this.$("button").addClass("disabled"):this.$("button").removeClass("disabled"):this.inputValidate()?this.$("button").removeClass("disabled"):this.$("button").addClass("disabled")},queryBillNumbersandPhone:function(){var a=$(".quick-tool .phone input").val();if(void 0!=a){if(!this.inputValidate()&&!this.hasPhoneNumInputs()||!this.inputValidate()&&!this.inputPhoneValidate()||!this.hasInputs()&&!this.inputPhoneValidate())return;!this.hasInputs()&&this.inputPhoneValidate()&&this.hasPhoneNumInputs()||!this.inputValidate()&&this.inputPhoneValidate()&&this.hasPhoneNumInputs()?window.location.href=c.getDynamicURLWithContext("/waybill/#search/phone-number/"+a):window.location.href=c.getDynamicURLWithContext("/waybill/#search/bill-number/"+this.inputedBillNumbers().join(","))}else{if(!this.inputValidate())return;window.location.href=c.getDynamicURLWithContext("/waybill/#search/bill-number/"+this.inputedBillNumbers().join(","))}},queryBillNumbersByPhone:function(){var a=$(".quick-tool .phone input").val();this.inputPhoneValidate()&&(window.location.href=c.getDynamicURLWithContext("/waybill/#search/phone-number/"+a))}})}),define("views/waybill/billNumber/subView",["tokenfield","backbone","models/waybill","views/quicktools/waybill","helper","tencentCaptcha","templates"],function(a,b,c,d,e,f,g){return d.extend({el:".bill-number-wrapper",events:{"click .primary-button":"query","click .clear-inputs":"clearInputs","click .verification-code .refresh":"refreshValidationCode","click .verification-code img":"refreshValidationCode","keyup .verification-code input":"updateQueryButtonStatus","click .bill-number-list-content .bill":"fillInputToken","click .toggleWrapper":"toggleListContent"},initialize:function(){var a=this.$(".primary-button"),b=this.$(".tokenfield").attr("placeholder");this.setupTokenField(this.$(".tokenfield"),b),this.isGrayscaleUser=!0,window.isGrayscaleUser=this.isGrayscaleUser,f.initCap(),a.removeClass("disabled");var c=e.getArrayFromCookie("billNOs");c.length>0&&this.$(".bill-number-list-content").append(g.nearlyBillNOList({billArr:c})).show()},fillInputToken:function(a){this.$tokenfield.tokenfield("createToken",$(a.target).data("bill").toString())},toggleListContent:function(a){var b=$(a.target).closest(".toggleWrapper"),c=b.find(".arrow");c.hasClass("up")?(c.removeClass("up").addClass("down"),this.$(".bill-number-list-content").find("ul").hide()):(c.removeClass("down").addClass("up"),this.$(".bill-number-list-content").find("ul").show())},updateBillNumbers:function(a){var b=a.indexOf("?");b>-1&&(a=a.substring(0,b)),this.$(".token-input").attr("placeholder","").removeClass("placeholder"),this.$tokenfield.tokenfield("setTokens",a.commaReplace().split(",")),this.$(".token-input").val(""),this.query()},validateValidationCode:function(){if(this.$(".verification-code").is(":visible")){var a=this.$(".verification-code input").val().length>0;return a&&this.inputedBillNumbers().length}return!0},updateQueryButtonStatus:function(){var a=c.validateBillNumbers(this.inputedBillNumbers())&&this.validateValidationCode(),b=this.$("button");a&&b.text(b.data("resetText")),b.toggleClass("disabled",!a)},showValidationCode:function(){this.$(".verification-code").show(),this.refreshValidationCode()},showValidationCodeAtFocus:function(){var a=this;this.$tokenfield.siblings(".token-input").one("focus",function(){a.showValidationCode()})},showValidationCodeError:function(){this.$(".validation-code-error").show()},query:function(){if(!this.inputValidate()||!this.hasInputs())return this.collection.trigger("resetItemsWithEmptyInput"),void this.$(".error[data-error=bill-number-format]").show();this.$(".error").hide(),this.$(".token-input").val("");var a=this.$tokenfield.tokenfield("getTokensList",",").split(", ");a=_.map(a,function(a){return a.trim()});var b=this,d=this.$(".primary-button");if(c.fetchUserIpByNullUrl(a),this.isGrayscaleUser)var e=setInterval(function(){"function"==typeof capDestroy&&(f.refresh(function(c){0==c.ret&&(window.setTimeout(function(){d.button("loading")},100),b.collection.trigger("fetchItemsWithBillNumbers",{billNumbers:a,ticket:c.ticket,showNetworkError:function(){b.$(".error[data-error=server-network]").show()},searchComplete:function(){d.button("reset"),window.setTimeout(function(){b.updateQueryButtonStatus()},0)}}))}),clearInterval(e))},200);else{window.setTimeout(function(){d.button("loading")},100);var g=this.$(".verification-code input"),h=null;g.val()!==g.attr("placeholder")&&(h=g.val()),this.collection.trigger("fetchItemsWithBillNumbers",{billNumbers:a,validationCode:h,showValidationCode:function(){b.showValidationCode()},showValidationCodeError:function(){b.showValidationCodeError()},showValidationCodeAtFocus:function(){b.showValidationCodeAtFocus()},showNetworkError:function(){b.$(".error[data-error=server-network]").show()},searchComplete:function(){d.button("reset"),window.setTimeout(function(){b.updateQueryButtonStatus()},0)}})}},clearInputs:function(){this.$(".token-input").val(""),this.$tokenfield.tokenfield("setTokens",[]),this.$tokenfield.trigger("tokenfield:removetoken"),this.$(".error").hide(),this.placeHolderToggle()},refreshValidationCode:function(){var a=this.$("#validation-image"),b=$("#validation-image-child"),c=e.getRESTfulDomain("captcha/bill?force=true&time="+(new Date).getTime());a[0]&&a.attr("src",c),b[0]&&b.attr("src",c),this.$(".verification-code input").val(""),this.updateQueryButtonStatus(),this.$(".validation-code-error").hide()}})}),define("views/waybill/phoneNumber/resultsManager",["views/waybill/itemsManager","helper"],function(a,b){return a.extend({initialize:function(){a.prototype.initialize.apply(this,arguments),this.listenTo(this.collection,"fetchBillsWithPhoneNumbers",this.fetch)},fetch:function(a){this.$el.slideUp(),this.collection.url=b.getRESTfulDomain("bills/info?phone="+a.phone+"&date="+a.date+"&code="+a.code),a.area&&(this.collection.url+="&area="+a.area);var c=this;this.collection.fetch({reset:!0,cache:!1}).success(function(){_.each(c.collection.models,function(b){b.set("phone",a.phone)}),c.render()}).error(function(b){c.collection.reset(),c.render(),a.onError(b)}).complete(a.onComplete)},render:function(){if(this.collection.length){this.$el.slideDown();var a=this;this.renderBasic(),_.each(this.collection.models,function(b){a.renderItem(b)})}}})}),define("models/phoneNumber",["backbone","helper"],function(a,b){var c="852",d="853",e="886";return a.Model.extend({postNotification:function(c){return a.ajax({type:"post",url:b.getRESTfulDomain("bills/notification?lang="+b.getSiteLanguage()+"&app=sms&region="+b.getSiteLocation()+"&answer="+c.answer),data:c,headers:{"Query-Phone":c.phone,"Query-Date":c.date,"Query-answer":c.answer}})},validate:function(a){var b=/^1\d{10}$/;return b.test(a)},validateHK:function(a,b){var f=/^[0]{0,1}9\d{8}$/,g=/^[569]{1}\d{7}$/,h=/^6\d{7}$/;return c==b?g.test(a):d==b?h.test(a):e==b?f.test(a):!1},hasRegistMember:function(c){return a.ajax({type:"POST",url:b.getRESTfulDomain(_p("member/%(phone)s/exists?lang=%(lang)s&region=%(region)s",{phone:c,lang:b.getSiteLanguage(),region:b.getSiteLocation()}))})},registMember:function(c){return a.ajax({type:"POST",url:b.getRESTfulDomain(_p("member/regist?"+c+"&type=phone&lang=%(lang)s&region=%(region)s",{lang:b.getSiteLanguage(),region:b.getSiteLocation()}))})}})}),define("views/waybill/phoneNumber/subView",["helper","models/phoneNumber","templates","bootstrap","moment","utils/datepickerlist"],function(a,b,c){return Backbone.View.extend({el:".phone-number-wrapper",model:new b,hasSendSMS:!1,events:{"click .validation-code":"notificationServer","keyup .phone-number-validate-code":"validationCodeChanged","click .fetch-result":"fetchBillsWithPhoneNumbers","keyup .phone-number-input":"phoneNumberOrDateUpdated","change .date-picker":"phoneNumberOrDateUpdated","change .phone-number-area":"phoneNumberOrDateUpdated","click .date-picker":"showDatePicker","click .date-picker-wrapper":"stopPropagation","click .date-picker-toggle":"toggleDatePicker"},initialize:function(){this.setupDatePicker()},updateBillNumbers:function(a){var b=a.indexOf("?");b>-1&&(a=a.substring(0,b)),this.$(".phone-number-input").attr("placeholder","").removeClass("placeholder"),this.$(".phone-number-input").val(a).trigger("keyup")},setupDatePicker:function(){var a=this;this.$datepicker=this.$(".date-picker-wrapper"),this.$datepicker.datepickerlist({format:"YYYY-MM-DD",baseMomentDate:moment().add("day",-1),days:7}).on("changeDate",function(b,c){a.$(".date-picker").val(c).trigger("change"),a.$datepicker.hide()})},showDatePicker:function(a){a.stopPropagation(),this.$datepicker.show()},toggleDatePicker:function(a){this.$datepicker.is(":visible")||(a.stopPropagation(),this.$datepicker.show())},stopPropagation:function(a){a.stopPropagation()},phoneNumberOrDateUpdated:function(){if(this.$(".error").hide(),"resend"!==this.validationButtonMode){var b=this.$("#hk-area-list").val(),c=this.$(".phone-number-input").val();this.$(".date-picker").val();b?this.$(".validation-code").trigger("shouldBeActive",this.model.validateHK(c,b)):this.$(".validation-code").trigger("shouldBeActive",this.model.validate(c));var d=this.model.get("cachePhone");"cn"===a.getSiteLocation()&&"sc"===a.getSiteLanguage()&&this.hasRegistMember(c,d)}},hasRegistMember:function(a,b){var c=this;c.model.validate(a)||b?c.isSendingMemberCount||c.model.hasRegistMember(a).success(function(a){"1"===a.status&&(c.model.set("showRegisterMemberInPhoneQuery",!0),c.$("#mobile-query-show-register-member").show(),c.$("#mobileQueryRegisterMember").prop("checked",!0))}).error(function(){}):(c.model.set("showRegisterMemberInPhoneQuery",!1),c.$("#mobile-query-show-register-member").hide())},validationCodeChanged:function(){var a=this.$(".phone-number-validate-code").val().trim();this.$(".fetch-result").toggleClass("disabled",!(this.hasSendSMS&&a))},notificationServer:function(b){var c=this;a.imgVrfCodePC(c,b,c.subNotificationServer)},subNotificationServer:function(b,c,d){var e=b.$(".phone-number-input").val(),f=b.$(".date-picker").val(),g=b.$("#hk-area-list").val();g||(g=""),b.$(".error").hide();var h=b.$(".validation-code");h.trigger("start"),b.model.postNotification({phone:e,date:f,area:g,answer:d}).success(function(c){if(b.hasSendSMS=!0,"sc"===a.getSiteLanguage()&&c){var d=c.message||JSON.parse(c).message;b.encryptQueryStringForPhoneQueryBills=d}b.$(".phone-number-validate-code").val(""),b.validationCodeChanged()}).error(function(a){403===a.status?b.$(".error[data-error=validation-code]").show():404===a.status?b.$(".error[data-error=not-found]").show():408===a.status?b.$(".error[data-error=request-timeout]").show():410===a.status?b.$(".error[data-error=limit-send-sms]").show():b.$(".error[data-error=server-network]").show(),h.trigger("reset")})},fetchBillsWithPhoneNumbers:function(){this.$(".error").hide(),this.$(".fetch-result").button("loading");var b=this.$(".phone-number-input").val(),c=this.$(".date-picker").val(),d=this.$(".phone-number-validate-code").val(),e=this.$("#hk-area-list").val(),f=this,g=function(){f.$(".fetch-result").button("reset"),f.$(".phone-number-validate-code").val("")},h=function(a){404===a.status?f.$(".error[data-error=not-found]").show():403===a.status?f.$(".error[data-error=validation-code]").show():408===a.status?f.$(".error[data-error=request-timeout]").show():f.$(".error[data-error=server-network]").show()};this.collection.trigger("fetchBillsWithPhoneNumbers",{phone:b,date:c,code:d,area:e,onError:h,onComplete:g}),f.encryptQueryStringForPhoneQueryBills&&"sc"===a.getSiteLanguage()&&f.registMember(f.encryptQueryStringForPhoneQueryBills)},registMember:function(a){var b=this;b.$("#mobile-query-show-register-member").is(":visible")&&b.$("#mobileQueryRegisterMember").is(":checked")&&b.model.registMember(a).success(function(a){var b=a.status||JSON.parse(a).status;"1"===b&&($(".shipping-detail-page").append(c.registerMemberPop()),window.setTimeout(function(){$(".shipping-detail-page").children("#registerMemberPop").remove()},5e3))}).error(function(){})}})}),define("models/examWaybill",["backbone","helper","models/waybill"],function(a,b,c){return c.extend({},{validateBillNumber:function(a){var b=/^\d{6,11}$|^\d{13,15}$/;return b.test(a.trim())}})}),define("collections/examWaybills",["backbone","models/examWaybill","underscore","helper"],function(a,b,c,d){return a.Collection.extend({model:b,initialize:function(){this.billNumbers=[]},parse:function(a){return a=c.map(a,function(a){return b.parse(a)})},findWaybillById:function(a){return this.models[0]},updateSubscribedStatus:function(a){c.each(this.models,function(b){b.get("delivered")||b.set("isChecked",a)})},getSubscribedWaybills:function(){return this.where({isChecked:!0,delivered:!1})},isAllChecked:function(){var a=this.subsribableWaybills();return a.length?this.getSubscribedWaybills().length===a.length:!1},subsribableWaybills:function(){return this.where({delivered:!1})},subscribeSelectedWaybillsWithEmails:function(b){var e=c.map(this.getSubscribedWaybills(),function(a){return a.id});return a.ajax({url:d.getRESTfulDomain("bills/"+e.join(",")+"/subscription/email?lang="+d.getSiteLanguage()+"&region="+d.getSiteLocation()),type:"POST",data:JSON.stringify(b),headers:{"Content-Type":"application/json"}})},fetchWeiXinQRCodeForSelectedBills:function(){var b=c.map(this.getSubscribedWaybills(),function(a){return a.id});return a.ajax({url:d.getRESTfulDomain("weixin/"+b.join(",")+"/ticket")})}})}),define("views/waybill/examItem",["views/waybill/item","views/waybill/detail/routes","views/waybill/detail/billPicture","views/waybill/detail/info","views/waybill/detail/billInfo","jquery-placeholder"],function(a,b,c,d,e){return a.extend({detailViews:function(){var a=[];return a.push(new b({model:this.model})),"sc"===Helper.getSiteLanguage()&&this.model.get("signed")?a.push(new c({model:this.model})):this.model.get("mainlandToMainland")&&"en"!==Helper.getSiteLanguage()?a.push(new e({model:this.model})):"en"!=Helper.getSiteLanguage()&&"ru"!=Helper.getSiteLocation()&&a.push(new d({model:this.model})),a}})}),define("views/waybill/examItemsManager",["collections/examWaybills","templates","views/waybill/examItem","views/waybill/subscriptions/subscription"],function(a,b,c,d){return Backbone.View.extend({el:$(".delivery-wrapper"),initialize:function(){this.listenTo(this.collection,"change:isChecked",this.renderSubscription)},renderBasic:function(){this.$deliveries=$('<div class="deliveries"></div>'),this.$el.html(this.$deliveries),this.$subscription=$('<div class="subscription-wrapper"></div>'),this.$el.append(this.$subscription),this.renderSubscription()},renderSubscription:function(){this.collection.subsribableWaybills().length>0?new d({el:this.$subscription,collection:this.collection}):this.$subscription.hide()},renderItem:function(a){var b=this.$deliveries,d=$('<div class="main-content-row delivery"></div>');b.append(d);var e=new c({el:d,model:a});e.render()},renderNotFoundItem:function(a){var c=this,d=c.$(".deliveries");d.append(b.waybillExamNotFound({billNumber:a}))}})}),define("views/waybill/examNumber/resultsManager",["views/waybill/examItemsManager","helper"],function(a,b){return a.extend({initialize:function(){a.prototype.initialize.apply(this,arguments),this.listenTo(this.collection,"fetchItemsWithBillNumbers",this.fetch),
this.listenTo(this.collection,"resetItemsWithEmptyInput",this.resetItemsWithEmptyInput)},resetItemsWithEmptyInput:function(){this.collection.reset(),this.billNumbers=[],this.render()},fetch:function(a){this.$el.slideUp();var c=this;this.billNumbers=a.billNumbers,this.collection.url=b.getRESTfulDomain("bills/"+this.billNumbers+"/routesForExam?app=exam&answer="+a.validationCode),this.collection.fetch({reset:!0,success:function(){c.render()},error:function(b,d){404===d.status?(c.collection.models=[],c.render()):403!==d.status&&a.showNetworkError()},complete:function(b){a.searchComplete(),c.handleRespond(b,a)}})},handleRespond:function(a,b){var c=403===a.status;c?b.showValidationCodeError():b.showValidationCode()},render:function(){var a=this;this.$el.slideDown(),this.renderBasic();var b=a.collection.findWaybillById(this.billNumbers);b?a.renderItem(b):a.renderNotFoundItem(this.billNumbers)}})}),define("views/waybill/examNumber/subView",["tokenfield","backbone","models/examWaybill","helper"],function(a,b,c,d){return b.View.extend({el:".exam-number-wrapper",events:{"click .primary-button":"queryBillNumbers","click .clear-inputs":"clearInputs","click .verification-code .refresh":"refreshValidationCode","click .verification-code img":"refreshValidationCode","keyup .verification-code input":"updateQueryButtonStatus"},initialize:function(){this.refreshValidationCode()},updateBillNumbers:function(a){var b=this;window.setTimeout(function(){b.queryBillNumbers()},100)},validateValidationCode:function(){if(this.$(".verification-code").is(":visible")){var a=this.$(".verification-code input").val().length>0;return a&&this.$(".exam").val().length}return!0},updateQueryButtonStatus:function(){var a=c.validateBillNumber(this.$(".exam").val().trim())&&this.validateValidationCode(),a=!0,b=this.$("button");a&&b.text(b.data("resetText")),b.toggleClass("disabled",!a)},showValidationCode:function(){this.$(".verification-code").show(),this.refreshValidationCode()},showValidationCodeAtFocus:function(){view.showValidationCode()},showValidationCodeError:function(){this.$(".validation-code-error").show()},queryBillNumbers:function(){var a=this.$(".exam");if(!c.validateBillNumber(a.val()))return void this.$(".error[data-error=bill-number-format]").show();this.$(".error").hide(),this.$(".token-input").val("");var b=this.$(".verification-code input"),d=null;b.val()!==b.attr("placeholder")&&(d=b.val());var e=this,f=this.$(".primary-button");window.setTimeout(function(){f.button("loading")},100),this.collection.trigger("fetchItemsWithBillNumbers",{billNumbers:a.val().trim(),validationCode:d,showValidationCode:function(){e.showValidationCode()},showValidationCodeError:function(){e.showValidationCodeError()},showValidationCodeAtFocus:function(){e.showValidationCodeAtFocus()},showNetworkError:function(){e.$(".error[data-error=server-network]").show()},searchComplete:function(){f.button("reset"),window.setTimeout(function(){e.updateQueryButtonStatus()},0)}})},clearInputs:function(){this.$(".exam").val(""),this.$(".error").hide()},refreshValidationCode:function(){var a=this.$("#validation-image2"),b=$("#validation-image-child2"),c=d.getRESTfulDomain("captcha/exam?force=true&time="+(new Date).getTime());a&&a.attr("src",c),b&&b.attr("src",c),this.$(".verification-code input").val(""),this.updateQueryButtonStatus(),this.$(".validation-code-error").hide()}})}),define("views/waybill/masterController",["views/waybill/billNumber/resultsManager","views/waybill/billNumber/subView","views/waybill/phoneNumber/resultsManager","views/waybill/phoneNumber/subView","views/waybill/examNumber/resultsManager","views/waybill/examNumber/subView","collections/waybills","collections/examWaybills"],function(a,b,c,d,e,f,g,h){return Backbone.View.extend({el:$(".delivery-view"),events:{"click .navigation-tabs li":"tabToggle"},initialize:function(){this.waybills=new g,this.examWaybills=new h,this.billNumberSubView=null,this.phoneNumberSubView=null,this.examNumberSubView=null},tabToggle:function(a){$(a.currentTarget).hasClass("link")||Backbone.history.navigate("search/"+$($(a.currentTarget)).data("tab"),{trigger:!0,replace:!1}),"phone-number"===$($(a.currentTarget)).data("tab")?this.$("#query_note").show():this.$("#query_note").hide()},changeTabByHash:function(a){this.$(".navigation-tabs > li").removeClass("current"),this.$(".navigation-tabs > li[data-tab='"+a+"']").addClass("current"),this.$(".tab-content > li").hide(),this.$(".tab-content > li[data-tab='"+a+"']").show()},initTab:function(g,h){this.$(".delivery-wrapper").empty(),(!g||"bill-number"!==g&&"phone-number"!==g&&"exam-number"!==g)&&(g="bill-number"),this.changeTabByHash(g),"bill-number"===g&&(this.billNumberSubView||(this.billNumberSubView=new b({collection:this.waybills}),new a({collection:this.waybills})),h&&this.billNumberSubView.updateBillNumbers(h)),"phone-number"===g&&(this.phoneNumberSubView||(this.phoneNumberSubView=new d({collection:this.waybills}),new c({collection:this.waybills})),h&&this.phoneNumberSubView.updateBillNumbers(h),this.$("#query_note").show()),"exam-number"===g&&"sc"===Helper.getSiteLanguage()&&(this.examNumberSubView||(this.examNumberSubView=new f({collection:this.examWaybills}),new e({collection:this.examWaybills})),h&&this.examNumberSubView.updateBillNumbers(h))}})}),define("routers/shippingDetailRouter",["backbone","views/waybill/masterController"],function(a,b){return a.Router.extend({initialize:function(){this.searchMasterController=new b},routes:{"search/:targetTab":"initSearchWrapper","search/:targetTab/":"initSearchWrapper","search/:targetTab/:numbers":"initSearchWrapper","*path":"initSearchWrapper"},initSearchWrapper:function(a,b){this.searchMasterController.initTab(a,b)}})}),define("models/tax",["backbone","helper"],function(a,b){return a.Model.extend({getTaxDetail:function(){var c=this;a.ajax({contentType:"application/json",type:"GET",headers:{"Captcha-App":"kj3tax"},url:b.getRESTfulDomain("tax/kj3/"+this.get("ticket")+"?app=kj3tax&answer="+this.get("answer")),error:function(a){c.trigger("failed",a)},success:function(a){c.trigger("get-tax",a)}})}})}),function(a,b){var c=/[<>&\r\n"']/gm,d={"<":"lt;",">":"gt;","&":"amp;","\r":"#13;","\n":"#10;",'"':"quot;","'":"apos;"};a.extend({fileDownload:function(e,f){function g(){if(-1!=document.cookie.indexOf(n.cookieName+"="+n.cookieValue))return s.onSuccess(e),document.cookie=n.cookieName+"=; expires="+new Date(1e3).toUTCString()+"; path="+n.cookiePath,void i(!1);if(u||t)try{var b=u?u.document:h(t);if(b&&null!=b.body&&b.body.innerHTML.length){var c=!0;if(w&&w.length){var d=a(b.body).contents().first();d.length&&d[0]===w[0]&&(c=!1)}if(c)return s.onFail(b.body.innerHTML,e),void i(!0)}}catch(f){return s.onFail("",e),void i(!0)}setTimeout(g,n.checkInterval)}function h(a){var b=a[0].contentWindow||a[0].contentDocument;return b.document&&(b=b.document),b}function i(a){setTimeout(function(){u&&(l&&u.close(),k&&(u.focus(),a&&u.close()))},0)}function j(a){return a.replace(c,function(a){return"&"+d[a]})}var k,l,m,n=a.extend({preparingMessageHtml:null,failMessageHtml:null,androidPostUnsupportedMessageHtml:"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",dialogOptions:{modal:!0},prepareCallback:function(a){},successCallback:function(a){},failCallback:function(a,b){},httpMethod:"GET",data:null,checkInterval:100,cookieName:"fileDownload",cookieValue:"true",cookiePath:"/",popupWindowTitle:"Initiating file download...",encodeHTMLEntities:!0},f),o=new a.Deferred,p=(navigator.userAgent||navigator.vendor||b.opera).toLowerCase();/ip(ad|hone|od)/.test(p)?k=!0:-1!==p.indexOf("android")?l=!0:m=/avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(p)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(p.substr(0,4));var q=n.httpMethod.toUpperCase();if(l&&"GET"!==q)return a().dialog?a("<div>").html(n.androidPostUnsupportedMessageHtml).dialog(n.dialogOptions):alert(n.androidPostUnsupportedMessageHtml),o.reject();var r=null,s={onPrepare:function(b){n.preparingMessageHtml?r=a("<div>").html(n.preparingMessageHtml).dialog(n.dialogOptions):n.prepareCallback&&n.prepareCallback(b)},onSuccess:function(a){r&&r.dialog("close"),n.successCallback(a),o.resolve(a)},onFail:function(b,c){r&&r.dialog("close"),n.failMessageHtml&&a("<div>").html(n.failMessageHtml).dialog(n.dialogOptions),n.failCallback(b,c),o.reject(b,c)}};s.onPrepare(e),null!==n.data&&"string"!=typeof n.data&&(n.data=a.param(n.data));var t,u,v,w;if("GET"===q){if(null!==n.data){var x=e.indexOf("?");-1!==x?"&"!==e.substring(e.length-1)&&(e+="&"):e+="?",e+=n.data}k||l?(u=b.open(e),u.document.title=n.popupWindowTitle,b.focus()):m?b.location(e):t=a("<iframe>").hide().prop("src",e).appendTo("body")}else{var y="";null!==n.data&&a.each(n.data.replace(/\+/g," ").split("&"),function(){var a=this.split("="),b=n.encodeHTMLEntities?j(decodeURIComponent(a[0])):decodeURIComponent(a[0]);if(b){var c=n.encodeHTMLEntities?j(decodeURIComponent(a[1])):decodeURIComponent(a[1]);y+='<input type="hidden" name="'+b+'" value="'+c+'" />'}}),m?(w=a("<form>").appendTo("body"),w.hide().prop("method",n.httpMethod).prop("action",e).html(y)):(k?(u=b.open("about:blank"),u.document.title=n.popupWindowTitle,v=u.document,b.focus()):(t=a("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body"),v=h(t)),v.write("<html><head></head><body><form method='"+n.httpMethod+"' action='"+e+"'>"+y+"</form>"+n.popupWindowTitle+"</body></html>"),w=a(v).find("form")),w.submit()}return setTimeout(g,n.checkInterval),o.promise()}})}(jQuery,this),define("jquery-download",["jquery"],function(){}),define("views/tax",["templates","backbone","models/tax","helper","jquery-download"],function(a,b,c,d,e){return b.View.extend({events:{"click .primary-button.fetch-result":"getTaxDetail","click .primary-button.download":"download","click .verification-code .refresh":"refreshValidationCode","click .validation-image":"refreshValidationCode","keyup input":"checkInput","blur input":"checkInput","click .close":"closeModal"},initialize:function(){this.refreshValidationCode("refresh-search-code"),this.model=new c,this.listenTo(this.model,"get-tax",this.renderTax).listenTo(this.model,"failed",this.renderFailed)},download:function(){var a=this,b=d.getRESTfulDomain("tax/kj3/"+this.model.get("ticket")+".pdf?app=kj3tax&lang="+d.getSiteLanguage()+"&region="+d.getSiteLocation()+"&answer="+$("#validation-download-code").val());$.fileDownload(b).fail(function(){alert(_l("验证码输入有误，文件下载失败!"))}),window.setTimeout(function(){a.refreshValidationCode("refresh-download-code")},1e3)},clearHint:function(){this.$(".hint").removeClass("show"),this.$(".hint .error.show").removeClass("show")},closeModal:function(){this.refreshValidationCode("refresh-search-code"),$("#tax-modal").modal("hide")},renderTax:function(b){if(b.validation=this.$("#validation-search-code").val(),0===b.code){var c="KJ3",d="F";c==b.taxType?$(".modal-content.tax-detail").html(a.taxDetail({result:b})):d==b.taxType?$(".modal-content.tax-detail").html(a.taxBorderDetail({result:b})):$(".modal-content.tax-detail").html(a.taxPersonDetail({result:b})),this.$("#tax-modal").modal({keyboard:!0,backdrop:!0}),this.refreshValidationCode("refresh-download-code")}else this.renderMsg(b.code)},renderFailed:function(a){403===a.status?this.renderMsg("5"):this.renderMsg("6")},renderMsg:function(a){this.refreshValidationCode("refresh-search-code"),this.$(".hint").addClass("show"),this.$(".hint .error.show").removeClass("show"),a?(a="#code-"+a,this.$(a).addClass("show")):this.$("#code-2").addClass("show")},getTaxDetail:function(a){a.preventDefault(),this.model.set("ticket",this.$("#ticket").val()).set("answer",this.$("#validation-search-code").val()).getTaxDetail()},checkInput:function(a){this.clearHint(),"validation-download-code"===a.currentTarget.id?this.$(".primary-button.download").toggleClass("disabled",!this.isExist(this.$("#validation-download-code").val())):this.$(".primary-button.fetch-result").toggleClass("disabled",!(/^\d{12}$/.test(this.$("#ticket").val())&&this.isExist(this.$("#validation-search-code").val())))},isExist:function(a){return a&&""!==a},refreshValidationCode:function(a){switch(a=_.isObject(a)?a.currentTarget.id:a){case"refresh-search-code":a="#validation-search-image";break;case"refresh-download-code":a="#validation-download-image";break;case"validation-search-image":a="#"+a;break;case"validation-download-image":a="#"+a}var b=this.$(a),c=d.getRESTfulDomain("captcha/kj3tax?force=true&time="+moment());b.attr("src",c),this.$(".primary-button.download").toggleClass("disabled",!0),this.$(".verification-code input").val("")}})}),define("views/navigationTabs",["backbone"],function(a){return a.View.extend({events:{"click li":"highlightCurrentTab"},highlightCurrentTab:function(a){this.$("li").hasClass("link")||(this.$("li").removeClass("current"),$(a.currentTarget).addClass("current"))}})}),define("views/rightBottomLayer",["backbone","templates"],function(a,b){return a.View.extend({events:{"click .weixin .layer-close":"closeWeixinDiv","click .tip .layer-close":"closeTipDiv","click .tip-left .layer-close":"closeTipDiv"},initialize:function(){this.render()},render:function(){this.showDiv()},showDiv:function(a){this.$(".right-bottom-float").show()},closeWeixinDiv:function(a){var b=$(a.target);b.parents(".weixin").hide()},closeTipDiv:function(a){var b=$(a.target);b.parents(".tip").hide(),b.parents(".tip-left").hide()}})}),define("views/orderButton",["backbone","helper"],function(a,b){return a.View.extend({initialize:function(){var a=this.$el,b=a.width(),c=a.find(".arrow"),d=a.find(".flash"),e=a.find(".icon"),f=e.attr("src");a.hover(function(){e.attr("src",f),e.show(),a.animate({paddingLeft:15,paddingRight:15}),c.animate({opacity:1}),d.animate({left:b})},function(){a.removeClass("hover"),a.animate({paddingLeft:0,paddingRight:0}),c.animate({opacity:0}),d.hide().css({left:"-101px"})})}})}),define("views/switchRegionAndLanguage",["backbone","helper"],function(a,b){return a.View.extend({events:{"click a":"switchRegionAndLanguage"},switchRegionAndLanguage:function(a){a.preventDefault(),b.switchRegionAndLanguage($(a.target).data("region"),$(a.target).data("language"))}})}),define("views/cooperativeAdvisory/coomperativeAdvisory",["backbone","templates","jquery","helper"],function(a,b,c,d){return a.View.extend({events:{"click .select p":"openCooperativeType","click .select a":"chooseCooperativeType","click #validation-image":"refreshValidationCode","blur .contact-name input.text":"checkContactName","blur .mobile input.text":"inputChangedByMobile","blur .require-company input.text":"checkCompanyName","blur .send-addr input.text":"checkSendAddr","blur .send-city input.text":"checkSendCity","blur .send-content input.text":"checkSendContent","blur .month-send-num input.text":"inputChangedByMonthSendNum","click .r-btn-a":"sumitApplication","focus .contact-name input.text, .mobile input.text, .require-company input.text, .send-addr input.text , .send-city input.text, .industry input.text, .send-content input.text, .month-send-num input.text":"hideErrorPrompt","focus #code":"hideValidcodeErrorPrompt","click .require-policy input.policy":"agreePrivacy"},initialize:function(){this.errorCode=[],this.defaultCooperativeType(),this.refreshValidationCode()},openCooperativeType:function(a){c(a.currentTarget).parent().toggleClass("active"),c(a.currentTarget).parent().siblings().removeClass("active")},defaultCooperativeType:function(){c(".send-content").show(),c(".subclass .input").removeClass("s-prompt"),c(".validation-code").siblings(".input").find(".error-prompt").hide(),c("form")[0].reset(),this.showSubmitBut(),this.setDefaultBusinessType()},showSubmitBut:function(){c(".r-btn-b").hide(),c(".submit-bottom .r-prompt").hide(),c(".r-btn-a").show()},hideErrorPrompt:function(a){var b=c(a.currentTarget);b.parent().removeClass("s-prompt")},hideValidcodeErrorPrompt:function(){c(".validation-code-prompt").hide()},setDefaultBusinessType:function(){var a=c("ul.type-down").children().first().find("a").data("cooperative-type"),b=c("ul.type-down").children().first().find("a").text();c("#business-type").data("business-type",a),c("#business-type").val(b)},chooseCooperativeType:function(a){var b=c(a.currentTarget),d=b.html(),e=b.data("cooperative-type");b.parent().parent().parent().removeClass("active"),b.parent().parent().siblings("p").html("").append(d),c("#business-type").data("businessType",e),c("#business-type").val(d)},refreshValidationCode:function(){var a=this.$("#validation-image"),b=d.getRESTfulDomain("captcha/cooperative?force=true&time="+(new Date).getTime());a&&a.attr("src",b)},inputChangedByMobile:function(a){var b=c(a.currentTarget).val(),e=d.isValidPhoneNumber(b);""==b||null==b?(c(".mobile .error-prompt").prop("lastChild").nodeValue=_l("您的联系电话不可为空"),c(".mobile .input").addClass("s-prompt")):""==c.trim(b)||e?c(".mobile .input").removeClass("s-prompt"):(c(".mobile .error-prompt").prop("lastChild").nodeValue=_l("您输入联系电话错误"),c(".mobile .input").addClass("s-prompt"))},inputChangedByMonthSendNum:function(a){var b=c(a.currentTarget).val(),d=this.isMonthSendNum(b);""==c.trim(b)||d?c(".month-send-num .input").removeClass("s-prompt"):(c(".month-send-num .error-prompt").prop("lastChild").nodeValue=_l("您输入的预估月快递费用必须大于等于0"),c(".month-send-num .input").addClass("s-prompt"))},isMonthSendNum:function(a){var b=/^\d+$/;return b.test(a)},getSendContentLength:function(a){for(var b=/[^\x00-\xff]/g,c=0,d=0;d<a.length;d++){var e=a.charAt(d).toString();c+=b.test(e)?2:1}return c},sumitApplication:function(){var a=c("#code").val(),b=null;this.checkParams(),0===this.errorCode.length&&(b={source:c("input[name='source']").val(),user:c("input[name='user']").val(),mobile:c("input[name='mobile']").val(),companyName:c("input[name='companyName']").val(),address:c("input[name='address']").val(),city:c("input[name='city']").val(),carrier:c("input[name='carrier']").val(),quantity:c("input[name='quantity']").val(),positon:c("input[name='positon']").val(),email:c("input[name='email']").val()},this.saveCooperativeAjax(b,a))},saveCooperativeAjax:function(b,e){var f=this;a.ajax({type:"POST",contentType:"application/json",url:d.getRESTfulDomain("cudp/saveCoopConsult?app=cooperative&answer="+e),data:JSON.stringify(b),success:function(a){if("200"===a.retCode&&(c(".r-btn-a").hide(),c(".submit-bottom .r-prompt").show()),"201"===a.retCode){c(".r-btn-b").show(),c(".validation-code-prompt").hide(),f.refreshValidationCode();setTimeout("$('.r-btn-b').hide()",3e3)}},error:function(a){403===a.status?(c(".validation-code-prompt").prop("lastChild").nodeValue=_l("您输入的验证码有误，请重新输入"),c(".validation-code-prompt").show()):(c(".r-btn-b").text(_l("网络异常，请稍后再试！")),c(".r-btn-b").css("width","220px"),c(".r-btn-b").show(),setTimeout("$('.r-btn-b').hide()",3e3),f.refreshValidationCode())}})},checkParams:function(){this.errorCode.splice(0,this.errorCode.length),this.checkValidCode(),this.checkContactName(),this.checkMobile(),this.checkPrivacyPolicy(),this.checkContactName(),this.checkMobile()},checkValidCode:function(){var a=c("#code").val();(""==a||null==a)&&(c(".validation-code-prompt").prop("lastChild").nodeValue=_l("您输入的验证码不能为空"),c(".validation-code-prompt").show(),this.errorCode.push("911"))},checkContactName:function(){var a=c.trim(c(".contact-name input").val());(""==a||null==a)&&(c(".contact-name .input").addClass("s-prompt"),this.errorCode.push("900"))},checkMobile:function(){var a=c.trim(c(".mobile input").val());""==a||null==a?(c(".mobile .input").addClass("s-prompt"),this.errorCode.push("901")):d.isValidPhoneNumber(a)||(c(".mobile .error-prompt").html(_l("您输入联系电话有误，请重新输入")),c(".mobile .input").addClass("s-prompt"),this.errorCode.push("902"))},checkPrivacyPolicy:function(){c("#policy").attr("checked")?c(".require-policy .checkbox").removeClass("s-prompt"):(c(".require-policy .error-prompt").prop("lastChild").nodeValue=_l("必须同意隐私声明"),c(".require-policy .error-prompt").show(),c(".require-policy .checkbox").addClass("s-prompt"),this.errorCode.push("911"))},agreePrivacy:function(a){var b=c(a.currentTarget);b.attr("checked")?c(".require-policy .error-prompt").hide():c(".require-policy .error-prompt").show()}})}),define("models/declare",["backbone","jquery","helper","jquery.iframe-transport"],function(a,b,c){return a.Model.extend({getVerifictionCode:function(b){var d=this;a.ajax({type:"POST",url:c.getRESTfulDomain("sms/idcard/"+d.get("phone")+"/notification?app=sms&lang="+c.getSiteLanguage()+"&region="+c.getSiteLocation()+"&answer="+b),error:function(a){d.trigger("get-validation-failed",a)},success:function(a){d.trigger("get-validation-success",a)}})},uploadImg:function(b,d){var e=this;a.ajax({type:" POST",dataType:"json",data:b,files:d.files,iframe:!0,processData:!1,url:c.getRESTfulDomain("idcard/upload/pic?verificationApp=idcard&verificationCode="+e.get("code")+"&verificationMobile="+e.get("phone")+e.get("queryString")),headers:{"SMS-Verification-App":"idcard","SMS-Verification-Code":e.get("code"),"SMS-Verification-Mobile":e.get("phone")},error:function(a,b,c){e.trigger("img-upload-failed",a.responseText)},success:function(a,b,c){e.trigger("img-upload-success",a,c.responseText)}})},parseQueryString:function(b){var d=this;a.ajax({contentType:"application/json",type:"GET",data:b,url:c.getRESTfulDomain("idcard/decode"),error:function(a){d.trigger("decode-url-failed",a)},success:function(a){d.trigger("decode-url-success",a)}})},uploadWithoutImg:function(b){var d=this;a.ajax({contentType:"application/x-www-form-urlencoded",type:"POST",headers:{"SMS-Verification-App":"idcard","SMS-Verification-Code":d.get("code"),"SMS-Verification-Mobile":d.get("phone")},data:b,url:c.getRESTfulDomain("idcard/upload/nopic"),error:function(a){d.trigger("no-img-upload-failed",a)},success:function(a){d.trigger("no-img-upload-success",a)}})}})}),define("views/declare",["templates","backbone","models/declare","helper","jquery-download"],function(a,b,c,d){return b.View.extend({initialize:function(){return this.model=new c,this.queryStrings=d.getQueryStrings(),this.queryStrings&&this.queryStrings.mcn&&this.queryStrings.ts&&this.queryStrings.sign?(this.queryStrings.mcn=this.queryStrings.mcn.substring(0,32),this.queryStrings.ts=this.queryStrings.ts.substring(0,13),this.queryStrings.sign=this.queryStrings.sign.substring(0,32),this.model.set("queryString",this.getQueryStringFromURL()),this.waitTime=30,this.$phone=this.$("#phone"),this.$name=this.$("#name"),this.$firstUploadButton=this.$("#firstUpload"),this.$notFirstUploadButton=this.$("#notFirstUpload"),this.$validation=this.$("#validation"),this.$cardId=this.$("#cardId"),this.$validationCode=this.$(".validation-code"),this.$orderNo=this.$("#orderNo"),this.$saveToOWT=this.$("#saveToOWT"),this.$toThirdPart=this.$("#toThirdPart"),this.isFirstUpload=!0,this.maxSendPhoneValidationCount=5,this.sendPhoneValidationCount=0,this.listenTo(this.model,"img-upload-success",this.imgUploadSuccess).listenTo(this.model,"img-upload-failed",this.imgUploadFailed).listenTo(this.model,"no-img-upload-success",this.noimgUploadSuccess).listenTo(this.model,"no-img-upload-failed",this.noimgUploadFailed).listenTo(this.model,"get-validation-success",this.renderValidationSuccess).listenTo(this.model,"get-validation-failed",this.renderValidationFailed).listenTo(this.model,"decode-url-success",this.decodeUrlSuccess).listenTo(this.model,"decode-url-failed",this.decodeUrlFailed),void this.parseQueryString(this.queryStrings)):void this.illegelURLLink()},events:{"click .primary-button.upload-personal-id":"uploadFile","click .primary-button.validation-code":"getValidationCode","click  button#notFirstUpload":"notFirstUpload","click  button#firstUpload":"firstUpload","keyup input#orderNo":"checkInputOrderNo","blur input#orderNo":"checkInputOrderNo","keyup input#name":"checkInputName","blur input#name":"checkInputName","keyup input#phone":"checkInputPhone","blur input#phone":"checkInputPhone","keyup input#cardId":"checkInputIdcardNumber","blur input#cardId":"checkInputIdcardNumber","change input#idcardFront":"checkIdcardFileChange","change input#idcardBack":"checkIdcardFileChange","keyup input":"checkInput","blur input":"checkInput","submit form":"uploadFile","click #proDisagree":"proDisagree","click #proAgree":"proAgree","click #close":"proDisagree","click #cardTypeUl li a":"chooseCardType"},getQueryStringFromURL:function(){return 0===location.search.slice(1).length?"":"&"+location.search.slice(1).substring(0,91)},firstUpload:function(){this.$firstUploadButton.addClass("checked"),this.$notFirstUploadButton.removeClass("checked"),this.$(".first-upload").show(),this.isFirstUpload=!0,this.checkAllInput()},notFirstUpload:function(){this.$firstUploadButton.removeClass("checked"),this.$notFirstUploadButton.addClass("checked"),this.$(".first-upload").hide(),this.isFirstUpload=!1,this.checkAllInput()},render:function(){},uploadFile:function(a){var b=d.isValidPhoneNumber(this.$("#phone").val())&&this.$("#phone").val()===this.model.get("phone");if(!b)return void this.renderMsg(15);var c={};if(a&&a.preventDefault(),_.each(this.$('form :input[type="text"]'),function(a){c[a.name]=a.value}),this.$saveToOWT.is(":checked")&&this.$saveToOWT.is(":visible")?c.saveToOWT=1:c.saveToOWT=0,this.$toThirdPart.is(":checked")?c.toThirdPart="true":c.toThirdPart="false",c.cardType=$("#cardType").val(),this.isFirstUpload){if(!this.isIdcardImageSelected())return void this.renderMsg(12);this.model.set("code",this.$validation.val()).uploadImg(c,{files:this.$("form :file"),data:c})}else this.$(".primary-button.upload-personal-id").text("提交中...").addClass("disabled"),_.each(this.queryStrings,function(a,b,d){c[b]=a}),this.model.set("code",this.$validation.val()).uploadWithoutImg(c)},isIdcardImageSelected:function(){return(isIdcardFrontSelect=""==this.$("#idcardFront").val()?!1:!0)&&(isIdcardBackSelect=""==this.$("#idcardBack").val()?!1:!0)},imgUploadSuccess:function(a,b){this.clearHint();var c="500";try{c=JSON.parse(b).code}catch(d){c=b}c+="","21"===c?this.renderMsg("600"):"9"===c?this.renderMsg("500"):"004"===c||"002"===c?this.renderMsg("008"):"003"===c?this.renderMsg("009"):"0"===c?this.uploadImgSuccessHint():this.renderMsg(c),this.disabledUploadButton()},imgUploadFailed:function(a){this.clearHint(),this.$("#code-404").addClass("show"),this.disabledUploadButton()},noimgUploadSuccess:function(a){this.clearHint(),this.$("#code-7").addClass("show"),0!=a.code?this.renderMsg(a.code):this.uploadImgSuccessHint(),this.disabledUploadButton(),this.$("#notFirstUpload").removeClass("disabled")},disabledUploadButton:function(){this.$(".primary-button.upload-personal-id").text(_l("提交报关信息")).removeClass("disabled")},noimgUploadFailed:function(a){if(this.clearHint(),403===a.status){var b=JSON.parse(a.responseText).code||a.responseText;"21"===b?this.renderMsg("600"):"004"===b||"002"===b?this.renderMsg("008"):this.renderMsg("009")}else 400===a.status?this.renderMsg("14"):(this.$validationCode.addClass("disabled"),this.$(".primary-button.upload-personal-id").addClass("disabled"),this.renderMsg("#code-000"));this.$(".primary-button.upload-personal-id").text(_l("提交报关信息"))},clearHint:function(){this.$(".hint").removeClass("show"),this.$(".hint .error.show").removeClass("show")},uploadImgSuccessHint:function(){this.clearHint(),this.$("#code-0").addClass("show"),this.$(".primary-button.upload-personal-id").toggleClass("disabled",!0),this.disabledAllInput()},getValidationCode:function(a){var b=this;a.preventDefault(),a.stopPropagation(),b.$("#validation-fetch-403").hide(),b.$("#validation-fetch-410").hide(),d.imgVrfCodePC(b,a,b.getValidationCodeSubmit)},getValidationCodeSubmit:function(a,b,c){if(b.preventDefault(),b.stopPropagation(),a.$validation.val(""),a.$validationCode.toggleClass("disabled",!0).data("wait",!0),a.sendPhoneValidationCount>a.maxSendPhoneValidationCount){a.$("#max-count").show();window.setInterval(function(){a.$("#max-count4").hide()},5e3)}else a.model.set("phone",a.$phone.val()).getVerifictionCode(c)},renderValidationSuccess:function(){this.clearHint(),this.setTimeOut(),this.$validation.attr({disabled:!1}),this.sendPhoneValidationCount+=1},renderValidationFailed:function(a){if(403===a.status)this.$("#validation-fetch-403").show(),this.setTimeOut();else if(410===a.status)this.$("#validation-fetch-410").show(),this.setTimeOut();else{this.clearHint(),this.$("#validation-fetch-404").show(),this.$validationCode.data("wait",!1),this.setTimeOut(),this.$validation.attr({disabled:!0});window.setInterval(function(){this.$("#validation-fetch-404").hide()},5e3)}},setTimeOut:function(){var a=this,b=a.waitTime;a.$validationCode.text(_l("重新获取")+b).toggleClass("disabled",!0);var c=window.setInterval(function(){return b-=1,0>=b?(window.clearInterval(c),a.$validationCode.text(_l("获取验证码")).data("wait",!1),void(/^\d{11}$/.test(a.$phone.val())&&a.$validationCode.toggleClass("disabled"))):void a.$validationCode.text(_l("重新获取")+b)},1e3)},renderMsg:function(a){this.$(".hint").addClass("show"),this.$(".hint .error.show").removeClass("show"),a?(a="#code-"+a,this.$(a).addClass("show")):this.$("#code-2").addClass("show")},checkAllInput:function(){var a=""===this.$name.val()?!1:this.$name.val(),b=d.isValidPhoneNumber(this.$("#phone").val()),c=/^\d{6}$/.test(this.$validation.val()),e=this.validIdcardNumber(),f=this.validOrderNumber(),g=this.checkNameLength(this.$name.val()),h=f&&a&&g&&b&&c,i=h&&this.isIdcardImageSelected()&&e;return this.isFirstUpload?void this.$(".primary-button.upload-personal-id").toggleClass("disabled",!i):void this.$(".primary-button.upload-personal-id").toggleClass("disabled",!h)},checkInput:function(a){this.checkAllInput()},checkInputPhone:function(a){"keyup"===a.type&&(this.clearHint(),"phone"===a.currentTarget.id&&this.$validation.val(""));var b=d.isValidPhoneNumber(this.$("#phone").val()),c=this.$validationCode.data("wait");this.$validationCode.toggleClass("disabled",!(b&&!c)),this.clearHint();var e=this.isFirstUpload?"4":"4_";""===this.$("#phone").val()&&(this.clearHint(),this.renderMsg(e)),b||(this.clearHint(),this.renderMsg(e))},checkInputOrderNo:function(a){this.clearHint();var b=this.isFirstUpload?"4":"4_";""===this.$orderNo.val()&&this.renderMsg(b),this.validOrderNumber()||this.renderMsg("5")},validOrderNumber:function(){
var a=this.$orderNo.val();return""!=a&&a.length<=35},checkInputName:function(a){this.clearHint();var b=this.isFirstUpload?"4":"4_";this.checkNameLength(this.$name.val())||this.renderMsg(b)},checkNameLength:function(a){return a=encodeURIComponent(a),a=a.replace(/%[A-F\d]{2}/g,"U"),""===a||a.length>60?!1:!0},checkInputIdcardNumber:function(a){this.clearHint(),isValidIdcardNumber=this.validIdcardNumber();var b=this.isFirstUpload?"4":"4_";isValidIdcardNumber||this.renderMsg(b)},validIdcardNumber:function(){var a=this.$cardId.val();return""!=a&&d.validIdcardNumber(a)},parseQueryString:function(a){this.model.parseQueryString(a)},decodeUrlSuccess:function(a){return a.configured?($("#toThirdPartWrap").show(),$("#toThirdPart").attr("checked",!0)):$("#toThirdPartWrap").hide(),this.clearHint(),this.showProtocal(),!0},decodeUrlFailed:function(a){this.clearHint(),404===a.status?this.renderMsg(404):500===a.status?this.renderMsg("000"):this.illegelURLLink()},illegelURLLink:function(){this.disabledAllInputs(),this.renderMsg(600)},disabledAllInput:function(){this.$("input").val(""),this.$validation.prop("disabled",!0)},disabledAllInputs:function(){this.$("input").not("#cardType").val("").prop("disabled",!0),this.$validation.prop("disabled",!0)},clearHint:function(){this.$(".hint").removeClass("show"),this.$(".hint .error.show").removeClass("show")},checkIdcardFileChange:function(){this.checkAllInput()},troggleHint:function(a){this.$(a).show();window.setInterval(function(){this.$(a).hide()},5e3)},showProtocal:function(){var a='<div id="layerMask" style="background: #aaaaaa;opacity: .3;position: fixed;top: 0;left: 0;width: 100%;height: 100%;z-index:999;"></div>',b=$("#protocal");this.resizePop(b),$("body").append(a),b.parent().css("display","inline");var c=$(window).height(),d=b.height(),e=(c-d)/2-100;b.animate({top:e+"px"},500)},resizePop:function(a){var b=a.width(),c=(a.height(),$(window).width()),d=($(window).height(),(c-b)/2);a.css({left:d+"px",top:"0px","z-index":1e3,position:"fixed"})},proDisagree:function(a){$("#layerMask").remove(),$("#protocal").hide(),this.disabledAllInputs()},proAgree:function(){$("#layerMask").remove(),$("#protocal").hide()},chooseCardType:function(a){var b=$(a.currentTarget);$("#cardTypeBtn").text(b.text()),$("#cardType").val(b.data("value"))}})}),function(a){a.fn.qrcode=function(b){function c(a){this.mode=h,this.data=a}function d(a,b){this.typeNumber=a,this.errorCorrectLevel=b,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function e(a,b){if(void 0==a.length)throw Error(a.length+"/"+b);for(var c=0;c<a.length&&0==a[c];)c++;this.num=Array(a.length-c+b);for(var d=0;d<a.length-c;d++)this.num[d]=a[d+c]}function f(a,b){this.totalCount=a,this.dataCount=b}function g(){this.buffer=[],this.length=0}var h;c.prototype={getLength:function(){return this.data.length},write:function(a){for(var b=0;b<this.data.length;b++)a.put(this.data.charCodeAt(b),8)}},d.prototype={addData:function(a){this.dataList.push(new c(a)),this.dataCache=null},isDark:function(a,b){if(0>a||this.moduleCount<=a||0>b||this.moduleCount<=b)throw Error(a+","+b);return this.modules[a][b]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){for(var a=1,a=1;40>a;a++){for(var b=f.getRSBlocks(a,this.errorCorrectLevel),c=new g,d=0,e=0;e<b.length;e++)d+=b[e].dataCount;for(e=0;e<this.dataList.length;e++)b=this.dataList[e],c.put(b.mode,4),c.put(b.getLength(),i.getLengthInBits(b.mode,a)),b.write(c);if(c.getLengthInBits()<=8*d)break}this.typeNumber=a}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,b){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var c=0;c<this.moduleCount;c++){this.modules[c]=Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++)this.modules[c][e]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(a,b),7<=this.typeNumber&&this.setupTypeNumber(a),null==this.dataCache&&(this.dataCache=d.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,b)},setupPositionProbePattern:function(a,b){for(var c=-1;7>=c;c++)if(!(-1>=a+c||this.moduleCount<=a+c))for(var d=-1;7>=d;d++)-1>=b+d||this.moduleCount<=b+d||(this.modules[a+c][b+d]=c>=0&&6>=c&&(0==d||6==d)||d>=0&&6>=d&&(0==c||6==c)||c>=2&&4>=c&&d>=2&&4>=d?!0:!1)},getBestMaskPattern:function(){for(var a=0,b=0,c=0;8>c;c++){this.makeImpl(!0,c);var d=i.getLostPoint(this);(0==c||a>d)&&(a=d,b=c)}return b},createMovieClip:function(a,b,c){for(a=a.createEmptyMovieClip(b,c),this.make(),b=0;b<this.modules.length;b++)for(var c=1*b,d=0;d<this.modules[b].length;d++){var e=1*d;this.modules[b][d]&&(a.beginFill(0,100),a.moveTo(e,c),a.lineTo(e+1,c),a.lineTo(e+1,c+1),a.lineTo(e,c+1),a.endFill())}return a},setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=0==a%2);for(a=8;a<this.moduleCount-8;a++)null==this.modules[6][a]&&(this.modules[6][a]=0==a%2)},setupPositionAdjustPattern:function(){for(var a=i.getPatternPosition(this.typeNumber),b=0;b<a.length;b++)for(var c=0;c<a.length;c++){var d=a[b],e=a[c];if(null==this.modules[d][e])for(var f=-2;2>=f;f++)for(var g=-2;2>=g;g++)this.modules[d+f][e+g]=-2==f||2==f||-2==g||2==g||0==f&&0==g?!0:!1}},setupTypeNumber:function(a){for(var b=i.getBCHTypeNumber(this.typeNumber),c=0;18>c;c++){var d=!a&&1==(b>>c&1);this.modules[Math.floor(c/3)][c%3+this.moduleCount-8-3]=d}for(c=0;18>c;c++)d=!a&&1==(b>>c&1),this.modules[c%3+this.moduleCount-8-3][Math.floor(c/3)]=d},setupTypeInfo:function(a,b){for(var c=i.getBCHTypeInfo(this.errorCorrectLevel<<3|b),d=0;15>d;d++){var e=!a&&1==(c>>d&1);6>d?this.modules[d][8]=e:8>d?this.modules[d+1][8]=e:this.modules[this.moduleCount-15+d][8]=e}for(d=0;15>d;d++)e=!a&&1==(c>>d&1),8>d?this.modules[8][this.moduleCount-d-1]=e:9>d?this.modules[8][15-d-1+1]=e:this.modules[8][15-d-1]=e;this.modules[this.moduleCount-8][8]=!a},mapData:function(a,b){for(var c=-1,d=this.moduleCount-1,e=7,f=0,g=this.moduleCount-1;g>0;g-=2)for(6==g&&g--;;){for(var h=0;2>h;h++)if(null==this.modules[d][g-h]){var j=!1;f<a.length&&(j=1==(a[f]>>>e&1)),i.getMask(b,d,g-h)&&(j=!j),this.modules[d][g-h]=j,e--,-1==e&&(f++,e=7)}if(d+=c,0>d||this.moduleCount<=d){d-=c,c=-c;break}}}},d.PAD0=236,d.PAD1=17,d.createData=function(a,b,c){for(var b=f.getRSBlocks(a,b),e=new g,h=0;h<c.length;h++){var j=c[h];e.put(j.mode,4),e.put(j.getLength(),i.getLengthInBits(j.mode,a)),j.write(e)}for(h=a=0;h<b.length;h++)a+=b[h].dataCount;if(e.getLengthInBits()>8*a)throw Error("code length overflow. ("+e.getLengthInBits()+">"+8*a+")");for(e.getLengthInBits()+4<=8*a&&e.put(0,4);0!=e.getLengthInBits()%8;)e.putBit(!1);for(;!(e.getLengthInBits()>=8*a)&&(e.put(d.PAD0,8),!(e.getLengthInBits()>=8*a));)e.put(d.PAD1,8);return d.createBytes(e,b)},d.createBytes=function(a,b){for(var c=0,d=0,f=0,g=Array(b.length),h=Array(b.length),j=0;j<b.length;j++){var k=b[j].dataCount,l=b[j].totalCount-k,d=Math.max(d,k),f=Math.max(f,l);g[j]=Array(k);for(var m=0;m<g[j].length;m++)g[j][m]=255&a.buffer[m+c];for(c+=k,m=i.getErrorCorrectPolynomial(l),k=new e(g[j],m.getLength()-1).mod(m),h[j]=Array(m.getLength()-1),m=0;m<h[j].length;m++)l=m+k.getLength()-h[j].length,h[j][m]=l>=0?k.get(l):0}for(m=j=0;m<b.length;m++)j+=b[m].totalCount;for(c=Array(j),m=k=0;d>m;m++)for(j=0;j<b.length;j++)m<g[j].length&&(c[k++]=g[j][m]);for(m=0;f>m;m++)for(j=0;j<b.length;j++)m<h[j].length&&(c[k++]=h[j][m]);return c},h=4;for(var i={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var b=a<<10;0<=i.getBCHDigit(b)-i.getBCHDigit(i.G15);)b^=i.G15<<i.getBCHDigit(b)-i.getBCHDigit(i.G15);return(a<<10|b)^i.G15_MASK},getBCHTypeNumber:function(a){for(var b=a<<12;0<=i.getBCHDigit(b)-i.getBCHDigit(i.G18);)b^=i.G18<<i.getBCHDigit(b)-i.getBCHDigit(i.G18);return a<<12|b},getBCHDigit:function(a){for(var b=0;0!=a;)b++,a>>>=1;return b},getPatternPosition:function(a){return i.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,b,c){switch(a){case 0:return 0==(b+c)%2;case 1:return 0==b%2;case 2:return 0==c%3;case 3:return 0==(b+c)%3;case 4:return 0==(Math.floor(b/2)+Math.floor(c/3))%2;case 5:return 0==b*c%2+b*c%3;case 6:return 0==(b*c%2+b*c%3)%2;case 7:return 0==(b*c%3+(b+c)%2)%2;default:throw Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var b=new e([1],0),c=0;a>c;c++)b=b.multiply(new e([1,j.gexp(c)],0));return b},getLengthInBits:function(a,b){if(b>=1&&10>b)switch(a){case 1:return 10;case 2:return 9;case h:return 8;case 8:return 8;default:throw Error("mode:"+a)}else if(27>b)switch(a){case 1:return 12;case 2:return 11;case h:return 16;case 8:return 10;default:throw Error("mode:"+a)}else{if(!(41>b))throw Error("type:"+b);switch(a){case 1:return 14;case 2:return 13;case h:return 16;case 8:return 12;default:throw Error("mode:"+a)}}},getLostPoint:function(a){for(var b=a.getModuleCount(),c=0,d=0;b>d;d++)for(var e=0;b>e;e++){for(var f=0,g=a.isDark(d,e),h=-1;1>=h;h++)if(!(0>d+h||d+h>=b))for(var i=-1;1>=i;i++)0>e+i||e+i>=b||0==h&&0==i||g==a.isDark(d+h,e+i)&&f++;f>5&&(c+=3+f-5)}for(d=0;b-1>d;d++)for(e=0;b-1>e;e++)f=0,a.isDark(d,e)&&f++,a.isDark(d+1,e)&&f++,a.isDark(d,e+1)&&f++,a.isDark(d+1,e+1)&&f++,(0==f||4==f)&&(c+=3);for(d=0;b>d;d++)for(e=0;b-6>e;e++)a.isDark(d,e)&&!a.isDark(d,e+1)&&a.isDark(d,e+2)&&a.isDark(d,e+3)&&a.isDark(d,e+4)&&!a.isDark(d,e+5)&&a.isDark(d,e+6)&&(c+=40);for(e=0;b>e;e++)for(d=0;b-6>d;d++)a.isDark(d,e)&&!a.isDark(d+1,e)&&a.isDark(d+2,e)&&a.isDark(d+3,e)&&a.isDark(d+4,e)&&!a.isDark(d+5,e)&&a.isDark(d+6,e)&&(c+=40);for(e=f=0;b>e;e++)for(d=0;b>d;d++)a.isDark(d,e)&&f++;return a=Math.abs(100*f/b/b-50)/5,c+10*a}},j={glog:function(a){if(1>a)throw Error("glog("+a+")");return j.LOG_TABLE[a]},gexp:function(a){for(;0>a;)a+=255;for(;a>=256;)a-=255;return j.EXP_TABLE[a]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},k=0;8>k;k++)j.EXP_TABLE[k]=1<<k;for(k=8;256>k;k++)j.EXP_TABLE[k]=j.EXP_TABLE[k-4]^j.EXP_TABLE[k-5]^j.EXP_TABLE[k-6]^j.EXP_TABLE[k-8];for(k=0;255>k;k++)j.LOG_TABLE[j.EXP_TABLE[k]]=k;return e.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var b=Array(this.getLength()+a.getLength()-1),c=0;c<this.getLength();c++)for(var d=0;d<a.getLength();d++)b[c+d]^=j.gexp(j.glog(this.get(c))+j.glog(a.get(d)));return new e(b,0)},mod:function(a){if(0>this.getLength()-a.getLength())return this;for(var b=j.glog(this.get(0))-j.glog(a.get(0)),c=Array(this.getLength()),d=0;d<this.getLength();d++)c[d]=this.get(d);for(d=0;d<a.getLength();d++)c[d]^=j.gexp(j.glog(a.get(d))+b);return new e(c,0).mod(a)}},f.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],f.getRSBlocks=function(a,b){var c=f.getRsBlockTable(a,b);if(void 0==c)throw Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+b);for(var d=c.length/3,e=[],g=0;d>g;g++)for(var h=c[3*g+0],i=c[3*g+1],j=c[3*g+2],k=0;h>k;k++)e.push(new f(i,j));return e},f.getRsBlockTable=function(a,b){switch(b){case 1:return f.RS_BLOCK_TABLE[4*(a-1)+0];case 0:return f.RS_BLOCK_TABLE[4*(a-1)+1];case 3:return f.RS_BLOCK_TABLE[4*(a-1)+2];case 2:return f.RS_BLOCK_TABLE[4*(a-1)+3]}},g.prototype={get:function(a){return 1==(this.buffer[Math.floor(a/8)]>>>7-a%8&1)},put:function(a,b){for(var c=0;b>c;c++)this.putBit(1==(a>>>b-c-1&1))},getLengthInBits:function(){return this.length},putBit:function(a){var b=Math.floor(this.length/8);this.buffer.length<=b&&this.buffer.push(0),a&&(this.buffer[b]|=128>>>this.length%8),this.length++}},"string"==typeof b&&(b={text:b}),b=a.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:2,background:"#ffffff",foreground:"#000000"},b),this.each(function(){var c;if("canvas"==b.render){c=new d(b.typeNumber,b.correctLevel),c.addData(b.text),c.make();var e=document.createElement("canvas");e.width=b.width,e.height=b.height;for(var f=e.getContext("2d"),g=b.width/c.getModuleCount(),h=b.height/c.getModuleCount(),i=0;i<c.getModuleCount();i++)for(var j=0;j<c.getModuleCount();j++){f.fillStyle=c.isDark(i,j)?b.foreground:b.background;var k=Math.ceil((j+1)*g)-Math.floor(j*g),l=Math.ceil((i+1)*g)-Math.floor(i*g);f.fillRect(Math.round(j*g),Math.round(i*h),k,l)}}else for(c=new d(b.typeNumber,b.correctLevel),c.addData(b.text),c.make(),e=a("<table></table>").css("width",b.width+"px").css("height",b.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",b.background),f=b.width/c.getModuleCount(),g=b.height/c.getModuleCount(),h=0;h<c.getModuleCount();h++)for(i=a("<tr></tr>").css("height",g+"px").appendTo(e),j=0;j<c.getModuleCount();j++)a("<td></td>").css("width",f+"px").css("background-color",c.isDark(h,j)?b.foreground:b.background).appendTo(i);c=e,jQuery(c).appendTo(this)})}}(jQuery),define("jqueryQrcode",["jquery"],function(){}),define("views/share",["backbone","helper","jqueryQrcode"],function(a,b){return a.View.extend({initialize:function(){var a=this.$el,c=a.find(".xinlang"),d=encodeURIComponent(c.data("title")),e=a.find(".qq"),f=a.find(".douban"),g=a.find(".in"),h=a.find(".facebook"),i=a.find(".naver"),j=a.find(".whatsapp"),k=a.find(".twitter"),l=a.find(".googleplus"),m=a.find(".reddit"),n=a.find(".zalo");c.attr("href","http://v.t.sina.com.cn/share/share.php?url="+window.location.href+"&title="+d),e.attr("href","http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+window.location.href+"&title="+d),f.attr("href","http://shuo.douban.com/!service/share?href="+window.location.href+"&title="+d),g.attr("href","http://www.linkedin.com/shareArticle?mini=true&url="+window.location.href+"&title="+d),h.attr("href","https://www.facebook.com/sharer/sharer.php?u="+window.location.href+"&t="+d),i.attr("href","http://share.naver.com/web/shareView.nhn?url="+window.location.href+"&title="+d),j.attr("href","https://api.whatsapp.com/send?text="+window.location.href),k.attr("href","http://twitter.com/home?status="+window.location.href+"&title="+d),m.attr("href","http://www.reddit.com/submit?url="+window.location.href+"&title="+d),l.attr("href","https://plus.google.com/share?url="+window.location.href+"&title="+d),n.attr("href","https://wordpress.org/plugins/like-share-zalo-button/");var o=a.find(".weixin"),p=o.data("urltext");if($qrcodeCanvas=a.find("#qrcodeCanvas"),p){var q=$qrcodeCanvas.qrcode({render:"canvas",text:p,width:"200",height:"200",background:"#ffffff",foreground:"#000000"}),r=new Image;r.src=b.getResourceURL("images/about_us/SF_logo.png"),r.onload=function(){q.children("canvas")[0].getContext("2d").drawImage(r,80,80,40,40)}}else"cn"==b.getSiteLocation()?$qrcodeCanvas.html('<img src="'+b.getResourceURL("images/index/sf-code-img.jpg")+'" style="width:100%"/>'):"hk"==b.getSiteLocation()?$qrcodeCanvas.html('<img src="'+b.getResourceURL("images/index/sfwechat_hk.jpg")+'" style="width:100%"/>'):$qrcodeCanvas.html('<img src="'+b.getResourceURL("images/index/sfwechat_international.png")+'" style="width:100%"/>')}})}),define("views/totop",["backbone"],function(a){return a.View.extend({events:{"click .botfooter .toTop":"scrollToTop","mouseenter .botfooter .toTop":"changBlack","mouseleave .botfooter .toTop":"returnToRed"},initialize:function(){this.render()},render:function(){var a=this.$(".botfooter .toTop"),b=$(window).height(),c=this.$(".botfooter").height(),d=this.$el.height();$(window).scroll(function(){var e=$(window).scrollTop(),f=d-e-b;e>100?a.fadeIn(500):a.fadeOut(500),c>=f?a.removeClass("fixed"):a.addClass("fixed")})},scrollToTop:function(){$("html,body").animate({scrollTop:0},300)},changBlack:function(){this.$(".botfooter .toTop").addClass("active")},returnToRed:function(){this.$(".botfooter .toTop").removeClass("active")}})}),define("views/bannertip",["backbone"],function(a){return a.View.extend({initialize:function(){var a=this.$el;a.hover(function(){a.stop(!0,!1).animate({right:"0px"},500)},function(){a.stop(!0,!1).animate({right:"-177px"},500)}),setTimeout(function(){a.stop(!0,!1).animate({right:"-177px"},500)},3e3)}})}),define("views/video/videoMask",["backbone"],function(a){return a.View.extend({el:$("#video-box"),events:{"click a.close":"videoClose"},initialize:function(a){this.videoUrl=a.videoUrl,this.hasShortVideo=a.hasShortVideo},showMask:function(){this.$el.show(),Player=jwplayer("video").setup({stretching:"fill",flashplayer:jwplayerFlashSwf,file:this.videoUrl,width:960,height:540,autostart:!0,skin:{name:"glow",url:jwplayerSkin}})},videoClose:function(a){a.preventDefault(),Player.remove(),this.$el.hide(),this.hasShortVideo&&playerShort.play()}})}),define("views/video/video",["backbone","views/video/videoMask","helper"],function(a,b,c){return a.View.extend({events:{"click a.play":"videoPop"},initialize:function(){var a=this.$el;if(this.videoShort=a.find("#videoShort"),this.aPlay=a.find(".play"),this.videoMaskView=new b({videoUrl:this.aPlay.attr("data-video"),hasShortVideo:this.videoShort[0]}),jwplayer.key="N2Z47h5lEkdFZFPwrPS0j5p+FH3UmaACS13lzg==",jwplayerFlashSwf=c.getResourceURL("scripts/old/jwplayer-7.9.1/jwplayer.flash.swf"),jwplayerSkin=c.getResourceURL("scripts/old/jwplayer-7.9.1/skins/glow.css"),this.videoShort[0]){playerShort=jwplayer("videoShort").setup({stretching:"fill",file:this.videoShort.attr("data-videoShort"),flashplayer:jwplayerFlashSwf,repeat:!0,height:488,controls:!1,mute:!0,autostart:!0});var d=this;playerShort.on("ready",function(){d.aPlay.css("display","block")})}},videoPop:function(a){a.preventDefault(),a.stopPropagation(),this.videoShort[0]&&("playing"==playerShort.getState()||"buffering"==playerShort.getState())&&playerShort.pause(),this.videoMaskView.showMask()}})}),!function(){"use strict";function a(a){a.fn.swiper=function(b){var d;return a(this).each(function(){var a=new c(this,b);d||(d=a)}),d}}var b,c=function(a,d){function e(a){return Math.floor(a)}function f(){var a=v.params.autoplay,b=v.slides.eq(v.activeIndex);b.attr("data-swiper-autoplay")&&(a=b.attr("data-swiper-autoplay")||v.params.autoplay),v.autoplayTimeoutId=setTimeout(function(){v.params.loop?(v.fixLoop(),v._slideNext(),v.emit("onAutoplay",v)):v.isEnd?d.autoplayStopOnLast?v.stopAutoplay():(v._slideTo(0),v.emit("onAutoplay",v)):(v._slideNext(),v.emit("onAutoplay",v))},a)}function g(a,c){var d=b(a.target);if(!d.is(c))if("string"==typeof c)d=d.parents(c);else if(c.nodeType){var e;return d.parents().each(function(a,b){b===c&&(e=c)}),e?c:void 0}return 0!==d.length?d[0]:void 0}function h(a,b){b=b||{};var c=window.MutationObserver||window.WebkitMutationObserver,d=new c(function(a){a.forEach(function(a){v.onResize(!0),v.emit("onObserverUpdate",v,a)})});d.observe(a,{attributes:"undefined"==typeof b.attributes||b.attributes,childList:"undefined"==typeof b.childList||b.childList,characterData:"undefined"==typeof b.characterData||b.characterData}),v.observers.push(d)}function i(a){a.originalEvent&&(a=a.originalEvent);var b=a.keyCode||a.charCode;if(!v.params.allowSwipeToNext&&(v.isHorizontal()&&39===b||!v.isHorizontal()&&40===b))return!1;if(!v.params.allowSwipeToPrev&&(v.isHorizontal()&&37===b||!v.isHorizontal()&&38===b))return!1;if(!(a.shiftKey||a.altKey||a.ctrlKey||a.metaKey||document.activeElement&&document.activeElement.nodeName&&("input"===document.activeElement.nodeName.toLowerCase()||"textarea"===document.activeElement.nodeName.toLowerCase()))){if(37===b||39===b||38===b||40===b){var c=!1;if(v.container.parents("."+v.params.slideClass).length>0&&0===v.container.parents("."+v.params.slideActiveClass).length)return;var d={left:window.pageXOffset,top:window.pageYOffset},e=window.innerWidth,f=window.innerHeight,g=v.container.offset();v.rtl&&(g.left=g.left-v.container[0].scrollLeft);for(var h=[[g.left,g.top],[g.left+v.width,g.top],[g.left,g.top+v.height],[g.left+v.width,g.top+v.height]],i=0;i<h.length;i++){var j=h[i];j[0]>=d.left&&j[0]<=d.left+e&&j[1]>=d.top&&j[1]<=d.top+f&&(c=!0)}if(!c)return}v.isHorizontal()?(37!==b&&39!==b||(a.preventDefault?a.preventDefault():a.returnValue=!1),(39===b&&!v.rtl||37===b&&v.rtl)&&v.slideNext(),(37===b&&!v.rtl||39===b&&v.rtl)&&v.slidePrev()):(38!==b&&40!==b||(a.preventDefault?a.preventDefault():a.returnValue=!1),40===b&&v.slideNext(),38===b&&v.slidePrev())}}function j(){var a="onwheel",b=a in document;if(!b){var c=document.createElement("div");c.setAttribute(a,"return;"),b="function"==typeof c[a]}return!b&&document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0&&(b=document.implementation.hasFeature("Events.wheel","3.0")),b}function k(a){a.originalEvent&&(a=a.originalEvent);var b=0,c=v.rtl?-1:1,d=l(a);if(v.params.mousewheelForceToAxis)if(v.isHorizontal()){if(!(Math.abs(d.pixelX)>Math.abs(d.pixelY)))return;b=d.pixelX*c}else{if(!(Math.abs(d.pixelY)>Math.abs(d.pixelX)))return;b=d.pixelY}else b=Math.abs(d.pixelX)>Math.abs(d.pixelY)?-d.pixelX*c:-d.pixelY;if(0!==b){if(v.params.mousewheelInvert&&(b=-b),v.params.freeMode){var e=v.getWrapperTranslate()+b*v.params.mousewheelSensitivity,f=v.isBeginning,g=v.isEnd;if(e>=v.minTranslate()&&(e=v.minTranslate()),e<=v.maxTranslate()&&(e=v.maxTranslate()),v.setWrapperTransition(0),v.setWrapperTranslate(e),v.updateProgress(),v.updateActiveIndex(),(!f&&v.isBeginning||!g&&v.isEnd)&&v.updateClasses(),v.params.freeModeSticky?(clearTimeout(v.mousewheel.timeout),v.mousewheel.timeout=setTimeout(function(){v.slideReset()},300)):v.params.lazyLoading&&v.lazy&&v.lazy.load(),v.emit("onScroll",v,a),v.params.autoplay&&v.params.autoplayDisableOnInteraction&&v.stopAutoplay(),0===e||e===v.maxTranslate())return}else{if((new window.Date).getTime()-v.mousewheel.lastScrollTime>60)if(0>b)if(v.isEnd&&!v.params.loop||v.animating){if(v.params.mousewheelReleaseOnEdges)return!0}else v.slideNext(),v.emit("onScroll",v,a);else if(v.isBeginning&&!v.params.loop||v.animating){if(v.params.mousewheelReleaseOnEdges)return!0}else v.slidePrev(),v.emit("onScroll",v,a);v.mousewheel.lastScrollTime=(new window.Date).getTime()}return a.preventDefault?a.preventDefault():a.returnValue=!1,!1}}function l(a){var b=10,c=40,d=800,e=0,f=0,g=0,h=0;return"detail"in a&&(f=a.detail),"wheelDelta"in a&&(f=-a.wheelDelta/120),"wheelDeltaY"in a&&(f=-a.wheelDeltaY/120),"wheelDeltaX"in a&&(e=-a.wheelDeltaX/120),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(e=f,f=0),g=e*b,h=f*b,"deltaY"in a&&(h=a.deltaY),"deltaX"in a&&(g=a.deltaX),(g||h)&&a.deltaMode&&(1===a.deltaMode?(g*=c,h*=c):(g*=d,h*=d)),g&&!e&&(e=1>g?-1:1),h&&!f&&(f=1>h?-1:1),{spinX:e,spinY:f,pixelX:g,pixelY:h}}function m(a,c){a=b(a);var d,e,f,g=v.rtl?-1:1;d=a.attr("data-swiper-parallax")||"0",e=a.attr("data-swiper-parallax-x"),f=a.attr("data-swiper-parallax-y"),e||f?(e=e||"0",f=f||"0"):v.isHorizontal()?(e=d,f="0"):(f=d,e="0"),e=e.indexOf("%")>=0?parseInt(e,10)*c*g+"%":e*c*g+"px",f=f.indexOf("%")>=0?parseInt(f,10)*c+"%":f*c+"px",a.transform("translate3d("+e+", "+f+",0px)")}function n(a){return 0!==a.indexOf("on")&&(a=a[0]!==a[0].toUpperCase()?"on"+a[0].toUpperCase()+a.substring(1):"on"+a),a}if(!(this instanceof c))return new c(a,d);var o={direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,autoplay:!1,autoplayDisableOnInteraction:!0,autoplayStopOnLast:!1,iOSEdgeSwipeDetection:!1,iOSEdgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",coverflow:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},flip:{slideShadows:!0,limitRotation:!0},cube:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94},fade:{crossFade:!1},parallax:!1,zoom:!1,zoomMax:3,zoomMin:1,zoomToggle:!0,scrollbar:null,scrollbarHide:!0,scrollbarDraggable:!1,scrollbarSnapOnRelease:!1,keyboardControl:!1,mousewheelControl:!1,mousewheelReleaseOnEdges:!1,mousewheelInvert:!1,mousewheelForceToAxis:!1,mousewheelSensitivity:1,mousewheelEventsTarged:"container",hashnav:!1,hashnavWatchState:!1,history:!1,replaceState:!1,breakpoints:void 0,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,onlyExternal:!1,threshold:0,touchMoveStopPropagation:!0,touchReleaseOnEdges:!1,uniqueNavElements:!0,pagination:null,paginationElement:"span",paginationClickable:!1,paginationHide:!1,paginationBulletRender:null,paginationProgressRender:null,paginationFractionRender:null,paginationCustomRender:null,paginationType:"bullets",resistance:!0,resistanceRatio:.85,nextButton:null,prevButton:null,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,lazyLoading:!1,lazyLoadingInPrevNext:!1,lazyLoadingInPrevNextAmount:1,lazyLoadingOnTransitionStart:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,control:void 0,controlInverse:!1,controlBy:"slide",normalizeSlideIndex:!0,allowSwipeToPrev:!0,allowSwipeToNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",buttonDisabledClass:"swiper-button-disabled",paginationCurrentClass:"swiper-pagination-current",paginationTotalClass:"swiper-pagination-total",paginationHiddenClass:"swiper-pagination-hidden",paginationProgressbarClass:"swiper-pagination-progressbar",paginationClickableClass:"swiper-pagination-clickable",paginationModifierClass:"swiper-pagination-",lazyLoadingClass:"swiper-lazy",lazyStatusLoadingClass:"swiper-lazy-loading",lazyStatusLoadedClass:"swiper-lazy-loaded",lazyPreloaderClass:"swiper-lazy-preloader",notificationClass:"swiper-notification",preloaderClass:"preloader",zoomContainerClass:"swiper-zoom-container",observer:!1,observeParents:!1,a11y:!1,prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",runCallbacksOnInit:!0},p=d&&d.virtualTranslate;d=d||{};var q={};for(var r in d)if("object"!=typeof d[r]||null===d[r]||d[r].nodeType||d[r]===window||d[r]===document||"undefined"!=typeof Dom7&&d[r]instanceof Dom7||"undefined"!=typeof jQuery&&d[r]instanceof jQuery)q[r]=d[r];else{q[r]={};for(var s in d[r])q[r][s]=d[r][s]}for(var t in o)if("undefined"==typeof d[t])d[t]=o[t];else if("object"==typeof d[t])for(var u in o[t])"undefined"==typeof d[t][u]&&(d[t][u]=o[t][u]);var v=this;if(v.params=d,v.originalParams=q,v.classNames=[],"undefined"!=typeof b&&"undefined"!=typeof Dom7&&(b=Dom7),("undefined"!=typeof b||(b="undefined"==typeof Dom7?window.Dom7||window.Zepto||window.jQuery:Dom7))&&(v.$=b,v.currentBreakpoint=void 0,v.getActiveBreakpoint=function(){if(!v.params.breakpoints)return!1;var a,b=!1,c=[];for(a in v.params.breakpoints)v.params.breakpoints.hasOwnProperty(a)&&c.push(a);c.sort(function(a,b){return parseInt(a,10)>parseInt(b,10)});for(var d=0;d<c.length;d++)a=c[d],a>=window.innerWidth&&!b&&(b=a);return b||"max"},v.setBreakpoint=function(){var a=v.getActiveBreakpoint();if(a&&v.currentBreakpoint!==a){var b=a in v.params.breakpoints?v.params.breakpoints[a]:v.originalParams,c=v.params.loop&&b.slidesPerView!==v.params.slidesPerView;for(var d in b)v.params[d]=b[d];v.currentBreakpoint=a,c&&v.destroyLoop&&v.reLoop(!0)}},v.params.breakpoints&&v.setBreakpoint(),v.container=b(a),0!==v.container.length)){if(v.container.length>1){var w=[];return v.container.each(function(){w.push(new c(this,d))}),w}v.container[0].swiper=v,v.container.data("swiper",v),v.classNames.push(v.params.containerModifierClass+v.params.direction),v.params.freeMode&&v.classNames.push(v.params.containerModifierClass+"free-mode"),v.support.flexbox||(v.classNames.push(v.params.containerModifierClass+"no-flexbox"),v.params.slidesPerColumn=1),v.params.autoHeight&&v.classNames.push(v.params.containerModifierClass+"autoheight"),(v.params.parallax||v.params.watchSlidesVisibility)&&(v.params.watchSlidesProgress=!0),
v.params.touchReleaseOnEdges&&(v.params.resistanceRatio=0),["cube","coverflow","flip"].indexOf(v.params.effect)>=0&&(v.support.transforms3d?(v.params.watchSlidesProgress=!0,v.classNames.push(v.params.containerModifierClass+"3d")):v.params.effect="slide"),"slide"!==v.params.effect&&v.classNames.push(v.params.containerModifierClass+v.params.effect),"cube"===v.params.effect&&(v.params.resistanceRatio=0,v.params.slidesPerView=1,v.params.slidesPerColumn=1,v.params.slidesPerGroup=1,v.params.centeredSlides=!1,v.params.spaceBetween=0,v.params.virtualTranslate=!0,v.params.setWrapperSize=!1),"fade"!==v.params.effect&&"flip"!==v.params.effect||(v.params.slidesPerView=1,v.params.slidesPerColumn=1,v.params.slidesPerGroup=1,v.params.watchSlidesProgress=!0,v.params.spaceBetween=0,v.params.setWrapperSize=!1,"undefined"==typeof p&&(v.params.virtualTranslate=!0)),v.params.grabCursor&&v.support.touch&&(v.params.grabCursor=!1),v.wrapper=v.container.children("."+v.params.wrapperClass),v.params.pagination&&(v.paginationContainer=b(v.params.pagination),v.params.uniqueNavElements&&"string"==typeof v.params.pagination&&v.paginationContainer.length>1&&1===v.container.find(v.params.pagination).length&&(v.paginationContainer=v.container.find(v.params.pagination)),"bullets"===v.params.paginationType&&v.params.paginationClickable?v.paginationContainer.addClass(v.params.paginationModifierClass+"clickable"):v.params.paginationClickable=!1,v.paginationContainer.addClass(v.params.paginationModifierClass+v.params.paginationType)),(v.params.nextButton||v.params.prevButton)&&(v.params.nextButton&&(v.nextButton=b(v.params.nextButton),v.params.uniqueNavElements&&"string"==typeof v.params.nextButton&&v.nextButton.length>1&&1===v.container.find(v.params.nextButton).length&&(v.nextButton=v.container.find(v.params.nextButton))),v.params.prevButton&&(v.prevButton=b(v.params.prevButton),v.params.uniqueNavElements&&"string"==typeof v.params.prevButton&&v.prevButton.length>1&&1===v.container.find(v.params.prevButton).length&&(v.prevButton=v.container.find(v.params.prevButton)))),v.isHorizontal=function(){return"horizontal"===v.params.direction},v.rtl=v.isHorizontal()&&("rtl"===v.container[0].dir.toLowerCase()||"rtl"===v.container.css("direction")),v.rtl&&v.classNames.push(v.params.containerModifierClass+"rtl"),v.rtl&&(v.wrongRTL="-webkit-box"===v.wrapper.css("display")),v.params.slidesPerColumn>1&&v.classNames.push(v.params.containerModifierClass+"multirow"),v.device.android&&v.classNames.push(v.params.containerModifierClass+"android"),v.container.addClass(v.classNames.join(" ")),v.translate=0,v.progress=0,v.velocity=0,v.lockSwipeToNext=function(){v.params.allowSwipeToNext=!1,v.params.allowSwipeToPrev===!1&&v.params.grabCursor&&v.unsetGrabCursor()},v.lockSwipeToPrev=function(){v.params.allowSwipeToPrev=!1,v.params.allowSwipeToNext===!1&&v.params.grabCursor&&v.unsetGrabCursor()},v.lockSwipes=function(){v.params.allowSwipeToNext=v.params.allowSwipeToPrev=!1,v.params.grabCursor&&v.unsetGrabCursor()},v.unlockSwipeToNext=function(){v.params.allowSwipeToNext=!0,v.params.allowSwipeToPrev===!0&&v.params.grabCursor&&v.setGrabCursor()},v.unlockSwipeToPrev=function(){v.params.allowSwipeToPrev=!0,v.params.allowSwipeToNext===!0&&v.params.grabCursor&&v.setGrabCursor()},v.unlockSwipes=function(){v.params.allowSwipeToNext=v.params.allowSwipeToPrev=!0,v.params.grabCursor&&v.setGrabCursor()},v.setGrabCursor=function(a){v.container[0].style.cursor="move",v.container[0].style.cursor=a?"-webkit-grabbing":"-webkit-grab",v.container[0].style.cursor=a?"-moz-grabbin":"-moz-grab",v.container[0].style.cursor=a?"grabbing":"grab"},v.unsetGrabCursor=function(){v.container[0].style.cursor=""},v.params.grabCursor&&v.setGrabCursor(),v.imagesToLoad=[],v.imagesLoaded=0,v.loadImage=function(a,b,c,d,e,f){function g(){f&&f()}var h;a.complete&&e?g():b?(h=new window.Image,h.onload=g,h.onerror=g,d&&(h.sizes=d),c&&(h.srcset=c),b&&(h.src=b)):g()},v.preloadImages=function(){function a(){"undefined"!=typeof v&&null!==v&&v&&(void 0!==v.imagesLoaded&&v.imagesLoaded++,v.imagesLoaded===v.imagesToLoad.length&&(v.params.updateOnImagesReady&&v.update(),v.emit("onImagesReady",v)))}v.imagesToLoad=v.container.find("img");for(var b=0;b<v.imagesToLoad.length;b++)v.loadImage(v.imagesToLoad[b],v.imagesToLoad[b].currentSrc||v.imagesToLoad[b].getAttribute("src"),v.imagesToLoad[b].srcset||v.imagesToLoad[b].getAttribute("srcset"),v.imagesToLoad[b].sizes||v.imagesToLoad[b].getAttribute("sizes"),!0,a)},v.autoplayTimeoutId=void 0,v.autoplaying=!1,v.autoplayPaused=!1,v.startAutoplay=function(){return"undefined"==typeof v.autoplayTimeoutId&&!!v.params.autoplay&&!v.autoplaying&&(v.autoplaying=!0,v.emit("onAutoplayStart",v),void f())},v.stopAutoplay=function(a){v.autoplayTimeoutId&&(v.autoplayTimeoutId&&clearTimeout(v.autoplayTimeoutId),v.autoplaying=!1,v.autoplayTimeoutId=void 0,v.emit("onAutoplayStop",v))},v.pauseAutoplay=function(a){v.autoplayPaused||(v.autoplayTimeoutId&&clearTimeout(v.autoplayTimeoutId),v.autoplayPaused=!0,0===a?(v.autoplayPaused=!1,f()):v.wrapper.transitionEnd(function(){v&&(v.autoplayPaused=!1,v.autoplaying?f():v.stopAutoplay())}))},v.minTranslate=function(){return-v.snapGrid[0]},v.maxTranslate=function(){return-v.snapGrid[v.snapGrid.length-1]},v.updateAutoHeight=function(){var a,b=[],c=0;if("auto"!==v.params.slidesPerView&&v.params.slidesPerView>1)for(a=0;a<Math.ceil(v.params.slidesPerView);a++){var d=v.activeIndex+a;if(d>v.slides.length)break;b.push(v.slides.eq(d)[0])}else b.push(v.slides.eq(v.activeIndex)[0]);for(a=0;a<b.length;a++)if("undefined"!=typeof b[a]){var e=b[a].offsetHeight;c=e>c?e:c}c&&v.wrapper.css("height",c+"px")},v.updateContainerSize=function(){var a,b;a="undefined"!=typeof v.params.width?v.params.width:v.container[0].clientWidth,b="undefined"!=typeof v.params.height?v.params.height:v.container[0].clientHeight,0===a&&v.isHorizontal()||0===b&&!v.isHorizontal()||(a=a-parseInt(v.container.css("padding-left"),10)-parseInt(v.container.css("padding-right"),10),b=b-parseInt(v.container.css("padding-top"),10)-parseInt(v.container.css("padding-bottom"),10),v.width=a,v.height=b,v.size=v.isHorizontal()?v.width:v.height)},v.updateSlidesSize=function(){v.slides=v.wrapper.children("."+v.params.slideClass),v.snapGrid=[],v.slidesGrid=[],v.slidesSizesGrid=[];var a,b=v.params.spaceBetween,c=-v.params.slidesOffsetBefore,d=0,f=0;if("undefined"!=typeof v.size){"string"==typeof b&&b.indexOf("%")>=0&&(b=parseFloat(b.replace("%",""))/100*v.size),v.virtualSize=-b,v.rtl?v.slides.css({marginLeft:"",marginTop:""}):v.slides.css({marginRight:"",marginBottom:""});var g;v.params.slidesPerColumn>1&&(g=Math.floor(v.slides.length/v.params.slidesPerColumn)===v.slides.length/v.params.slidesPerColumn?v.slides.length:Math.ceil(v.slides.length/v.params.slidesPerColumn)*v.params.slidesPerColumn,"auto"!==v.params.slidesPerView&&"row"===v.params.slidesPerColumnFill&&(g=Math.max(g,v.params.slidesPerView*v.params.slidesPerColumn)));var h,i=v.params.slidesPerColumn,j=g/i,k=j-(v.params.slidesPerColumn*j-v.slides.length);for(a=0;a<v.slides.length;a++){h=0;var l=v.slides.eq(a);if(v.params.slidesPerColumn>1){var m,n,o;"column"===v.params.slidesPerColumnFill?(n=Math.floor(a/i),o=a-n*i,(n>k||n===k&&o===i-1)&&++o>=i&&(o=0,n++),m=n+o*g/i,l.css({"-webkit-box-ordinal-group":m,"-moz-box-ordinal-group":m,"-ms-flex-order":m,"-webkit-order":m,order:m})):(o=Math.floor(a/j),n=a-o*j),l.css("margin-"+(v.isHorizontal()?"top":"left"),0!==o&&v.params.spaceBetween&&v.params.spaceBetween+"px").attr("data-swiper-column",n).attr("data-swiper-row",o)}"none"!==l.css("display")&&("auto"===v.params.slidesPerView?(h=v.isHorizontal()?l.outerWidth(!0):l.outerHeight(!0),v.params.roundLengths&&(h=e(h))):(h=(v.size-(v.params.slidesPerView-1)*b)/v.params.slidesPerView,v.params.roundLengths&&(h=e(h)),v.isHorizontal()?v.slides[a].style.width=h+"px":v.slides[a].style.height=h+"px"),v.slides[a].swiperSlideSize=h,v.slidesSizesGrid.push(h),v.params.centeredSlides?(c=c+h/2+d/2+b,0===a&&(c=c-v.size/2-b),Math.abs(c)<.001&&(c=0),f%v.params.slidesPerGroup===0&&v.snapGrid.push(c),v.slidesGrid.push(c)):(f%v.params.slidesPerGroup===0&&v.snapGrid.push(c),v.slidesGrid.push(c),c=c+h+b),v.virtualSize+=h+b,d=h,f++)}v.virtualSize=Math.max(v.virtualSize,v.size)+v.params.slidesOffsetAfter;var p;if(v.rtl&&v.wrongRTL&&("slide"===v.params.effect||"coverflow"===v.params.effect)&&v.wrapper.css({width:v.virtualSize+v.params.spaceBetween+"px"}),v.support.flexbox&&!v.params.setWrapperSize||(v.isHorizontal()?v.wrapper.css({width:v.virtualSize+v.params.spaceBetween+"px"}):v.wrapper.css({height:v.virtualSize+v.params.spaceBetween+"px"})),v.params.slidesPerColumn>1&&(v.virtualSize=(h+v.params.spaceBetween)*g,v.virtualSize=Math.ceil(v.virtualSize/v.params.slidesPerColumn)-v.params.spaceBetween,v.isHorizontal()?v.wrapper.css({width:v.virtualSize+v.params.spaceBetween+"px"}):v.wrapper.css({height:v.virtualSize+v.params.spaceBetween+"px"}),v.params.centeredSlides)){for(p=[],a=0;a<v.snapGrid.length;a++)v.snapGrid[a]<v.virtualSize+v.snapGrid[0]&&p.push(v.snapGrid[a]);v.snapGrid=p}if(!v.params.centeredSlides){for(p=[],a=0;a<v.snapGrid.length;a++)v.snapGrid[a]<=v.virtualSize-v.size&&p.push(v.snapGrid[a]);v.snapGrid=p,Math.floor(v.virtualSize-v.size)-Math.floor(v.snapGrid[v.snapGrid.length-1])>1&&v.snapGrid.push(v.virtualSize-v.size)}0===v.snapGrid.length&&(v.snapGrid=[0]),0!==v.params.spaceBetween&&(v.isHorizontal()?v.rtl?v.slides.css({marginLeft:b+"px"}):v.slides.css({marginRight:b+"px"}):v.slides.css({marginBottom:b+"px"})),v.params.watchSlidesProgress&&v.updateSlidesOffset()}},v.updateSlidesOffset=function(){for(var a=0;a<v.slides.length;a++)v.slides[a].swiperSlideOffset=v.isHorizontal()?v.slides[a].offsetLeft:v.slides[a].offsetTop},v.currentSlidesPerView=function(){var a,b,c=1;if(v.params.centeredSlides){var d,e=v.slides[v.activeIndex].swiperSlideSize;for(a=v.activeIndex+1;a<v.slides.length;a++)v.slides[a]&&!d&&(e+=v.slides[a].swiperSlideSize,c++,e>v.size&&(d=!0));for(b=v.activeIndex-1;b>=0;b--)v.slides[b]&&!d&&(e+=v.slides[b].swiperSlideSize,c++,e>v.size&&(d=!0))}else for(a=v.activeIndex+1;a<v.slides.length;a++)v.slidesGrid[a]-v.slidesGrid[v.activeIndex]<v.size&&c++;return c},v.updateSlidesProgress=function(a){if("undefined"==typeof a&&(a=v.translate||0),0!==v.slides.length){"undefined"==typeof v.slides[0].swiperSlideOffset&&v.updateSlidesOffset();var b=-a;v.rtl&&(b=a),v.slides.removeClass(v.params.slideVisibleClass);for(var c=0;c<v.slides.length;c++){var d=v.slides[c],e=(b+(v.params.centeredSlides?v.minTranslate():0)-d.swiperSlideOffset)/(d.swiperSlideSize+v.params.spaceBetween);if(v.params.watchSlidesVisibility){var f=-(b-d.swiperSlideOffset),g=f+v.slidesSizesGrid[c],h=f>=0&&f<v.size||g>0&&g<=v.size||0>=f&&g>=v.size;h&&v.slides.eq(c).addClass(v.params.slideVisibleClass)}d.progress=v.rtl?-e:e}}},v.updateProgress=function(a){"undefined"==typeof a&&(a=v.translate||0);var b=v.maxTranslate()-v.minTranslate(),c=v.isBeginning,d=v.isEnd;0===b?(v.progress=0,v.isBeginning=v.isEnd=!0):(v.progress=(a-v.minTranslate())/b,v.isBeginning=v.progress<=0,v.isEnd=v.progress>=1),v.isBeginning&&!c&&v.emit("onReachBeginning",v),v.isEnd&&!d&&v.emit("onReachEnd",v),v.params.watchSlidesProgress&&v.updateSlidesProgress(a),v.emit("onProgress",v,v.progress)},v.updateActiveIndex=function(){var a,b,c,d=v.rtl?v.translate:-v.translate;for(b=0;b<v.slidesGrid.length;b++)"undefined"!=typeof v.slidesGrid[b+1]?d>=v.slidesGrid[b]&&d<v.slidesGrid[b+1]-(v.slidesGrid[b+1]-v.slidesGrid[b])/2?a=b:d>=v.slidesGrid[b]&&d<v.slidesGrid[b+1]&&(a=b+1):d>=v.slidesGrid[b]&&(a=b);v.params.normalizeSlideIndex&&(0>a||"undefined"==typeof a)&&(a=0),c=Math.floor(a/v.params.slidesPerGroup),c>=v.snapGrid.length&&(c=v.snapGrid.length-1),a!==v.activeIndex&&(v.snapIndex=c,v.previousIndex=v.activeIndex,v.activeIndex=a,v.updateClasses(),v.updateRealIndex())},v.updateRealIndex=function(){v.realIndex=parseInt(v.slides.eq(v.activeIndex).attr("data-swiper-slide-index")||v.activeIndex,10)},v.updateClasses=function(){v.slides.removeClass(v.params.slideActiveClass+" "+v.params.slideNextClass+" "+v.params.slidePrevClass+" "+v.params.slideDuplicateActiveClass+" "+v.params.slideDuplicateNextClass+" "+v.params.slideDuplicatePrevClass);var a=v.slides.eq(v.activeIndex);a.addClass(v.params.slideActiveClass),d.loop&&(a.hasClass(v.params.slideDuplicateClass)?v.wrapper.children("."+v.params.slideClass+":not(."+v.params.slideDuplicateClass+')[data-swiper-slide-index="'+v.realIndex+'"]').addClass(v.params.slideDuplicateActiveClass):v.wrapper.children("."+v.params.slideClass+"."+v.params.slideDuplicateClass+'[data-swiper-slide-index="'+v.realIndex+'"]').addClass(v.params.slideDuplicateActiveClass));var c=a.next("."+v.params.slideClass).addClass(v.params.slideNextClass);v.params.loop&&0===c.length&&(c=v.slides.eq(0),c.addClass(v.params.slideNextClass));var e=a.prev("."+v.params.slideClass).addClass(v.params.slidePrevClass);if(v.params.loop&&0===e.length&&(e=v.slides.eq(-1),e.addClass(v.params.slidePrevClass)),d.loop&&(c.hasClass(v.params.slideDuplicateClass)?v.wrapper.children("."+v.params.slideClass+":not(."+v.params.slideDuplicateClass+')[data-swiper-slide-index="'+c.attr("data-swiper-slide-index")+'"]').addClass(v.params.slideDuplicateNextClass):v.wrapper.children("."+v.params.slideClass+"."+v.params.slideDuplicateClass+'[data-swiper-slide-index="'+c.attr("data-swiper-slide-index")+'"]').addClass(v.params.slideDuplicateNextClass),e.hasClass(v.params.slideDuplicateClass)?v.wrapper.children("."+v.params.slideClass+":not(."+v.params.slideDuplicateClass+')[data-swiper-slide-index="'+e.attr("data-swiper-slide-index")+'"]').addClass(v.params.slideDuplicatePrevClass):v.wrapper.children("."+v.params.slideClass+"."+v.params.slideDuplicateClass+'[data-swiper-slide-index="'+e.attr("data-swiper-slide-index")+'"]').addClass(v.params.slideDuplicatePrevClass)),v.paginationContainer&&v.paginationContainer.length>0){var f,g=v.params.loop?Math.ceil((v.slides.length-2*v.loopedSlides)/v.params.slidesPerGroup):v.snapGrid.length;if(v.params.loop?(f=Math.ceil((v.activeIndex-v.loopedSlides)/v.params.slidesPerGroup),f>v.slides.length-1-2*v.loopedSlides&&(f-=v.slides.length-2*v.loopedSlides),f>g-1&&(f-=g),0>f&&"bullets"!==v.params.paginationType&&(f=g+f)):f="undefined"!=typeof v.snapIndex?v.snapIndex:v.activeIndex||0,"bullets"===v.params.paginationType&&v.bullets&&v.bullets.length>0&&(v.bullets.removeClass(v.params.bulletActiveClass),v.paginationContainer.length>1?v.bullets.each(function(){b(this).index()===f&&b(this).addClass(v.params.bulletActiveClass)}):v.bullets.eq(f).addClass(v.params.bulletActiveClass)),"fraction"===v.params.paginationType&&(v.paginationContainer.find("."+v.params.paginationCurrentClass).text(f+1),v.paginationContainer.find("."+v.params.paginationTotalClass).text(g)),"progress"===v.params.paginationType){var h=(f+1)/g,i=h,j=1;v.isHorizontal()||(j=h,i=1),v.paginationContainer.find("."+v.params.paginationProgressbarClass).transform("translate3d(0,0,0) scaleX("+i+") scaleY("+j+")").transition(v.params.speed)}"custom"===v.params.paginationType&&v.params.paginationCustomRender&&(v.paginationContainer.html(v.params.paginationCustomRender(v,f+1,g)),v.emit("onPaginationRendered",v,v.paginationContainer[0]))}v.params.loop||(v.params.prevButton&&v.prevButton&&v.prevButton.length>0&&(v.isBeginning?(v.prevButton.addClass(v.params.buttonDisabledClass),v.params.a11y&&v.a11y&&v.a11y.disable(v.prevButton)):(v.prevButton.removeClass(v.params.buttonDisabledClass),v.params.a11y&&v.a11y&&v.a11y.enable(v.prevButton))),v.params.nextButton&&v.nextButton&&v.nextButton.length>0&&(v.isEnd?(v.nextButton.addClass(v.params.buttonDisabledClass),v.params.a11y&&v.a11y&&v.a11y.disable(v.nextButton)):(v.nextButton.removeClass(v.params.buttonDisabledClass),v.params.a11y&&v.a11y&&v.a11y.enable(v.nextButton))))},v.updatePagination=function(){if(v.params.pagination&&v.paginationContainer&&v.paginationContainer.length>0){var a="";if("bullets"===v.params.paginationType){for(var b=v.params.loop?Math.ceil((v.slides.length-2*v.loopedSlides)/v.params.slidesPerGroup):v.snapGrid.length,c=0;b>c;c++)a+=v.params.paginationBulletRender?v.params.paginationBulletRender(v,c,v.params.bulletClass):"<"+v.params.paginationElement+' class="'+v.params.bulletClass+'"></'+v.params.paginationElement+">";v.paginationContainer.html(a),v.bullets=v.paginationContainer.find("."+v.params.bulletClass),v.params.paginationClickable&&v.params.a11y&&v.a11y&&v.a11y.initPagination()}"fraction"===v.params.paginationType&&(a=v.params.paginationFractionRender?v.params.paginationFractionRender(v,v.params.paginationCurrentClass,v.params.paginationTotalClass):'<span class="'+v.params.paginationCurrentClass+'"></span> / <span class="'+v.params.paginationTotalClass+'"></span>',v.paginationContainer.html(a)),"progress"===v.params.paginationType&&(a=v.params.paginationProgressRender?v.params.paginationProgressRender(v,v.params.paginationProgressbarClass):'<span class="'+v.params.paginationProgressbarClass+'"></span>',v.paginationContainer.html(a)),"custom"!==v.params.paginationType&&v.emit("onPaginationRendered",v,v.paginationContainer[0])}},v.update=function(a){function b(){v.rtl?-v.translate:v.translate,d=Math.min(Math.max(v.translate,v.maxTranslate()),v.minTranslate()),v.setWrapperTranslate(d),v.updateActiveIndex(),v.updateClasses()}if(v)if(v.updateContainerSize(),v.updateSlidesSize(),v.updateProgress(),v.updatePagination(),v.updateClasses(),v.params.scrollbar&&v.scrollbar&&v.scrollbar.set(),a){var c,d;v.controller&&v.controller.spline&&(v.controller.spline=void 0),v.params.freeMode?(b(),v.params.autoHeight&&v.updateAutoHeight()):(c=("auto"===v.params.slidesPerView||v.params.slidesPerView>1)&&v.isEnd&&!v.params.centeredSlides?v.slideTo(v.slides.length-1,0,!1,!0):v.slideTo(v.activeIndex,0,!1,!0),c||b())}else v.params.autoHeight&&v.updateAutoHeight()},v.onResize=function(a){v.params.breakpoints&&v.setBreakpoint();var b=v.params.allowSwipeToPrev,c=v.params.allowSwipeToNext;v.params.allowSwipeToPrev=v.params.allowSwipeToNext=!0,v.updateContainerSize(),v.updateSlidesSize(),("auto"===v.params.slidesPerView||v.params.freeMode||a)&&v.updatePagination(),v.params.scrollbar&&v.scrollbar&&v.scrollbar.set(),v.controller&&v.controller.spline&&(v.controller.spline=void 0);var d=!1;if(v.params.freeMode){var e=Math.min(Math.max(v.translate,v.maxTranslate()),v.minTranslate());v.setWrapperTranslate(e),v.updateActiveIndex(),v.updateClasses(),v.params.autoHeight&&v.updateAutoHeight()}else v.updateClasses(),d=("auto"===v.params.slidesPerView||v.params.slidesPerView>1)&&v.isEnd&&!v.params.centeredSlides?v.slideTo(v.slides.length-1,0,!1,!0):v.slideTo(v.activeIndex,0,!1,!0);v.params.lazyLoading&&!d&&v.lazy&&v.lazy.load(),v.params.allowSwipeToPrev=b,v.params.allowSwipeToNext=c},v.touchEventsDesktop={start:"mousedown",move:"mousemove",end:"mouseup"},window.navigator.pointerEnabled?v.touchEventsDesktop={start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled&&(v.touchEventsDesktop={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}),v.touchEvents={start:v.support.touch||!v.params.simulateTouch?"touchstart":v.touchEventsDesktop.start,move:v.support.touch||!v.params.simulateTouch?"touchmove":v.touchEventsDesktop.move,end:v.support.touch||!v.params.simulateTouch?"touchend":v.touchEventsDesktop.end},(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&("container"===v.params.touchEventsTarget?v.container:v.wrapper).addClass("swiper-wp8-"+v.params.direction),v.initEvents=function(a){var b=a?"off":"on",c=a?"removeEventListener":"addEventListener",e="container"===v.params.touchEventsTarget?v.container[0]:v.wrapper[0],f=v.support.touch?e:document,g=!!v.params.nested;if(v.browser.ie)e[c](v.touchEvents.start,v.onTouchStart,!1),f[c](v.touchEvents.move,v.onTouchMove,g),f[c](v.touchEvents.end,v.onTouchEnd,!1);else{if(v.support.touch){var h=!("touchstart"!==v.touchEvents.start||!v.support.passiveListener||!v.params.passiveListeners)&&{passive:!0,capture:!1};e[c](v.touchEvents.start,v.onTouchStart,h),e[c](v.touchEvents.move,v.onTouchMove,g),e[c](v.touchEvents.end,v.onTouchEnd,h)}(d.simulateTouch&&!v.device.ios&&!v.device.android||d.simulateTouch&&!v.support.touch&&v.device.ios)&&(e[c]("mousedown",v.onTouchStart,!1),document[c]("mousemove",v.onTouchMove,g),document[c]("mouseup",v.onTouchEnd,!1))}window[c]("resize",v.onResize),v.params.nextButton&&v.nextButton&&v.nextButton.length>0&&(v.nextButton[b]("click",v.onClickNext),v.params.a11y&&v.a11y&&v.nextButton[b]("keydown",v.a11y.onEnterKey)),v.params.prevButton&&v.prevButton&&v.prevButton.length>0&&(v.prevButton[b]("click",v.onClickPrev),v.params.a11y&&v.a11y&&v.prevButton[b]("keydown",v.a11y.onEnterKey)),v.params.pagination&&v.params.paginationClickable&&(v.paginationContainer[b]("click","."+v.params.bulletClass,v.onClickIndex),v.params.a11y&&v.a11y&&v.paginationContainer[b]("keydown","."+v.params.bulletClass,v.a11y.onEnterKey)),(v.params.preventClicks||v.params.preventClicksPropagation)&&e[c]("click",v.preventClicks,!0)},v.attachEvents=function(){v.initEvents()},v.detachEvents=function(){v.initEvents(!0)},v.allowClick=!0,v.preventClicks=function(a){v.allowClick||(v.params.preventClicks&&a.preventDefault(),v.params.preventClicksPropagation&&v.animating&&(a.stopPropagation(),a.stopImmediatePropagation()))},v.onClickNext=function(a){a.preventDefault(),v.isEnd&&!v.params.loop||v.slideNext()},v.onClickPrev=function(a){a.preventDefault(),v.isBeginning&&!v.params.loop||v.slidePrev()},v.onClickIndex=function(a){a.preventDefault();var c=b(this).index()*v.params.slidesPerGroup;v.params.loop&&(c+=v.loopedSlides),v.slideTo(c)},v.updateClickedSlide=function(a){var c=g(a,"."+v.params.slideClass),d=!1;if(c)for(var e=0;e<v.slides.length;e++)v.slides[e]===c&&(d=!0);if(!c||!d)return v.clickedSlide=void 0,void(v.clickedIndex=void 0);if(v.clickedSlide=c,v.clickedIndex=b(c).index(),v.params.slideToClickedSlide&&void 0!==v.clickedIndex&&v.clickedIndex!==v.activeIndex){var f,h=v.clickedIndex,i="auto"===v.params.slidesPerView?v.currentSlidesPerView():v.params.slidesPerView;if(v.params.loop){if(v.animating)return;f=parseInt(b(v.clickedSlide).attr("data-swiper-slide-index"),10),v.params.centeredSlides?h<v.loopedSlides-i/2||h>v.slides.length-v.loopedSlides+i/2?(v.fixLoop(),h=v.wrapper.children("."+v.params.slideClass+'[data-swiper-slide-index="'+f+'"]:not(.'+v.params.slideDuplicateClass+")").eq(0).index(),setTimeout(function(){v.slideTo(h)},0)):v.slideTo(h):h>v.slides.length-i?(v.fixLoop(),h=v.wrapper.children("."+v.params.slideClass+'[data-swiper-slide-index="'+f+'"]:not(.'+v.params.slideDuplicateClass+")").eq(0).index(),setTimeout(function(){v.slideTo(h)},0)):v.slideTo(h)}else v.slideTo(h)}};var x,y,z,A,B,C,D,E,F,G,H="input, select, textarea, button, video",I=Date.now(),J=[];v.animating=!1,v.touches={startX:0,startY:0,currentX:0,currentY:0,diff:0};var K,L;v.onTouchStart=function(a){if(a.originalEvent&&(a=a.originalEvent),K="touchstart"===a.type,K||!("which"in a)||3!==a.which){if(v.params.noSwiping&&g(a,"."+v.params.noSwipingClass))return void(v.allowClick=!0);if(!v.params.swipeHandler||g(a,v.params.swipeHandler)){var c=v.touches.currentX="touchstart"===a.type?a.targetTouches[0].pageX:a.pageX,d=v.touches.currentY="touchstart"===a.type?a.targetTouches[0].pageY:a.pageY;if(!(v.device.ios&&v.params.iOSEdgeSwipeDetection&&c<=v.params.iOSEdgeSwipeThreshold)){if(x=!0,y=!1,z=!0,B=void 0,L=void 0,v.touches.startX=c,v.touches.startY=d,A=Date.now(),v.allowClick=!0,v.updateContainerSize(),v.swipeDirection=void 0,v.params.threshold>0&&(E=!1),"touchstart"!==a.type){var e=!0;b(a.target).is(H)&&(e=!1),document.activeElement&&b(document.activeElement).is(H)&&document.activeElement.blur(),e&&a.preventDefault()}v.emit("onTouchStart",v,a)}}}},v.onTouchMove=function(a){if(a.originalEvent&&(a=a.originalEvent),!K||"mousemove"!==a.type){if(a.preventedByNestedSwiper)return v.touches.startX="touchmove"===a.type?a.targetTouches[0].pageX:a.pageX,void(v.touches.startY="touchmove"===a.type?a.targetTouches[0].pageY:a.pageY);if(v.params.onlyExternal)return v.allowClick=!1,void(x&&(v.touches.startX=v.touches.currentX="touchmove"===a.type?a.targetTouches[0].pageX:a.pageX,v.touches.startY=v.touches.currentY="touchmove"===a.type?a.targetTouches[0].pageY:a.pageY,A=Date.now()));if(K&&v.params.touchReleaseOnEdges&&!v.params.loop)if(v.isHorizontal()){if(v.touches.currentX<v.touches.startX&&v.translate<=v.maxTranslate()||v.touches.currentX>v.touches.startX&&v.translate>=v.minTranslate())return}else if(v.touches.currentY<v.touches.startY&&v.translate<=v.maxTranslate()||v.touches.currentY>v.touches.startY&&v.translate>=v.minTranslate())return;if(K&&document.activeElement&&a.target===document.activeElement&&b(a.target).is(H))return y=!0,void(v.allowClick=!1);if(z&&v.emit("onTouchMove",v,a),!(a.targetTouches&&a.targetTouches.length>1)){if(v.touches.currentX="touchmove"===a.type?a.targetTouches[0].pageX:a.pageX,v.touches.currentY="touchmove"===a.type?a.targetTouches[0].pageY:a.pageY,"undefined"==typeof B){var c;v.isHorizontal()&&v.touches.currentY===v.touches.startY||!v.isHorizontal()&&v.touches.currentX===v.touches.startX?B=!1:(c=180*Math.atan2(Math.abs(v.touches.currentY-v.touches.startY),Math.abs(v.touches.currentX-v.touches.startX))/Math.PI,B=v.isHorizontal()?c>v.params.touchAngle:90-c>v.params.touchAngle)}if(B&&v.emit("onTouchMoveOpposite",v,a),"undefined"==typeof L&&v.browser.ieTouch&&(v.touches.currentX===v.touches.startX&&v.touches.currentY===v.touches.startY||(L=!0)),x){if(B)return void(x=!1);if(L||!v.browser.ieTouch){v.allowClick=!1,v.emit("onSliderMove",v,a),a.preventDefault(),v.params.touchMoveStopPropagation&&!v.params.nested&&a.stopPropagation(),y||(d.loop&&v.fixLoop(),D=v.getWrapperTranslate(),v.setWrapperTransition(0),v.animating&&v.wrapper.trigger("webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd"),v.params.autoplay&&v.autoplaying&&(v.params.autoplayDisableOnInteraction?v.stopAutoplay():v.pauseAutoplay()),G=!1,!v.params.grabCursor||v.params.allowSwipeToNext!==!0&&v.params.allowSwipeToPrev!==!0||v.setGrabCursor(!0)),y=!0;var e=v.touches.diff=v.isHorizontal()?v.touches.currentX-v.touches.startX:v.touches.currentY-v.touches.startY;e*=v.params.touchRatio,v.rtl&&(e=-e),v.swipeDirection=e>0?"prev":"next",C=e+D;var f=!0;if(e>0&&C>v.minTranslate()?(f=!1,v.params.resistance&&(C=v.minTranslate()-1+Math.pow(-v.minTranslate()+D+e,v.params.resistanceRatio))):0>e&&C<v.maxTranslate()&&(f=!1,v.params.resistance&&(C=v.maxTranslate()+1-Math.pow(v.maxTranslate()-D-e,v.params.resistanceRatio))),f&&(a.preventedByNestedSwiper=!0),!v.params.allowSwipeToNext&&"next"===v.swipeDirection&&D>C&&(C=D),!v.params.allowSwipeToPrev&&"prev"===v.swipeDirection&&C>D&&(C=D),v.params.threshold>0){if(!(Math.abs(e)>v.params.threshold||E))return void(C=D);if(!E)return E=!0,v.touches.startX=v.touches.currentX,v.touches.startY=v.touches.currentY,C=D,void(v.touches.diff=v.isHorizontal()?v.touches.currentX-v.touches.startX:v.touches.currentY-v.touches.startY)}v.params.followFinger&&((v.params.freeMode||v.params.watchSlidesProgress)&&v.updateActiveIndex(),v.params.freeMode&&(0===J.length&&J.push({position:v.touches[v.isHorizontal()?"startX":"startY"],time:A}),J.push({position:v.touches[v.isHorizontal()?"currentX":"currentY"],time:(new window.Date).getTime()})),v.updateProgress(C),v.setWrapperTranslate(C))}}}}},v.onTouchEnd=function(a){if(a.originalEvent&&(a=a.originalEvent),z&&v.emit("onTouchEnd",v,a),z=!1,x){v.params.grabCursor&&y&&x&&(v.params.allowSwipeToNext===!0||v.params.allowSwipeToPrev===!0)&&v.setGrabCursor(!1);var c=Date.now(),d=c-A;if(v.allowClick&&(v.updateClickedSlide(a),v.emit("onTap",v,a),300>d&&c-I>300&&(F&&clearTimeout(F),F=setTimeout(function(){v&&(v.params.paginationHide&&v.paginationContainer.length>0&&!b(a.target).hasClass(v.params.bulletClass)&&v.paginationContainer.toggleClass(v.params.paginationHiddenClass),v.emit("onClick",v,a))},300)),300>d&&300>c-I&&(F&&clearTimeout(F),v.emit("onDoubleTap",v,a))),I=Date.now(),setTimeout(function(){v&&(v.allowClick=!0)},0),!x||!y||!v.swipeDirection||0===v.touches.diff||C===D)return void(x=y=!1);x=y=!1;var e;if(e=v.params.followFinger?v.rtl?v.translate:-v.translate:-C,v.params.freeMode){if(e<-v.minTranslate())return void v.slideTo(v.activeIndex);if(e>-v.maxTranslate())return void(v.slides.length<v.snapGrid.length?v.slideTo(v.snapGrid.length-1):v.slideTo(v.slides.length-1));if(v.params.freeModeMomentum){if(J.length>1){var f=J.pop(),g=J.pop(),h=f.position-g.position,i=f.time-g.time;v.velocity=h/i,v.velocity=v.velocity/2,Math.abs(v.velocity)<v.params.freeModeMinimumVelocity&&(v.velocity=0),(i>150||(new window.Date).getTime()-f.time>300)&&(v.velocity=0)}else v.velocity=0;v.velocity=v.velocity*v.params.freeModeMomentumVelocityRatio,J.length=0;var j=1e3*v.params.freeModeMomentumRatio,k=v.velocity*j,l=v.translate+k;v.rtl&&(l=-l);var m,n=!1,o=20*Math.abs(v.velocity)*v.params.freeModeMomentumBounceRatio;if(l<v.maxTranslate())v.params.freeModeMomentumBounce?(l+v.maxTranslate()<-o&&(l=v.maxTranslate()-o),m=v.maxTranslate(),n=!0,G=!0):l=v.maxTranslate();else if(l>v.minTranslate())v.params.freeModeMomentumBounce?(l-v.minTranslate()>o&&(l=v.minTranslate()+o),m=v.minTranslate(),n=!0,G=!0):l=v.minTranslate();else if(v.params.freeModeSticky){var p,q=0;for(q=0;q<v.snapGrid.length;q+=1)if(v.snapGrid[q]>-l){p=q;break}l=Math.abs(v.snapGrid[p]-l)<Math.abs(v.snapGrid[p-1]-l)||"next"===v.swipeDirection?v.snapGrid[p]:v.snapGrid[p-1],v.rtl||(l=-l)}if(0!==v.velocity)j=v.rtl?Math.abs((-l-v.translate)/v.velocity):Math.abs((l-v.translate)/v.velocity);else if(v.params.freeModeSticky)return void v.slideReset();v.params.freeModeMomentumBounce&&n?(v.updateProgress(m),v.setWrapperTransition(j),v.setWrapperTranslate(l),v.onTransitionStart(),v.animating=!0,v.wrapper.transitionEnd(function(){v&&G&&(v.emit("onMomentumBounce",v),v.setWrapperTransition(v.params.speed),v.setWrapperTranslate(m),v.wrapper.transitionEnd(function(){v&&v.onTransitionEnd()}))})):v.velocity?(v.updateProgress(l),v.setWrapperTransition(j),v.setWrapperTranslate(l),v.onTransitionStart(),v.animating||(v.animating=!0,v.wrapper.transitionEnd(function(){v&&v.onTransitionEnd()}))):v.updateProgress(l),v.updateActiveIndex()}return void((!v.params.freeModeMomentum||d>=v.params.longSwipesMs)&&(v.updateProgress(),v.updateActiveIndex()))}var r,s=0,t=v.slidesSizesGrid[0];for(r=0;r<v.slidesGrid.length;r+=v.params.slidesPerGroup)"undefined"!=typeof v.slidesGrid[r+v.params.slidesPerGroup]?e>=v.slidesGrid[r]&&e<v.slidesGrid[r+v.params.slidesPerGroup]&&(s=r,t=v.slidesGrid[r+v.params.slidesPerGroup]-v.slidesGrid[r]):e>=v.slidesGrid[r]&&(s=r,t=v.slidesGrid[v.slidesGrid.length-1]-v.slidesGrid[v.slidesGrid.length-2]);var u=(e-v.slidesGrid[s])/t;if(d>v.params.longSwipesMs){if(!v.params.longSwipes)return void v.slideTo(v.activeIndex);"next"===v.swipeDirection&&(u>=v.params.longSwipesRatio?v.slideTo(s+v.params.slidesPerGroup):v.slideTo(s)),"prev"===v.swipeDirection&&(u>1-v.params.longSwipesRatio?v.slideTo(s+v.params.slidesPerGroup):v.slideTo(s))}else{if(!v.params.shortSwipes)return void v.slideTo(v.activeIndex);"next"===v.swipeDirection&&v.slideTo(s+v.params.slidesPerGroup),"prev"===v.swipeDirection&&v.slideTo(s)}}},v._slideTo=function(a,b){return v.slideTo(a,b,!0,!0)},v.slideTo=function(a,b,c,d){"undefined"==typeof c&&(c=!0),"undefined"==typeof a&&(a=0),0>a&&(a=0),v.snapIndex=Math.floor(a/v.params.slidesPerGroup),v.snapIndex>=v.snapGrid.length&&(v.snapIndex=v.snapGrid.length-1);var e=-v.snapGrid[v.snapIndex];if(v.params.autoplay&&v.autoplaying&&(d||!v.params.autoplayDisableOnInteraction?v.pauseAutoplay(b):v.stopAutoplay()),v.updateProgress(e),v.params.normalizeSlideIndex)for(var f=0;f<v.slidesGrid.length;f++)-Math.floor(100*e)>=Math.floor(100*v.slidesGrid[f])&&(a=f);return!(!v.params.allowSwipeToNext&&e<v.translate&&e<v.minTranslate()||!v.params.allowSwipeToPrev&&e>v.translate&&e>v.maxTranslate()&&(v.activeIndex||0)!==a||("undefined"==typeof b&&(b=v.params.speed),v.previousIndex=v.activeIndex||0,
v.activeIndex=a,v.updateRealIndex(),v.rtl&&-e===v.translate||!v.rtl&&e===v.translate?(v.params.autoHeight&&v.updateAutoHeight(),v.updateClasses(),"slide"!==v.params.effect&&v.setWrapperTranslate(e),1):(v.updateClasses(),v.onTransitionStart(c),0===b||v.browser.lteIE9?(v.setWrapperTranslate(e),v.setWrapperTransition(0),v.onTransitionEnd(c)):(v.setWrapperTranslate(e),v.setWrapperTransition(b),v.animating||(v.animating=!0,v.wrapper.transitionEnd(function(){v&&v.onTransitionEnd(c)}))),0)))},v.onTransitionStart=function(a){"undefined"==typeof a&&(a=!0),v.params.autoHeight&&v.updateAutoHeight(),v.lazy&&v.lazy.onTransitionStart(),a&&(v.emit("onTransitionStart",v),v.activeIndex!==v.previousIndex&&(v.emit("onSlideChangeStart",v),v.activeIndex>v.previousIndex?v.emit("onSlideNextStart",v):v.emit("onSlidePrevStart",v)))},v.onTransitionEnd=function(a){v.animating=!1,v.setWrapperTransition(0),"undefined"==typeof a&&(a=!0),v.lazy&&v.lazy.onTransitionEnd(),a&&(v.emit("onTransitionEnd",v),v.activeIndex!==v.previousIndex&&(v.emit("onSlideChangeEnd",v),v.activeIndex>v.previousIndex?v.emit("onSlideNextEnd",v):v.emit("onSlidePrevEnd",v))),v.params.history&&v.history&&v.history.setHistory(v.params.history,v.activeIndex),v.params.hashnav&&v.hashnav&&v.hashnav.setHash()},v.slideNext=function(a,b,c){return v.params.loop?v.animating?!1:(v.fixLoop(),v.container[0].clientLeft,v.slideTo(v.activeIndex+v.params.slidesPerGroup,b,a,c)):v.slideTo(v.activeIndex+v.params.slidesPerGroup,b,a,c)},v._slideNext=function(a){return v.slideNext(!0,a,!0)},v.slidePrev=function(a,b,c){return v.params.loop?v.animating?!1:(v.fixLoop(),v.container[0].clientLeft,v.slideTo(v.activeIndex-1,b,a,c)):v.slideTo(v.activeIndex-1,b,a,c)},v._slidePrev=function(a){return v.slidePrev(!0,a,!0)},v.slideReset=function(a,b,c){return v.slideTo(v.activeIndex,b,a)},v.disableTouchControl=function(){return v.params.onlyExternal=!0,!0},v.enableTouchControl=function(){return v.params.onlyExternal=!1,!0},v.setWrapperTransition=function(a,b){v.wrapper.transition(a),"slide"!==v.params.effect&&v.effects[v.params.effect]&&v.effects[v.params.effect].setTransition(a),v.params.parallax&&v.parallax&&v.parallax.setTransition(a),v.params.scrollbar&&v.scrollbar&&v.scrollbar.setTransition(a),v.params.control&&v.controller&&v.controller.setTransition(a,b),v.emit("onSetTransition",v,a)},v.setWrapperTranslate=function(a,b,c){var d=0,f=0,g=0;v.isHorizontal()?d=v.rtl?-a:a:f=a,v.params.roundLengths&&(d=e(d),f=e(f)),v.params.virtualTranslate||(v.support.transforms3d?v.wrapper.transform("translate3d("+d+"px, "+f+"px, "+g+"px)"):v.wrapper.transform("translate("+d+"px, "+f+"px)")),v.translate=v.isHorizontal()?d:f;var h,i=v.maxTranslate()-v.minTranslate();h=0===i?0:(a-v.minTranslate())/i,h!==v.progress&&v.updateProgress(a),b&&v.updateActiveIndex(),"slide"!==v.params.effect&&v.effects[v.params.effect]&&v.effects[v.params.effect].setTranslate(v.translate),v.params.parallax&&v.parallax&&v.parallax.setTranslate(v.translate),v.params.scrollbar&&v.scrollbar&&v.scrollbar.setTranslate(v.translate),v.params.control&&v.controller&&v.controller.setTranslate(v.translate,c),v.emit("onSetTranslate",v,v.translate)},v.getTranslate=function(a,b){var c,d,e,f;return"undefined"==typeof b&&(b="x"),v.params.virtualTranslate?v.rtl?-v.translate:v.translate:(e=window.getComputedStyle(a,null),window.WebKitCSSMatrix?(d=e.transform||e.webkitTransform,d.split(",").length>6&&(d=d.split(", ").map(function(a){return a.replace(",",".")}).join(", ")),f=new window.WebKitCSSMatrix("none"===d?"":d)):(f=e.MozTransform||e.OTransform||e.MsTransform||e.msTransform||e.transform||e.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),c=f.toString().split(",")),"x"===b&&(d=window.WebKitCSSMatrix?f.m41:16===c.length?parseFloat(c[12]):parseFloat(c[4])),"y"===b&&(d=window.WebKitCSSMatrix?f.m42:16===c.length?parseFloat(c[13]):parseFloat(c[5])),v.rtl&&d&&(d=-d),d||0)},v.getWrapperTranslate=function(a){return"undefined"==typeof a&&(a=v.isHorizontal()?"x":"y"),v.getTranslate(v.wrapper[0],a)},v.observers=[],v.initObservers=function(){if(v.params.observeParents)for(var a=v.container.parents(),b=0;b<a.length;b++)h(a[b]);h(v.container[0],{childList:!1}),h(v.wrapper[0],{attributes:!1})},v.disconnectObservers=function(){for(var a=0;a<v.observers.length;a++)v.observers[a].disconnect();v.observers=[]},v.createLoop=function(){v.wrapper.children("."+v.params.slideClass+"."+v.params.slideDuplicateClass).remove();var a=v.wrapper.children("."+v.params.slideClass);"auto"!==v.params.slidesPerView||v.params.loopedSlides||(v.params.loopedSlides=a.length),v.loopedSlides=parseInt(v.params.loopedSlides||v.params.slidesPerView,10),v.loopedSlides=v.loopedSlides+v.params.loopAdditionalSlides,v.loopedSlides>a.length&&(v.loopedSlides=a.length);var c,d=[],e=[];for(a.each(function(c,f){var g=b(this);c<v.loopedSlides&&e.push(f),c<a.length&&c>=a.length-v.loopedSlides&&d.push(f),g.attr("data-swiper-slide-index",c)}),c=0;c<e.length;c++)v.wrapper.append(b(e[c].cloneNode(!0)).addClass(v.params.slideDuplicateClass));for(c=d.length-1;c>=0;c--)v.wrapper.prepend(b(d[c].cloneNode(!0)).addClass(v.params.slideDuplicateClass))},v.destroyLoop=function(){v.wrapper.children("."+v.params.slideClass+"."+v.params.slideDuplicateClass).remove(),v.slides.removeAttr("data-swiper-slide-index")},v.reLoop=function(a){var b=v.activeIndex-v.loopedSlides;v.destroyLoop(),v.createLoop(),v.updateSlidesSize(),a&&v.slideTo(b+v.loopedSlides,0,!1)},v.fixLoop=function(){var a;v.activeIndex<v.loopedSlides?(a=v.slides.length-3*v.loopedSlides+v.activeIndex,a+=v.loopedSlides,v.slideTo(a,0,!1,!0)):("auto"===v.params.slidesPerView&&v.activeIndex>=2*v.loopedSlides||v.activeIndex>v.slides.length-2*v.params.slidesPerView)&&(a=-v.slides.length+v.activeIndex+v.loopedSlides,a+=v.loopedSlides,v.slideTo(a,0,!1,!0))},v.appendSlide=function(a){if(v.params.loop&&v.destroyLoop(),"object"==typeof a&&a.length)for(var b=0;b<a.length;b++)a[b]&&v.wrapper.append(a[b]);else v.wrapper.append(a);v.params.loop&&v.createLoop(),v.params.observer&&v.support.observer||v.update(!0)},v.prependSlide=function(a){v.params.loop&&v.destroyLoop();var b=v.activeIndex+1;if("object"==typeof a&&a.length){for(var c=0;c<a.length;c++)a[c]&&v.wrapper.prepend(a[c]);b=v.activeIndex+a.length}else v.wrapper.prepend(a);v.params.loop&&v.createLoop(),v.params.observer&&v.support.observer||v.update(!0),v.slideTo(b,0,!1)},v.removeSlide=function(a){v.params.loop&&(v.destroyLoop(),v.slides=v.wrapper.children("."+v.params.slideClass));var b,c=v.activeIndex;if("object"==typeof a&&a.length){for(var d=0;d<a.length;d++)b=a[d],v.slides[b]&&v.slides.eq(b).remove(),c>b&&c--;c=Math.max(c,0)}else b=a,v.slides[b]&&v.slides.eq(b).remove(),c>b&&c--,c=Math.max(c,0);v.params.loop&&v.createLoop(),v.params.observer&&v.support.observer||v.update(!0),v.params.loop?v.slideTo(c+v.loopedSlides,0,!1):v.slideTo(c,0,!1)},v.removeAllSlides=function(){for(var a=[],b=0;b<v.slides.length;b++)a.push(b);v.removeSlide(a)},v.effects={fade:{setTranslate:function(){for(var a=0;a<v.slides.length;a++){var b=v.slides.eq(a),c=b[0].swiperSlideOffset,d=-c;v.params.virtualTranslate||(d-=v.translate);var e=0;v.isHorizontal()||(e=d,d=0);var f=v.params.fade.crossFade?Math.max(1-Math.abs(b[0].progress),0):1+Math.min(Math.max(b[0].progress,-1),0);b.css({opacity:f}).transform("translate3d("+d+"px, "+e+"px, 0px)")}},setTransition:function(a){if(v.slides.transition(a),v.params.virtualTranslate&&0!==a){var b=!1;v.slides.transitionEnd(function(){if(!b&&v){b=!0,v.animating=!1;for(var a=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],c=0;c<a.length;c++)v.wrapper.trigger(a[c])}})}}},flip:{setTranslate:function(){for(var a=0;a<v.slides.length;a++){var c=v.slides.eq(a),d=c[0].progress;v.params.flip.limitRotation&&(d=Math.max(Math.min(c[0].progress,1),-1));var e=c[0].swiperSlideOffset,f=-180*d,g=f,h=0,i=-e,j=0;if(v.isHorizontal()?v.rtl&&(g=-g):(j=i,i=0,h=-g,g=0),c[0].style.zIndex=-Math.abs(Math.round(d))+v.slides.length,v.params.flip.slideShadows){var k=v.isHorizontal()?c.find(".swiper-slide-shadow-left"):c.find(".swiper-slide-shadow-top"),l=v.isHorizontal()?c.find(".swiper-slide-shadow-right"):c.find(".swiper-slide-shadow-bottom");0===k.length&&(k=b('<div class="swiper-slide-shadow-'+(v.isHorizontal()?"left":"top")+'"></div>'),c.append(k)),0===l.length&&(l=b('<div class="swiper-slide-shadow-'+(v.isHorizontal()?"right":"bottom")+'"></div>'),c.append(l)),k.length&&(k[0].style.opacity=Math.max(-d,0)),l.length&&(l[0].style.opacity=Math.max(d,0))}c.transform("translate3d("+i+"px, "+j+"px, 0px) rotateX("+h+"deg) rotateY("+g+"deg)")}},setTransition:function(a){if(v.slides.transition(a).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(a),v.params.virtualTranslate&&0!==a){var c=!1;v.slides.eq(v.activeIndex).transitionEnd(function(){if(!c&&v&&b(this).hasClass(v.params.slideActiveClass)){c=!0,v.animating=!1;for(var a=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],d=0;d<a.length;d++)v.wrapper.trigger(a[d])}})}}},cube:{setTranslate:function(){var a,c=0;v.params.cube.shadow&&(v.isHorizontal()?(a=v.wrapper.find(".swiper-cube-shadow"),0===a.length&&(a=b('<div class="swiper-cube-shadow"></div>'),v.wrapper.append(a)),a.css({height:v.width+"px"})):(a=v.container.find(".swiper-cube-shadow"),0===a.length&&(a=b('<div class="swiper-cube-shadow"></div>'),v.container.append(a))));for(var d=0;d<v.slides.length;d++){var e=v.slides.eq(d),f=90*d,g=Math.floor(f/360);v.rtl&&(f=-f,g=Math.floor(-f/360));var h=Math.max(Math.min(e[0].progress,1),-1),i=0,j=0,k=0;d%4===0?(i=4*-g*v.size,k=0):(d-1)%4===0?(i=0,k=4*-g*v.size):(d-2)%4===0?(i=v.size+4*g*v.size,k=v.size):(d-3)%4===0&&(i=-v.size,k=3*v.size+4*v.size*g),v.rtl&&(i=-i),v.isHorizontal()||(j=i,i=0);var l="rotateX("+(v.isHorizontal()?0:-f)+"deg) rotateY("+(v.isHorizontal()?f:0)+"deg) translate3d("+i+"px, "+j+"px, "+k+"px)";if(1>=h&&h>-1&&(c=90*d+90*h,v.rtl&&(c=90*-d-90*h)),e.transform(l),v.params.cube.slideShadows){var m=v.isHorizontal()?e.find(".swiper-slide-shadow-left"):e.find(".swiper-slide-shadow-top"),n=v.isHorizontal()?e.find(".swiper-slide-shadow-right"):e.find(".swiper-slide-shadow-bottom");0===m.length&&(m=b('<div class="swiper-slide-shadow-'+(v.isHorizontal()?"left":"top")+'"></div>'),e.append(m)),0===n.length&&(n=b('<div class="swiper-slide-shadow-'+(v.isHorizontal()?"right":"bottom")+'"></div>'),e.append(n)),m.length&&(m[0].style.opacity=Math.max(-h,0)),n.length&&(n[0].style.opacity=Math.max(h,0))}}if(v.wrapper.css({"-webkit-transform-origin":"50% 50% -"+v.size/2+"px","-moz-transform-origin":"50% 50% -"+v.size/2+"px","-ms-transform-origin":"50% 50% -"+v.size/2+"px","transform-origin":"50% 50% -"+v.size/2+"px"}),v.params.cube.shadow)if(v.isHorizontal())a.transform("translate3d(0px, "+(v.width/2+v.params.cube.shadowOffset)+"px, "+-v.width/2+"px) rotateX(90deg) rotateZ(0deg) scale("+v.params.cube.shadowScale+")");else{var o=Math.abs(c)-90*Math.floor(Math.abs(c)/90),p=1.5-(Math.sin(2*o*Math.PI/360)/2+Math.cos(2*o*Math.PI/360)/2),q=v.params.cube.shadowScale,r=v.params.cube.shadowScale/p,s=v.params.cube.shadowOffset;a.transform("scale3d("+q+", 1, "+r+") translate3d(0px, "+(v.height/2+s)+"px, "+-v.height/2/r+"px) rotateX(-90deg)")}var t=v.isSafari||v.isUiWebView?-v.size/2:0;v.wrapper.transform("translate3d(0px,0,"+t+"px) rotateX("+(v.isHorizontal()?0:c)+"deg) rotateY("+(v.isHorizontal()?-c:0)+"deg)")},setTransition:function(a){v.slides.transition(a).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(a),v.params.cube.shadow&&!v.isHorizontal()&&v.container.find(".swiper-cube-shadow").transition(a)}},coverflow:{setTranslate:function(){for(var a=v.translate,c=v.isHorizontal()?-a+v.width/2:-a+v.height/2,d=v.isHorizontal()?v.params.coverflow.rotate:-v.params.coverflow.rotate,e=v.params.coverflow.depth,f=0,g=v.slides.length;g>f;f++){var h=v.slides.eq(f),i=v.slidesSizesGrid[f],j=h[0].swiperSlideOffset,k=(c-j-i/2)/i*v.params.coverflow.modifier,l=v.isHorizontal()?d*k:0,m=v.isHorizontal()?0:d*k,n=-e*Math.abs(k),o=v.isHorizontal()?0:v.params.coverflow.stretch*k,p=v.isHorizontal()?v.params.coverflow.stretch*k:0;Math.abs(p)<.001&&(p=0),Math.abs(o)<.001&&(o=0),Math.abs(n)<.001&&(n=0),Math.abs(l)<.001&&(l=0),Math.abs(m)<.001&&(m=0);var q="translate3d("+p+"px,"+o+"px,"+n+"px)  rotateX("+m+"deg) rotateY("+l+"deg)";if(h.transform(q),h[0].style.zIndex=-Math.abs(Math.round(k))+1,v.params.coverflow.slideShadows){var r=v.isHorizontal()?h.find(".swiper-slide-shadow-left"):h.find(".swiper-slide-shadow-top"),s=v.isHorizontal()?h.find(".swiper-slide-shadow-right"):h.find(".swiper-slide-shadow-bottom");0===r.length&&(r=b('<div class="swiper-slide-shadow-'+(v.isHorizontal()?"left":"top")+'"></div>'),h.append(r)),0===s.length&&(s=b('<div class="swiper-slide-shadow-'+(v.isHorizontal()?"right":"bottom")+'"></div>'),h.append(s)),r.length&&(r[0].style.opacity=k>0?k:0),s.length&&(s[0].style.opacity=-k>0?-k:0)}}if(v.browser.ie){var t=v.wrapper[0].style;t.perspectiveOrigin=c+"px 50%"}},setTransition:function(a){v.slides.transition(a).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(a)}}},v.lazy={initialImageLoaded:!1,loadImageInSlide:function(a,c){if("undefined"!=typeof a&&("undefined"==typeof c&&(c=!0),0!==v.slides.length)){var d=v.slides.eq(a),e=d.find("."+v.params.lazyLoadingClass+":not(."+v.params.lazyStatusLoadedClass+"):not(."+v.params.lazyStatusLoadingClass+")");!d.hasClass(v.params.lazyLoadingClass)||d.hasClass(v.params.lazyStatusLoadedClass)||d.hasClass(v.params.lazyStatusLoadingClass)||(e=e.add(d[0])),0!==e.length&&e.each(function(){var a=b(this);a.addClass(v.params.lazyStatusLoadingClass);var e=a.attr("data-background"),f=a.attr("data-src"),g=a.attr("data-srcset"),h=a.attr("data-sizes");v.loadImage(a[0],f||e,g,h,!1,function(){if(e?(a.css("background-image",'url("'+e+'")'),a.removeAttr("data-background")):(g&&(a.attr("srcset",g),a.removeAttr("data-srcset")),h&&(a.attr("sizes",h),a.removeAttr("data-sizes")),f&&(a.attr("src",f),a.removeAttr("data-src"))),a.addClass(v.params.lazyStatusLoadedClass).removeClass(v.params.lazyStatusLoadingClass),d.find("."+v.params.lazyPreloaderClass+", ."+v.params.preloaderClass).remove(),v.params.loop&&c){var b=d.attr("data-swiper-slide-index");if(d.hasClass(v.params.slideDuplicateClass)){var i=v.wrapper.children('[data-swiper-slide-index="'+b+'"]:not(.'+v.params.slideDuplicateClass+")");v.lazy.loadImageInSlide(i.index(),!1)}else{var j=v.wrapper.children("."+v.params.slideDuplicateClass+'[data-swiper-slide-index="'+b+'"]');v.lazy.loadImageInSlide(j.index(),!1)}}v.emit("onLazyImageReady",v,d[0],a[0])}),v.emit("onLazyImageLoad",v,d[0],a[0])})}},load:function(){var a,c=v.params.slidesPerView;if("auto"===c&&(c=0),v.lazy.initialImageLoaded||(v.lazy.initialImageLoaded=!0),v.params.watchSlidesVisibility)v.wrapper.children("."+v.params.slideVisibleClass).each(function(){v.lazy.loadImageInSlide(b(this).index())});else if(c>1)for(a=v.activeIndex;a<v.activeIndex+c;a++)v.slides[a]&&v.lazy.loadImageInSlide(a);else v.lazy.loadImageInSlide(v.activeIndex);if(v.params.lazyLoadingInPrevNext)if(c>1||v.params.lazyLoadingInPrevNextAmount&&v.params.lazyLoadingInPrevNextAmount>1){var d=v.params.lazyLoadingInPrevNextAmount,e=c,f=Math.min(v.activeIndex+e+Math.max(d,e),v.slides.length),g=Math.max(v.activeIndex-Math.max(e,d),0);for(a=v.activeIndex+c;f>a;a++)v.slides[a]&&v.lazy.loadImageInSlide(a);for(a=g;a<v.activeIndex;a++)v.slides[a]&&v.lazy.loadImageInSlide(a)}else{var h=v.wrapper.children("."+v.params.slideNextClass);h.length>0&&v.lazy.loadImageInSlide(h.index());var i=v.wrapper.children("."+v.params.slidePrevClass);i.length>0&&v.lazy.loadImageInSlide(i.index())}},onTransitionStart:function(){v.params.lazyLoading&&(v.params.lazyLoadingOnTransitionStart||!v.params.lazyLoadingOnTransitionStart&&!v.lazy.initialImageLoaded)&&v.lazy.load()},onTransitionEnd:function(){v.params.lazyLoading&&!v.params.lazyLoadingOnTransitionStart&&v.lazy.load()}},v.scrollbar={isTouched:!1,setDragPosition:function(a){var b=v.scrollbar,c=v.isHorizontal()?"touchstart"===a.type||"touchmove"===a.type?a.targetTouches[0].pageX:a.pageX||a.clientX:"touchstart"===a.type||"touchmove"===a.type?a.targetTouches[0].pageY:a.pageY||a.clientY,d=c-b.track.offset()[v.isHorizontal()?"left":"top"]-b.dragSize/2,e=-v.minTranslate()*b.moveDivider,f=-v.maxTranslate()*b.moveDivider;e>d?d=e:d>f&&(d=f),d=-d/b.moveDivider,v.updateProgress(d),v.setWrapperTranslate(d,!0)},dragStart:function(a){var b=v.scrollbar;b.isTouched=!0,a.preventDefault(),a.stopPropagation(),b.setDragPosition(a),clearTimeout(b.dragTimeout),b.track.transition(0),v.params.scrollbarHide&&b.track.css("opacity",1),v.wrapper.transition(100),b.drag.transition(100),v.emit("onScrollbarDragStart",v)},dragMove:function(a){var b=v.scrollbar;b.isTouched&&(a.preventDefault?a.preventDefault():a.returnValue=!1,b.setDragPosition(a),v.wrapper.transition(0),b.track.transition(0),b.drag.transition(0),v.emit("onScrollbarDragMove",v))},dragEnd:function(a){var b=v.scrollbar;b.isTouched&&(b.isTouched=!1,v.params.scrollbarHide&&(clearTimeout(b.dragTimeout),b.dragTimeout=setTimeout(function(){b.track.css("opacity",0),b.track.transition(400)},1e3)),v.emit("onScrollbarDragEnd",v),v.params.scrollbarSnapOnRelease&&v.slideReset())},draggableEvents:function(){return v.params.simulateTouch!==!1||v.support.touch?v.touchEvents:v.touchEventsDesktop}(),enableDraggable:function(){var a=v.scrollbar,c=v.support.touch?a.track:document;b(a.track).on(a.draggableEvents.start,a.dragStart),b(c).on(a.draggableEvents.move,a.dragMove),b(c).on(a.draggableEvents.end,a.dragEnd)},disableDraggable:function(){var a=v.scrollbar,c=v.support.touch?a.track:document;b(a.track).off(a.draggableEvents.start,a.dragStart),b(c).off(a.draggableEvents.move,a.dragMove),b(c).off(a.draggableEvents.end,a.dragEnd)},set:function(){if(v.params.scrollbar){var a=v.scrollbar;a.track=b(v.params.scrollbar),v.params.uniqueNavElements&&"string"==typeof v.params.scrollbar&&a.track.length>1&&1===v.container.find(v.params.scrollbar).length&&(a.track=v.container.find(v.params.scrollbar)),a.drag=a.track.find(".swiper-scrollbar-drag"),0===a.drag.length&&(a.drag=b('<div class="swiper-scrollbar-drag"></div>'),a.track.append(a.drag)),a.drag[0].style.width="",a.drag[0].style.height="",a.trackSize=v.isHorizontal()?a.track[0].offsetWidth:a.track[0].offsetHeight,a.divider=v.size/v.virtualSize,a.moveDivider=a.divider*(a.trackSize/v.size),a.dragSize=a.trackSize*a.divider,v.isHorizontal()?a.drag[0].style.width=a.dragSize+"px":a.drag[0].style.height=a.dragSize+"px",a.divider>=1?a.track[0].style.display="none":a.track[0].style.display="",v.params.scrollbarHide&&(a.track[0].style.opacity=0)}},setTranslate:function(){if(v.params.scrollbar){var a,b=v.scrollbar,c=(v.translate||0,b.dragSize);a=(b.trackSize-b.dragSize)*v.progress,v.rtl&&v.isHorizontal()?(a=-a,a>0?(c=b.dragSize-a,a=0):-a+b.dragSize>b.trackSize&&(c=b.trackSize+a)):0>a?(c=b.dragSize+a,a=0):a+b.dragSize>b.trackSize&&(c=b.trackSize-a),v.isHorizontal()?(v.support.transforms3d?b.drag.transform("translate3d("+a+"px, 0, 0)"):b.drag.transform("translateX("+a+"px)"),b.drag[0].style.width=c+"px"):(v.support.transforms3d?b.drag.transform("translate3d(0px, "+a+"px, 0)"):b.drag.transform("translateY("+a+"px)"),b.drag[0].style.height=c+"px"),v.params.scrollbarHide&&(clearTimeout(b.timeout),b.track[0].style.opacity=1,b.timeout=setTimeout(function(){b.track[0].style.opacity=0,b.track.transition(400)},1e3))}},setTransition:function(a){v.params.scrollbar&&v.scrollbar.drag.transition(a)}},v.controller={LinearSpline:function(a,b){this.x=a,this.y=b,this.lastIndex=a.length-1;var c,d;this.x.length,this.interpolate=function(a){return a?(d=e(this.x,a),c=d-1,(a-this.x[c])*(this.y[d]-this.y[c])/(this.x[d]-this.x[c])+this.y[c]):0};var e=function(){var a,b,c;return function(d,e){for(b=-1,a=d.length;a-b>1;)d[c=a+b>>1]<=e?b=c:a=c;return a}}()},getInterpolateFunction:function(a){v.controller.spline||(v.controller.spline=v.params.loop?new v.controller.LinearSpline(v.slidesGrid,a.slidesGrid):new v.controller.LinearSpline(v.snapGrid,a.snapGrid))},setTranslate:function(a,b){function d(b){a=b.rtl&&"horizontal"===b.params.direction?-v.translate:v.translate,"slide"===v.params.controlBy&&(v.controller.getInterpolateFunction(b),f=-v.controller.spline.interpolate(-a)),f&&"container"!==v.params.controlBy||(e=(b.maxTranslate()-b.minTranslate())/(v.maxTranslate()-v.minTranslate()),f=(a-v.minTranslate())*e+b.minTranslate()),v.params.controlInverse&&(f=b.maxTranslate()-f),b.updateProgress(f),b.setWrapperTranslate(f,!1,v),b.updateActiveIndex()}var e,f,g=v.params.control;if(v.isArray(g))for(var h=0;h<g.length;h++)g[h]!==b&&g[h]instanceof c&&d(g[h]);else g instanceof c&&b!==g&&d(g)},setTransition:function(a,b){function d(b){b.setWrapperTransition(a,v),0!==a&&(b.onTransitionStart(),b.wrapper.transitionEnd(function(){f&&(b.params.loop&&"slide"===v.params.controlBy&&b.fixLoop(),b.onTransitionEnd())}))}var e,f=v.params.control;if(v.isArray(f))for(e=0;e<f.length;e++)f[e]!==b&&f[e]instanceof c&&d(f[e]);else f instanceof c&&b!==f&&d(f)}},v.hashnav={onHashCange:function(a,b){var c=document.location.hash.replace("#",""),d=v.slides.eq(v.activeIndex).attr("data-hash");c!==d&&v.slideTo(v.wrapper.children("."+v.params.slideClass+'[data-hash="'+c+'"]').index())},attachEvents:function(a){var c=a?"off":"on";b(window)[c]("hashchange",v.hashnav.onHashCange)},setHash:function(){if(v.hashnav.initialized&&v.params.hashnav)if(v.params.replaceState&&window.history&&window.history.replaceState)window.history.replaceState(null,null,"#"+v.slides.eq(v.activeIndex).attr("data-hash")||"");else{var a=v.slides.eq(v.activeIndex),b=a.attr("data-hash")||a.attr("data-history");document.location.hash=b||""}},init:function(){if(v.params.hashnav&&!v.params.history){v.hashnav.initialized=!0;var a=document.location.hash.replace("#","");if(a)for(var b=0,c=0,d=v.slides.length;d>c;c++){var e=v.slides.eq(c),f=e.attr("data-hash")||e.attr("data-history");if(f===a&&!e.hasClass(v.params.slideDuplicateClass)){var g=e.index();v.slideTo(g,b,v.params.runCallbacksOnInit,!0)}}v.params.hashnavWatchState&&v.hashnav.attachEvents()}},destroy:function(){v.params.hashnavWatchState&&v.hashnav.attachEvents(!0)}},v.history={init:function(){if(v.params.history){if(!window.history||!window.history.pushState)return v.params.history=!1,void(v.params.hashnav=!0);v.history.initialized=!0,this.paths=this.getPathValues(),(this.paths.key||this.paths.value)&&(this.scrollToSlide(0,this.paths.value,v.params.runCallbacksOnInit),v.params.replaceState||window.addEventListener("popstate",this.setHistoryPopState))}},setHistoryPopState:function(){v.history.paths=v.history.getPathValues(),v.history.scrollToSlide(v.params.speed,v.history.paths.value,!1)},getPathValues:function(){var a=window.location.pathname.slice(1).split("/"),b=a.length,c=a[b-2],d=a[b-1];return{key:c,value:d}},setHistory:function(a,b){if(v.history.initialized&&v.params.history){var c=v.slides.eq(b),d=this.slugify(c.attr("data-history"));window.location.pathname.includes(a)||(d=a+"/"+d),v.params.replaceState?window.history.replaceState(null,null,d):window.history.pushState(null,null,d)}},slugify:function(a){return a.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(a,b,c){if(b)for(var d=0,e=v.slides.length;e>d;d++){var f=v.slides.eq(d),g=this.slugify(f.attr("data-history"));if(g===b&&!f.hasClass(v.params.slideDuplicateClass)){var h=f.index();v.slideTo(h,a,c)}}else v.slideTo(0,a,c)}},v.disableKeyboardControl=function(){v.params.keyboardControl=!1,b(document).off("keydown",i)},v.enableKeyboardControl=function(){v.params.keyboardControl=!0,b(document).on("keydown",i)},v.mousewheel={event:!1,lastScrollTime:(new window.Date).getTime()},v.params.mousewheelControl&&(v.mousewheel.event=navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":j()?"wheel":"mousewheel"),v.disableMousewheelControl=function(){if(!v.mousewheel.event)return!1;var a=v.container;return"container"!==v.params.mousewheelEventsTarged&&(a=b(v.params.mousewheelEventsTarged)),a.off(v.mousewheel.event,k),!0},v.enableMousewheelControl=function(){if(!v.mousewheel.event)return!1;var a=v.container;return"container"!==v.params.mousewheelEventsTarged&&(a=b(v.params.mousewheelEventsTarged)),a.on(v.mousewheel.event,k),!0},v.parallax={setTranslate:function(){v.container.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){m(this,v.progress)}),v.slides.each(function(){var a=b(this);a.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var b=Math.min(Math.max(a[0].progress,-1),1);m(this,b)})})},setTransition:function(a){"undefined"==typeof a&&(a=v.params.speed),v.container.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var c=b(this),d=parseInt(c.attr("data-swiper-parallax-duration"),10)||a;0===a&&(d=0),c.transition(d)})}},v.zoom={scale:1,currentScale:1,isScaling:!1,gesture:{slide:void 0,slideWidth:void 0,slideHeight:void 0,image:void 0,imageWrap:void 0,zoomMax:v.params.zoomMax},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0},getDistanceBetweenTouches:function(a){if(a.targetTouches.length<2)return 1;var b=a.targetTouches[0].pageX,c=a.targetTouches[0].pageY,d=a.targetTouches[1].pageX,e=a.targetTouches[1].pageY,f=Math.sqrt(Math.pow(d-b,2)+Math.pow(e-c,2));return f},onGestureStart:function(a){var c=v.zoom;if(!v.support.gestures){if("touchstart"!==a.type||"touchstart"===a.type&&a.targetTouches.length<2)return;c.gesture.scaleStart=c.getDistanceBetweenTouches(a)}return c.gesture.slide&&c.gesture.slide.length||(c.gesture.slide=b(this),0===c.gesture.slide.length&&(c.gesture.slide=v.slides.eq(v.activeIndex)),c.gesture.image=c.gesture.slide.find("img, svg, canvas"),c.gesture.imageWrap=c.gesture.image.parent("."+v.params.zoomContainerClass),c.gesture.zoomMax=c.gesture.imageWrap.attr("data-swiper-zoom")||v.params.zoomMax,0!==c.gesture.imageWrap.length)?(c.gesture.image.transition(0),void(c.isScaling=!0)):void(c.gesture.image=void 0)},onGestureChange:function(a){var b=v.zoom;if(!v.support.gestures){if("touchmove"!==a.type||"touchmove"===a.type&&a.targetTouches.length<2)return;b.gesture.scaleMove=b.getDistanceBetweenTouches(a)}b.gesture.image&&0!==b.gesture.image.length&&(v.support.gestures?b.scale=a.scale*b.currentScale:b.scale=b.gesture.scaleMove/b.gesture.scaleStart*b.currentScale,b.scale>b.gesture.zoomMax&&(b.scale=b.gesture.zoomMax-1+Math.pow(b.scale-b.gesture.zoomMax+1,.5)),b.scale<v.params.zoomMin&&(b.scale=v.params.zoomMin+1-Math.pow(v.params.zoomMin-b.scale+1,.5)),b.gesture.image.transform("translate3d(0,0,0) scale("+b.scale+")"))},onGestureEnd:function(a){var b=v.zoom;!v.support.gestures&&("touchend"!==a.type||"touchend"===a.type&&a.changedTouches.length<2)||b.gesture.image&&0!==b.gesture.image.length&&(b.scale=Math.max(Math.min(b.scale,b.gesture.zoomMax),v.params.zoomMin),b.gesture.image.transition(v.params.speed).transform("translate3d(0,0,0) scale("+b.scale+")"),b.currentScale=b.scale,b.isScaling=!1,1===b.scale&&(b.gesture.slide=void 0))},onTouchStart:function(a,b){var c=a.zoom;c.gesture.image&&0!==c.gesture.image.length&&(c.image.isTouched||("android"===a.device.os&&b.preventDefault(),c.image.isTouched=!0,c.image.touchesStart.x="touchstart"===b.type?b.targetTouches[0].pageX:b.pageX,c.image.touchesStart.y="touchstart"===b.type?b.targetTouches[0].pageY:b.pageY))},onTouchMove:function(a){var b=v.zoom;if(b.gesture.image&&0!==b.gesture.image.length&&(v.allowClick=!1,b.image.isTouched&&b.gesture.slide)){b.image.isMoved||(b.image.width=b.gesture.image[0].offsetWidth,b.image.height=b.gesture.image[0].offsetHeight,b.image.startX=v.getTranslate(b.gesture.imageWrap[0],"x")||0,b.image.startY=v.getTranslate(b.gesture.imageWrap[0],"y")||0,b.gesture.slideWidth=b.gesture.slide[0].offsetWidth,b.gesture.slideHeight=b.gesture.slide[0].offsetHeight,b.gesture.imageWrap.transition(0),v.rtl&&(b.image.startX=-b.image.startX),v.rtl&&(b.image.startY=-b.image.startY));var c=b.image.width*b.scale,d=b.image.height*b.scale;if(!(c<b.gesture.slideWidth&&d<b.gesture.slideHeight)){if(b.image.minX=Math.min(b.gesture.slideWidth/2-c/2,0),b.image.maxX=-b.image.minX,b.image.minY=Math.min(b.gesture.slideHeight/2-d/2,0),b.image.maxY=-b.image.minY,b.image.touchesCurrent.x="touchmove"===a.type?a.targetTouches[0].pageX:a.pageX,b.image.touchesCurrent.y="touchmove"===a.type?a.targetTouches[0].pageY:a.pageY,!b.image.isMoved&&!b.isScaling){if(v.isHorizontal()&&Math.floor(b.image.minX)===Math.floor(b.image.startX)&&b.image.touchesCurrent.x<b.image.touchesStart.x||Math.floor(b.image.maxX)===Math.floor(b.image.startX)&&b.image.touchesCurrent.x>b.image.touchesStart.x)return void(b.image.isTouched=!1);if(!v.isHorizontal()&&Math.floor(b.image.minY)===Math.floor(b.image.startY)&&b.image.touchesCurrent.y<b.image.touchesStart.y||Math.floor(b.image.maxY)===Math.floor(b.image.startY)&&b.image.touchesCurrent.y>b.image.touchesStart.y)return void(b.image.isTouched=!1)}a.preventDefault(),a.stopPropagation(),b.image.isMoved=!0,b.image.currentX=b.image.touchesCurrent.x-b.image.touchesStart.x+b.image.startX,b.image.currentY=b.image.touchesCurrent.y-b.image.touchesStart.y+b.image.startY,b.image.currentX<b.image.minX&&(b.image.currentX=b.image.minX+1-Math.pow(b.image.minX-b.image.currentX+1,.8)),b.image.currentX>b.image.maxX&&(b.image.currentX=b.image.maxX-1+Math.pow(b.image.currentX-b.image.maxX+1,.8)),b.image.currentY<b.image.minY&&(b.image.currentY=b.image.minY+1-Math.pow(b.image.minY-b.image.currentY+1,.8)),b.image.currentY>b.image.maxY&&(b.image.currentY=b.image.maxY-1+Math.pow(b.image.currentY-b.image.maxY+1,.8)),b.velocity.prevPositionX||(b.velocity.prevPositionX=b.image.touchesCurrent.x),b.velocity.prevPositionY||(b.velocity.prevPositionY=b.image.touchesCurrent.y),b.velocity.prevTime||(b.velocity.prevTime=Date.now()),b.velocity.x=(b.image.touchesCurrent.x-b.velocity.prevPositionX)/(Date.now()-b.velocity.prevTime)/2,b.velocity.y=(b.image.touchesCurrent.y-b.velocity.prevPositionY)/(Date.now()-b.velocity.prevTime)/2,Math.abs(b.image.touchesCurrent.x-b.velocity.prevPositionX)<2&&(b.velocity.x=0),Math.abs(b.image.touchesCurrent.y-b.velocity.prevPositionY)<2&&(b.velocity.y=0),b.velocity.prevPositionX=b.image.touchesCurrent.x,b.velocity.prevPositionY=b.image.touchesCurrent.y,b.velocity.prevTime=Date.now(),b.gesture.imageWrap.transform("translate3d("+b.image.currentX+"px, "+b.image.currentY+"px,0)")}}},onTouchEnd:function(a,b){var c=a.zoom;if(c.gesture.image&&0!==c.gesture.image.length){if(!c.image.isTouched||!c.image.isMoved)return c.image.isTouched=!1,void(c.image.isMoved=!1);c.image.isTouched=!1,c.image.isMoved=!1;var d=300,e=300,f=c.velocity.x*d,g=c.image.currentX+f,h=c.velocity.y*e,i=c.image.currentY+h;0!==c.velocity.x&&(d=Math.abs((g-c.image.currentX)/c.velocity.x)),0!==c.velocity.y&&(e=Math.abs((i-c.image.currentY)/c.velocity.y));var j=Math.max(d,e);c.image.currentX=g,c.image.currentY=i;var k=c.image.width*c.scale,l=c.image.height*c.scale;c.image.minX=Math.min(c.gesture.slideWidth/2-k/2,0),c.image.maxX=-c.image.minX,c.image.minY=Math.min(c.gesture.slideHeight/2-l/2,0),c.image.maxY=-c.image.minY,c.image.currentX=Math.max(Math.min(c.image.currentX,c.image.maxX),c.image.minX),c.image.currentY=Math.max(Math.min(c.image.currentY,c.image.maxY),c.image.minY),c.gesture.imageWrap.transition(j).transform("translate3d("+c.image.currentX+"px, "+c.image.currentY+"px,0)")}},onTransitionEnd:function(a){
var b=a.zoom;b.gesture.slide&&a.previousIndex!==a.activeIndex&&(b.gesture.image.transform("translate3d(0,0,0) scale(1)"),b.gesture.imageWrap.transform("translate3d(0,0,0)"),b.gesture.slide=b.gesture.image=b.gesture.imageWrap=void 0,b.scale=b.currentScale=1)},toggleZoom:function(a,c){var d=a.zoom;if(d.gesture.slide||(d.gesture.slide=a.clickedSlide?b(a.clickedSlide):a.slides.eq(a.activeIndex),d.gesture.image=d.gesture.slide.find("img, svg, canvas"),d.gesture.imageWrap=d.gesture.image.parent("."+a.params.zoomContainerClass)),d.gesture.image&&0!==d.gesture.image.length){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;"undefined"==typeof d.image.touchesStart.x&&c?(e="touchend"===c.type?c.changedTouches[0].pageX:c.pageX,f="touchend"===c.type?c.changedTouches[0].pageY:c.pageY):(e=d.image.touchesStart.x,f=d.image.touchesStart.y),d.scale&&1!==d.scale?(d.scale=d.currentScale=1,d.gesture.imageWrap.transition(300).transform("translate3d(0,0,0)"),d.gesture.image.transition(300).transform("translate3d(0,0,0) scale(1)"),d.gesture.slide=void 0):(d.scale=d.currentScale=d.gesture.imageWrap.attr("data-swiper-zoom")||a.params.zoomMax,c?(u=d.gesture.slide[0].offsetWidth,v=d.gesture.slide[0].offsetHeight,g=d.gesture.slide.offset().left,h=d.gesture.slide.offset().top,i=g+u/2-e,j=h+v/2-f,m=d.gesture.image[0].offsetWidth,n=d.gesture.image[0].offsetHeight,o=m*d.scale,p=n*d.scale,q=Math.min(u/2-o/2,0),r=Math.min(v/2-p/2,0),s=-q,t=-r,k=i*d.scale,l=j*d.scale,q>k&&(k=q),k>s&&(k=s),r>l&&(l=r),l>t&&(l=t)):(k=0,l=0),d.gesture.imageWrap.transition(300).transform("translate3d("+k+"px, "+l+"px,0)"),d.gesture.image.transition(300).transform("translate3d(0,0,0) scale("+d.scale+")"))}},attachEvents:function(a){var c=a?"off":"on";if(v.params.zoom){var d=(v.slides,!("touchstart"!==v.touchEvents.start||!v.support.passiveListener||!v.params.passiveListeners)&&{passive:!0,capture:!1});v.support.gestures?(v.slides[c]("gesturestart",v.zoom.onGestureStart,d),v.slides[c]("gesturechange",v.zoom.onGestureChange,d),v.slides[c]("gestureend",v.zoom.onGestureEnd,d)):"touchstart"===v.touchEvents.start&&(v.slides[c](v.touchEvents.start,v.zoom.onGestureStart,d),v.slides[c](v.touchEvents.move,v.zoom.onGestureChange,d),v.slides[c](v.touchEvents.end,v.zoom.onGestureEnd,d)),v[c]("touchStart",v.zoom.onTouchStart),v.slides.each(function(a,d){b(d).find("."+v.params.zoomContainerClass).length>0&&b(d)[c](v.touchEvents.move,v.zoom.onTouchMove)}),v[c]("touchEnd",v.zoom.onTouchEnd),v[c]("transitionEnd",v.zoom.onTransitionEnd),v.params.zoomToggle&&v.on("doubleTap",v.zoom.toggleZoom)}},init:function(){v.zoom.attachEvents()},destroy:function(){v.zoom.attachEvents(!0)}},v._plugins=[];for(var M in v.plugins){var N=v.plugins[M](v,v.params[M]);N&&v._plugins.push(N)}return v.callPlugins=function(a){for(var b=0;b<v._plugins.length;b++)a in v._plugins[b]&&v._plugins[b][a](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},v.emitterEventListeners={},v.emit=function(a){v.params[a]&&v.params[a](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);var b;if(v.emitterEventListeners[a])for(b=0;b<v.emitterEventListeners[a].length;b++)v.emitterEventListeners[a][b](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);v.callPlugins&&v.callPlugins(a,arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},v.on=function(a,b){return a=n(a),v.emitterEventListeners[a]||(v.emitterEventListeners[a]=[]),v.emitterEventListeners[a].push(b),v},v.off=function(a,b){var c;if(a=n(a),"undefined"==typeof b)return v.emitterEventListeners[a]=[],v;if(v.emitterEventListeners[a]&&0!==v.emitterEventListeners[a].length){for(c=0;c<v.emitterEventListeners[a].length;c++)v.emitterEventListeners[a][c]===b&&v.emitterEventListeners[a].splice(c,1);return v}},v.once=function(a,b){a=n(a);var c=function(){b(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),v.off(a,c)};return v.on(a,c),v},v.a11y={makeFocusable:function(a){return a.attr("tabIndex","0"),a},addRole:function(a,b){return a.attr("role",b),a},addLabel:function(a,b){return a.attr("aria-label",b),a},disable:function(a){return a.attr("aria-disabled",!0),a},enable:function(a){return a.attr("aria-disabled",!1),a},onEnterKey:function(a){13===a.keyCode&&(b(a.target).is(v.params.nextButton)?(v.onClickNext(a),v.isEnd?v.a11y.notify(v.params.lastSlideMessage):v.a11y.notify(v.params.nextSlideMessage)):b(a.target).is(v.params.prevButton)&&(v.onClickPrev(a),v.isBeginning?v.a11y.notify(v.params.firstSlideMessage):v.a11y.notify(v.params.prevSlideMessage)),b(a.target).is("."+v.params.bulletClass)&&b(a.target)[0].click())},liveRegion:b('<span class="'+v.params.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>'),notify:function(a){var b=v.a11y.liveRegion;0!==b.length&&(b.html(""),b.html(a))},init:function(){v.params.nextButton&&v.nextButton&&v.nextButton.length>0&&(v.a11y.makeFocusable(v.nextButton),v.a11y.addRole(v.nextButton,"button"),v.a11y.addLabel(v.nextButton,v.params.nextSlideMessage)),v.params.prevButton&&v.prevButton&&v.prevButton.length>0&&(v.a11y.makeFocusable(v.prevButton),v.a11y.addRole(v.prevButton,"button"),v.a11y.addLabel(v.prevButton,v.params.prevSlideMessage)),b(v.container).append(v.a11y.liveRegion)},initPagination:function(){v.params.pagination&&v.params.paginationClickable&&v.bullets&&v.bullets.length&&v.bullets.each(function(){var a=b(this);v.a11y.makeFocusable(a),v.a11y.addRole(a,"button"),v.a11y.addLabel(a,v.params.paginationBulletMessage.replace(/{{index}}/,a.index()+1))})},destroy:function(){v.a11y.liveRegion&&v.a11y.liveRegion.length>0&&v.a11y.liveRegion.remove()}},v.init=function(){v.params.loop&&v.createLoop(),v.updateContainerSize(),v.updateSlidesSize(),v.updatePagination(),v.params.scrollbar&&v.scrollbar&&(v.scrollbar.set(),v.params.scrollbarDraggable&&v.scrollbar.enableDraggable()),"slide"!==v.params.effect&&v.effects[v.params.effect]&&(v.params.loop||v.updateProgress(),v.effects[v.params.effect].setTranslate()),v.params.loop?v.slideTo(v.params.initialSlide+v.loopedSlides,0,v.params.runCallbacksOnInit):(v.slideTo(v.params.initialSlide,0,v.params.runCallbacksOnInit),0===v.params.initialSlide&&(v.parallax&&v.params.parallax&&v.parallax.setTranslate(),v.lazy&&v.params.lazyLoading&&(v.lazy.load(),v.lazy.initialImageLoaded=!0))),v.attachEvents(),v.params.observer&&v.support.observer&&v.initObservers(),v.params.preloadImages&&!v.params.lazyLoading&&v.preloadImages(),v.params.zoom&&v.zoom&&v.zoom.init(),v.params.autoplay&&v.startAutoplay(),v.params.keyboardControl&&v.enableKeyboardControl&&v.enableKeyboardControl(),v.params.mousewheelControl&&v.enableMousewheelControl&&v.enableMousewheelControl(),v.params.hashnavReplaceState&&(v.params.replaceState=v.params.hashnavReplaceState),v.params.history&&v.history&&v.history.init(),v.params.hashnav&&v.hashnav&&v.hashnav.init(),v.params.a11y&&v.a11y&&v.a11y.init(),v.emit("onInit",v)},v.cleanupStyles=function(){v.container.removeClass(v.classNames.join(" ")).removeAttr("style"),v.wrapper.removeAttr("style"),v.slides&&v.slides.length&&v.slides.removeClass([v.params.slideVisibleClass,v.params.slideActiveClass,v.params.slideNextClass,v.params.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-column").removeAttr("data-swiper-row"),v.paginationContainer&&v.paginationContainer.length&&v.paginationContainer.removeClass(v.params.paginationHiddenClass),v.bullets&&v.bullets.length&&v.bullets.removeClass(v.params.bulletActiveClass),v.params.prevButton&&b(v.params.prevButton).removeClass(v.params.buttonDisabledClass),v.params.nextButton&&b(v.params.nextButton).removeClass(v.params.buttonDisabledClass),v.params.scrollbar&&v.scrollbar&&(v.scrollbar.track&&v.scrollbar.track.length&&v.scrollbar.track.removeAttr("style"),v.scrollbar.drag&&v.scrollbar.drag.length&&v.scrollbar.drag.removeAttr("style"))},v.destroy=function(a,b){v.detachEvents(),v.stopAutoplay(),v.params.scrollbar&&v.scrollbar&&v.params.scrollbarDraggable&&v.scrollbar.disableDraggable(),v.params.loop&&v.destroyLoop(),b&&v.cleanupStyles(),v.disconnectObservers(),v.params.zoom&&v.zoom&&v.zoom.destroy(),v.params.keyboardControl&&v.disableKeyboardControl&&v.disableKeyboardControl(),v.params.mousewheelControl&&v.disableMousewheelControl&&v.disableMousewheelControl(),v.params.a11y&&v.a11y&&v.a11y.destroy(),v.params.history&&!v.params.replaceState&&window.removeEventListener("popstate",v.history.setHistoryPopState),v.params.hashnav&&v.hashnav&&v.hashnav.destroy(),v.emit("onDestroy"),a!==!1&&(v=null)},v.init(),v}};c.prototype={isSafari:function(){var a=window.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(window.navigator.userAgent),isArray:function(a){return"[object Array]"===Object.prototype.toString.apply(a)},browser:{ie:window.navigator.pointerEnabled||window.navigator.msPointerEnabled,ieTouch:window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>1||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>1,lteIE9:function(){var a=document.createElement("div");return a.innerHTML="<!--[if lte IE 9]><i></i><![endif]-->",1===a.getElementsByTagName("i").length}()},device:function(){var a=window.navigator.userAgent,b=a.match(/(Android);?[\s\/]+([\d.]+)?/),c=a.match(/(iPad).*OS\s([\d_]+)/),d=a.match(/(iPod)(.*OS\s([\d_]+))?/),e=!c&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/);return{ios:c||e||d,android:b}}(),support:{touch:window.Modernizr&&Modernizr.touch===!0||function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}(),transforms3d:window.Modernizr&&Modernizr.csstransforms3d===!0||function(){var a=document.createElement("div").style;return"webkitPerspective"in a||"MozPerspective"in a||"OPerspective"in a||"MsPerspective"in a||"perspective"in a}(),flexbox:function(){for(var a=document.createElement("div").style,b="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "),c=0;c<b.length;c++)if(b[c]in a)return!0}(),observer:function(){return"MutationObserver"in window||"WebkitMutationObserver"in window}(),passiveListener:function(){var a=!1;try{var b=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveListener",null,b)}catch(a){}return a}(),gestures:function(){return"ongesturestart"in window}()},plugins:{}};for(var d=["jQuery","Zepto","Dom7"],e=0;e<d.length;e++)window[d[e]]&&a(window[d[e]]);var f;f="undefined"==typeof Dom7?window.Dom7||window.Zepto||window.jQuery:Dom7,f&&("transitionEnd"in f.fn||(f.fn.transitionEnd=function(a){function b(f){if(f.target===this)for(a.call(this,f),c=0;c<d.length;c++)e.off(d[c],b)}var c,d=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],e=this;if(a)for(c=0;c<d.length;c++)e.on(d[c],b);return this}),"transform"in f.fn||(f.fn.transform=function(a){for(var b=0;b<this.length;b++){var c=this[b].style;c.webkitTransform=c.MsTransform=c.msTransform=c.MozTransform=c.OTransform=c.transform=a}return this}),"transition"in f.fn||(f.fn.transition=function(a){"string"!=typeof a&&(a+="ms");for(var b=0;b<this.length;b++){var c=this[b].style;c.webkitTransitionDuration=c.MsTransitionDuration=c.msTransitionDuration=c.MozTransitionDuration=c.OTransitionDuration=c.transitionDuration=a}return this}),"outerWidth"in f.fn||(f.fn.outerWidth=function(a){return this.length>0?a?this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left")):this[0].offsetWidth:null})),window.Swiper=c}(),"undefined"!=typeof module?module.exports=window.Swiper:"function"==typeof define&&define.amd&&define("swiper",[],function(){"use strict";return window.Swiper}),define("views/swiper",["backbone","swiper"],function(a){return a.View.extend({initialize:function(){var a=this.$el,b=a.find(".swiper-pagination"),c=(a.find(".swiper-button-next"),a.find(".swiper-button-prev"),a.closest("#banner")[0]?!0:!1),d=(a.closest("#tab1")[0]?!0:!1,a.closest("#tab2")[0]?!0:!1,a.closest("#tab3")[0]?!0:!1),e=a.closest("#case-share")[0]?!0:!1,f=a.closest("#exSquare")[0]?!0:!1,g=a.closest("#exStation")[0]?!0:!1,h=a.closest(".relatedVideo")[0]?!0:!1;if(f){var i=new Swiper(a[0],{nextButton:a.closest("#exSquare").find(".swiper-button-next")[0],prevButton:a.closest("#exSquare").find(".swiper-button-prev")[0],slidesPerView:3,spaceBetween:80,watchSlidesProgress:!0,watchSlidesVisibility:!0,lazyLoading:!0});3==i.slides.length&&(a.closest("#exSquare").find(".swiper-button-next").css("display","none"),a.closest("#exSquare").find(".swiper-button-prev").css("display","none"))}else if(g)var i=new Swiper(a[0],{loop:!0,autoplay:3e3,speed:1e3,slidesPerView:4,spaceBetween:15,pagination:b[0],paginationClickable:!0,autoplayDisableOnInteraction:!1,watchSlidesProgress:!0,watchSlidesVisibility:!0,lazyLoading:!0});else if(h){var i=new Swiper(a[0],{nextButton:a.closest(".relatedVideo").find(".swiper-button-next")[0],prevButton:a.closest(".relatedVideo").find(".swiper-button-prev")[0],slidesPerView:3,spaceBetween:80,watchSlidesProgress:!0,watchSlidesVisibility:!0,lazyLoading:!0});3==i.slides.length&&(a.closest(".relatedVideo").find(".swiper-button-next").css("display","none"),a.closest(".relatedVideo").find(".swiper-button-prev").css("display","none"))}else var i=new Swiper(a[0],{loop:d?!1:e?!1:!0,autoplay:c?3e3:2e3,speed:2e3,pagination:d?null:e?null:b[0],paginationClickable:!0,slidesPerView:e?4:1,noSwiping:!0,autoplayDisableOnInteraction:!1})}})}),define("views/mailServiceNav",["backbone"],function(a){return a.View.extend({initialize:function(){var a=this.$el,b=a.find("#header"),c=a.find(".t_banner"),d=a.find(".tabs_nav_fa"),e=a.find(".tab_container");$(window).scroll(function(){var a=$(window).scrollTop(),f=b.height(),g=c.height(),h=f+g;a>=h?(d.addClass("fixed"),e.css("margin-top","150px")):(d.removeClass("fixed"),e.css("margin-top","60px"))})}})}),define("views/moveContent",["backbone"],function(a){return a.View.extend({events:{"click .nav li a":"tabSwitch"},tabSwitch:function(a){var b=this.$el,c=b.find("ul.nav li"),d=b.find(".nav-content");c.removeClass("active"),$(a.target).parent().addClass("active"),d.removeClass("tab-open");var e=$(a.target).attr("href"),f=b.find(e);return f.addClass("tab-open"),!1}})}),define("views/arrowswitch",["backbone"],function(a){return a.View.extend({events:{"click .sub":"switchArrow"},switchArrow:function(a){$(a.target).parent().hasClass("arrowup")?($(a.target).parent().removeClass("arrowup").addClass("arrowdown"),$(a.target).parent().parent().next().slideUp(500)):($(a.target).parent().removeClass("arrowdown").addClass("arrowup"),$(a.target).parent().parent().next().slideDown(500))}})}),define("views/cooperativeAdvisory/coomperativeAdvisoryForKR",["backbone","templates","jquery","helper"],function(a,b,c,d){return a.View.extend({events:{"click .select p":"openContactTitleType","click .select a":"chooseContactTitleType","click #validation-image":"refreshValidationCode","blur .contact-name input.text":"inputChangedByContactName","blur .require-company input.text":"inputChangedByCompanyName","blur .mobile input.text":"inputChangedByMobile","blur .require-mail input.text":"inputChangedByMail","blur .require-enquiry textarea.enquiry":"inputChangedByEnquiry","click .r-btn-a":"sumitApplication","click .require-policy input.policy":"agreePrivacy","focus .contact-name input.text, .mobile input.text, .require-mail input.text, .require-company input.text, .require-enquiry textarea.enquiry ":"hideErrorPrompt","focus #code":"hideValidcodeErrorPrompt"},initialize:function(){this.errorCode=[],this.defaultTitleType(),this.refreshValidationCode()},defaultTitleType:function(){c(".subclass .input").removeClass("s-prompt"),c(".validation-code").siblings(".input").find(".error-prompt").hide(),c("form")[0].reset(),this.showSubmitBtn(),this.setDefaultTitleType()},showSubmitBtn:function(){c(".r-btn-b").hide(),c(".submit-bottom .r-prompt").hide(),c(".r-btn-a").show()},setDefaultTitleType:function(){var a=c("ul.type-down").children().first().find("a").data("title-type"),b=c("ul.type-down").children().first().find("a").text();c("#title-type").data("title-type",a),c("#title-type").val(b)},openContactTitleType:function(a){c(a.currentTarget).parent().toggleClass("active"),c(a.currentTarget).parent().siblings().removeClass("active")},chooseContactTitleType:function(a){var b=c(a.currentTarget),d=b.html(),e=b.data("title-type");b.parent().parent().parent().removeClass("active"),b.parent().parent().siblings("p").html("").append(d),c("#title-type").data("titleType",e),c("#title-type").val(d),c(".r-btn-a").show(),c(".submit-bottom .r-prompt").hide(),c(".input").find("input").val(""),c(".textarea").find("textarea").val(""),this.refreshValidationCode()},hideErrorPrompt:function(a){var b=c(a.currentTarget);b.parent().removeClass("s-prompt"),b.parent().children(".error-prompt").hide()},hideValidcodeErrorPrompt:function(){c(".validation-code-prompt").hide()},agreePrivacy:function(a){var b=c(a.currentTarget);b.attr("checked")?c(".require-policy .error-prompt").hide():c(".require-policy .error-prompt").show()},refreshValidationCode:function(){var a=this.$("#validation-image"),b=d.getRESTfulDomain("captcha/pms?force=true&time="+(new Date).getTime());a&&a.attr("src",b)},inputChangedByContactName:function(a){var b=c.trim(c(a.currentTarget).val());""==b||null==b?(c(".contact-name .error-prompt").prop("lastChild").nodeValue=_l("您的姓名不可为空"),c(".contact-name .error-prompt").show(),c(".contact-name .input").addClass("s-prompt")):c(".contact-name .input").removeClass("s-prompt")},inputChangedByCompanyName:function(a){var b=c.trim(c(a.currentTarget).val());""==b||null==b?(c(".require-company .error-prompt").prop("lastChild").nodeValue=_l("公司名称不可为空"),c(".require-company .error-prompt").show(),c(".require-company .input").addClass("s-prompt")):c(".require-company .input").removeClass("s-prompt")},inputChangedByMobile:function(a){var b=c.trim(c(a.currentTarget).val()),e=d.isValidPhoneNumber(b);""==b||null==b?(c(".mobile .error-prompt").prop("lastChild").nodeValue=_l("您的联系电话不可为空"),c(".mobile .error-prompt").show(),c(".mobile .input").addClass("s-prompt")):e?c(".mobile .input").removeClass("s-prompt"):(c(".mobile .error-prompt").prop("lastChild").nodeValue=_l("您输入联系电话有误，请重新输入"),c(".mobile .error-prompt").show(),c(".mobile .input").addClass("s-prompt"))},inputChangedByMail:function(a){var b=c.trim(c(a.currentTarget).val()),e=d.isValidMailAddr(b);""==b||null==b?(c(".require-mail .error-prompt").prop("lastChild").nodeValue=_l("邮箱地址不可为空"),c(".require-mail .error-prompt").show(),c(".require-mail .input").addClass("s-prompt")):e?c(".require-mail .input").removeClass("s-prompt"):(c(".require-mail .error-prompt").prop("lastChild").nodeValue=_l("邮箱地址格式有误"),c(".require-mail .error-prompt").show(),c(".require-mail .input").addClass("s-prompt"))},inputChangedByEnquiry:function(a){var b=c.trim(c(a.currentTarget).val());""==b||null==b?(c(".require-enquiry .error-prompt").prop("lastChild").nodeValue=_l("咨询内容不可为空"),c(".require-enquiry .error-prompt").addClass("textArea"),c(".require-enquiry .error-prompt").show(),c(".require-enquiry .textarea").addClass("s-prompt")):(c(".require-enquiry .error-prompt").removeClass("textArea"),c(".require-enquiry .textarea").removeClass("s-prompt"))},sumitApplication:function(){var a=c("#code").val(),b=null;this.checkContactName()&&this.checkCompanyName()&&this.checkMobile()&&this.checkMobileReg()&&this.checkMail()&&this.checkMailReg()&&this.checkEnquiry()&&this.checkValidCode()&&this.checkPrivacyPolicy()&&(b={customerName:c("input[name='user']").val(),companyName:c("input[name='companyName']").val(),industry:c("input[name='industry']").val(),tel:c("input[name='mobile']").val(),email:c("input[name='mail']").val(),city:c("input[name='city']").val(),countryCode:d.getSiteLocation(),lang:d.getSiteLanguage(),message:c("textarea[name='enquiry']").val(),countryInput:c("input[name='country']").val(),source:"CE"},this.saveCooperativeAjax(b,a))},saveCooperativeAjax:function(b,e){var f=this;a.ajax({type:"POST",contentType:"application/json",url:d.getRESTfulDomain("pms/collectedInformation?app=pms&answer="+e),data:JSON.stringify(b),success:function(a){if("WS_PC_01"===a.resultStr&&(c(".r-btn-a").hide(),c(".submit-bottom .r-prompt").show()),"WS_PC_02"===a.resultStr||"WS_PC_03"===a.resultStr||"WS_PC_04"===a.resultStr){c(".r-btn-b").show(),c(".validation-code-prompt").hide(),f.refreshValidationCode();setTimeout("$('.r-btn-b').hide()",3e3)}},error:function(a){403===a.status?(c(".validation-code-prompt").prop("lastChild").nodeValue=_l("您输入的验证码有误，请重新输入"),c(".validation-code-prompt").show()):(c(".r-btn-b").text(_l("网络异常，请稍后再试！")),c(".r-btn-b").css("width","220px"),c(".r-btn-b").show(),setTimeout("$('.r-btn-b').hide()",3e3),f.refreshValidationCode())}})},checkValidCode:function(){var a=c("#code").val();return""==a||null==a?(c(".validation-code-prompt").prop("lastChild").nodeValue=_l("您输入的验证码不能为空"),c(".validation-code-prompt").show(),!1):!0},checkContactName:function(){var a=c.trim(c(".contact-name input").val());return""==a||null==a?(c(".contact-name .error-prompt").prop("lastChild").nodeValue=_l("您的姓名不可为空"),c(".contact-name .input").addClass("s-prompt"),!1):!0},checkCompanyName:function(){var a=c.trim(c(".require-company input").val());return""==a||null==a?(c(".require-company .error-prompt").prop("lastChild").nodeValue=_l("公司名称不可为空"),c(".require-company .input").addClass("s-prompt"),!1):!0},checkMobile:function(){var a=c.trim(c(".mobile input").val());return""==a||null==a?(c(".mobile .error-prompt").prop("lastChild").nodeValue=_l("您的联系电话不可为空"),c(".mobile .input").addClass("s-prompt"),!1):!0},checkMobileReg:function(){var a=c.trim(c(".mobile input").val());return d.isValidPhoneNumber(a)?!0:(c(".mobile .error-prompt").prop("lastChild").nodeValue=_l("您输入联系电话有误，请重新输入"),c(".mobile .input").addClass("s-prompt"),!1)},checkMail:function(){var a=c.trim(c(".require-mail input").val());d.isValidMailAddr(a);return""==a||null==a?(c(".require-mail .error-prompt").prop("lastChild").nodeValue=_l("邮箱地址不可为空"),c(".require-mail .input").addClass("s-prompt"),!1):(c(".require-mail .input").removeClass("s-prompt"),!0)},checkMailReg:function(){var a=c.trim(c(".require-mail input").val()),b=d.isValidMailAddr(a);return b?(c(".require-mail .input").removeClass("s-prompt"),!0):(c(".require-mail .error-prompt").prop("lastChild").nodeValue=_l("邮箱地址格式有误"),c(".require-mail .input").addClass("s-prompt"),!1)},checkEnquiry:function(){var a=c.trim(c(".require-enquiry textarea").val());return""==a||null==a?(c(".require-enquiry .error-prompt").prop("lastChild").nodeValue=_l("咨询内容不可为空"),c(".require-enquiry .error-prompt").addClass("textArea"),c(".require-enquiry .error-prompt").show(),c(".require-enquiry .textarea").addClass("s-prompt"),!1):(c(".require-enquiry .error-prompt").removeClass("textArea"),c(".require-enquiry .textarea").removeClass("s-prompt"),!0)},checkPrivacyPolicy:function(){return c("#policy").attr("checked")?(c(".require-policy .checkbox").removeClass("s-prompt"),!0):(c(".require-policy .error-prompt").prop("lastChild").nodeValue=_l("必须同意隐私声明"),c(".require-policy .error-prompt").show(),c(".require-policy .checkbox").addClass("s-prompt"),!1)}})}),define("views/feedbackAndSuggestion/feedbackAndSuggestionForKR",["backbone","templates","jquery","helper"],function(a,b,c,d){return a.View.extend({events:{"click .select p":"openContactTitleType","click .select .about a":"chooseSuggestionsAbout","blur .contact-name input.text":"inputChangedByContactName","blur .mobile input.text":"inputChangedByMobile","blur .require-mail input.text":"inputChangedByMail","blur .require-suggestion textarea.suggestion":"inputChangedBySuggestion","click .r-btn-a":"submitForm","click .require-policy input.policy":"agreePrivacy","focus .contact-name input.text, .mobile input.text, .require-mail input.text, .require-suggestion textarea.suggestion ":"hideErrorPrompt","focus #code":"hideValidcodeErrorPrompt"},initialize:function(){this.errorCode=[],this.setDefaultValue()},setDefaultValue:function(){c(".subclass .input").removeClass("s-prompt"),c("form")[0].reset(),this.showSubmitBtn(),this.setDefaultSuggestionAbout()},showSubmitBtn:function(){c(".r-btn-b").hide(),c(".submit-bottom .r-prompt").hide(),c(".r-btn-a").show()},setDefaultSuggestionAbout:function(){var a=c("ul.about").children().first().find("a").data("suggestion-type"),b=c("ul.about").children().first().find("a").text();c("#suggestion-type").data("suggestion-type",a),c("#suggestion-type").val(b)},openContactTitleType:function(a){c(a.currentTarget).parent().toggleClass("active"),c(a.currentTarget).parent().siblings().removeClass("active")},chooseSuggestionsAbout:function(a){var b=c(a.currentTarget),d=b.html(),e=b.data("suggestion-type");b.parent().parent().parent().removeClass("active"),b.parent().parent().siblings("p").html("").append(d),c("#suggestion-type").data("suggestion-type",e),c("#suggestion-type").val(d)},hideErrorPrompt:function(a){var b=c(a.currentTarget);b.parent().removeClass("s-prompt"),b.parent().children(".error-prompt").hide()},hideValidcodeErrorPrompt:function(){c(".validation-code-prompt").hide()},agreePrivacy:function(a){var b=c(a.currentTarget);b.attr("checked")?c(".require-policy .error-prompt").hide():c(".require-policy .error-prompt").show()},refreshValidationCode:function(){var a=this.$("#validation-image"),b=d.getRESTfulDomain("captcha/pms?force=true&time="+(new Date).getTime());a&&a.attr("src",b)},inputChangedByContactName:function(a){var b=c.trim(c(a.currentTarget).val());""==b||null==b?(c(".contact-name .error-prompt").prop("lastChild").nodeValue=_l("您的姓名不可为空"),c(".contact-name .error-prompt").show(),c(".contact-name .input").addClass("s-prompt")):c(".contact-name .input").removeClass("s-prompt")},inputChangedByMobile:function(a){var b=c.trim(c(a.currentTarget).val()),e=d.isValidPhoneNumber(b);""==b||null==b?(c(".mobile .error-prompt").prop("lastChild").nodeValue=_l("您的联系电话不可为空"),c(".mobile .error-prompt").show(),c(".mobile .input").addClass("s-prompt")):e?c(".mobile .input").removeClass("s-prompt"):(c(".mobile .error-prompt").prop("lastChild").nodeValue=_l("您输入联系电话有误，请重新输入"),c(".mobile .error-prompt").show(),c(".mobile .input").addClass("s-prompt"))},inputChangedByMail:function(a){var b=c.trim(c(a.currentTarget).val()),e=d.isValidMailAddr(b);""==b||null==b?(c(".require-mail .error-prompt").prop("lastChild").nodeValue=_l("邮箱地址不可为空"),c(".require-mail .error-prompt").show(),c(".require-mail .input").addClass("s-prompt")):e?c(".require-mail .input").removeClass("s-prompt"):(c(".require-mail .error-prompt").prop("lastChild").nodeValue=_l("邮箱地址格式有误"),c(".require-mail .error-prompt").show(),c(".require-mail .input").addClass("s-prompt"))},inputChangedBySuggestion:function(a){var b=c.trim(c(a.currentTarget).val());""==b||null==b?(c(".require-suggestion .error-prompt").prop("lastChild").nodeValue=_l("意见反馈内容不可为空"),c(".require-suggestion .error-prompt").addClass("textArea"),c(".require-suggestion .error-prompt").show(),c(".require-suggestion .textarea").addClass("s-prompt")):(c(".require-suggestion .error-prompt").removeClass("textArea"),c(".require-suggestion .textarea").removeClass("s-prompt"))},submitForm:function(){var a=null;this.checkParams(),0===this.errorCode.length&&(a={customerName:c("input[name='user']").val(),companyName:c("input[name='companyName']").val(),tel:c("input[name='mobile']").val(),email:c("input[name='mail']").val(),suggestionType:c("input[name='suggestionsAbout']").val(),countryCode:d.getSiteLocation(),lang:d.getSiteLanguage(),message:c("textarea[name='suggestion']").val(),source:"CE"},this.saveSuggestionAjax(a,""))},saveSuggestionAjax:function(b,e){a.ajax({type:"POST",contentType:"application/json",url:d.getRESTfulDomain("pms/suggesion?app=pms"),data:JSON.stringify(b),success:function(a){if("WS_PC_01"===a.resultStr&&(c(".r-btn-a").hide(),c(".submit-bottom .r-prompt").show()),"WS_PC_02"===a.resultStr||"WS_PC_03"===a.resultStr||"WS_PC_04"===a.resultStr){c(".r-btn-b").show();setTimeout("$('.r-btn-b').hide()",3e3)}},error:function(a){c(".r-btn-b").text(_l("网络异常，请稍后再试！")),c(".r-btn-b").css("width","220px"),c(".r-btn-b").show(),setTimeout("$('.r-btn-b').hide()",3e3)}})},serializeObject:function(a){var b={};return c.each(a,function(){void 0!==b[this.name]?(b[this.name].push||(b[this.name]=[b[this.name]]),b[this.name].push(this.value||"")):b[this.name]=this.value||""}),b},checkParams:function(){this.errorCode.splice(0,this.errorCode.length),this.checkContactName(),this.checkMobile(),this.checkMail(),this.checkSuggestion(),this.checkPrivacyPolicy()},checkContactName:function(){var a=c.trim(c(".contact-name input").val());(""==a||null==a)&&(c(".contact-name .error-prompt").prop("lastChild").nodeValue=_l("您的姓名不可为空"),c(".contact-name .input").addClass("s-prompt"),this.errorCode.push("901"))},checkMobile:function(){var a=c.trim(c(".mobile input").val());""==a||null==a?(c(".mobile .error-prompt").prop("lastChild").nodeValue=_l("您的联系电话不可为空"),c(".mobile .input").addClass("s-prompt"),this.errorCode.push("903")):d.isValidPhoneNumber(a)||(c(".mobile .error-prompt").prop("lastChild").nodeValue=_l("您输入联系电话有误，请重新输入"),c(".mobile .input").addClass("s-prompt"),this.errorCode.push("904"))},checkMail:function(){var a=c.trim(c(".require-mail input").val()),b=d.isValidMailAddr(a);""==a||null==a?(c(".require-mail .error-prompt").prop("lastChild").nodeValue=_l("邮箱地址不可为空"),c(".require-mail .input").addClass("s-prompt"),this.errorCode.push("905")):b?c(".require-mail .input").removeClass("s-prompt"):(c(".require-mail .error-prompt").prop("lastChild").nodeValue=_l("邮箱地址格式有误"),c(".require-mail .input").addClass("s-prompt"),this.errorCode.push("906"))},checkSuggestion:function(){var a=c.trim(c(".require-suggestion textarea").val());""==a||null==a?(c(".require-suggestion .error-prompt").prop("lastChild").nodeValue=_l("意见反馈内容不可为空"),c(".require-suggestion .error-prompt").addClass("textArea"),c(".require-suggestion .error-prompt").show(),c(".require-suggestion .textarea").addClass("s-prompt"),this.errorCode.push("907")):(c(".require-suggestion .error-prompt").removeClass("textArea"),c(".require-suggestion .textarea").removeClass("s-prompt"))},checkPrivacyPolicy:function(){c("#policy").attr("checked")?c(".require-policy .checkbox").removeClass("s-prompt"):(c(".require-policy .error-prompt").prop("lastChild").nodeValue=_l("必须同意隐私声明"),c(".require-policy .error-prompt").show(),c(".require-policy .checkbox").addClass("s-prompt"),this.errorCode.push("908"))}})}),define("models/track",["backbone","helper"],function(a,b){return a.Model.extend({},{parse:function(a){return null==a.awbNo&&(a.awbNo="-"),null==a.flightNo&&(a.flightNo="-"),null==a.vrn&&(a.vrn="-"),null==a.scheDate&&(a.scheDate="-"),null==a.port&&(a.port="-"),a}})}),define("collections/track",["backbone","models/track","helper"],function(a,b,c){return a.Collection.extend({model:b,parse:function(a){return a=_.map(a,function(a){return b.parse(a)})},fetchDetails:function(a,b,d,e){this.url=c.getRESTfulDomain("bills/referenceNum?monthlyCardNo="+a+"&code="+b+"&date="+d+"&answer="+e+"&app=track");var f=this;this.fetch({success:function(a,b){return b},timeout:5e3,error:function(a,b){404===b.status?f.trigger("notFound"):403===b.status?f.trigger("validationCodeError"):f.trigger("networkError")}})}})}),define("views/track",["backbone","helper","templates","collections/track","models/track"],function(a,b,c,d,e){return a.View.extend({events:{"click .verification-code .refresh":"refreshValidationCode","click #validation-image":"refreshValidationCode","click .submit-query":"queryDetails"},initialize:function(){window.ParsleyValidator.setLocale(b.getParsleyLanguage()),this.collections=new d,this.listenTo(this.collections,"sync",this.render),this.listenTo(this.collections,"sync",this.resetQueryButton),this.listenTo(this.collections,"notFound",this.showNotFoundError),this.listenTo(this.collections,"networkError",this.showNetworkError),
this.listenTo(this.collections,"validationCodeError",this.showValidationCodeError),this.refreshValidationCode(),this.$(".results").slideUp(),this.$("input").placeholder()},renderResults:function(){var a=this.$(".results"),d=b.getDynamicURLWithContext("/waybill/#search/bill-number/");a.html(c.trackResult({results:this.collections.models,patch:d})),a.slideDown()},render:function(){this.refreshValidationCode(),this.renderResults()},resetQueryButton:function(){this.$(".submit-query").button("reset")},showNotFoundError:function(){this.$(".error[data-error=not-found]").show(),this.resetQueryButton()},showNetworkError:function(){this.$(".error[data-error=network]").show(),this.resetQueryButton()},showValidationCodeError:function(){var a=this.$(".primary-button");a.html(a.data("resetText")),this.$(".error[data-error=validation-code]").show(),this.resetQueryButton()},queryDetails:function(){if(this.isFormsValidated()){var a=this.$("#validation-search-code").val();this.$(".error").hide(),this.$(".submit-query").button("loading"),this.collections.fetchDetails(this.$("#account").val(),this.$("#reference").val(),moment(this.$("#date").data("date")).format("YYYY-MM-DD"),a)}},isFormsValidated:function(){var a=this.$(".sender-form").parsley().validate();return""===this.$("#account").val()?(this.$("#account").focus(),!1):""===this.$("#reference").val()?(this.$("#reference").focus(),!1):a},refreshValidationCode:function(){var a=this.$("#validation-image"),c=$("#validation-image-child"),d=b.getRESTfulDomain("captcha/track?force=true&time="+(new Date).getTime());a&&a.attr("src",d),c&&c.attr("src",d),this.$(".verification-code input").val(""),this.$(".validation-code-error").hide()}})}),define("collections/regulations",["backbone","helper"],function(a,b){return a.Collection.extend({fetchURL:function(a,c){c=c||{},this.url=b.getRESTfulDomain(a),this.reset().fetch(c)},fetchOrigins:function(){this.fetchURL("regulation/origins")},fetchDests:function(a){this.fetchURL(_p("regulation/dests?originCode=%s",encodeURIComponent(a)))},fetchItems:function(a,b){this.fetchURL(_p("regulation/items?originCode=%s&destCode=%s",encodeURIComponent(a),encodeURIComponent(b)))},fetchDetails:function(a,b,c){var d=this;this.fetchURL(_p("regulation?originCode=%s&destCode=%s&item=%s",encodeURIComponent(a),encodeURIComponent(b),encodeURIComponent(c)),{error:function(a,b){404===b.status?d.trigger("notFound"):d.trigger("networkError")}})}})}),define("views/regulation",["backbone","collections/regulations","templates"],function(a,b,c){return a.View.extend({events:{"click .origin .dropdown-menu a":"selectOrigin","click .dest .dropdown-menu a":"selectDest","click .cargo-type-items button":"changeCargoType","click .submit-query":"queryDetails"},initialize:function(){this.origins=new b,this.dests=new b,this.items=new b,this.details=new b,this.listenTo(this.origins,"sync",this.render),this.listenTo(this.dests,"sync",this.render),this.listenTo(this.items,"sync",this.render),this.listenTo(this.details,"sync",this.render),this.listenTo(this.details,"sync",this.resetQueryButton),this.listenTo(this.details,"notFound",this.showNotFoundError),this.listenTo(this.details,"networkError",this.showNetworkError),this.origins.fetchOrigins(),this.render()},selectOrigin:function(a){var b=$(a.currentTarget);this.originSelected={name:b.text(),code:b.data("code")},this.destSelected=null,this.render(),this.dests.fetchDests(this.originSelected.code)},selectDest:function(a){var b=$(a.currentTarget);this.destSelected={name:b.text(),code:b.data("code")},this.render(),this.items.fetchItems(this.originSelected.code,this.destSelected.code)},changeCargoType:function(a){var b=$(a.currentTarget);this.$(".cargo-type-items button").removeClass("active"),b.addClass("active"),this.itemSelected={name:b.text(),code:b.data("code")},this.render()},renderDropdowns:function(){this.$(".origin .dropdown-menu").html(c.dropdownTemplates({dropdownItems:this.origins.models})),this.originSelected?(this.$(".dest .dropdown-menu").removeClass("hidden"),this.$(".dest .dropdown-menu").html(c.dropdownTemplates({dropdownItems:this.dests.models}))):this.$(".dest .dropdown-menu").addClass("hidden")},renderDropdownTitle:function(){var a=this.$(".origin .dropdown-toggle .selected-dropdown"),b=this.originSelected?this.originSelected.name:a.data("origin-text");a.text(b);var c=this.$(".dest .dropdown-toggle .selected-dropdown"),d=this.destSelected?this.destSelected.name:c.data("origin-text");c.text(d)},renderItemSelector:function(){var a=this.$(".cargo-type");if(this.items.length){if(a.show(),this.$(".cargo-type-items").html(c.buttonGroupTempletas({items:this.items.models})),this.itemSelected){var b=this.$(".cargo-type-items button[data-code="+this.itemSelected.code+"]");_.isEmpty(b)?(this.itemSelected=null,this.render()):b.addClass("active")}}else a.hide()},updateQueryButtonStatus:function(){var a=this.originSelected&&this.destSelected&&this.itemSelected;this.$(".submit-query").toggleClass("disabled",!a)},renderResults:function(){var a=this.$(".results");this.details.length?(a.html(c.regulationResult({results:this.details.models})),a.slideDown()):a.slideUp()},render:function(){this.renderDropdownTitle(),this.renderDropdowns(),this.renderItemSelector(),this.updateQueryButtonStatus(),this.renderResults()},queryDetails:function(){this.$(".error").hide(),this.$(".submit-query").button("loading");var a=this;this.$(".results").slideUp(function(){a.details.fetchDetails(a.originSelected.code,a.destSelected.code,a.itemSelected.code)})},resetQueryButton:function(){this.$(".submit-query").button("reset")},showNotFoundError:function(){this.$(".error[data-error=not-found]").show(),this.resetQueryButton()},showNetworkError:function(){this.$(".error[data-error=network]").show(),this.resetQueryButton()}})}),define("views/secondNavigation",["backbone"],function(a){return a.View.extend({events:{"click h5":"toggleSubMenu","click .slideToggle":"toggleSubMenu"},unfoldSubMenu:function(a){var b=$(a.currentTarget),c=b.siblings("div").children();c.is(":hidden")&&(b.parent().addClass("expand"),c.slideDown(300))},foldSubMenu:function(a){var b=$(a.currentTarget),c=b.siblings("div").children();c.is(":hidden")||(b.parent().removeClass("expand"),c.slideUp(300))},toggleSubMenu:function(a){var b=$(a.currentTarget),c=b.siblings("div").children();c.is(":hidden")?this.unfoldSubMenu(a):this.foldSubMenu(a)},initialize:function(){this.$(".current").parents("li").addClass("expand"),this.$(".current").parents("ul").slideDown()}})}),define("models/consign",["backbone","helper"],function(a,b){return a.Model.extend({},{parse:function(a){return null==a.awbNo&&(a.awbNo="-"),null==a.flightNo&&(a.flightNo="-"),null==a.vrn&&(a.vrn="-"),null==a.scheDate&&(a.scheDate="-"),null==a.port&&(a.port="-"),a},validateBillNumber:function(a,b){if(1==b)var c=/^\d{12}$/;else if(2==b)var c=/^\d{10}$/;else var c=/^\d{12}$/;return c.test(a.trim())},validateBillNumbers:function(a,b){var c=!0,d=this;return _.each(a,function(a){a.length&&!d.validateBillNumber(a,b)&&(c=!1)}),c}})}),define("collections/consign",["backbone","models/consign","helper"],function(a,b,c){return a.Collection.extend({model:b,parse:function(a){return a=_.map(a,function(a){return b.parse(a)})},fetchDetails:function(a,b){this.url=c.getRESTfulDomain("consignee/list?type="+a+"&code="+b),this.code=b,this.type=a;var d=this;this.fetch({success:function(a,b){return b},error:function(a,b){404===b.status?d.trigger("notFound"):403===b.status?d.trigger("validationCodeError"):d.trigger("networkError")}})}})}),define("views/consign",["backbone","collections/consign","models/consign","templates","tokenfield","jquery-placeholder"],function(a,b,c,d,e){return a.View.extend({events:{"click .cargo-type-items button":"changeCargoType","keyup .billNumber1 input":"updateQueryButtonStatus","mouseout .tokenfield.form-control":"stopPropagation","focusin input.token-input":"setInputToken","focusout input.token-input":"setInputToken","click .submit-query":"queryDetails","click .clear-inputs":"clearInputs"},initialize:function(){this.itemSelected={code:1},this.placeHolder=this.$(".billNumber input").attr("placeholder"),this.setupTokenField(this.$(".billNumber input"),this.placeHolder),this.collections=new b,this.codes=[],this.clearInputs(),this.listenTo(this.collections,"sync",this.render),this.listenTo(this.collections,"sync",this.resetQueryButton),this.listenTo(this.collections,"notFound",this.showNotFoundError),this.listenTo(this.collections,"networkError",this.showNetworkError),this.listenTo(this.collections,"validationCodeError",this.showValidationCodeError),this.render()},clearInputs:function(){this.$(".token-input").val(""),this.$tokenfield.tokenfield("setTokens",[]),this.$tokenfield.trigger("tokenfield:removetoken"),this.validateBillNumbersInput(),this.$(".error").hide(),this.placeHolderToggle()},changeCargoType:function(a){var b=$(a.currentTarget);this.$(".cargo-type-items button").removeClass("active"),b.addClass("active"),this.itemSelected={name:b.text(),code:b.data("code")},1==this.itemSelected.code&&(this.$(".billLabel").text(_l("运单号")),this.$(".error[data-error=bill-number-format]").html(_l("订单号只能为12位数字,且不能重复。")),this.$(".error[data-error=limit-exceeded]").html(_l("您已输入超过10条运单号，系统将自动截取并显示前10条运单号的追踪信息。"))),2==this.itemSelected.code&&(this.$(".billLabel").text(_l("海关货运编号")),this.$(".error[data-error=bill-number-format]").html(_l("海关货运编号只能为10位数字,且不能重复。")),this.$(".error[data-error=limit-exceeded]").html(_l("您已输入超过10条海关货运编号，系统将自动截取并显示前10条海关货运编号的追踪信息。"))),this.clearInputs()},setInputToken:function(a){var b=this;"focusin"===a.type?(this.$(a.target).data("input-status",!0),this.$el.find(".billNumber").removeClass("folded")):(this.$(a.target).data("input-status",!1),this.$el.find(".token").length||this.$el.find(".token-input").val()||setTimeout(function(){b.$el.find(".tokenfield.form-control").hasClass("focus")||b.$el.find(".billNumber").addClass("folded")},200))},stopPropagation:function(a){a.stopPropagation()},placeHolderToggle:function(){if(0===this.inputedBillNumbers().length){var a=this.$(".tokenfield.form-control"),b=this.$(".token-input"),c=a.offset().left+a.width()+parseInt(a.css("padding-left"),10)-b.offset().left-1;1==this.itemSelected.code?this.placeholder=_l("最多可同时查询10条运单号，以中英文逗号、空格或回车键隔开。"):this.placeholder=_l("最多可同时查询10条海关货运编号，以中英文逗号、空格或回车键隔开。"),b.attr("placeholder",this.placeholder).width(c).placeholder()}else this.$(".token-input").attr("placeholder","").removeClass("placeholder")},setupTokenField:function(a,b){this.placeholder=b;var d=this;this.$tokenfield=a;var e=10,f=function(){window.setTimeout(function(){d.validateBillNumbersInput()},0)};d.$tokenfield.attr("placeholder",b).on("tokenfield:removetoken",function(){d.$(".error[data-error=limit-exceeded]").hide(),d.placeHolderToggle(),d.inputValidate()&&d.$(".error[data-error=bill-number-format]").hide(),d.validateBillNumbersInput()}).on("tokenfield:createtoken",function(a){c.validateBillNumber(a.token.value,d.itemSelected.code)||$(a.relatedTarget).addClass("invalid"),d.placeHolderToggle(),f()}).on("tokenfield:preventduplicate",function(){window.setTimeout(function(){d.$(".error[data-error=bill-number-format]").show()},200)}).on("tokenfield:edittoken",function(){d.$(".token-input").on("blur",function(){f()}).on("keyup",function(a){a.currentTarget.value.length||(d.placeHolderToggle(),f())})}).tokenfield({createTokensOnBlur:!0,delimiter:[",","\n","	"," ","，"],limit:e,minWidth:90,leakCallback:function(){d.$(".token-input").val(""),d.$(".error[data-error=limit-exceeded]").show()}}),d.$(".token-input").attr("placeholder",this.placeHolder).placeholder()},inputedBillNumbers:function(){var a;try{a=this.$tokenfield.tokenfield("getTokensList").split(",")}catch(b){a=this.$tokenfield.tokenfield("getTokensList").val().split(",")}return a=_.map(a,function(a){return a.trim()}),_.compact(a)},hasInputs:function(){var a=!1;return _.each(this.inputedBillNumbers(),function(b){b.length&&(a=!0)}),a},inputValidate:function(){return c.validateBillNumbers(this.inputedBillNumbers(),this.itemSelected.code)},validateBillNumbersInput:function(){this.inputValidate()?this.$(".error[data-error=bill-number-format]").hide():this.$(".error[data-error=bill-number-format]").show(),this.updateQueryButtonStatus()},updateQueryButtonStatus:function(){var a=c.validateBillNumbers(this.inputedBillNumbers(),this.itemSelected.code),b=this.$el.find(".token").length;this.$(".primary-button").toggleClass("disabled",!a||!b)},renderResults:function(){var a=this.$(".results");this.collections.length?(a.html(d.consignResult({results:this.collections.models,codes:this.codes,type:this.itemSelected.code})),a.slideDown()):a.slideUp()},render:function(){this.updateQueryButtonStatus(),this.renderResults()},queryDetails:function(){if(!this.inputValidate()||!this.hasInputs())return void this.$(".error[data-error=bill-number-format]").show();this.$(".error").hide(),this.$(".submit-query").button("loading");var a=this,b=this.$tokenfield.tokenfield("getTokensList",",").split(", ");b=_.map(b,function(a){return a.trim()}),this.codes=b,a.collections.fetchDetails(a.itemSelected.code,b)},resetQueryButton:function(){this.$(".submit-query").button("reset")},showNotFoundError:function(){this.$(".error[data-error=not-found]").show(),this.resetQueryButton()},showNetworkError:function(){this.$(".error[data-error=network]").show(),this.resetQueryButton()}})}),define("models/notIndustry",["backbone","helper"],function(a,b){return a.Model.extend({},{parse:function(a){return a},getIndustryCommerceCity:function(){return a.ajax({type:"get",url:b.getRESTfulDomain("region/industryCommerceCity")})}})}),define("collections/notIndustry",["backbone","models/notIndustry","helper"],function(a,b,c){return a.Collection.extend({model:b,parse:function(a){return a=_.map(a,function(a){return b.parse(a)})},getIndustryCommerceCity:function(){return a.ajax({type:"GET",url:c.getRESTfulDomain("region/industryCommerceCity")})},fetchIndustryCommerceArea:function(b){return a.ajax({type:"GET",url:c.getRESTfulDomain("region/"+encodeURIComponent(b)+"/industryCommerceArea")})},fetchIndustryCommerceTown:function(b){return a.ajax({type:"GET",url:c.getRESTfulDomain("region/"+b+"/industryCommerceTown")})},fetchTownByArea:function(b,d){return a.ajax({type:"GET",url:c.getRESTfulDomain("region/"+encodeURIComponent(b)+"/industryCommerceTown?area="+encodeURIComponent(d))})},fetchRoadByTown:function(b,d){return a.ajax({type:"GET",url:c.getRESTfulDomain("region/"+encodeURIComponent(b)+"/industryCommerceRoad?town="+encodeURIComponent(d))})},fetchRoad:function(b,d,e){var f="region/"+encodeURIComponent(b)+"/industryCommerceRoad?";return null!=d&&d!=_l("请选择")&&(f+="&area="+encodeURIComponent(d)),null!=e&&e!=_l("请选择")&&(f+="&town="+encodeURIComponent(e)),a.ajax({type:"GET",url:c.getRESTfulDomain(f)})},fetchAddressByAreaAndTownAndRoad:function(b,d,e,f){var g="region/"+encodeURIComponent(b)+"/industryCommerceAddress?town="+encodeURIComponent(e);return null!=d&&d!=_l("请选择")&&(g+="&area="+encodeURIComponent(d)),null!=f&&f!=_l("请选择")&&(g+="&road="+encodeURIComponent(f)),a.ajax({type:"GET",url:c.getRESTfulDomain(g)})},industryCommerce:function(b,d,e,f,g,h){var i="region/industryCommerce?";return null!=b&&b!=_l("请选择")&&(i+="&city="+encodeURIComponent(b)),null!=d&&d!=_l("请选择")&&(i+="&area="+encodeURIComponent(d)),null!=e&&e!=_l("请选择")&&(i+="&town="+encodeURIComponent(e)),null!=f&&f!=_l("请选择")&&(i+="&road="+encodeURIComponent(f)),null!=g&&g!=_l("请选择")&&(i+="&address="+encodeURIComponent(g)),null!=h&&(i+="&pageNO="+h),a.ajax({type:"GET",url:c.getRESTfulDomain(i)})},industryCommercePageCount:function(b,d,e,f,g){var h="region/industryCommercePageCount?";return null!=b&&b!=_l("请选择")&&(h+="&city="+encodeURIComponent(b)),null!=d&&d!=_l("请选择")&&(h+="&area="+encodeURIComponent(d)),null!=e&&e!=_l("请选择")&&(h+="&town="+encodeURIComponent(e)),null!=f&&f!=_l("请选择")&&(h+="&road="+encodeURIComponent(f)),null!=g&&g!=_l("请选择")&&(h+="&address="+encodeURIComponent(g)),a.ajax({type:"GET",url:c.getRESTfulDomain(h)})}})}),define("views/notIndustry",["backbone","collections/notIndustry","models/notIndustry","templates"],function(a,b,c,d){return a.View.extend({events:{"click .city":"renderCityDropdowns","click .citylist.dropdown-menu a":"selectCity","click .arealist.dropdown-menu a":"selectArea","click .townlist.dropdown-menu a":"selectTown","click .roadlist.dropdown-menu a":"selectRoad","click .addresslist.dropdown-menu a":"selectAddress","click .submit-query":"queryDetails","keyup .address":"searchAddress","keyup .road":"searchRoad","click .goToPage":"goToPage"},initialize:function(){this.itemSelected={},this.collections=new b,this.addresslist=[],this.roadlist=[],this.listenTo(this.collections,"sync",this.render),this.render()},renderCityDropdowns:function(){that=this,this.collections.getIndustryCommerceCity().success(function(a){that.$(".citylist").html(d.dropdownCity({dropdownItems:a}))}).error(function(a){404===a.status&&that.showNetworkError()})},selectCity:function(a){a.preventDefault();var b=$(a.currentTarget).text();this.itemSelected={city:b},b!=this.$(".city").val()&&(this.$(".area").val(_l("请选择")),this.$(".town").val(_l("请选择")),this.$(".road").val(_l("请选择")),this.$(".address").val(_l("请选择")),this.addresslist=[],this.roadlist=[],this.collections.fetchIndustryCommerceArea(b).success(function(a){that.$(".arealist").html(d.dropdownCity({dropdownItems:a})),that.$(".townlist").html(d.dropdownCity({dropdownItems:[]})),that.$(".roadlist").html(d.dropdownCity({dropdownItems:[]})),that.$(".addresslist").html(d.dropdownCity({dropdownItems:[]}))}).error(function(a){404===a.status&&that.showNetworkError()})),this.$(".city").val(b)},selectArea:function(a){var b=$(a.currentTarget).text();this.itemSelected={city:this.itemSelected.city,area:b},b!=this.$(".area").val()&&(this.$(".town").val(_l("请选择")),this.$(".road").val(_l("请选择")),this.$(".address").val(_l("请选择")),this.addresslist=[],this.collections.fetchTownByArea(this.itemSelected.city,b).success(function(a){that.$(".townlist").html(d.dropdownCity({dropdownItems:a})),that.$(".addresslist").html(d.dropdownCity({dropdownItems:[]}))}).error(function(a){404===a.status&&that.$(".townlist").html(d.dropdownCity({dropdownItems:[]}))}),this.collections.fetchRoad(this.itemSelected.city,b,"").success(function(a){that.$(".roadlist").html(d.dropdownCity({dropdownItems:a})),that.roadlist=a,that.$(".addresslist").html(d.dropdownCity({dropdownItems:[]}))}).error(function(a){404===a.status&&that.$(".townlist").html(d.dropdownCity({dropdownItems:[]}))})),this.$(".area").val(b)},selectTown:function(a){var b=$(a.currentTarget).text();this.itemSelected={city:this.itemSelected.city,town:b,area:this.itemSelected.area},b!=this.$(".town").val()&&(this.$(".road").val(_l("请选择")),this.$(".address").val(_l("请选择")),this.collections.fetchRoad(this.itemSelected.city,this.itemSelected.area,this.itemSelected.town).success(function(a){that.$(".roadlist").html(d.dropdownCity({dropdownItems:a})),that.$(".addresslist").html(d.dropdownCity({dropdownItems:[]})),that.roadlist=a}).error(function(a){404===a.status&&that.showNetworkError()})),this.$(".town").val(b)},selectRoad:function(a){var b=$(a.currentTarget).text();this.itemSelected={city:this.itemSelected.city,town:this.itemSelected.town,area:this.itemSelected.area,road:b},b!=this.$(".road").val()&&(this.$(".address").val(_l("请选择")),this.$(".road").val(b),null==this.itemSelected.town&&(this.itemSelected.town=""),this.collections.fetchAddressByAreaAndTownAndRoad(this.itemSelected.city,this.itemSelected.area,this.itemSelected.town,b).success(function(a){that.$(".addresslist").html(d.dropdownCity({dropdownItems:a})),that.addresslist=a}).error(function(a){404===a.status&&that.showNetworkError()}))},selectAddress:function(a){var b=$(a.currentTarget).text();this.$(".address").val(b),this.itemSelected={city:this.itemSelected.city,town:this.itemSelected.town,area:this.itemSelected.area,road:this.itemSelected.road,address:b}},updateQueryButtonStatus:function(){},renderResults:function(){var a=this.$(".results");this.collections.length?(a.html(d.notIndustryResult({results:this.collections.models})),a.slideDown()):a.slideUp()},render:function(){this.$(".area").val(_l("请选择")),this.$(".town").val(_l("请选择")),this.$(".road").val(_l("请选择")),this.$(".address").val(_l("请选择")),this.renderCityDropdowns(),this.updateQueryButtonStatus(),this.renderResults()},queryDetails:function(){this.$(".submit-query").button("loading"),this.$(".error").hide(),that=this;var a=this.$(".results");a.slideDown(),this.collections.industryCommerce(this.itemSelected.city,this.itemSelected.area,this.itemSelected.town,this.itemSelected.road,this.itemSelected.address,window.pageIndex).success(function(a){that.$(".results").html(d.notIndustryResult({results:a})),that.collections.industryCommercePageCount(that.itemSelected.city,that.itemSelected.area,that.itemSelected.town,that.itemSelected.road,that.itemSelected.address).success(function(a){var b=window.pageIndex||1;that.$(".results").append(d.paginationPro({pageIndex:b,pageCount:a})),that.count=a,that.$(".submit-query").button("reset")}).error(function(a){404===a.status&&that.showNetworkError()})}).error(function(a){404===a.status&&that.showNetworkError()})},goToPage:function(a){var b=$(a.currentTarget).attr("data-pageindex");this.itemSelected={city:this.itemSelected.city,town:this.itemSelected.town,area:this.itemSelected.area,road:this.itemSelected.road,address:this.itemSelected.address},this.collections.industryCommerce(this.itemSelected.city,this.itemSelected.area,this.itemSelected.town,this.itemSelected.road,this.itemSelected.address,b).success(function(a){that.$(".results").html(d.notIndustryResult({results:a})),that.$(".results").append(d.paginationPro({pageIndex:b,pageCount:that.count}))}).error(function(a){404===a.status&&that.showNetworkError()})},searchAddress:function(a){var b=$(a.currentTarget).context.value;""!=b?this.$(".addresslist").html(d.dropdownSearch({dropdownItems:this.addresslist,search:b})):this.$(".addresslist").html(d.dropdownCity({dropdownItems:this.addresslist}))},searchRoad:function(a){var b=$(a.currentTarget).context.value;""!=b?this.$(".roadlist").html(d.dropdownSearch({dropdownItems:this.roadlist,search:b})):this.$(".roadlist").html(d.dropdownCity({dropdownItems:this.roadlist}))},resetQueryButton:function(){this.$(".submit-query").button("reset")},showNotFoundError:function(){this.$(".error[data-error=not-found]").show(),this.resetQueryButton()},showNetworkError:function(){this.$(".error[data-error=network]").show(),this.resetQueryButton()}})}),define("views/popularization/popularization",["backbone","templates","jquery","helper"],function(a,b,c,d){return a.View.extend({events:{"click #popularization-validation-image":"refreshPopularizationValidationCode","click #popularization-submission":"sumitPopularizationApplication"},errorTips:function(a){c("[name=popularization-submission-error]").html(a)},initialize:function(){this.refreshPopularizationValidationCode()},refreshPopularizationValidationCode:function(){var a=this.$("#popularization-validation-image"),b=d.getRESTfulDomain("captcha/pms?force=true&time="+(new Date).getTime());a&&a.attr("src",b)},isValidMailAddr:function(a){return d.isValidMailAddr(a)},sumitPopularizationApplication:function(){var a=c("[name=popularization-security-code]").val(),b=null;this.checkPopularizationContactName()&&this.checkPopularizationCompanyName()&&this.checkPopularizationMail()&&this.checkPopularizationMailReg()&&this.checkPopularizationMobile()&&this.checkMobileReg()&&this.checkPopularizationEnquiry()&&this.checkPopularizationValidCode()&&this.checkPopularizationPrivacyPolicy()&&this.checkPopularizationPersonalInfAgreement()&&(b={title:c("input[name='title']").val(),customerName:c("input[name='popularization-contact-name']").val(),companyName:c("input[name='popularization-require-company']").val(),industry:"",type:"2",tel:c("input[name='popularization-mobile']").val(),email:c("input[name='popularization-require-mail']").val(),city:"",countryCode:d.getSiteLocation(),lang:d.getSiteLanguage(),message:c("[name='popularization-require-enquiry']").val(),countryInput:"",source:"LP"},this.savePopularizationCooperativeAjax(b,a))},savePopularizationCooperativeAjax:function(b,c){var e=this;a.ajax({type:"POST",contentType:"application/json",url:d.getRESTfulDomain("pms/collectedInformation?app=pms&answer="+c),data:JSON.stringify(b),success:function(a){"WS_PC_01"===a.resultStr&&e.errorTips(_l("您的信息提交成功")),("WS_PC_02"===a.resultStr||"WS_PC_03"===a.resultStr||"WS_PC_04"===a.resultStr)&&(e.errorTips(_l("提交失败")),e.refreshPopularizationValidationCode())},error:function(a){403===a.status?(e.errorTips(_l("您输入的验证码有误，请重新输入")),e.refreshPopularizationValidationCode()):(e.errorTips(_l("网络异常，请稍后再试！")),e.refreshPopularizationValidationCode())}})},checkPopularizationValidCode:function(){var a=c("[name=popularization-security-code]").val();return""==a||null==a?(this.errorTips(_l("您输入的验证码不能为空")),!1):!0},checkPopularizationContactName:function(){var a=c.trim(c("[name=popularization-contact-name]").val());return""==a||null==a?(this.errorTips(_l("您的姓名不可为空")),!1):!0},checkPopularizationCompanyName:function(){var a=c.trim(c("[name=popularization-require-company]").val());return""==a||null==a?(this.errorTips(_l("公司名称不可为空")),!1):!0},checkPopularizationMobile:function(){var a=c.trim(c("[name=popularization-mobile]").val());return""==a||null==a?(this.errorTips(_l("您的联系电话不可为空")),!1):!0},checkMobileReg:function(){var a=c.trim(c("[name=popularization-mobile]").val());return d.isValidPhoneNumber(a)?!0:(this.errorTips(_l("您输入联系电话有误，请重新输入")),!1)},checkPopularizationMail:function(){var a=c.trim(c("[name=popularization-require-mail]").val());return""==a||null==a?(this.errorTips(_l("邮箱地址不可为空")),!1):!0},checkPopularizationMailReg:function(){var a=c.trim(c("[name=popularization-require-mail]").val()),b=this.isValidMailAddr(a);return b?!0:(this.errorTips(_l("邮箱地址格式有误")),!1)},checkPopularizationEnquiry:function(){var a=c.trim(c("[name=popularization-require-enquiry]").val());return""==a||null==a?(this.errorTips(_l("咨询内容不可为空")),!1):!0},checkPopularizationPrivacyPolicy:function(){return c("[name=popularization-require-policy]").attr("checked")?!0:(this.errorTips(_l("必须同意隐私声明(谷歌推广)")),!1)},checkPopularizationPersonalInfAgreement:function(){return"jp"==d.getSiteLocation()?c("[name=popularization-personal-inf-agreement]").attr("checked")?!0:(this.errorTips(_l("必须同意个人信息管理同意书")),!1):!0}})}),define("views/ifaDownload",["backbone","helper"],function(a,b){return a.View.extend({events:{"click .downloadLink a":"popForm","click .ifa_modal .close":"closeForm","click .validate-code-btn":"refreshValidationCode","click #submit":"saveInfo"},initialize:function(){this.$el.find(".downloadLink a").css("pointer-events","auto"),void 0==this.$el.find(".downloadLink a").attr("download")&&this.$el.find(".downloadLink a").attr("download","")},popForm:function(a){"1"!=window.localStorage.getItem("alreadyifaVisitor")&&(a.preventDefault(),this.errorCode=[],this.refreshValidationCode(),this.$el.find(".ifa_modal").show(),$("body").css("overflow","hidden"),this.$href=$(a.target).attr("href"),this.$download=$(a.target).attr("download"))},closeForm:function(){$("body").css("overflow","auto"),this.$el.find(".ifa_modal").hide()},saveInfo:function(a){if(a.preventDefault(),this.errorCode.splice(0,this.errorCode.length),this.validateUser(),this.validateMobile(),this.validateCompany(),this.validateEmail(),this.validateCode(),0===this.errorCode.length){this.$submit=this.$el.find("#submit");var b=this.$el.find("form").serializeArray(),c={};for(var d in b)c[b[d].name]=b[d].value;c.source=_l("速运"),this.$submit.attr("disabled","true").text(_l("提交中...")),this.saveInfoAjax(JSON.stringify(c))}},saveInfoAjax:function(c){var d=this;a.ajax({type:"post",url:b.getRESTfulDomain("cudp/saveCoopConsult?app=cooperative&answer="+d.$code.val()),data:c,contentType:"application/json",success:function(a,b){if("200"==a.retCode){d.$submit.text(_l("提交成功！"));var c=3,e=setInterval(function(){d.$submit.text(c+_l("秒后开始下载！")),0==c&&($("body").css("overflow","auto"),d.$el.find(".ifa_modal").hide(),d.clickCopyDownload(),clearInterval(e)),c--},1e3);window.localStorage.setItem("alreadyifaVisitor","1")}else d.ajaxError(a.retMsg)},error:function(a){"403"==a.status?(d.$code.next().next().html(_l("验证码错误！")),d.$code.parent().addClass("error"),d.$submit.removeAttr("disabled").text(_l("提交")),d.refreshValidationCode()):d.ajaxError(_l("网络错误！"))}})},ajaxError:function(a){this.$submit.text(a);var b=this,c=5,d=setInterval(function(){3>=c&&b.$submit.text(c+_l("秒后重新提交！")),0==c&&(b.$submit.removeAttr("disabled").text(_l("提交")),clearInterval(d)),c--},1e3)},clickCopyDownload:function(){$('<a href="'+this.$href+'" download="'+this.$download+'"></a>')[0].click()},validateUser:function(){var a=this.$el.find('input[name="user"]');""==$.trim(a.val())?(a.parent().addClass("error"),this.errorCode.push("1")):a.parent().removeClass("error")},validateMobile:function(){var a=this.$el.find('input[name="mobile"]');""==$.trim(a.val())?(a.next().html(_l("手机号码不能为空！")),a.parent().addClass("error"),this.errorCode.push("2")):b.isValidPhoneNumber($.trim(a.val()))?a.parent().removeClass("error"):(a.next().html(_l("请输入正确的手机号！")),a.parent().addClass("error"),this.errorCode.push("2"))},validateCompany:function(){var a=this.$el.find('input[name="companyName"]');""==$.trim(a.val())?(a.parent().addClass("error"),this.errorCode.push("3")):a.parent().removeClass("error")},validateEmail:function(){var a=this.$el.find('input[name="email"]');""==a.val()?a.parent().removeClass("error"):b.isValidMailAddr(a.val())?a.parent().removeClass("error"):(a.parent().addClass("error"),this.errorCode.push("4"))},validateCode:function(){this.$code=this.$el.find('input[name="code"]'),""==this.$code.val()?(this.$code.next().next().html(_l("验证码不能为空！")),this.$code.parent().addClass("error"),this.errorCode.push("5")):this.$code.parent().removeClass("error")},refreshValidationCode:function(){var a=this.$el.find(".validate-code-btn"),c=b.getRESTfulDomain("captcha/cooperative?force=true&time="+(new Date).getTime());a.attr("src",c)}})}),define("views/internationalApplication/internationalApplication",["backbone","templates","jquery","helper"],function(a,b,c,d){return a.View.extend({events:{"blur .require-company input.text":"checkCompanyName","blur .send-addr input.text":"checkRegistCountry","blur .contact-name input.text":"checkChargePerson","blur .mobile input.text":"inputChangedByMobile","blur .email input.text":"checkEmail","blur .accountNumber input.text":"inputAccountNumber","blur .companyNameOnline input.text":"checkCompanyNameOnline","blur .onlinePlatform input.text":"checkOnlinePlatform","blur .conpanyWebsite input.text":"inputConpanyWebsite","blur .productType input.text":"checkProductType","blur .shipmentsPerDay input.text":"checkShipmentsPerDay","blur .shipmentsTotal input.text":"checkShipmentsTotal","click .r-btn-a":"sumitApplication","click #validation-image":"refreshValidationCode","focus .require-company input.text, .send-addr input.text , .contact-name input.text, .mobile input.text, .email input.text, .accountNumber input.text, .companyNameOnline input.text, .onlinePlatform input.text, .conpanyWebsite input.text, .productType input.text, .shipmentsPerDay input.text, .shipmentsTotal input.text":"hideErrorPrompt","focus #code":"hideValidcodeErrorPrompt","click .require-policy input.policy":"agreePrivacy"},initialize:function(){this.errorCode=[],this.refreshValidationCode()},refreshValidationCode:function(){var a=this.$("#validation-image"),b=d.getRESTfulDomain("captcha/cis?force=true&time="+(new Date).getTime());a&&a.attr("src",b)},hideErrorPrompt:function(a){var b=c(a.currentTarget);b.parent().removeClass("s-prompt")},sumitApplication:function(){var a=c("#code").val(),b=null;this.checkParam()&&(b={source:c("input[name='source']").val(),companyName:c("input[name='companyName']").val(),registCountry:c("input[name='registCountry']").val(),chargePerson:c("input[name='chargePerson']").val(),
contactNumber:c("input[name='contactNumber']").val(),email:c("input[name='email']").val(),accountNumber:c("input[name='accountNumber']").val(),companyNameOnline:c("input[name='companyNameOnline']").val(),onlinePlatform:c("input[name='onlinePlatform']").val(),conpanyWebsite:c("input[name='conpanyWebsite']").val(),productType:c("input[name='productType']").val(),shipmentsPerDay:c("input[name='shipmentsPerDay']").val(),shipmentsTotal:c("input[name='shipmentsTotal']").val()},this.saveCooperativeAjax(b,a))},saveCooperativeAjax:function(b,e){var f=this;a.ajax({type:"POST",contentType:"application/json",url:d.getRESTfulDomain("pms/certifiedInternationalShipping?app=cis&answer="+e+"&lang="+d.getSiteLanguage()+"&region="+d.getSiteLocation()),data:JSON.stringify(b),success:function(a){if("1"===a.resultStr&&(c(".r-btn-a").hide(),c(".submit-bottom .r-prompt").show()),"0"===a.resultStr){c(".r-btn-b").show(),c(".validation-code-prompt").hide(),f.refreshValidationCode();setTimeout("$('.r-btn-b').hide()",3e3)}},error:function(a){403===a.status?(c(".validation-code-prompt").prop("lastChild").nodeValue=_l("您输入的验证码有误，请重新输入"),c(".validation-code-prompt").show()):(c(".r-btn-b").text(_l("网络异常，请稍后再试！")),c(".r-btn-b").css("width","220px"),c(".r-btn-b").show(),setTimeout("$('.r-btn-b').hide()",3e3),f.refreshValidationCode())}})},checkParam:function(){return this.checkCompanyName()&&this.checkRegistCountry()&&this.checkChargePerson()&&this.checkMobile()&&this.checkMobileReg()&&this.checkEmailNotEmpty()&&this.checkEmailReg()&&this.checkAccountNumber()&&this.checkAccountNumberReg()&&this.checkCompanyNameOnline()&&this.checkOnlinePlatform()&&this.checkConpanyWebsite()&&this.checkConpanyWebsiteReg()&&this.checkProductType()&&this.checkValidCode()&&this.checkPrivacyPolicy()},checkMobile:function(){var a=c.trim(c(".mobile input").val());return""==a||null==a?(c(".mobile .input").addClass("s-prompt"),c(".mobile .error-prompt").prop("lastChild").nodeValue=_l("请注意此项为必填"),!1):(c(".mobile .input").removeClass("s-prompt"),!0)},checkMobileReg:function(){var a=c.trim(c(".mobile input").val()),b=d.isValidPhoneNumber(a);return b?(c(".mobile .input").removeClass("s-prompt"),!0):(c(".mobile .error-prompt").prop("lastChild").nodeValue=_l("您输入联系电话有误，请重新输入"),c(".mobile .input").addClass("s-prompt"),!1)},checkEmailNotEmpty:function(){var a=c.trim(c(".email input").val());return""==a||null==a?(c(".email .input").addClass("s-prompt"),c(".email .error-prompt").prop("lastChild").nodeValue=_l("请注意此项为必填"),!1):(c(".email .input").removeClass("s-prompt"),!0)},checkEmailReg:function(){var a=c.trim(c(".email input").val()),b=d.isValidMailAddr(a);return b?(c(".email .input").removeClass("s-prompt"),!0):(c(".email .error-prompt").prop("lastChild").nodeValue=_l("邮箱地址格式有误"),c(".email .input").addClass("s-prompt"),!1)},checkConpanyWebsite:function(){var a=c.trim(c(".conpanyWebsite input").val());return""==a||null==a?(c(".conpanyWebsite .input").addClass("s-prompt"),c(".accountNumber .error-prompt").prop("lastChild").nodeValue=_l("请注意此项为必填"),!1):(c(".accountNumber .input").removeClass("s-prompt"),!0)},checkConpanyWebsiteReg:function(){var a=c.trim(c(".conpanyWebsite input").val()),b=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-&._?=:~]+)\.)+([A-Za-z0-9-&._?=:~\/])+$/;return b.test(a)?(c(".conpanyWebsite .input").removeClass("s-prompt"),!0):(c(".conpanyWebsite .error-prompt").prop("lastChild").nodeValue=_l("这网址不是以http://https://开头，或者不是网址！"),c(".conpanyWebsite .input").addClass("s-prompt"),!1)},checkAccountNumber:function(){var a=c.trim(c(".accountNumber input").val());new RegExp("^[A-Za-z0-9]+$");return null==a||""==a?(c(".accountNumber .input").addClass("s-prompt"),c(".accountNumber .error-prompt").prop("lastChild").nodeValue=_l("请注意此项为必填"),!1):(c(".accountNumber .input").removeClass("s-prompt"),!0)},checkAccountNumberReg:function(){var a=c.trim(c(".accountNumber input").val()),b=new RegExp("^[A-Za-z0-9]+$");return b.test(a)?(c(".accountNumber .input").removeClass("s-prompt"),!0):(c(".accountNumber .error-prompt").prop("lastChild").nodeValue=_l("只能填写数字或字母，请重新输入"),c(".accountNumber .input").addClass("s-prompt"),!1)},checkCompanyName:function(){var a=c.trim(c(".require-company input").val());return""==a||null==a?(c(".require-company .input").addClass("s-prompt"),!1):!0},checkRegistCountry:function(){var a=c.trim(c(".send-addr input").val());return""==a||null==a?(c(".send-addr .input").addClass("s-prompt"),!1):!0},checkChargePerson:function(){var a=c.trim(c(".contact-name input").val());return""==a||null==a?(c(".contact-name .input").addClass("s-prompt"),!1):!0},inputChangedByMobile:function(a){var b=c(a.currentTarget).val(),e=d.isValidPhoneNumber(b);""==b||null==b?(c(".mobile .error-prompt").prop("lastChild").nodeValue=_l("请注意此项为必填"),c(".mobile .input").addClass("s-prompt")):e?c(".mobile .input").removeClass("s-prompt"):(c(".mobile .error-prompt").prop("lastChild").nodeValue=_l("您输入联系电话错误，请重新输入"),c(".mobile .input").addClass("s-prompt"))},checkEmail:function(a){var b=c(a.currentTarget).val(),e=d.isValidMailAddr(b);""==b||null==b?(c(".email .error-prompt").prop("lastChild").nodeValue=_l("请注意此项为必填"),c(".email .input").addClass("s-prompt")):e?c(".email .input").removeClass("s-prompt"):(c(".email .error-prompt").prop("lastChild").nodeValue=_l("您输入联系邮箱错误，请重新输入"),c(".email .input").addClass("s-prompt"))},inputAccountNumber:function(a){var b=c(a.currentTarget).val(),d=new RegExp("^[A-Za-z0-9]+$");""==b||null==b?(c(".accountNumber .error-prompt").prop("lastChild").nodeValue=_l("请注意此项为必填"),c(".accountNumber .input").addClass("s-prompt")):d.test(b)?c(".accountNumber .input").removeClass("s-prompt"):(c(".accountNumber .error-prompt").prop("lastChild").nodeValue=_l("只能填写数字或字母，请重新输入"),c(".accountNumber .input").addClass("s-prompt"))},checkCompanyNameOnline:function(){var a=c.trim(c(".companyNameOnline input").val());return""==a||null==a?(c(".companyNameOnline .input").addClass("s-prompt"),!1):!0},checkOnlinePlatform:function(){var a=c.trim(c(".onlinePlatform input").val());return""==a||null==a?(c(".onlinePlatform .input").addClass("s-prompt"),!1):!0},inputConpanyWebsite:function(a){if(null!=a&&""!=a&&"undefined"!=a){var b=c(a.currentTarget).val(),d=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-:&=_.?~]+)\.)+([A-Za-z0-9-:&=_.?~\/])+$/;d.test(b)?b.length>100?(c(".conpanyWebsite .error-prompt").prop("lastChild").nodeValue=_l("网店网址最大长度不能超过100个字符"),c(".conpanyWebsite .input").addClass("s-prompt")):c(".conpanyWebsite .input").removeClass("s-prompt"):(c(".conpanyWebsite .error-prompt").prop("lastChild").nodeValue=_l("这网址不是以http://https://开头，或者不是网址！"),c(".conpanyWebsite .input").addClass("s-prompt"))}},checkProductType:function(){var a=c.trim(c(".productType input").val());return""==a||null==a?(c(".productType .input").addClass("s-prompt"),!1):!0},checkShipmentsPerDay:function(a){if(null!=a&&""!=a&&"undefined"!=a){var b=c(a.currentTarget).val(),d=new RegExp("^[0-9]*$");d.test(b)?b.length>9?(c(".shipmentsPerDay .error-prompt").prop("lastChild").nodeValue=_l("发件量最大长度只能填写9位"),c(".shipmentsPerDay .input").addClass("s-prompt")):c(".shipmentsPerDay .input").removeClass("s-prompt"):(c(".shipmentsPerDay .error-prompt").prop("lastChild").nodeValue=_l("发件量只能为数字"),c(".shipmentsPerDay .input").addClass("s-prompt"))}},checkShipmentsTotal:function(a){if(null!=a&&""!=a&&"undefined"!=a){var b=c(a.currentTarget).val();if(null!=b&&""!=b){var d=new RegExp("^[0-9]+([.][0-9]{1}){0,1}$");d.test(b)?b>100?(c(".shipmentsTotal .error-prompt").prop("lastChild").nodeValue=_l("顺丰发件占比不能大于100%"),c(".shipmentsTotal .input").addClass("s-prompt")):c(".shipmentsTotal .input").removeClass("s-prompt"):(c(".shipmentsTotal .error-prompt").prop("lastChild").nodeValue=_l("格式填写有误"),c(".shipmentsTotal .input").addClass("s-prompt"))}}},checkValidCode:function(){var a=c("#code").val();return""==a||null==a?(c(".validation-code-prompt").prop("lastChild").nodeValue=_l("您输入的验证码不能为空"),c(".validation-code-prompt").show(),!1):!0},hideValidcodeErrorPrompt:function(){c(".validation-code-prompt").hide()},checkPrivacyPolicy:function(){return c("#policy").attr("checked")?(c(".require-policy .checkbox").removeClass("s-prompt"),!0):(c(".require-policy .error-prompt").prop("lastChild").nodeValue=_l("请勾选并接受相关协议提交您的申请"),c(".require-policy .error-prompt").show(),c(".require-policy .checkbox").addClass("s-prompt"),!1)},agreePrivacy:function(a){var b=c(a.currentTarget);b.attr("checked")?c(".require-policy .error-prompt").hide():c(".require-policy .error-prompt").show()}})}),define("views/manager",["backbone","views/headHoverItem","views/goDynamic","views/countDownButton","views/acceptanceCriteria","views/order","views/store/storeManager","views/currency","views/detailedLocationPicker/picker","views/detailedLocationPicker/originPicker","views/detailedLocationPicker/destPicker","views/detailedLocationPicker/available","views/detailedLocationPicker/pricePicker","views/detailDateTimePicker/timeQueryPicker","views/detailDateTimePicker/picker","views/detailDatePicker/pickerForTrack","views/detailDatePicker/picker","views/invoices","views/range/range","views/inputIndicator","views/payFee/payFeesContainer","views/payFee/locationInput","views/claims","views/clearance","views/otherService","views/importExportRule","routers/shippingDetailRouter","views/tax","views/navigationTabs","views/quicktools/waybill","views/rightBottomLayer","views/orderButton","views/switchRegionAndLanguage","views/cooperativeAdvisory/coomperativeAdvisory","views/declare","views/share","views/totop","views/bannertip","views/video/video","views/swiper","views/mailServiceNav","views/moveContent","views/arrowswitch","views/cooperativeAdvisory/coomperativeAdvisoryForKR","views/feedbackAndSuggestion/feedbackAndSuggestionForKR","views/track","views/regulation","views/secondNavigation","views/consign","views/notIndustry","views/popularization/popularization","views/ifaDownload","views/internationalApplication/internationalApplication","views/bootstrapPagination"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,aa){return a.View.extend({initialize:function(){var ba=$("body");new b({el:$(".topheader")}),$(".index-page").length>0&&(new D({el:$("#small-header .quick-tool")}),("cn"===Helper.getSiteLocation()||"hk"===Helper.getSiteLocation())&&new E({el:$("body")})),$(".payFee-location-inputs").each(function(){new v({el:this})}),new c({el:$("body")}),new t({el:$("body")}),$(".range-page").length>0&&new s({el:$(".range-page")}),$(".share-pages").length>0&&$(".share-pages").each(function(){new J({el:this})}),new d({el:$("body")}),$(".payFee-page").length>0&&(new u({el:".services-container"}),new y({el:".other-services-container"}),ba.on("click",function(){$(".weight-panel").hide()})),$(".acceptance-criteria-page").length>0&&new e({el:$(".acceptance-criteria-page")}),$(".topheader .region").length>0&&new G({el:$(".topheader .region")}),$(".store-page").length>0&&new g({el:$(".store-view")}),$(".currency-page").length>0&&new h({el:$(".currency-page")}),$(".detail-date-time-input").each(function(){$(this).hasClass("time-query")?new n({el:this}):new o({el:this})}),$(".detail-date-input").each(function(){$(this).hasClass("for-track")?new p({el:this}):new q({el:this})}),$(".invoices-page").length>0&&new r({el:$(".invoices-page")}),$(".order-service").length>0&&new f({el:$(".order-service")}),$(".order-button").each(function(){new F({el:this})}),$(".detail-location-input").each(function(){$(this).hasClass("origin")?new j({el:this}):$(this).hasClass("dest")?new k({el:this}):$(this).hasClass("available")?new l({el:this}):$(this).hasClass("origin-price")||$(this).hasClass("dest-price")?new m({el:this}):new i({el:this})}),$(".clearance-page").length>0&&new x({el:$(".clearance-page")}),$(".claim").length>0&&new w({el:$(".claim-content")}),ba.on("click",function(a){a=window.event||a;var b=a.currentTarget||a.toElement||a.srcElement||a.originalEvent||a.target;$(".location-picker").hide(),/ui-menu-item/.test(b.className)||$(".toggle-plugins").hide()}),$(".import-export-rule-page").length>0&&new z({el:$(".import-export-rule-page")}),$(".tax").length>0&&new B({el:$(".tax")}),$(".shipping-detail-page").length>0&&(new A,a.history.start()),$(".cooperative_cn").length>0&&new H({el:$(".cooperative_cn")}),$(".cooperative_kr").length>0&&new R({el:$(".cooperative_kr")}),$(".suggestion_kr").length>0&&new S({el:$(".suggestion_kr")}),$(".popularization").length>0&&new Y({el:$(".popularization")}),$(".ifadownLoad").length>0&&new Z({el:$(".ifadownLoad")}),$(".cmsp_upload_personal_id").each(function(){new I({el:$(".cmsp_upload_personal_id")})}),$(".navigation-tabs").each(function(){new C({el:this})}),$(".content-second-navigation").each(function(){new V({el:this})}),$(".botfooter .toTop").length>0&&new K({el:ba}),$(".same-tip").length>0&&$(".same-tip").each(function(){new L({el:this})}),$(".videoWrapper").length>0&&$(".videoWrapper").each(function(){new M({el:this})}),$(".swiper-container").length>0&&$(".swiper-container").each(function(){new N({el:this})}),$(".mail_service").length>0&&new O({el:$("body")}),$(".move-content").length>0&&new P({el:$(".index-page .move-content")}),$(".kr-services").length>0&&new Q({el:$(".kr-services .part")}),$(".track-content").length>0&&new T({el:$(".track-content")}),$(".regulation-page").length>0&&new U({el:$(".regulation-page")}),$(".consign-page").length>0&&new W({el:$(".consign-page")}),$(".notIndustry-page").length>0&&new X({el:$(".notIndustry-page")}),$(".internationalApplication_cn").length>0&&new _({el:$(".internationalApplication_cn")}),$(".bootstrap-pagination").length>0&&$(".bootstrap-pagination").each(function(){new aa({el:this})})}})}),require.config({shim:{underscore:{exports:"_"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},"underscore.string":{deps:["underscore"]},bootstrap:{deps:["jquery"],exports:"bootstrap"},bootstrapPagination:{deps:["bootstrap"]},datepicker:{deps:["bootstrap","jquery"],exports:"datepicker"},datepickercn:{deps:["datepicker"],exports:"datepickercn"},momentcn:{deps:["moment"]},momenttc:{deps:["moment"]},momentko:{deps:["moment"]},momentja:{deps:["moment"]},momentru:{deps:["moment"]},momentvn:{deps:["moment"]},momentde:{deps:["moment"]},momentfr:{deps:["moment"]},momentth:{deps:["moment"]},"jquery-ui":{deps:["jquery"]},"jquery-placeholder":{deps:["jquery"]},parsleyjs:{deps:["jquery"]},parsleyjssc:{deps:["parsleyjs"]},parsleyjsko:{deps:["parsleyjs"]},parsleyjsja:{deps:["parsleyjs"]},parsleyjsth:{deps:["parsleyjs"]},"jquery-download":{deps:["jquery"]},"jQuery.XDomainRequest":{deps:["jquery"]},"jquery.iframe-transport":{deps:["jquery"]},highcharts:{deps:["jquery"]},highstock:{deps:["jquery"]},highstockexport:{deps:["highstock"]},jqueryRotate:{deps:["jquery"]},cjl:{exports:"cjl"},imageTrans:{deps:["cjl"]},map:{deps:["jquery"]},numberpicker:{deps:["jquery"]},swiper:{deps:["jquery"]},jqueryQrcode:{deps:["jquery"]},jqprint:{deps:["jquery","jquery-migrate"]},jqcookie:{deps:["jquery"]}},paths:{jquery:"../bower_components/jquery/jquery",backbone:"../bower_components/backbone/backbone",underscore:"../bower_components/underscore/underscore","underscore.string":"../bower_components/underscore.string/lib/underscore.string",bootstrap:"../bower_components/sass-bootstrap/dist/bootstrap",bootstrapPagination:"lib-fix/bootstrap-pagination/bootstrap-paginator",moment:"../bower_components/momentjs/moment",momentcn:"../bower_components/momentjs/lang/zh-cn",momenttc:"../bower_components/momentjs/lang/zh-tw",momentko:"../bower_components/momentjs/lang/ko",momentja:"../bower_components/momentjs/lang/ja",momentru:"../bower_components/momentjs/lang/ru",momentvn:"../bower_components/momentjs/lang/vn",momentth:"../bower_components/momentjs/lang/th",momentde:"../bower_components/momentjs/lang/de",momentfr:"../bower_components/momentjs/lang/fr",datepicker:"../bower_components/bootstrap-datepicker/js/bootstrap-datepicker",datepickercn:"lib-fix/bootstrap-datepicker.zh-CN","jquery-ui":"../bower_components/jquery-ui/jquery-ui","jquery-placeholder":"lib-fix/jquery.placeholder",tokenfield:"lib-fix/bootstrap-tokenfield",parsleyjs:"../bower_components/parsleyjs/dist/parsley.min",parsleyjssc:"../bower_components/parsleyjs/src/i18n/zh_cn",parsleyjsko:"../bower_components/parsleyjs/src/i18n/ko",parsleyjsja:"../bower_components/parsleyjs/src/i18n/ja",parsleyjsth:"../bower_components/parsleyjs/src/i18n/th","jquery-download":"../bower_components/jquery.fileDownload/src/Scripts/jquery.fileDownload","jQuery.XDomainRequest":"../bower_components/jQuery.XDomainRequest/jQuery.XDomainRequest","jquery.iframe-transport":"lib-fix/jquery.iframe-transport",highcharts:"../bower_components/highcharts/highcharts",highstock:"../bower_components/highstock-release/highstock",highstockexport:"../bower_components/highstock-release/modules/exporting",jqueryRotate:"lib-fix/jQueryRotate.2.2",cjl:"lib-fix/CJL.0.1.min",imageTrans:"lib-fix/ImageTrans",numberpicker:"lib-fix/dpNumberPicker-2.x-min",jqueryQrcode:"../bower_components/jquery.qrcode.js/jquery.qrcode.min",swiper:"lib-fix/swiper-3.4.1.jquery.min","jquery-migrate":"lib-fix/jquery-migrate-1.2.1.min",jqprint:"lib-fix/jquery.jqprint-0.3",jqcookie:"lib-fix/jquery.cookie"},waitSeconds:0}),require(["views/manager","initialSetups"],function(a){new a}),define("main",function(){});